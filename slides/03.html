<!DOCTYPE html>
<html lang="en"><head>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-html/tabby.min.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dark-bc185b5c5bdbcb35c2eb49d8a876ef70.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.7.33">

  <title>Advanced R Book Club – Vectors</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="../site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="../site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
  </style>
  <link rel="stylesheet" href="../site_libs/revealjs/dist/theme/quarto-5fa723a4ee799f64e44b6fe0747a0a63.css">
  <link href="../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-dark">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Vectors</h1>

<div class="quarto-title-authors">
</div>

</section>
<section id="learning-objectives" class="slide level2">
<h2>Learning objectives:</h2>
<ul>
<li>Learn about different types of vectors and their attributes</li>
<li>Navigate through vector types and their value types</li>
<li>Venture into factors and date-time objects</li>
<li>Discuss the differences between data frames and tibbles</li>
<li>Do not get absorbed by the <code>NA</code> and <code>NULL</code> black hole</li>
</ul>
<details>
<summary>
Session Info
</summary>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; R version 4.5.1 (2025-06-13 ucrt)
#&gt; Platform: x86_64-w64-mingw32/x64
#&gt; Running under: Windows 11 x64 (build 26100)
#&gt; 
#&gt; Matrix products: default
#&gt;   LAPACK version 3.12.1
#&gt; 
#&gt; locale:
#&gt; [1] LC_COLLATE=English_United States.utf8 
#&gt; [2] LC_CTYPE=English_United States.utf8   
#&gt; [3] LC_MONETARY=English_United States.utf8
#&gt; [4] LC_NUMERIC=C                          
#&gt; [5] LC_TIME=English_United States.utf8    
#&gt; 
#&gt; time zone: America/Chicago
#&gt; tzcode source: internal
#&gt; 
#&gt; attached base packages:
#&gt; [1] stats     graphics  grDevices utils     datasets  methods   base     
#&gt; 
#&gt; other attached packages:
#&gt; [1] palmerpenguins_0.1.1 gt_1.0.0             dplyr_1.1.4         
#&gt; 
#&gt; loaded via a namespace (and not attached):
#&gt;  [1] digest_0.6.37     R6_2.6.1          fastmap_1.2.0     tidyselect_1.2.1 
#&gt;  [5] xfun_0.52         magrittr_2.0.3    glue_1.8.0        tibble_3.3.0     
#&gt;  [9] knitr_1.50        pkgconfig_2.0.3   htmltools_0.5.8.1 rmarkdown_2.29   
#&gt; [13] generics_0.1.4    lifecycle_1.0.4   xml2_1.3.8        cli_3.6.5        
#&gt; [17] vctrs_0.6.5       compiler_4.5.1    tools_4.5.1       pillar_1.11.0    
#&gt; [21] evaluate_1.0.4    yaml_2.3.10       rlang_1.1.6       jsonlite_2.0.0   
#&gt; [25] keyring_1.4.1</code></pre>
</div>
</div>
</details>
</section>
<section id="aperitif" class="slide level2">
<h2>Aperitif</h2>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/vectors/lter_penguins.png"></p>
<figcaption>Palmer Penguins</figcaption>
</figure>
</div>
<h3 id="counting-penguins">Counting Penguins</h3>
<p>Consider this code to count the number of Gentoo penguins in the <code>penguins</code> data set. We see that there are 124 Gentoo penguins.</p>
<h3 id="in">In</h3>
<p>One subtle error can arise in trying out <code>%in%</code> here instead.</p>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/vectors/lter_penguins_no_gentoo.png"></p>
<figcaption>Where did the penguins go?</figcaption>
</figure>
</div>
<h3 id="fix-base-r">Fix: base R</h3>
<h3 id="fix-dplyr">Fix: dplyr</h3>
<h3 id="motivation">Motivation</h3>
<ul>
<li>What are the different types of vectors?</li>
<li>How does this affect accessing vectors?</li>
</ul>
<details>
<summary>
Side Quest: Looking up the <code>%in%</code> operator
</summary>
<p>If you want to look up the manual pages for the <code>%in%</code> operator with the <code>?</code>, use backticks:</p>
<p>and we find that <code>%in%</code> is a wrapper for the <code>match()</code> function.</p>
</details>
</section>
<section id="types-of-vectors" class="slide level2">
<h2>Types of Vectors</h2>

<img data-src="images/vectors/summary-tree.png" class="r-stretch quarto-figure-center"><p class="caption">Image Credit: Advanced R</p><p>Two main types:</p>
<ul>
<li><strong>Atomic</strong>: Elements all the same type.</li>
<li><strong>List</strong>: Elements are different Types.</li>
</ul>
<p>Closely related but not technically a vector:</p>
<ul>
<li><strong>NULL</strong>: Null elements. Often length zero.</li>
</ul>
</section>
<section id="atomic-vectors" class="slide level2">
<h2>Atomic Vectors</h2>
<h3 id="types-of-atomic-vectors">Types of atomic vectors</h3>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/vectors/summary-tree-atomic.png"></p>
<figcaption>Image Credit: Advanced R</figcaption>
</figure>
</div>
<ul>
<li><strong>Logical</strong>: True/False</li>
<li><strong>Integer</strong>: Numeric (discrete, no decimals)</li>
<li><strong>Double</strong>: Numeric (continuous, decimals)</li>
<li><strong>Character</strong>: String</li>
</ul>
<h3 id="vectors-of-length-one">Vectors of Length One</h3>
<p><strong>Scalars</strong> are vectors that consist of a single value.</p>
<h4 id="logicals">Logicals</h4>
<h4 id="doubles">Doubles</h4>
<h4 id="integers">Integers</h4>
<p>Integers must be followed by L and cannot have fractional values</p>
<details>
<summary>
Pop Quiz: Why “L” for integers?
</summary>
Wickham notes that the use of <code>L</code> dates back to the <strong>C</strong> programming language and its “long int” type for memory allocation.
</details>
<h4 id="strings">Strings</h4>
<p>Strings can use single or double quotes and special characters are escaped with<br>
</p>
<h3 id="longer">Longer</h3>
<p>There are several ways to make longer vectors:</p>
<p><strong>1. With single values</strong> inside c() for combine.</p>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/vectors/atomic.png"></p>
<figcaption>Image Credit: Advanced R</figcaption>
</figure>
</div>
<p><strong>2. With other vectors</strong></p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [1] 1 2 3 4</code></pre>
</div>
</div>
<details>
<summary>
Side Quest: rlang
</summary>
<p><code>{rlang}</code> has <a href="https://rlang.r-lib.org/reference/vector-construction.html">vector constructor functions too</a>:</p>
<ul>
<li><code>rlang::lgl(...)</code></li>
<li><code>rlang::int(...)</code></li>
<li><code>rlang::dbl(...)</code></li>
<li><code>rlang::chr(...)</code></li>
</ul>
<p>They look to do both more and less than <code>c()</code>.</p>
<ul>
<li>More:
<ul>
<li>Enforce type</li>
<li>Splice lists</li>
<li>More types: <code>rlang::bytes()</code>, <code>rlang::cpl(...)</code></li>
</ul></li>
<li>Less:
<ul>
<li>Stricter rules on names</li>
</ul></li>
</ul>
<p>Note: currently has <code>questioning</code> lifecycle badge, since these constructors may get moved to <code>vctrs</code></p>
</details>
<h3 id="type-and-length">Type and Length</h3>
<p>We can determine the type of a vector with <code>typeof()</code> and its length with <code>length()</code></p>
<div class="cell">
<div class="cell-output-display">
<div id="gvfpwanldj" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#gvfpwanldj table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#gvfpwanldj thead, #gvfpwanldj tbody, #gvfpwanldj tfoot, #gvfpwanldj tr, #gvfpwanldj td, #gvfpwanldj th {
  border-style: none;
}

#gvfpwanldj p {
  margin: 0;
  padding: 0;
}

#gvfpwanldj .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#gvfpwanldj .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#gvfpwanldj .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#gvfpwanldj .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#gvfpwanldj .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#gvfpwanldj .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#gvfpwanldj .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#gvfpwanldj .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#gvfpwanldj .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#gvfpwanldj .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#gvfpwanldj .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#gvfpwanldj .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#gvfpwanldj .gt_spanner_row {
  border-bottom-style: hidden;
}

#gvfpwanldj .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#gvfpwanldj .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#gvfpwanldj .gt_from_md > :first-child {
  margin-top: 0;
}

#gvfpwanldj .gt_from_md > :last-child {
  margin-bottom: 0;
}

#gvfpwanldj .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#gvfpwanldj .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#gvfpwanldj .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#gvfpwanldj .gt_row_group_first td {
  border-top-width: 2px;
}

#gvfpwanldj .gt_row_group_first th {
  border-top-width: 2px;
}

#gvfpwanldj .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#gvfpwanldj .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#gvfpwanldj .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#gvfpwanldj .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#gvfpwanldj .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#gvfpwanldj .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#gvfpwanldj .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#gvfpwanldj .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#gvfpwanldj .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#gvfpwanldj .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#gvfpwanldj .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#gvfpwanldj .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#gvfpwanldj .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#gvfpwanldj .gt_left {
  text-align: left;
}

#gvfpwanldj .gt_center {
  text-align: center;
}

#gvfpwanldj .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#gvfpwanldj .gt_font_normal {
  font-weight: normal;
}

#gvfpwanldj .gt_font_bold {
  font-weight: bold;
}

#gvfpwanldj .gt_font_italic {
  font-style: italic;
}

#gvfpwanldj .gt_super {
  font-size: 65%;
}

#gvfpwanldj .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#gvfpwanldj .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#gvfpwanldj .gt_indent_1 {
  text-indent: 5px;
}

#gvfpwanldj .gt_indent_2 {
  text-indent: 10px;
}

#gvfpwanldj .gt_indent_3 {
  text-indent: 15px;
}

#gvfpwanldj .gt_indent_4 {
  text-indent: 20px;
}

#gvfpwanldj .gt_indent_5 {
  text-indent: 25px;
}

#gvfpwanldj .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#gvfpwanldj div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table caption-top" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="gt_heading header">
<th colspan="4" class="gt_heading gt_title gt_font_normal gt_bottom_border">Types of Atomic Vectors<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>1</sup></span></th>
</tr>
<tr class="gt_col_headings even">
<th id="var_names" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">name</th>
<th id="var_values" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">value</th>
<th id="var_type" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">typeof()</th>
<th id="var_length" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">length()</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_center" headers="var_names">lgl_var</td>
<td class="gt_row gt_center" headers="var_values">TRUE, FALSE</td>
<td class="gt_row gt_center" headers="var_type" style="background-color: #F9E3D6">logical</td>
<td class="gt_row gt_center" headers="var_length" style="background-color: #E0FFFF">2</td>
</tr>
<tr class="even">
<td class="gt_row gt_center" headers="var_names">int_var</td>
<td class="gt_row gt_center" headers="var_values">1L, 6L, 10L</td>
<td class="gt_row gt_center" headers="var_type" style="background-color: #F9E3D6">integer</td>
<td class="gt_row gt_center" headers="var_length" style="background-color: #E0FFFF">3</td>
</tr>
<tr class="odd">
<td class="gt_row gt_center" headers="var_names">dbl_var</td>
<td class="gt_row gt_center" headers="var_values">1, 2.5, 4.5</td>
<td class="gt_row gt_center" headers="var_type" style="background-color: #F9E3D6">double</td>
<td class="gt_row gt_center" headers="var_length" style="background-color: #E0FFFF">3</td>
</tr>
<tr class="even">
<td class="gt_row gt_center" headers="var_names">chr_var</td>
<td class="gt_row gt_center" headers="var_values">'these are', 'some strings'</td>
<td class="gt_row gt_center" headers="var_type" style="background-color: #F9E3D6">character</td>
<td class="gt_row gt_center" headers="var_length" style="background-color: #E0FFFF">2</td>
</tr>
</tbody><tfoot class="gt_footnotes">
<tr class="odd">
<td colspan="4" class="gt_footnote"><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>1</sup></span> Source: https://adv-r.hadley.nz/index.html</td>
</tr>
</tfoot>

</table>

</div>
</div>
</div>
<details>
<summary>
Side Quest: Penguins
</summary>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [1] "integer"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [1] "factor"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [1] "integer"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [1] "factor"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [1] "integer"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [1] "factor"</code></pre>
</div>
</div>
</details>
<h3 id="missing-values">Missing values</h3>
<h4 id="contagion">Contagion</h4>
<p>For most computations, an operation over values that includes a missing value yields a missing value (unless you’re careful)</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [1] NA</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [1] NA</code></pre>
</div>
</div>
<h4 id="exceptions">Exceptions</h4>
<h4 id="innoculation">Innoculation</h4>
<p>To search for missing values use <code>is.na()</code></p>
<details>
<summary>
Side Quest: NA Types
</summary>
<p>Each type has its own NA type</p>
<ul>
<li>Logical: <code>NA</code></li>
<li>Integer: <code>NA_integer</code></li>
<li>Double: <code>NA_double</code></li>
<li>Character: <code>NA_character</code></li>
</ul>
<p>This may not matter in many contexts.</p>
But this does matter for operations where types matter like <code>dplyr::if_else()</code>.
</details>
<h3 id="testing">Testing</h3>
<p><strong>What type of vector <code>is.*</code>() it?</strong></p>
<p>Test data type:</p>
<ul>
<li>Logical: <code>is.logical()</code></li>
<li>Integer: <code>is.integer()</code></li>
<li>Double: <code>is.double()</code></li>
<li>Character: <code>is.character()</code></li>
</ul>
<p><strong>What type of object is it?</strong></p>
<p>Don’t test objects with these tools:</p>
<ul>
<li><code>is.vector()</code></li>
<li><code>is.atomic()</code></li>
<li><code>is.numeric()</code></li>
</ul>
<p>They don’t test if you have a vector, atomic vector, or numeric vector; you’ll need to carefully read the documentation to figure out what they actually do (preview: <em>attributes</em>)</p>
<details>
<summary>
Side Quest: rlang
</summary>
<p>Instead, maybe, use <code>{rlang}</code></p>
<ul>
<li><code>rlang::is_vector</code></li>
<li><code>rlang::is_atomic</code></li>
</ul>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [1] TRUE</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [1] TRUE</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [1] TRUE</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [1] FALSE</code></pre>
</div>
</div>
See more <a href="https://rlang.r-lib.org/reference/type-predicates.html">here</a>
</details>
<h3 id="coercion">Coercion</h3>
<ul>
<li><p>R follows rules for coercion: character → double → integer → logical</p></li>
<li><p>R can coerce either automatically or explicitly</p></li>
</ul>
<h4 id="automatic"><strong>Automatic</strong></h4>
<p>Two contexts for automatic coercion:</p>
<ol type="1">
<li>Combination</li>
<li>Mathematical</li>
</ol>
<h5 id="coercion-by-combination">Coercion by Combination:</h5>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>#&gt;  chr [1:2] "TRUE" "TRUE"</code></pre>
</div>
</div>
<h5 id="coercion-by-mathematical-operations">Coercion by Mathematical operations:</h5>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [1] 3</code></pre>
</div>
</div>
<h4 id="explicit"><strong>Explicit</strong></h4>
<!--

Use `as.*()`

-   Logical: `as.logical()`
-   Integer: `as.integer()`
-   Double: `as.double()`
-   Character: `as.character()`

-->
<div class="cell">
<div class="cell-output-display">
<div id="abudsgypeu" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#abudsgypeu table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#abudsgypeu thead, #abudsgypeu tbody, #abudsgypeu tfoot, #abudsgypeu tr, #abudsgypeu td, #abudsgypeu th {
  border-style: none;
}

#abudsgypeu p {
  margin: 0;
  padding: 0;
}

#abudsgypeu .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#abudsgypeu .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#abudsgypeu .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#abudsgypeu .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#abudsgypeu .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#abudsgypeu .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#abudsgypeu .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#abudsgypeu .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#abudsgypeu .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#abudsgypeu .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#abudsgypeu .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#abudsgypeu .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#abudsgypeu .gt_spanner_row {
  border-bottom-style: hidden;
}

#abudsgypeu .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#abudsgypeu .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#abudsgypeu .gt_from_md > :first-child {
  margin-top: 0;
}

#abudsgypeu .gt_from_md > :last-child {
  margin-bottom: 0;
}

#abudsgypeu .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#abudsgypeu .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#abudsgypeu .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#abudsgypeu .gt_row_group_first td {
  border-top-width: 2px;
}

#abudsgypeu .gt_row_group_first th {
  border-top-width: 2px;
}

#abudsgypeu .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#abudsgypeu .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#abudsgypeu .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#abudsgypeu .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#abudsgypeu .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#abudsgypeu .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#abudsgypeu .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#abudsgypeu .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#abudsgypeu .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#abudsgypeu .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#abudsgypeu .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#abudsgypeu .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#abudsgypeu .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#abudsgypeu .gt_left {
  text-align: left;
}

#abudsgypeu .gt_center {
  text-align: center;
}

#abudsgypeu .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#abudsgypeu .gt_font_normal {
  font-weight: normal;
}

#abudsgypeu .gt_font_bold {
  font-weight: bold;
}

#abudsgypeu .gt_font_italic {
  font-style: italic;
}

#abudsgypeu .gt_super {
  font-size: 65%;
}

#abudsgypeu .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#abudsgypeu .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#abudsgypeu .gt_indent_1 {
  text-indent: 5px;
}

#abudsgypeu .gt_indent_2 {
  text-indent: 10px;
}

#abudsgypeu .gt_indent_3 {
  text-indent: 15px;
}

#abudsgypeu .gt_indent_4 {
  text-indent: 20px;
}

#abudsgypeu .gt_indent_5 {
  text-indent: 25px;
}

#abudsgypeu .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#abudsgypeu div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table caption-top" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="gt_heading header">
<th colspan="6" class="gt_heading gt_title gt_font_normal gt_bottom_border">Coercion of Atomic Vectors<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>1</sup></span></th>
</tr>
<tr class="gt_col_headings even">
<th id="var_names" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">name</th>
<th id="var_values" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">value</th>
<th id="as_logical" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">as.logical()</th>
<th id="as_integer" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">as.integer()</th>
<th id="as_double" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">as.double()</th>
<th id="as_character" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">as.character()</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_center" headers="var_names">lgl_var</td>
<td class="gt_row gt_center" headers="var_values">TRUE, FALSE</td>
<td class="gt_row gt_center" headers="as_logical" style="background-color: #F9E3D6">TRUE FALSE</td>
<td class="gt_row gt_center" headers="as_integer" style="background-color: #E0FFFF">1 0</td>
<td class="gt_row gt_center" headers="as_double" style="background-color: #F9E3D6">1 0</td>
<td class="gt_row gt_center" headers="as_character" style="background-color: #E0FFFF">'TRUE' 'FALSE'</td>
</tr>
<tr class="even">
<td class="gt_row gt_center" headers="var_names">int_var</td>
<td class="gt_row gt_center" headers="var_values">1L, 6L, 10L</td>
<td class="gt_row gt_center" headers="as_logical" style="background-color: #F9E3D6">TRUE TRUE TRUE</td>
<td class="gt_row gt_center" headers="as_integer" style="background-color: #E0FFFF">1 6 10</td>
<td class="gt_row gt_center" headers="as_double" style="background-color: #F9E3D6">1 6 10</td>
<td class="gt_row gt_center" headers="as_character" style="background-color: #E0FFFF">'1' '6' '10'</td>
</tr>
<tr class="odd">
<td class="gt_row gt_center" headers="var_names">dbl_var</td>
<td class="gt_row gt_center" headers="var_values">1, 2.5, 4.5</td>
<td class="gt_row gt_center" headers="as_logical" style="background-color: #F9E3D6">TRUE TRUE TRUE</td>
<td class="gt_row gt_center" headers="as_integer" style="background-color: #E0FFFF">1 2 4</td>
<td class="gt_row gt_center" headers="as_double" style="background-color: #F9E3D6">1.0 2.5 4.5</td>
<td class="gt_row gt_center" headers="as_character" style="background-color: #E0FFFF">'1' '2.5' '4.5'</td>
</tr>
<tr class="even">
<td class="gt_row gt_center" headers="var_names">chr_var</td>
<td class="gt_row gt_center" headers="var_values">'these are', 'some strings'</td>
<td class="gt_row gt_center" headers="as_logical" style="background-color: #F9E3D6">NA NA</td>
<td class="gt_row gt_center" headers="as_integer" style="background-color: #E0FFFF">NA_integer</td>
<td class="gt_row gt_center" headers="as_double" style="background-color: #F9E3D6">NA_double</td>
<td class="gt_row gt_center" headers="as_character" style="background-color: #E0FFFF">'these are', 'some strings'</td>
</tr>
</tbody><tfoot class="gt_footnotes">
<tr class="odd">
<td colspan="6" class="gt_footnote"><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;"><sup>1</sup></span> Source: https://adv-r.hadley.nz/index.html</td>
</tr>
</tfoot>

</table>

</div>
</div>
</div>
<p>But note that coercion may fail in one of two ways, or both:</p>
<ul>
<li>With warning/error</li>
<li>NAs</li>
</ul>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [1]  1  2 NA</code></pre>
</div>
</div>
<h3 id="exercises">Exercises</h3>
<ol type="1">
<li>How do you create raw and complex scalars?</li>
</ol>
<details>
<summary>
Answer(s)
</summary>
</details>
<ol start="2" type="1">
<li>Test your knowledge of the vector coercion rules by predicting the output of the following uses of c():</li>
</ol>
<details>
<summary>
Answer(s)
</summary>
</details>
<ol start="3" type="1">
<li>Why is <code>1 == "1"</code> true? Why is <code>-1 &lt; FALSE</code> true? Why is <code>"one" &lt; 2</code> false?</li>
</ol>
<details>
<summary>
Answer(s)
</summary>
<p>These comparisons are carried out by operator-functions (==, &lt;), which coerce their arguments to a common type. In the examples above, these types will be character, double and character: 1 will be coerced to “1”, FALSE is represented as 0 and 2 turns into “2” (and numbers precede letters in lexicographic order (may depend on locale)).</p>
</details>
<ol start="4" type="1">
<li>Why is the default missing value, NA, a logical vector? What’s special about logical vectors?</li>
</ol>
<details>
<summary>
Answer(s)
</summary>
The presence of missing values shouldn’t affect the type of an object. Recall that there is a type-hierarchy for coercion from character → double → integer → logical. When combining <code>NA</code>s with other atomic types, the <code>NA</code>s will be coerced to integer (<code>NA_integer_</code>), double (<code>NA_real_</code>) or character (<code>NA_character_</code>) and not the other way round. If <code>NA</code> were a character and added to a set of other values all of these would be coerced to character as well.
</details>
<ol start="5" type="1">
<li>Precisely what do <code>is.atomic()</code>, <code>is.numeric()</code>, and <code>is.vector()</code> test for?</li>
</ol>
<details>
<summary>
Answer(s)
</summary>
<p>The documentation states that:</p>
<ul>
<li><code>is.atomic()</code> tests if an object is an atomic vector (as defined in <em>Advanced R</em>) or is <code>NULL</code> (!).</li>
<li><code>is.numeric()</code> tests if an object has type integer or double and is not of class <code>factor</code>, <code>Date</code>, <code>POSIXt</code> or <code>difftime</code>.</li>
<li><code>is.vector()</code> tests if an object is a vector (as defined in <em>Advanced R</em>) or an expression and has no attributes, apart from names.</li>
</ul>
Atomic vectors are defined in <em>Advanced R</em> as objects of type logical, integer, double, complex, character or raw. Vectors are defined as atomic vectors or lists.
</details>
</section>
<section id="attributes" class="slide level2">
<h2>Attributes</h2>
<p>Attributes are name-value pairs that attach metadata to an object(vector).</p>
<ul>
<li><strong>Name-value pairs</strong>: attributes have a name and a value</li>
<li><strong>Metadata</strong>: not data itself, but data about the data</li>
</ul>
<h3 id="how">How?</h3>
<h4 id="getting-and-setting">Getting and Setting</h4>
<p>Three functions:</p>
<ol type="1">
<li>retrieve and modify single attributes with <code>attr()</code></li>
<li>retrieve en masse with <code>attributes()</code></li>
<li>set en masse with <code>structure()</code></li>
</ol>
<p><strong>Single attribute</strong></p>
<p>Use <code>attr()</code></p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [1] "some attribute"</code></pre>
</div>
</div>
<p><strong>Multiple attributes</strong></p>
<p>To set multiple attributes, use <code>structure()</code> To get multiple attributes, use <code>attributes()</code></p>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/vectors/attr.png"></p>
<figcaption>Image Credit: Advanced R</figcaption>
</figure>
</div>
<h3 id="why">Why</h3>
<p>Three particularly important attributes:</p>
<ol type="1">
<li><strong>names</strong> - a character vector giving each element a name</li>
<li><strong>dimension</strong> - (or dim) turns vectors into matrices and arrays</li>
<li><strong>class</strong> - powers the S3 object system (we’ll learn more about this in chapter 13)</li>
</ol>
<p>Most attributes are lost by most operations. Only two attributes are routinely preserved: names and dimension.</p>
<h4 id="names">Names</h4>
<p><del>Three</del> Four ways to name:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; A B C 
#&gt; 1 2 3</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; a b c 
#&gt; 1 2 3</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; a b c 
#&gt; 1 2 3</code></pre>
</div>
</div>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/vectors/attr-names-1.png"></p>
<figcaption>proper diagram</figcaption>
</figure>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; a b c 
#&gt; 1 2 3</code></pre>
</div>
</div>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/vectors/attr-names-2.png"></p>
<figcaption>simplified diagram</figcaption>
</figure>
</div>
<ul>
<li>You can remove names from a vector by using <code>x &lt;- unname(x)</code> or <code>names(x) &lt;- NULL</code>.</li>
<li>Thematically but not directly related: labelled class vectors with <code>haven::labelled()</code></li>
</ul>
<h4 id="dimensions">Dimensions</h4>
<p>Create matrices and arrays with <code>matrix()</code> and <code>array()</code>, or by using the assignment form of <code>dim()</code>:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>#&gt;      [,1] [,2] [,3]
#&gt; [1,]    1    3    5
#&gt; [2,]    2    4    6</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; , , 1
#&gt; 
#&gt;      [,1] [,2] [,3]
#&gt; [1,]    1    3    5
#&gt; [2,]    2    4    6
#&gt; 
#&gt; , , 2
#&gt; 
#&gt;      [,1] [,2] [,3]
#&gt; [1,]    7    9   11
#&gt; [2,]    8   10   12
#&gt; 
#&gt; , , 3
#&gt; 
#&gt;      [,1] [,2] [,3]
#&gt; [1,]   13   15   17
#&gt; [2,]   14   16   18
#&gt; 
#&gt; , , 4
#&gt; 
#&gt;      [,1] [,2] [,3]
#&gt; [1,]   19   21   23
#&gt; [2,]   20   22   24</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt;      [,1] [,2] [,3]
#&gt; [1,]    1    3    5
#&gt; [2,]    2    4    6</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; , , 1
#&gt; 
#&gt;      [,1] [,2] [,3]
#&gt; [1,]    1    3    5
#&gt; [2,]    2    4    6
#&gt; 
#&gt; , , 2
#&gt; 
#&gt;      [,1] [,2] [,3]
#&gt; [1,]    7    9   11
#&gt; [2,]    8   10   12
#&gt; 
#&gt; , , 3
#&gt; 
#&gt;      [,1] [,2] [,3]
#&gt; [1,]   13   15   17
#&gt; [2,]   14   16   18
#&gt; 
#&gt; , , 4
#&gt; 
#&gt;      [,1] [,2] [,3]
#&gt; [1,]   19   21   23
#&gt; [2,]   20   22   24</code></pre>
</div>
</div>
<h5 id="functions-for-working-with-vectors-matrices-and-arrays">Functions for working with vectors, matrices and arrays:</h5>
<table class="caption-top">
<thead>
<tr class="header">
<th style="text-align: left;">Vector</th>
<th style="text-align: left;">Matrix</th>
<th style="text-align: left;">Array</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>names()</code></td>
<td style="text-align: left;"><code>rownames()</code>, <code>colnames()</code></td>
<td style="text-align: left;"><code>dimnames()</code></td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>length()</code></td>
<td style="text-align: left;"><code>nrow()</code>, <code>ncol()</code></td>
<td style="text-align: left;"><code>dim()</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>c()</code></td>
<td style="text-align: left;"><code>rbind()</code>, <code>cbind()</code></td>
<td style="text-align: left;"><code>abind::abind()</code></td>
</tr>
<tr class="even">
<td style="text-align: left;">—</td>
<td style="text-align: left;"><code>t()</code></td>
<td style="text-align: left;"><code>aperm()</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>is.null(dim(x))</code></td>
<td style="text-align: left;"><code>is.matrix()</code></td>
<td style="text-align: left;"><code>is.array()</code></td>
</tr>
</tbody>
</table>
<ul>
<li><strong>Caution</strong>: A vector without a <code>dim</code> attribute set is often thought of as 1-dimensional, but actually has <code>NULL</code> dimensions.</li>
<li>One dimension?</li>
</ul>
<h3 id="exercises-1">Exercises</h3>
<ol type="1">
<li>How is <code>setNames()</code> implemented? How is <code>unname()</code> implemented? Read the source code.</li>
</ol>
<details>
<summary>
Answer(s)
</summary>
<p><code>setNames()</code> is implemented as:</p>
<p>Because the data argument comes first, <code>setNames()</code> also works well with the magrittr-pipe operator. When no first argument is given, the result is a named vector (this is rather untypical as required arguments usually come first):</p>
<p><code>unname()</code> is implemented in the following way:</p>
<code>unname()</code> removes existing names (or dimnames) by setting them to <code>NULL</code>.
</details>
<ol start="2" type="1">
<li>What does <code>dim()</code> return when applied to a 1-dimensional vector? When might you use <code>NROW()</code> or <code>NCOL()</code>?</li>
</ol>
<details>
<summary>
Answer(s)
</summary>
<blockquote>
<p>dim() will return NULL when applied to a 1d vector.</p>
</blockquote>
<p>One may want to use <code>NROW()</code> or <code>NCOL()</code> to handle atomic vectors, lists and NULL values in the same way as one column matrices or data frames. For these objects <code>nrow()</code> and <code>ncol()</code> return NULL:</p>
</details>
<ol start="3" type="1">
<li>How would you describe the following three objects? What makes them different from <code>1:5</code>?</li>
</ol>
<details>
<summary>
Answer(s)
</summary>
</details>
<ol start="4" type="1">
<li>An early draft used this code to illustrate <code>structure()</code>:</li>
</ol>
<p>But when you print that object you don’t see the comment attribute. Why? Is the attribute missing, or is there something else special about it?</p>
<details>
<summary>
Answer(s)
</summary>
<p>The documentation states (see <code>?comment</code>):</p>
<blockquote>
<p>Contrary to other attributes, the comment is not printed (by print or print.default).</p>
</blockquote>
<p>Also, from <code>?attributes:</code></p>
<blockquote>
<p>Note that some attributes (namely class, comment, dim, dimnames, names, row.names and tsp) are treated specially and have restrictions on the values which can be set.</p>
</blockquote>
<p>We can retrieve comment attributes by calling them explicitly:</p>
</details>
</section>
<section id="class---s3-atomic-vectors" class="slide level2">
<h2><strong>Class</strong> - S3 atomic vectors</h2>

<img data-src="images/vectors/summary-tree-s3-1.png" class="r-stretch"><p>Credit: <a href="https://adv-r.hadley.nz/index.html">Advanced R</a> by Hadley Wickham</p>
<p><strong>Having a class attribute turns an object into an S3 object.</strong></p>
<p>What makes S3 atomic vectors different?</p>
<ol type="1">
<li>behave differently from a regular vector when passed to a generic function</li>
<li>often store additional information in other attributes</li>
</ol>
<p>Four important S3 vectors used in base R:</p>
<ol type="1">
<li><strong>Factors</strong> (categorical data)</li>
<li><strong>Dates</strong></li>
<li><strong>Date-times</strong> (POSIXct)</li>
<li><strong>Durations</strong> (difftime)</li>
</ol>
<h3 id="factors">Factors</h3>
<p>A factor is a vector used to store categorical data that can contain only predefined values.</p>
<p>Factors are integer vectors with:</p>
<ul>
<li>Class: “factor”</li>
<li>Attributes: “levels”, or the set of allowed values</li>
</ul>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; colors
#&gt;  blue green   red 
#&gt;     1     2     3</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; a_factor
#&gt;    red   blue  green yellow 
#&gt;      3      1      2      0</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [1] "integer"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [1] "factor"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; $levels
#&gt; [1] "red"    "blue"   "green"  "yellow"
#&gt; 
#&gt; $class
#&gt; [1] "factor"</code></pre>
</div>
</div>
<h4 id="custom-order">Custom Order</h4>
<p>Factors can be ordered. This can be useful for models or visualizations where order matters.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [1] high med  low  med  high low  med  high
#&gt; Levels: low &lt; med &lt; high</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; values
#&gt; high  low  med 
#&gt;    3    2    3</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; ordered_factor
#&gt;  low  med high 
#&gt;    2    3    3</code></pre>
</div>
</div>
<h3 id="dates">Dates</h3>
<p>Dates are:</p>
<ul>
<li>Double vectors</li>
<li>With class “Date”</li>
<li>No other attributes</li>
</ul>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [1] "double"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; $class
#&gt; [1] "Date"</code></pre>
</div>
</div>
<p>The double component represents the number of days since since the <a href="https://en.wikipedia.org/wiki/Unix_time">Unix epoch</a> <code>1970-01-01</code></p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [1] 31</code></pre>
</div>
</div>
<h3 id="date-times">Date-times</h3>
<p>There are 2 Date-time representations in base R:</p>
<ul>
<li>POSIXct, where “ct” denotes <em>calendar time</em></li>
<li>POSIXlt, where “lt” designates <em>local time</em></li>
</ul>
<!--

Just for fun:
"How to pronounce 'POSIXct'?"
https://www.howtopronounce.com/posixct

-->
<p>We’ll focus on POSIXct because:</p>
<ul>
<li>Simplest</li>
<li>Built on an atomic (double) vector</li>
<li>Most appropriate for use in a data frame</li>
</ul>
<p>Let’s now build and deconstruct a Date-time</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [1] "2025-08-04 15:39:49 EDT"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [1] "double"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; $class
#&gt; [1] "POSIXct" "POSIXt" 
#&gt; 
#&gt; $tzone
#&gt; [1] "America/New_York"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [1] "2025-08-04 21:39:49 CEST"</code></pre>
</div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [1] 1708623296
#&gt; attr(,"tzone")
#&gt; [1] "EST"</code></pre>
</div>
</div>
<h3 id="durations">Durations</h3>
<p>Durations represent the amount of time between pairs of dates or date-times.</p>
<ul>
<li>Double vectors</li>
<li>Class: “difftime”</li>
<li>Attributes: “units”, or the unit of duration (e.g., weeks, hours, minutes, seconds, etc.)</li>
</ul>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; Time difference of 1 mins</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [1] "double"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; $class
#&gt; [1] "difftime"
#&gt; 
#&gt; $units
#&gt; [1] "mins"</code></pre>
</div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; Time difference of 20273 days</code></pre>
</div>
</div>
<p>See also:</p>
<ul>
<li><a href="https://lubridate.tidyverse.org/reference/make_difftime.html"><code>lubridate::make_difftime()</code></a></li>
<li><a href="https://clock.r-lib.org/reference/date_time_build.html"><code>clock::date_time_build()</code></a></li>
</ul>
<h3 id="exercises-2">Exercises</h3>
<ol type="1">
<li>What sort of object does <code>table()</code> return? What is its type? What attributes does it have? How does the dimensionality change as you tabulate more variables?</li>
</ol>
<details>
<summary>
Answer(s)
</summary>
<p><code>table()</code> returns a contingency table of its input variables. It is implemented as an integer vector with class table and dimensions (which makes it act like an array). Its attributes are dim (dimensions) and dimnames (one name for each input column). The dimensions correspond to the number of unique values (factor levels) in each input variable.</p>
</details>
<ol start="2" type="1">
<li>What happens to a factor when you modify its levels?</li>
</ol>
<details>
<summary>
Answer(s)
</summary>
<p>The underlying integer values stay the same, but the levels are changed, making it look like the data has changed.</p>
</details>
<ol start="3" type="1">
<li>What does this code do? How do <code>f2</code> and <code>f3</code> differ from <code>f1</code>?</li>
</ol>
<details>
<summary>
Answer(s)
</summary>
<p>For <code>f2</code> and <code>f3</code> either the order of the factor elements or its levels are being reversed. For <code>f1</code> both transformations are occurring.</p>
</details>
</section>
<section id="lists" class="slide level2">
<h2>Lists</h2>
<ul>
<li>sometimes called a generic vector or recursive vector</li>
<li>Recall (<a href="https://adv-r.hadley.nz/names-values.html#list-references">section 2.3.3</a>): each element is really a <em>reference</em> to another object</li>
<li>an be composed of elements of different types (as opposed to atomic vectors which must be of only one type)</li>
</ul>
<h3 id="constructing">Constructing</h3>
<p>Simple lists:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [[1]]
#&gt; [1]  TRUE FALSE
#&gt; 
#&gt; [[2]]
#&gt;  [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20
#&gt; 
#&gt; [[3]]
#&gt; [1] 1.2 2.3 3.4
#&gt; 
#&gt; [[4]]
#&gt; [1] "primo"   "secundo" "tercio"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [1] "list"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; List of 4
#&gt;  $ : logi [1:2] TRUE FALSE
#&gt;  $ : int [1:20] 1 2 3 4 5 6 7 8 9 10 ...
#&gt;  $ : num [1:3] 1.2 2.3 3.4
#&gt;  $ : chr [1:3] "primo" "secundo" "tercio"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [[1]]
#&gt; [1]  TRUE FALSE</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [[1]]
#&gt;  [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [[1]]
#&gt; [1] 1.2 2.3 3.4</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [[1]]
#&gt; [1] "primo"   "secundo" "tercio"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [1] FALSE</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [1] 8</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [1] 2.3</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [1] "tercio"</code></pre>
</div>
</div>
<p>Even Simpler List</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [[1]]
#&gt; [1] TRUE</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [[1]]
#&gt; [1] 3</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [[1]]
#&gt; [1] 2.3</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [[1]]
#&gt; [1] "primo"</code></pre>
</div>
</div>
<p>Nested lists:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; List of 1
#&gt;  $ :List of 1
#&gt;   ..$ :List of 1
#&gt;   .. ..$ :List of 1
#&gt;   .. .. ..$ : num 1</code></pre>
</div>
</div>
<p>Like JSON.</p>
<p>Combined lists</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; List of 2
#&gt;  $ :List of 2
#&gt;   ..$ : num 1
#&gt;   ..$ : num 2
#&gt;  $ :List of 2
#&gt;   ..$ : num 3
#&gt;   ..$ : num 4</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; List of 4
#&gt;  $ : num 1
#&gt;  $ : num 2
#&gt;  $ : num 3
#&gt;  $ : num 4</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; List of 4
#&gt;  $ : num 1
#&gt;  $ : num 2
#&gt;  $ : logi TRUE
#&gt;  $ : logi FALSE</code></pre>
</div>
</div>
<h3 id="testing-1">Testing</h3>
<p>Check that is a list:</p>
<ul>
<li><code>is.list()</code></li>
<li>`rlang::is_list()``</li>
</ul>
<p>The two do the same, except that the latter can check for the number of elements</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [1] TRUE</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [1] TRUE</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [1] TRUE</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [1] TRUE</code></pre>
</div>
</div>
<h3 id="coercion-1">Coercion</h3>
<p>Use <code>as.list()</code></p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [[1]]
#&gt; [1] 1 2 3</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [[1]]
#&gt; [1] 1
#&gt; 
#&gt; [[2]]
#&gt; [1] 2
#&gt; 
#&gt; [[3]]
#&gt; [1] 3</code></pre>
</div>
</div>
<h3 id="matrices-and-arrays">Matrices and arrays</h3>
<p>Although not often used, the dimension attribute can be added to create <strong>list-matrices</strong> or <strong>list-arrays</strong>.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>#&gt;      [,1]      [,2]
#&gt; [1,] integer,3 TRUE
#&gt; [2,] "a"       1</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [1] 1 2 3</code></pre>
</div>
</div>
<h3 id="exercises-3">Exercises</h3>
<ol type="1">
<li>List all the ways that a list differs from an atomic vector.</li>
</ol>
<details>
<summary>
Answer(s)
</summary>
<ul>
<li>Atomic vectors are always homogeneous (all elements must be of the same type). Lists may be heterogeneous (the elements can be of different types) as described in the introduction of the vectors chapter.</li>
<li>Atomic vectors point to one address in memory, while lists contain a separate reference for each element. (This was described in the list sections of the vectors and the names and values chapters.)</li>
</ul>
<ul>
<li>Subsetting with out-of-bounds and NA values leads to different output. For example, [ returns NA for atomics and NULL for lists. (This is described in more detail within the subsetting chapter.)</li>
</ul>
</details>
<ol start="2" type="1">
<li>Why do you need to use <code>unlist()</code> to convert a list to an atomic vector? Why doesn’t <code>as.vector()</code> work?</li>
</ol>
<details>
<summary>
Answer(s)
</summary>
<p>A list is already a vector, though not an atomic one! Note that as.vector() and is.vector() use different definitions of “vector!”</p>
</details>
<ol start="3" type="1">
<li>Compare and contrast <code>c()</code> and <code>unlist()</code> when combining a date and date-time into a single vector.</li>
</ol>
<details>
<summary>
Answer(s)
</summary>
<p>Date and date-time objects are both built upon doubles. While dates store the number of days since the reference date 1970-01-01 (also known as “the Epoch”) in days, date-time-objects (POSIXct) store the time difference to this date in seconds.</p>
<p>As the c() generic only dispatches on its first argument, combining date and date-time objects via c() could lead to surprising results in older R versions (pre R 4.0.0):</p>
<p>In the first statement above c.Date() is executed, which incorrectly treats the underlying double of dttm_ct (3600) as days instead of seconds. Conversely, when c.POSIXct() is called on a date, one day is counted as one second only.</p>
<p>We can highlight these mechanics by the following code:</p>
<p>As of R 4.0.0 these issues have been resolved and both methods now convert their input first into POSIXct and Date, respectively.</p>
<p>However, as c() strips the time zone (and other attributes) of POSIXct objects, some caution is still recommended.</p>
<p>A package that deals with these kinds of problems in more depth and provides a structural solution for them is the {vctrs} package9 which is also used throughout the tidyverse.10</p>
<p>Let’s look at unlist(), which operates on list input.</p>
<p>We see again that dates and date-times are internally stored as doubles. Unfortunately, this is all we are left with, when unlist strips the attributes of the list.</p>
To summarise: c() coerces types and strips time zones. Errors may have occurred in older R versions because of inappropriate method dispatch/immature methods. unlist() strips attributes.
</details>
</section>
<section id="data-frames-and-tibbles" class="slide level2">
<h2>Data frames and tibbles</h2>

<img data-src="images/vectors/summary-tree-s3-2.png" class="r-stretch"><p>Credit: <a href="https://adv-r.hadley.nz/index.html">Advanced R</a> by Hadley Wickham</p>
<h3 id="data-frame">Data frame</h3>
<p>A data frame is a:</p>
<ul>
<li>Named list of vectors (i.e., column names)</li>
<li>Attributes:
<ul>
<li>(column) <code>names</code></li>
<li><code>row.names</code></li>
<li>Class: “data frame”</li>
</ul></li>
</ul>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>#&gt;   col1  col2
#&gt; 1    1    un
#&gt; 2    2  deux
#&gt; 3    3 trois</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [1] "list"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; $names
#&gt; [1] "col1" "col2"
#&gt; 
#&gt; $class
#&gt; [1] "data.frame"
#&gt; 
#&gt; $row.names
#&gt; [1] 1 2 3</code></pre>
</div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [1] "1" "2" "3"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [1] "col1" "col2"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [1] "col1" "col2"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [1] 3</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [1] 2</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [1] 2</code></pre>
</div>
</div>
<p>Unlike other lists, the length of each vector must be the same (i.e.&nbsp;as many vector elements as rows in the data frame).</p>
<h3 id="tibble">Tibble</h3>
<p>Created to relieve some of the frustrations and pain points created by data frames, tibbles are data frames that are:</p>
<ul>
<li>Lazy (do less)</li>
<li>Surly (complain more)</li>
</ul>
<h4 id="lazy">Lazy</h4>
<p>Tibbles do not:</p>
<ul>
<li>Coerce strings</li>
<li>Transform non-syntactic names</li>
<li>Recycle vectors of length greater than 1</li>
</ul>
<p><strong>Coerce strings</strong></p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>#&gt;  Factor w/ 4 levels "bro","don't",..: 2 3 4 1</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt;  chr [1:4] "don't" "factor" "me" "bro"</code></pre>
</div>
</div>
<p><strong>Transform non-syntactic names</strong></p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [1] "X1"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [1] "1"</code></pre>
</div>
</div>
<p><strong>Recycle vectors of length greater than 1</strong></p>
<div class="cell">
<div class="cell-output cell-output-error">
<pre><code>#&gt; Error in `tibble::tibble()`:
#&gt; ! Tibble columns must have compatible sizes.
#&gt; • Size 4: Existing data.
#&gt; • Size 2: Column `col2`.
#&gt; ℹ Only values of size one are recycled.</code></pre>
</div>
</div>
<h4 id="surly">Surly</h4>
<p>Tibbles do only what they’re asked and complain if what they’re asked doesn’t make sense:</p>
<ul>
<li>Subsetting always yields a tibble</li>
<li>Complains if cannot find column</li>
</ul>
<p><strong>Subsetting always yields a tibble</strong></p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>#&gt;  num [1:4] 1 2 3 4</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; tibble [4 × 1] (S3: tbl_df/tbl/data.frame)
#&gt;  $ col1: num [1:4] 1 2 3 4</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt;  num [1:4] 1 2 3 4</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt;  num [1:4] 1 2 3 4</code></pre>
</div>
</div>
<p><strong>Complains if cannot find column</strong></p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [1] "col1"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [1] 1 2 3 4</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [1] "col1"</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>#&gt; Warning: Unknown or uninitialised column: `col`.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; NULL</code></pre>
</div>
</div>
<h4 id="one-more-difference">One more difference</h4>
<p><strong><code>tibble()</code> allows you to refer to variables created during construction</strong></p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; # A tibble: 3 × 2
#&gt;       x     y
#&gt;   &lt;int&gt; &lt;dbl&gt;
#&gt; 1     1     2
#&gt; 2     2     4
#&gt; 3     3     6</code></pre>
</div>
</div>
<details>
<summary>
Side Quest: Row Names
</summary>
<ul>
<li>character vector containing only unique values</li>
<li>get and set with <code>rownames()</code></li>
<li>can use them to subset rows</li>
</ul>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>#&gt;       age  hair
#&gt; Bob    35 blond
#&gt; Susan  27 brown
#&gt; Sam    18 black</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [1] "Bob"   "Susan" "Sam"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt;     age  hair
#&gt; Bob  35 blond</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [1] "Susan" "Bob"   "Sam"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt;     age  hair
#&gt; Bob  27 brown</code></pre>
</div>
</div>
<p>There are three reasons why row names are undesirable:</p>
<ol start="3" type="1">
<li>Metadata is data, so storing it in a different way to the rest of the data is fundamentally a bad idea.</li>
<li>Row names are a poor abstraction for labelling rows because they only work when a row can be identified by a single string. This fails in many cases.</li>
<li>Row names must be unique, so any duplication of rows (e.g.&nbsp;from bootstrapping) will create new row names.</li>
</ol>
</details>
<h3 id="printing">Printing</h3>
<p>Data frames and tibbles print differently</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>#&gt;       age  hair
#&gt; Susan  35 blond
#&gt; Bob    27 brown
#&gt; Sam    18 black</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; # A tibble: 3 × 2
#&gt;     age hair 
#&gt;   &lt;dbl&gt; &lt;chr&gt;
#&gt; 1    35 blond
#&gt; 2    27 brown
#&gt; 3    18 black</code></pre>
</div>
</div>
<h3 id="subsetting">Subsetting</h3>
<p>Two undesirable subsetting behaviours:</p>
<ol type="1">
<li>When you subset columns with <code>df[, vars]</code>, you will get a vector if vars selects one variable, otherwise you’ll get a data frame, unless you always remember to use <code>df[, vars, drop = FALSE]</code>.</li>
<li>When you attempt to extract a single column with <code>df$x</code> and there is no column <code>x</code>, a data frame will instead select any variable that starts with <code>x</code>. If no variable starts with <code>x</code>, <code>df$x</code> will return NULL.</li>
</ol>
<p>Tibbles tweak these behaviours so that a [ always returns a tibble, and a $ doesn’t do partial matching and warns if it can’t find a variable (<em>this is what makes tibbles surly</em>).</p>
<h3 id="testing-2">Testing</h3>
<p>Whether data frame: <code>is.data.frame()</code>. Note: both data frame and tibble are data frames.</p>
<p>Whether tibble: <code>tibble::is_tibble</code>. Note: only tibbles are tibbles. Vanilla data frames are not.</p>
<h3 id="coercion-2">Coercion</h3>
<ul>
<li>To data frame: <code>as.data.frame()</code></li>
<li>To tibble: <code>tibble::as_tibble()</code></li>
</ul>
<h3 id="list-columns">List Columns</h3>
<p>List-columns are allowed in data frames but you have to do a little extra work by either adding the list-column after creation or wrapping the list in <code>I()</code></p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>#&gt;   x          y
#&gt; 1 1       1, 2
#&gt; 2 2    1, 2, 3
#&gt; 3 3 1, 2, 3, 4</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt;   x          y
#&gt; 1 1       1, 2
#&gt; 2 2    1, 2, 3
#&gt; 3 3 1, 2, 3, 4</code></pre>
</div>
</div>
<h3 id="matrix-and-data-frame-columns">Matrix and data frame columns</h3>
<ul>
<li>As long as the number of rows matches the data frame, it’s also possible to have a matrix or data frame as a column of a data frame.</li>
<li>same as list-columns, must either addi the list-column after creation or wrapping the list in <code>I()</code></li>
</ul>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; 'data.frame':    3 obs. of  3 variables:
#&gt;  $ x: num  10 20 30
#&gt;  $ y: 'AsIs' int [1:3, 1:3] 1 2 3 4 5 6 7 8 9
#&gt;  $ z:'data.frame':   3 obs. of  2 variables:
#&gt;   ..$ a: int  3 2 1
#&gt;   ..$ b: chr  "a" "b" "c"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt;      [,1] [,2] [,3]
#&gt; [1,]    1    4    7
#&gt; [2,]    2    5    8
#&gt; [3,]    3    6    9</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt;   a b
#&gt; 1 3 a
#&gt; 2 2 b
#&gt; 3 1 c</code></pre>
</div>
</div>
<h3 id="exercises-4">Exercises</h3>
<ol type="1">
<li>Can you have a data frame with zero rows? What about zero columns?</li>
</ol>
<details>
<summary>
Answer(s)
</summary>
<p>Yes, you can create these data frames easily; either during creation or via subsetting. Even both dimensions can be zero. Create a 0-row, 0-column, or an empty data frame directly:</p>
<p>Create similar data frames via subsetting the respective dimension with either 0, <code>NULL</code>, <code>FALSE</code> or a valid 0-length atomic (<code>logical(0)</code>, <code>character(0)</code>, <code>integer(0)</code>, <code>double(0)</code>). Negative integer sequences would also work. The following example uses a zero:</p>
</details>
<ol start="2" type="1">
<li>What happens if you attempt to set rownames that are not unique?</li>
</ol>
<details>
<summary>
Answer(s)
</summary>
<p>Matrices can have duplicated row names, so this does not cause problems.</p>
<p>Data frames, however, require unique rownames and you get different results depending on how you attempt to set them. If you set them directly or via <code>row.names()</code>, you get an error:</p>
<p>If you use subsetting, <code>[</code> automatically deduplicates:</p>
</details>
<ol start="3" type="1">
<li>If <code>df</code> is a data frame, what can you say about <code>t(df)</code>, and <code>t(t(df))</code>? Perform some experiments, making sure to try different column types.</li>
</ol>
<details>
<summary>
Answer(s)
</summary>
<p>Both of <code>t(df)</code> and <code>t(t(df))</code> will return matrices:</p>
<p>The dimensions will respect the typical transposition rules:</p>
<p>Because the output is a matrix, every column is coerced to the same type. (It is implemented within <code>t.data.frame()</code> via <code>as.matrix()</code> which is described below).</p>
</details>
<ol start="4" type="1">
<li>What does <code>as.matrix()</code> do when applied to a data frame with columns of different types? How does it differ from <code>data.matrix()</code>?</li>
</ol>
<details>
<summary>
Answer(s)
</summary>
<p>The type of the result of as.matrix depends on the types of the input columns (see <code>?as.matrix</code>):</p>
<blockquote>
<p>The method for data frames will return a character matrix if there is only atomic columns and any non-(numeric/logical/complex) column, applying as.vector to factors and format to other non-character columns. Otherwise the usual coercion hierarchy (logical &lt; integer &lt; double &lt; complex) will be used, e.g.&nbsp;all-logical data frames will be coerced to a logical matrix, mixed logical-integer will give an integer matrix, etc.</p>
</blockquote>
<p>On the other hand, <code>data.matrix</code> will always return a numeric matrix (see <code>?data.matrix()</code>).</p>
<blockquote>
<p>Return the matrix obtained by converting all the variables in a data frame to numeric mode and then binding them together as the columns of a matrix. Factors and ordered factors are replaced by their internal codes. […] Character columns are first converted to factors and then to integers.</p>
</blockquote>
<p>We can illustrate and compare the mechanics of these functions using a concrete example. <code>as.matrix()</code> makes it possible to retrieve most of the original information from the data frame but leaves us with characters. To retrieve all information from <code>data.matrix()</code>’s output, we would need a lookup table for each column.</p>
</details>
</section>
<section id="null" class="slide level2">
<h2><code>NULL</code></h2>
<p>Special type of object that:</p>
<ul>
<li>Length 0</li>
<li>Cannot have attributes</li>
</ul>
<div class="cell">
<div class="cell-output cell-output-error">
<pre><code>#&gt; Error in attr(x, "y") &lt;- 1: attempt to set an attribute on NULL</code></pre>
</div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [1] TRUE</code></pre>
</div>
</div>
</section>
<section id="digestif" class="slide level2">
<h2>Digestif</h2>
<p>Let is use some of this chapter’s skills on the <code>penguins</code> data.</p>
<h3 id="attributes-1">Attributes</h3>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; tibble [344 × 17] (S3: tbl_df/tbl/data.frame)
#&gt;  $ studyName          : chr [1:344] "PAL0708" "PAL0708" "PAL0708" "PAL0708" ...
#&gt;  $ Sample Number      : num [1:344] 1 2 3 4 5 6 7 8 9 10 ...
#&gt;  $ Species            : chr [1:344] "Adelie Penguin (Pygoscelis adeliae)" "Adelie Penguin (Pygoscelis adeliae)" "Adelie Penguin (Pygoscelis adeliae)" "Adelie Penguin (Pygoscelis adeliae)" ...
#&gt;  $ Region             : chr [1:344] "Anvers" "Anvers" "Anvers" "Anvers" ...
#&gt;  $ Island             : chr [1:344] "Torgersen" "Torgersen" "Torgersen" "Torgersen" ...
#&gt;  $ Stage              : chr [1:344] "Adult, 1 Egg Stage" "Adult, 1 Egg Stage" "Adult, 1 Egg Stage" "Adult, 1 Egg Stage" ...
#&gt;  $ Individual ID      : chr [1:344] "N1A1" "N1A2" "N2A1" "N2A2" ...
#&gt;  $ Clutch Completion  : chr [1:344] "Yes" "Yes" "Yes" "Yes" ...
#&gt;  $ Date Egg           : Date[1:344], format: "2007-11-11" "2007-11-11" ...
#&gt;  $ Culmen Length (mm) : num [1:344] 39.1 39.5 40.3 NA 36.7 39.3 38.9 39.2 34.1 42 ...
#&gt;  $ Culmen Depth (mm)  : num [1:344] 18.7 17.4 18 NA 19.3 20.6 17.8 19.6 18.1 20.2 ...
#&gt;  $ Flipper Length (mm): num [1:344] 181 186 195 NA 193 190 181 195 193 190 ...
#&gt;  $ Body Mass (g)      : num [1:344] 3750 3800 3250 NA 3450 ...
#&gt;  $ Sex                : chr [1:344] "MALE" "FEMALE" "FEMALE" NA ...
#&gt;  $ Delta 15 N (o/oo)  : num [1:344] NA 8.95 8.37 NA 8.77 ...
#&gt;  $ Delta 13 C (o/oo)  : num [1:344] NA -24.7 -25.3 NA -25.3 ...
#&gt;  $ Comments           : chr [1:344] "Not enough blood for isotopes." NA NA "Adult not sampled." ...
#&gt;  - attr(*, "spec")=List of 3
#&gt;   ..$ cols   :List of 17
#&gt;   .. ..$ studyName          : list()
#&gt;   .. .. ..- attr(*, "class")= chr [1:2] "collector_character" "collector"
#&gt;   .. ..$ Sample Number      : list()
#&gt;   .. .. ..- attr(*, "class")= chr [1:2] "collector_double" "collector"
#&gt;   .. ..$ Species            : list()
#&gt;   .. .. ..- attr(*, "class")= chr [1:2] "collector_character" "collector"
#&gt;   .. ..$ Region             : list()
#&gt;   .. .. ..- attr(*, "class")= chr [1:2] "collector_character" "collector"
#&gt;   .. ..$ Island             : list()
#&gt;   .. .. ..- attr(*, "class")= chr [1:2] "collector_character" "collector"
#&gt;   .. ..$ Stage              : list()
#&gt;   .. .. ..- attr(*, "class")= chr [1:2] "collector_character" "collector"
#&gt;   .. ..$ Individual ID      : list()
#&gt;   .. .. ..- attr(*, "class")= chr [1:2] "collector_character" "collector"
#&gt;   .. ..$ Clutch Completion  : list()
#&gt;   .. .. ..- attr(*, "class")= chr [1:2] "collector_character" "collector"
#&gt;   .. ..$ Date Egg           :List of 1
#&gt;   .. .. ..$ format: chr ""
#&gt;   .. .. ..- attr(*, "class")= chr [1:2] "collector_date" "collector"
#&gt;   .. ..$ Culmen Length (mm) : list()
#&gt;   .. .. ..- attr(*, "class")= chr [1:2] "collector_double" "collector"
#&gt;   .. ..$ Culmen Depth (mm)  : list()
#&gt;   .. .. ..- attr(*, "class")= chr [1:2] "collector_double" "collector"
#&gt;   .. ..$ Flipper Length (mm): list()
#&gt;   .. .. ..- attr(*, "class")= chr [1:2] "collector_double" "collector"
#&gt;   .. ..$ Body Mass (g)      : list()
#&gt;   .. .. ..- attr(*, "class")= chr [1:2] "collector_double" "collector"
#&gt;   .. ..$ Sex                : list()
#&gt;   .. .. ..- attr(*, "class")= chr [1:2] "collector_character" "collector"
#&gt;   .. ..$ Delta 15 N (o/oo)  : list()
#&gt;   .. .. ..- attr(*, "class")= chr [1:2] "collector_double" "collector"
#&gt;   .. ..$ Delta 13 C (o/oo)  : list()
#&gt;   .. .. ..- attr(*, "class")= chr [1:2] "collector_double" "collector"
#&gt;   .. ..$ Comments           : list()
#&gt;   .. .. ..- attr(*, "class")= chr [1:2] "collector_character" "collector"
#&gt;   ..$ default: list()
#&gt;   .. ..- attr(*, "class")= chr [1:2] "collector_guess" "collector"
#&gt;   ..$ skip   : num 1
#&gt;   ..- attr(*, "class")= chr "col_spec"</code></pre>
</div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; tibble [344 × 17] (S3: tbl_df/tbl/data.frame)
#&gt;  $ studyName          : chr [1:344] "PAL0708" "PAL0708" "PAL0708" "PAL0708" ...
#&gt;  $ Sample Number      : num [1:344] 1 2 3 4 5 6 7 8 9 10 ...
#&gt;  $ Species            : chr [1:344] "Adelie Penguin (Pygoscelis adeliae)" "Adelie Penguin (Pygoscelis adeliae)" "Adelie Penguin (Pygoscelis adeliae)" "Adelie Penguin (Pygoscelis adeliae)" ...
#&gt;  $ Region             : chr [1:344] "Anvers" "Anvers" "Anvers" "Anvers" ...
#&gt;  $ Island             : chr [1:344] "Torgersen" "Torgersen" "Torgersen" "Torgersen" ...
#&gt;  $ Stage              : chr [1:344] "Adult, 1 Egg Stage" "Adult, 1 Egg Stage" "Adult, 1 Egg Stage" "Adult, 1 Egg Stage" ...
#&gt;  $ Individual ID      : chr [1:344] "N1A1" "N1A2" "N2A1" "N2A2" ...
#&gt;  $ Clutch Completion  : chr [1:344] "Yes" "Yes" "Yes" "Yes" ...
#&gt;  $ Date Egg           : Date[1:344], format: "2007-11-11" "2007-11-11" ...
#&gt;  $ Culmen Length (mm) : num [1:344] 39.1 39.5 40.3 NA 36.7 39.3 38.9 39.2 34.1 42 ...
#&gt;  $ Culmen Depth (mm)  : num [1:344] 18.7 17.4 18 NA 19.3 20.6 17.8 19.6 18.1 20.2 ...
#&gt;  $ Flipper Length (mm): num [1:344] 181 186 195 NA 193 190 181 195 193 190 ...
#&gt;  $ Body Mass (g)      : num [1:344] 3750 3800 3250 NA 3450 ...
#&gt;  $ Sex                : chr [1:344] "MALE" "FEMALE" "FEMALE" NA ...
#&gt;  $ Delta 15 N (o/oo)  : num [1:344] NA 8.95 8.37 NA 8.77 ...
#&gt;  $ Delta 13 C (o/oo)  : num [1:344] NA -24.7 -25.3 NA -25.3 ...
#&gt;  $ Comments           : chr [1:344] "Not enough blood for isotopes." NA NA "Adult not sampled." ...</code></pre>
</div>
</div>
<h3 id="data-frames-vs-tibbles">Data Frames vs Tibbles</h3>
<h4 id="printing-1">Printing</h4>
<ul>
<li>Tip: print out these results in RStudio under different editor themes</li>
</ul>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>#&gt;   species    island bill_length_mm bill_depth_mm flipper_length_mm body_mass_g
#&gt; 1  Adelie Torgersen           39.1          18.7               181        3750
#&gt; 2  Adelie Torgersen           39.5          17.4               186        3800
#&gt; 3  Adelie Torgersen           40.3          18.0               195        3250
#&gt; 4  Adelie Torgersen             NA            NA                NA          NA
#&gt; 5  Adelie Torgersen           36.7          19.3               193        3450
#&gt; 6  Adelie Torgersen           39.3          20.6               190        3650
#&gt;      sex year
#&gt; 1   male 2007
#&gt; 2 female 2007
#&gt; 3 female 2007
#&gt; 4   &lt;NA&gt; 2007
#&gt; 5 female 2007
#&gt; 6   male 2007</code></pre>
</div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; # A tibble: 344 × 8
#&gt;    species island    bill_length_mm bill_depth_mm flipper_length_mm body_mass_g
#&gt;    &lt;fct&gt;   &lt;fct&gt;              &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;       &lt;int&gt;
#&gt;  1 Adelie  Torgersen           39.1          18.7               181        3750
#&gt;  2 Adelie  Torgersen           39.5          17.4               186        3800
#&gt;  3 Adelie  Torgersen           40.3          18                 195        3250
#&gt;  4 Adelie  Torgersen           NA            NA                  NA          NA
#&gt;  5 Adelie  Torgersen           36.7          19.3               193        3450
#&gt;  6 Adelie  Torgersen           39.3          20.6               190        3650
#&gt;  7 Adelie  Torgersen           38.9          17.8               181        3625
#&gt;  8 Adelie  Torgersen           39.2          19.6               195        4675
#&gt;  9 Adelie  Torgersen           34.1          18.1               193        3475
#&gt; 10 Adelie  Torgersen           42            20.2               190        4250
#&gt; # ℹ 334 more rows
#&gt; # ℹ 2 more variables: sex &lt;fct&gt;, year &lt;int&gt;</code></pre>
</div>
</div>
<h3 id="atomic-vectors-1">Atomic Vectors</h3>
<details>
<summary>
<code>typeof()</code> and <code>class()</code>
</summary>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [1] "list"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [1] "data.frame"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [1] "integer"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [1] "factor"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [1] "integer"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [1] "factor"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [1] "list"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [1] "tbl_df"     "tbl"        "data.frame"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [1] "integer"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [1] "factor"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [1] "integer"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [1] "factor"</code></pre>
</div>
</div>
</details>
<h3 id="column-names">Column Names</h3>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [1] "species"           "island"            "bill_length_mm"   
#&gt; [4] "bill_depth_mm"     "flipper_length_mm" "body_mass_g"      
#&gt; [7] "sex"               "year"</code></pre>
</div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [1] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE</code></pre>
</div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [1] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE</code></pre>
</div>
</div>
<ul>
<li>What if we only invoke a partial name of a column of a tibble?</li>
</ul>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; NULL</code></pre>
</div>
</div>

<img data-src="images/vectors/surly_tibbles.png" class="r-stretch quarto-figure-center"><p class="caption">tibbles are surly!</p><ul>
<li>What if we only invoke a partial name of a column of a data frame?</li>
</ul>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [1] 2007 2007 2007 2007 2007 2007</code></pre>
</div>
</div>
<ul>
<li>Is this evaluation in alphabetical order or column order?</li>
</ul>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; NULL</code></pre>
</div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; NULL</code></pre>
</div>
</div>
</section>
<section id="chapter-quiz" class="slide level2">
<h2>Chapter Quiz</h2>
<ol type="1">
<li>What are the four common types of atomic vectors? What are the two rare types?</li>
</ol>
<details>
<summary>
Answer(s)
</summary>
The four common types of atomic vector are logical, integer, double and character. The two rarer types are complex and raw.
</details>
<ol start="2" type="1">
<li>What are attributes? How do you get them and set them?</li>
</ol>
<details>
<summary>
Answer(s)
</summary>
Attributes allow you to associate arbitrary additional metadata to any object. You can get and set individual attributes with <code>attr(x, "y")</code> and <code>attr(x, "y") &lt;- value</code>; or you can get and set all attributes at once with <code>attributes()</code>.
</details>
<ol start="3" type="1">
<li>How is a list different from an atomic vector? How is a matrix different from a data frame?</li>
</ol>
<details>
<summary>
Answer(s)
</summary>
The elements of a list can be any type (even a list); the elements of an atomic vector are all of the same type. Similarly, every element of a matrix must be the same type; in a data frame, different columns can have different types.
</details>
<ol start="4" type="1">
<li>Can you have a list that is a matrix? Can a data frame have a column that is a matrix?</li>
</ol>
<details>
<summary>
Answer(s)
</summary>
You can make a list-array by assigning dimensions to a list. You can make a matrix a column of a data frame with <code>df$x &lt;- matrix()</code>, or by using <code>I()</code> when creating a new data frame <code>data.frame(x = I(matrix()))</code>.
</details>
<ol start="5" type="1">
<li>How do tibbles behave differently from data frames?</li>
</ol>
<details>
<summary>
Answer(s)
</summary>
Tibbles have an enhanced print method, never coerce strings to factors, and provide stricter subsetting methods.
</details>


</section>
    </div>
  <div class="quarto-auto-generated-content" style="display: none;">
<div class="footer footer-default">
<p><a href="../" target="advr_club-index">DSLC.io/advr</a> | <a href="https://DSLC.io" target="_blank">DSLC.io</a></p>
</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="../site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="../site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="../site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="../site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="../site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="../site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="../site_libs/revealjs/plugin/search/search.js"></script>
  <script src="../site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="../site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: false,

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'slide',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
      window.document.addEventListener("DOMContentLoaded", function (event) {
        const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
        tabsets.forEach(function(tabset) {
          const tabby = new Tabby('#' + tabset.id);
        });
        const isCodeAnnotation = (el) => {
          for (const clz of el.classList) {
            if (clz.startsWith('code-annotation-')) {                     
              return true;
            }
          }
          return false;
        }
        const onCopySuccess = function(e) {
          // button target
          const button = e.trigger;
          // don't keep focus
          button.blur();
          // flash "checked"
          button.classList.add('code-copy-button-checked');
          var currentTitle = button.getAttribute("title");
          button.setAttribute("title", "Copied!");
          let tooltip;
          if (window.bootstrap) {
            button.setAttribute("data-bs-toggle", "tooltip");
            button.setAttribute("data-bs-placement", "left");
            button.setAttribute("data-bs-title", "Copied!");
            tooltip = new bootstrap.Tooltip(button, 
              { trigger: "manual", 
                customClass: "code-copy-button-tooltip",
                offset: [0, -8]});
            tooltip.show();    
          }
          setTimeout(function() {
            if (tooltip) {
              tooltip.hide();
              button.removeAttribute("data-bs-title");
              button.removeAttribute("data-bs-toggle");
              button.removeAttribute("data-bs-placement");
            }
            button.setAttribute("title", currentTitle);
            button.classList.remove('code-copy-button-checked');
          }, 1000);
          // clear code selection
          e.clearSelection();
        }
        const getTextToCopy = function(trigger) {
            const codeEl = trigger.previousElementSibling.cloneNode(true);
            for (const childEl of codeEl.children) {
              if (isCodeAnnotation(childEl)) {
                childEl.remove();
              }
            }
            return codeEl.innerText;
        }
        const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
          text: getTextToCopy
        });
        clipboard.on('success', onCopySuccess);
        if (window.document.getElementById('quarto-embedded-source-code-modal')) {
          const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
            text: getTextToCopy,
            container: window.document.getElementById('quarto-embedded-source-code-modal')
          });
          clipboardModal.on('success', onCopySuccess);
        }
          var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
          var mailtoRegex = new RegExp(/^mailto:/);
            var filterRegex = new RegExp("https:\/\/r4ds\.github\.io\/bookclub-advr\/");
          var isInternal = (href) => {
              return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
          }
          // Inspect non-navigation links and adorn them if external
         var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
          for (var i=0; i<links.length; i++) {
            const link = links[i];
            if (!isInternal(link.href)) {
              // undo the damage that might have been done by quarto-nav.js in the case of
              // links that we want to consider external
              if (link.dataset.originalHref !== undefined) {
                link.href = link.dataset.originalHref;
              }
                // target, if specified
                link.setAttribute("target", "_blank");
                if (link.getAttribute("rel") === null) {
                  link.setAttribute("rel", "noopener");
                }
            }
          }
        function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
          const config = {
            allowHTML: true,
            maxWidth: 500,
            delay: 100,
            arrow: false,
            appendTo: function(el) {
                return el.closest('section.slide') || el.parentElement;
            },
            interactive: true,
            interactiveBorder: 10,
            theme: 'light-border',
            placement: 'bottom-start',
          };
          if (contentFn) {
            config.content = contentFn;
          }
          if (onTriggerFn) {
            config.onTrigger = onTriggerFn;
          }
          if (onUntriggerFn) {
            config.onUntrigger = onUntriggerFn;
          }
            config['offset'] = [0,0];
            config['maxWidth'] = 700;
          window.tippy(el, config); 
        }
        const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
        for (var i=0; i<noterefs.length; i++) {
          const ref = noterefs[i];
          tippyHover(ref, function() {
            // use id or data attribute instead here
            let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
            try { href = new URL(href).hash; } catch {}
            const id = href.replace(/^#\/?/, "");
            const note = window.document.getElementById(id);
            if (note) {
              return note.innerHTML;
            } else {
              return "";
            }
          });
        }
        const findCites = (el) => {
          const parentEl = el.parentElement;
          if (parentEl) {
            const cites = parentEl.dataset.cites;
            if (cites) {
              return {
                el,
                cites: cites.split(' ')
              };
            } else {
              return findCites(el.parentElement)
            }
          } else {
            return undefined;
          }
        };
        var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
        for (var i=0; i<bibliorefs.length; i++) {
          const ref = bibliorefs[i];
          const citeInfo = findCites(ref);
          if (citeInfo) {
            tippyHover(citeInfo.el, function() {
              var popup = window.document.createElement('div');
              citeInfo.cites.forEach(function(cite) {
                var citeDiv = window.document.createElement('div');
                citeDiv.classList.add('hanging-indent');
                citeDiv.classList.add('csl-entry');
                var biblioDiv = window.document.getElementById('ref-' + cite);
                if (biblioDiv) {
                  citeDiv.innerHTML = biblioDiv.innerHTML;
                }
                popup.appendChild(citeDiv);
              });
              return popup.innerHTML;
            });
          }
        }
      });
      </script>
    

</body></html>