[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Welcome",
    "section": "",
    "text": "This is a companion for Advanced R by Hadley Wickham (Chapman & Hall, copyright 2019, 9780815384571). If you‚Äôd like to buy a physical copy of the book, please consider using this affiliate link to support the Data Science Learning Community.\nEach chapter title to the left is a link to a slide deck.\n\nThese slides are being developed by this club.\nEach deck will open in its own tab.\nYou may want to type ‚Äús‚Äù at the start of each deck to open the speaker notes.\nJoin the Data Science Learning Community to participate in the discussion!\n\nWe follow the Data Science Learning Community Code of Conduct.",
    "crumbs": [
      "Welcome"
    ]
  },
  {
    "objectID": "24.html",
    "href": "24.html",
    "title": "24. Improving performance",
    "section": "",
    "text": "No matching items",
    "crumbs": [
      "Techniques",
      "24. Improving performance"
    ]
  },
  {
    "objectID": "24.html#meeting-videos",
    "href": "24.html#meeting-videos",
    "title": "24. Improving performance",
    "section": "Meeting videos",
    "text": "Meeting videos\n\n\n\n\n\n\n\n\nCohort 9\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 7\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 6\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 5\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 4\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 3\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 2\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 1\n\n\n\n\n\n\n\n\n\n\n\n\n\nNo matching items",
    "crumbs": [
      "Techniques",
      "24. Improving performance"
    ]
  },
  {
    "objectID": "22.html",
    "href": "22.html",
    "title": "22. Debugging",
    "section": "",
    "text": "No matching items",
    "crumbs": [
      "Techniques",
      "22. Debugging"
    ]
  },
  {
    "objectID": "22.html#meeting-videos",
    "href": "22.html#meeting-videos",
    "title": "22. Debugging",
    "section": "Meeting videos",
    "text": "Meeting videos\n\n\n\n\n\n\n\n\nCohort 9\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 7\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 6\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 5\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 4\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 3\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 2\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 1\n\n\n\n\n\n\n\n\n\n\n\n\n\nNo matching items",
    "crumbs": [
      "Techniques",
      "22. Debugging"
    ]
  },
  {
    "objectID": "20.html",
    "href": "20.html",
    "title": "20. Evaluation",
    "section": "",
    "text": "No matching items",
    "crumbs": [
      "Metaprogramming",
      "20. Evaluation"
    ]
  },
  {
    "objectID": "20.html#meeting-videos",
    "href": "20.html#meeting-videos",
    "title": "20. Evaluation",
    "section": "Meeting videos",
    "text": "Meeting videos\n\n\n\n\n\n\n\n\nCohort 9\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 7\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 6\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 5\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 4\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 3\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 2\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 1\n\n\n\n\n\n\n\n\n\n\n\n\n\nNo matching items",
    "crumbs": [
      "Metaprogramming",
      "20. Evaluation"
    ]
  },
  {
    "objectID": "18.html",
    "href": "18.html",
    "title": "18. Expressions",
    "section": "",
    "text": "No matching items",
    "crumbs": [
      "Metaprogramming",
      "18. Expressions"
    ]
  },
  {
    "objectID": "18.html#meeting-videos",
    "href": "18.html#meeting-videos",
    "title": "18. Expressions",
    "section": "Meeting videos",
    "text": "Meeting videos\n\n\n\n\n\n\n\n\nCohort 9\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 7\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 6\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 5\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 4\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 3\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 2\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 1\n\n\n\n\n\n\n\n\n\n\n\n\n\nNo matching items",
    "crumbs": [
      "Metaprogramming",
      "18. Expressions"
    ]
  },
  {
    "objectID": "16.html",
    "href": "16.html",
    "title": "16. OOP Trade-offs",
    "section": "",
    "text": "No matching items",
    "crumbs": [
      "Object-oriented programming",
      "16. OOP Trade-offs"
    ]
  },
  {
    "objectID": "16.html#meeting-videos",
    "href": "16.html#meeting-videos",
    "title": "16. OOP Trade-offs",
    "section": "Meeting videos",
    "text": "Meeting videos\n\n\n\n\n\n\n\n\nCohort 9\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 7\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 6\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 5\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 4\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 3\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 2\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 1\n\n\n\n\n\n\n\n\n\n\n\n\n\nNo matching items",
    "crumbs": [
      "Object-oriented programming",
      "16. OOP Trade-offs"
    ]
  },
  {
    "objectID": "15.html",
    "href": "15.html",
    "title": "15. S4",
    "section": "",
    "text": "No matching items",
    "crumbs": [
      "Object-oriented programming",
      "15. S4"
    ]
  },
  {
    "objectID": "15.html#meeting-videos",
    "href": "15.html#meeting-videos",
    "title": "15. S4",
    "section": "Meeting videos",
    "text": "Meeting videos\n\n\n\n\n\n\n\n\nCohort 10\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 9\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 7\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 6\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 5\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 4\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 3\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 2\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 1\n\n\n\n\n\n\n\n\n\n\n\n\n\nNo matching items",
    "crumbs": [
      "Object-oriented programming",
      "15. S4"
    ]
  },
  {
    "objectID": "13.html",
    "href": "13.html",
    "title": "13. S3",
    "section": "",
    "text": "No matching items",
    "crumbs": [
      "Object-oriented programming",
      "13. S3"
    ]
  },
  {
    "objectID": "13.html#meeting-videos",
    "href": "13.html#meeting-videos",
    "title": "13. S3",
    "section": "Meeting videos",
    "text": "Meeting videos\n\n\n\n\n\n\n\n\nCohort 10\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 9\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 7\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 6\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 5\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 4\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 3\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 2\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 1\n\n\n\n\n\n\n\n\n\n\n\n\n\nNo matching items",
    "crumbs": [
      "Object-oriented programming",
      "13. S3"
    ]
  },
  {
    "objectID": "11.html",
    "href": "11.html",
    "title": "11. Function operators",
    "section": "",
    "text": "No matching items",
    "crumbs": [
      "Functional programming",
      "11. Function operators"
    ]
  },
  {
    "objectID": "11.html#meeting-videos",
    "href": "11.html#meeting-videos",
    "title": "11. Function operators",
    "section": "Meeting videos",
    "text": "Meeting videos\n\n\n\n\n\n\n\n\nCohort 10\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 9\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 8\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 7\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 6\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 5\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 4\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 3\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 2\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 1\n\n\n\n\n\n\n\n\n\n\n\n\n\nNo matching items",
    "crumbs": [
      "Functional programming",
      "11. Function operators"
    ]
  },
  {
    "objectID": "09.html",
    "href": "09.html",
    "title": "9. Functionals",
    "section": "",
    "text": "No matching items",
    "crumbs": [
      "Functional programming",
      "9. Functionals"
    ]
  },
  {
    "objectID": "09.html#meeting-videos",
    "href": "09.html#meeting-videos",
    "title": "9. Functionals",
    "section": "Meeting videos",
    "text": "Meeting videos\n\n\n\n\n\n\n\n\nCohort 10\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 9\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 8\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 7\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 6\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 5\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 4\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 3\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 2\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 1\n\n\n\n\n\n\n\n\n\n\n\n\n\nNo matching items",
    "crumbs": [
      "Functional programming",
      "9. Functionals"
    ]
  },
  {
    "objectID": "07.html",
    "href": "07.html",
    "title": "7. Environments",
    "section": "",
    "text": "No matching items",
    "crumbs": [
      "Foundations",
      "7. Environments"
    ]
  },
  {
    "objectID": "07.html#meeting-videos",
    "href": "07.html#meeting-videos",
    "title": "7. Environments",
    "section": "Meeting videos",
    "text": "Meeting videos\n\n\n\n\n\n\n\n\nCohort 10\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 9\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 8\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 7\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 6\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 5\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 4\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 3\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 2\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 1\n\n\n\n\n\n\n\n\n\n\n\n\n\nNo matching items",
    "crumbs": [
      "Foundations",
      "7. Environments"
    ]
  },
  {
    "objectID": "05.html",
    "href": "05.html",
    "title": "5. Control flow",
    "section": "",
    "text": "No matching items",
    "crumbs": [
      "Foundations",
      "5. Control flow"
    ]
  },
  {
    "objectID": "05.html#meeting-videos",
    "href": "05.html#meeting-videos",
    "title": "5. Control flow",
    "section": "Meeting videos",
    "text": "Meeting videos\n\n\n\n\n\n\n\n\nCohort 10\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 9\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 8\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 7\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 6\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 5\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 4\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 3\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 2\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 1\n\n\n\n\n\n\n\n\n\n\n\n\n\nNo matching items",
    "crumbs": [
      "Foundations",
      "5. Control flow"
    ]
  },
  {
    "objectID": "03.html",
    "href": "03.html",
    "title": "3. Vectors",
    "section": "",
    "text": "No matching items",
    "crumbs": [
      "Foundations",
      "3. Vectors"
    ]
  },
  {
    "objectID": "03.html#meeting-videos",
    "href": "03.html#meeting-videos",
    "title": "3. Vectors",
    "section": "Meeting videos",
    "text": "Meeting videos\n\n\n\n\n\n\n\n\nCohort 10\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 9\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 8\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 7\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 6\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 5\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 4\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 3\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 2\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 1\n\n\n\n\n\n\n\n\n\n\n\n\n\nNo matching items",
    "crumbs": [
      "Foundations",
      "3. Vectors"
    ]
  },
  {
    "objectID": "01.html",
    "href": "01.html",
    "title": "1. Introduction",
    "section": "",
    "text": "No matching items",
    "crumbs": [
      "Getting Started",
      "1. Introduction"
    ]
  },
  {
    "objectID": "01.html#meeting-videos",
    "href": "01.html#meeting-videos",
    "title": "1. Introduction",
    "section": "Meeting videos",
    "text": "Meeting videos\n\n\n\n\n\n\n\n\nCohort 10\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 9\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 8\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 7\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 6\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 5\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 4\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 3\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 2\n\n\n\n\n\n\n\n\n\n\n\n\n\nNo matching items",
    "crumbs": [
      "Getting Started",
      "1. Introduction"
    ]
  },
  {
    "objectID": "videos/25/06.html",
    "href": "videos/25/06.html",
    "title": "Cohort 6",
    "section": "",
    "text": "Meeting chat log\n\n00:10:13    Arthur Shaw:    Did things freeze for anyone else?\n00:55:40    Federica Gazzelloni:    https://en.cppreference.com/w/cpp/container\n00:57:44    Federica Gazzelloni:    https://dirk.eddelbuettel.com/blog/2011/07/14/\n01:07:33    Trevin: I don‚Äôt have experience\n01:07:54    Oluwafemi Oyedele:  Same here!!!\n01:11:57    Arthur Shaw:    Does anyone know any packages that use C++? The one that comes to mind for me is haven, which uses a C++ library\n01:12:30    Trevin: When I was looking, one that stood out to me was rstan\n01:13:02    Arthur Shaw:    Reacted to \"When I was looking, ...\" with üëç"
  },
  {
    "objectID": "videos/25/09.html",
    "href": "videos/25/09.html",
    "title": "Cohort 9",
    "section": "",
    "text": "Meeting chat log\n\n00:07:59    Derek Sollberger:   When the scale changes, consider using a C++ array :-p\n00:08:14    Olivier Leroy:  Reacted to \"When the scale chang...\" with üòÑ\n00:08:19    Diana Garcia:   Reacted to \"When the scale chang...\" with üòÑ\n00:11:51    Steffi LaZerte (she/her):   Reacted to \"When the scale chang...\" with üòÖ\n00:15:36    Olivier Leroy:  start\n00:19:35    Olivier Leroy:  statement\n00:25:29    Derek Sollberger:   Does any IDE do code highlighting where different chunks might be in different languages?\n00:25:33    Steffi LaZerte (she/her):   So does that mean there are no vectors in C++?\n00:25:43    Olivier Leroy:  Array\n00:25:54    Steffi LaZerte (she/her):   Ah!\n00:38:15    Olivier Leroy:  Casting is the operation to change/specify data types\n00:38:39    Derek Sollberger:   Reacted to \"Casting is the opera...\" with üëç\n00:39:36    Jeffrey Stevens:    Reacted to \"Casting is the opera...\" with üëç\n00:43:39    Olivier Leroy:  More like Python\n00:45:21    Diana Garcia:   https://stackoverflow.com/questions/4955198/what-does-dereferencing-a-pointer-mean-in-c-c\n00:45:26    Olivier Leroy:  Reacted to \"https://stackoverflo...\" with üëç\n00:45:40    Derek Sollberger:   Reacted to \"https://stackoverflo...\" with üëÜ\n00:49:50    Olivier Leroy:  Similar that R function at first\n00:49:57    Olivier Leroy:  Documentation\n00:50:00    Steffi LaZerte (she/her):   Reacted to \"Similar that R funct...\" with üòÖ\n00:53:53    Olivier Leroy:  It is classical interview question ...\n00:54:01    Diana Garcia:   https://en.wikipedia.org/wiki/Gibbs_sampling\n00:54:05    Olivier Leroy:  I had it once ‚Ä¶\n00:55:19    Derek Sollberger:   Replying to \"https://en.wikipedia...\"\n\nThese advances in MCMC computation speed (about 10 years ago) made it possible to study Bayesian Analysis at the undergraduate level.\n00:55:33    Diana Garcia:   https://gweissman.github.io/post/rcpp-is-smoking-fast-for-agent-based-models-in-data-frames/\n01:04:43    Steffi LaZerte (she/her):   end"
  },
  {
    "objectID": "videos/24/06.html",
    "href": "videos/24/06.html",
    "title": "Cohort 6",
    "section": "",
    "text": "Meeting chat log\n\n00:24:42    Arthur Shaw:    I wonder if there's a task view for R Universe: https://r-universe.dev/search/\n01:01:13    Arthur Shaw:    https://www.alexejgossmann.com/benchmarking_r/\n01:04:34    Trevin: I agree that the chapter is a good jumping off point. Gonna have to dig into some of the listed resources üòÑ"
  },
  {
    "objectID": "videos/24/09.html",
    "href": "videos/24/09.html",
    "title": "Cohort 9",
    "section": "",
    "text": "Meeting chat log\n\n00:15:40    Derek Sollberger:   I tend to measure performance when trying to solve Advent of Code puzzles\n00:16:45    Jeffrey Stevens:    Do we need to add the chat start?\n00:16:51    Olivier Leroy:  start\n00:21:07    Derek Sollberger:   My students and I are currently looking at data about autonomous cars, so the goals of optimizing for smaller computers are indeed incoming\n00:21:23    Olivier Leroy:  Reacted to \"My students and I ar...\" with üëç\n00:22:11    Steffi LaZerte (she/her):   Reacted to \"I tend to measure pe...\" with üòÅ\n00:28:27    Steffi LaZerte (she/her):   I don't think I ever realized that GC was garbage collection and that that could contribute to taking up so much time!\n00:28:47    Steffi LaZerte (she/her):   In other examples ;)\n00:39:02    Derek Sollberger:   math aside: the square root algorithms date back to the Babylonians :-)\n00:41:03    Steffi LaZerte (she/her):   Reacted to \"math aside: the squa...\" with üòÄ\n01:02:23    Derek Sollberger:   The `e1071` R package of miscellaneous functions is also useful for statistical work\n01:07:04    Jeffrey Stevens:    Gotta go. See you all for the last week next week!\n01:08:10    Olivier Leroy:  end"
  },
  {
    "objectID": "videos/24/01.html",
    "href": "videos/24/01.html",
    "title": "Cohort 1",
    "section": "",
    "text": "(no video)"
  },
  {
    "objectID": "videos/23/09.html",
    "href": "videos/23/09.html",
    "title": "Cohort 9",
    "section": "",
    "text": "Meeting chat log\n\n00:15:40    Derek Sollberger:   I tend to measure performance when trying to solve Advent of Code puzzles\n00:16:45    Jeffrey Stevens:    Do we need to add the chat start?\n00:16:51    Olivier Leroy:  start\n00:21:07    Derek Sollberger:   My students and I are currently looking at data about autonomous cars, so the goals of optimizing for smaller computers are indeed incoming\n00:21:23    Olivier Leroy:  Reacted to \"My students and I ar...\" with üëç\n00:22:11    Steffi LaZerte (she/her):   Reacted to \"I tend to measure pe...\" with üòÅ\n00:28:27    Steffi LaZerte (she/her):   I don't think I ever realized that GC was garbage collection and that that could contribute to taking up so much time!\n00:28:47    Steffi LaZerte (she/her):   In other examples ;)\n00:39:02    Derek Sollberger:   math aside: the square root algorithms date back to the Babylonians :-)\n00:41:03    Steffi LaZerte (she/her):   Reacted to \"math aside: the squa...\" with üòÄ\n01:02:23    Derek Sollberger:   The `e1071` R package of miscellaneous functions is also useful for statistical work\n01:07:04    Jeffrey Stevens:    Gotta go. See you all for the last week next week!\n01:08:10    Olivier Leroy:  end"
  },
  {
    "objectID": "videos/23/01.html",
    "href": "videos/23/01.html",
    "title": "Cohort 1",
    "section": "",
    "text": "(no video)"
  },
  {
    "objectID": "videos/22/06.html",
    "href": "videos/22/06.html",
    "title": "Cohort 6",
    "section": "",
    "text": "Meeting chat log\n\n00:12:43    Trevin Flickinger:  Hello everyone!\n00:13:03    Oluwafemi Oyedele:  Hello, Good evening!!!\n00:22:10    Trevin Flickinger:  My connection is slow so I‚Äôll be in the chat\n00:32:45    Trevin Flickinger:  If you start with ‚Äúcontinue‚Äù it should error out after the first call\n00:56:18    Trevin Flickinger:  Sys.frame(-1) shows it goes back one frame\n00:59:55    fg: thanks\n01:03:11    Arthur Shaw:    Anyone else lose the presentation?\n01:03:20    fg: yes\n01:03:22    fg: ?\n01:04:26    Trevin Flickinger:  I thought that was my internet connection\n01:05:07    Trevin Flickinger:  Thank you!\n01:08:42    Trevin Flickinger:  I need to use debug( ) more as well\n01:10:15    Trevin Flickinger:  21st works for me\n01:10:29    Oluwafemi Oyedele:  Same here!!!"
  },
  {
    "objectID": "videos/22/09.html",
    "href": "videos/22/09.html",
    "title": "Cohort 9",
    "section": "",
    "text": "Meeting chat log\n\n00:13:32    Olivier Leroy:  Start\n00:15:27    Olivier Leroy:  It is also good to change mindset: debugging is fun!\n00:17:46    Olivier Leroy:  I use DDG\n00:18:58    Jo Hardin:  no, never\n00:20:13    Olivier Leroy:  It is always NULL üòõ\n00:21:14    Steffi LaZerte (she/her):   Reacted to \"It is always NULL üòõ\" with üòÅ\n00:22:11    Derek Sollberger:   still describe the bug(s) to the rubber duck\n\nhttps://en.wikipedia.org/wiki/Rubber_duck_debugging\n00:22:26    Olivier Leroy:  Reacted to \"still describe the b...\" with ü¶Ü\n00:22:39    Diana Garcia:   Reacted to \"still describe the b...\" with ü¶Ü\n00:22:47    Jo Hardin:  the title of her talk is: object of type closure is not subsettable\n00:23:06    Olivier Leroy:  Reacted to \"the title of her tal...\" with üëª\n00:23:38    Derek Sollberger:   Reacted to \"the title of her tal...\" with üëª\n00:25:14    Steffi LaZerte (she/her):   Replying to \"still describe the b...\"\n\nWith rOpenSci coworking, we always have a 5min scavenger hunt in the middle (\"You have 30s to find something that is round\", etc.) We get soooo many different rubber duckies üòÅ\n00:25:26    Derek Sollberger:   Reacted to \"With rOpenSci cowork...\" with üíú\n00:25:26    Steffi LaZerte (she/her):   Reacted to \"the title of her tal...\" with üòÖ\n00:26:44    Olivier Leroy:  Reacted to \"With rOpenSci cowork...\" with üòÑ\n00:37:20    Steffi LaZerte (she/her):   This is super helpful, because I've never understood all the nuanced steps within browser(). I just move the browser() statement and rerun üòÖ\n00:38:09    Steffi LaZerte (she/her):   Escape also kicks you out (usually but not always)\n00:45:24    Steffi LaZerte (she/her):   I'm dual-tasking a bit and was excited that your example walked me through using a breakpoint right when I needed it üòÅ\n00:47:44    Jeffrey Stevens:    Reacted to \"I'm dual-tasking a b...\" with üòÇ\n00:51:15    Olivier Leroy:  I was searching from scholar article on history of debugger but my googlefu is bad now\n01:04:01    Derek Sollberger:   I just need the warnings to be in a different color (so that my students stop freaking out)\n01:04:09    Olivier Leroy:  Reacted to \"I just need the warn...\" with üòÑ\n01:04:57    Steffi LaZerte (she/her):   Hahaha! Yes, I usually spend some time in the first class explaining the difference between Messages, Warnings and Errors :D to try and get them to relax a bit!\n01:06:58    Jo Hardin:  gotta run.  thanks, Jeffery, this was fantastic!\n01:11:07    Jeffrey Stevens:    end\n01:11:43    Derek Sollberger:   Another mental boost from Hadley Wickham: \"It‚Äôs easy when you start out programming to get really frustrated and think, ‚ÄúOh it‚Äôs me, I‚Äôm really stupid,‚Äù or, ‚ÄúI‚Äôm not made out to program.‚Äù But, that is absolutely not the case. Everyone gets frustrated. I still get frustrated occasionally when writing R code. It‚Äôs just a natural part of programming. So, it happens to everyone and gets less and less over time. Don‚Äôt blame yourself. Just take a break, do something fun, and then come back and try again later.\"\n01:11:58    Olivier Leroy:  Reacted to \"Another mental boost...\" with üëç\n01:12:11    Diana Garcia:   Reacted to \"Another mental boost...\" with üëç"
  },
  {
    "objectID": "videos/21/06.html",
    "href": "videos/21/06.html",
    "title": "Cohort 6",
    "section": "",
    "text": "Meeting chat log\n\n00:30:16    Arthur Shaw:    https://www.w3schools.com/html/html_entities.asp\n00:32:29    Arthur Shaw:    Beta symbol in HTML: &Beta;\n00:56:55    Arthur Shaw:    https://dbplyr.tidyverse.org/articles/translation-function.html\n00:57:48    Arthur Shaw:    https://dtplyr.tidyverse.org/index.html\n00:58:43    Arthur Shaw:    https://dtplyr.tidyverse.org/articles/translation.html"
  },
  {
    "objectID": "videos/21/09.html",
    "href": "videos/21/09.html",
    "title": "Cohort 9",
    "section": "",
    "text": "Meeting chat log\n\n00:15:14    Olivier Leroy:  Start\n00:17:21    Steffi: A whisker plot üòÇ\n00:17:27    Olivier Leroy:  Reacted to \"A whisker plot üòÇ \" with üòÑ\n00:19:28    Olivier Leroy:  I did not understand that well but that was not really the goal of the chapter (void tag).\n00:21:05    Olivier Leroy:  Hadley really not liking paste()\n00:26:26    Steffi: dots_partition(!!x)\n00:29:31    Olivier Leroy:  Apparently list2() do not mind ending with , also but not sure if that matters here\n00:30:08    Steffi: Reacted to \"Apparently list2() d...\" with üëç\n00:34:52    Olivier Leroy:  Br is a good example\n00:50:27    Olivier Leroy:  Overbox is full  ..\n00:53:28    Olivier Leroy:  I bugged on that until I realized that latex probably want to keep ( as text and not as function\n00:58:39    Olivier Leroy:  Omicron!\n01:07:13    Olivier Leroy:  end"
  },
  {
    "objectID": "videos/20/07.html",
    "href": "videos/20/07.html",
    "title": "Cohort 7",
    "section": "",
    "text": "Meeting chat log\n\n00:55:22    collinberke:    https://rlang.r-lib.org/reference/embrace-operator.html?q=enquo#under-the-hood"
  },
  {
    "objectID": "videos/19/07.html",
    "href": "videos/19/07.html",
    "title": "Cohort 7",
    "section": "",
    "text": "Meeting chat log\n\n00:50:48    Stone:  https://www.r-bloggers.com/2018/10/quasiquotation-in-r-via-bquote/\n00:58:26    iPhone: See ya next week!\n\n\n\nMeeting chat log\n\n00:55:22    collinberke:    https://rlang.r-lib.org/reference/embrace-operator.html?q=enquo#under-the-hood"
  },
  {
    "objectID": "videos/18/07.html",
    "href": "videos/18/07.html",
    "title": "Cohort 7",
    "section": "",
    "text": "Meeting chat log\n\n00:50:48    Stone:  https://www.r-bloggers.com/2018/10/quasiquotation-in-r-via-bquote/\n00:58:26    iPhone: See ya next week!"
  },
  {
    "objectID": "videos/17/07.html",
    "href": "videos/17/07.html",
    "title": "Cohort 7",
    "section": "",
    "text": "Meeting chat log\n\n00:11:09    Ryan Honomichl: https://medium.com/analytics-vidhya/become-a-better-r-programmer-with-the-awesome-lobstr-package-af97fcd22602\n00:33:03    Ryan Honomichl: https://rlang.r-lib.org/reference/enquo.html\n00:37:30    Ryan Honomichl: https://rlang.r-lib.org/reference/topic-multiple-columns.html\n00:41:00    Ryan Honomichl: brb\n00:44:37    Ron Legere: https://www.rdocumentation.org/packages/srvyr/versions/1.2.0\n00:44:58    Ron Legere: http://gdfe.co/srvyr/\n00:51:51    Stone:  https://cran.r-project.org/web/packages/data.table/vignettes/datatable-intro.html"
  },
  {
    "objectID": "videos/15/07.html",
    "href": "videos/15/07.html",
    "title": "Cohort 7",
    "section": "",
    "text": "Meeting chat log\n\n01:09:37    Ron Legere: https://en.wikipedia.org/wiki/Composition_over_inheritance"
  },
  {
    "objectID": "videos/14/06.html",
    "href": "videos/14/06.html",
    "title": "Cohort 6",
    "section": "",
    "text": "Meeting chat log\n\n00:11:34    Trevin: https://engineering-shiny.org/common-app-caveats.html?q=R6#using-r6-as-data-storage\n00:39:36    Federica Gazzelloni:    new R7: https://rconsortium.github.io/OOP-WG/\n00:40:04    Federica Gazzelloni:    R7 designed to be a successor to S3 and S4\n00:40:40    Federica Gazzelloni:    R6: https://r6.r-lib.org/articles/Introduction.html\n00:52:44    Trevin: https://advanced-r-solutions.rbind.io/r6.html#controlling-access\n01:00:34    Federica Gazzelloni:    interesting: https://r-craft.org/r-news/object-oriented-programming-oop-in-r-with-r6-the-complete-guide/\n01:01:58    Trevin: https://hadley.shinyapps.io/cran-downloads/\n01:02:33    Oluwafemi Oyedele:  Thank you !!!"
  },
  {
    "objectID": "videos/14/09.html",
    "href": "videos/14/09.html",
    "title": "Cohort 9",
    "section": "",
    "text": "Meeting chat log\n\n00:12:52    Olivier Leroy:  Start\n00:17:30    Olivier Leroy:  my_table$my_field\n00:29:14    Olivier Leroy:  (Save in project! Or I will callJenny!)\n00:30:42    Derek Sollberger:   If I run \"collinsavings$balance &lt;- 1234\", I don't get an error??\n00:32:03    Derek Sollberger:   Reacted to \"(Save in project! Or...\" with üî•\n00:33:12    Steffi LaZerte (she/her):   I don't think you should?\n00:36:27    Derek Sollberger:   Replying to \"I don't think you sh...\"\n\nRight.  I thought that the overall question was whether or not we could use the assignment operator\n00:38:53    Olivier Leroy:  My understanding is that myniceprint and mybankaccount has two different enclosing\n00:40:21    Olivier Leroy:  Yup states are so hard to manage!\n00:40:37    Olivier Leroy:  Environment &gt; states üòõ\n00:47:41    Jeffrey Stevens:    F10\n00:50:22    Olivier Leroy:  I would like copilot to use billionaire name instead of John\n00:51:25    Olivier Leroy:  I am already bad at copy pasting, I would be really bad with co pilot\n00:54:36    Olivier Leroy:  Using just names to get the list of method is really nice versus S3\n00:57:38    Derek Sollberger:   aside: this `ids` package looks to ben convenient for creating fake practice data\n\nhttps://cran.r-project.org/web/packages/ids/vignettes/ids.html\n00:57:39    Olivier Leroy:  It is just increasing an an ids\n01:00:49    Jo Hardin:  I need to take off for another meeting.  Great job @Diana Garcia Cortes !!!  Nice shirt @Jeffrey Stevens .  üôÇ  See you all next week.\n01:01:29    Olivier Leroy:  Reacted to \"I need to take off f...\" with üòÑ\n01:01:57    Olivier Leroy:  Good example\n01:03:23    Olivier Leroy:  Yup tricky on tempfile() / tempdir()\n01:06:32    Olivier Leroy:  End"
  },
  {
    "objectID": "videos/13/06.html",
    "href": "videos/13/06.html",
    "title": "Cohort 6",
    "section": "",
    "text": "Meeting chat log\n\n00:05:30    Oluwafemi Oyedele:  Hi everyone, Good Evening !!!\n00:09:44    Trevin: I agree Arthur, need to look at that package some more"
  },
  {
    "objectID": "videos/13/09.html",
    "href": "videos/13/09.html",
    "title": "Cohort 9",
    "section": "",
    "text": "Meeting chat log\n\n00:06:56    Jeffrey Stevens:    Which book?\n00:07:03    Olivier Leroy:  SICP\n00:07:21    Olivier Leroy:  https://en.wikipedia.org/wiki/Structure_and_Interpretation_of_Computer_Programs\n00:10:27    Olivier Leroy:  Start\n00:14:35    Olivier Leroy:  More if you came from python\n00:24:13    Derek Sollberger:   possible example: US high school is grades 9:12, but a factor variable wants to also define grades 1:8 as well\n00:26:21    Diana Garcia Cortes:    x &lt;- factor(10:20)\n&gt; unclass(x)\n [1]  1  2  3  4  5  6  7  8  9 10 11\nattr(,\"levels\")\n [1] \"10\" \"11\" \"12\" \"13\" \"14\" \"15\" \"16\" \"17\" \"18\" \"19\" \"20\"\n00:26:52    Jo Hardin:  what do you get with max(unclass(x))\n00:27:25    Olivier Leroy:  r$&gt; max(unclass(x))\n[1] 11\n00:28:49    Olivier Leroy:  r$&gt; unclass(10:12)\n[1] 10 11 12\n00:31:00    Jeffrey Stevens:    \"The constructor is a developer function: it will be called in many places, by an experienced user. That means it‚Äôs OK to trade a little safety in return for performance, and you should avoid potentially time-consuming checks in the constructor.\"\n00:33:53    Derek Sollberger:   # Simpsons reference\n&gt; as.roman(5) + as.roman(2)\n[1] VII\n00:48:27    Olivier Leroy:  r$&gt; g &lt;- function(x) {x &lt;- 10; y&lt;- 10 ;UseMethod(\"g\")}\n\nr$&gt; g()\nError in UseMethod(\"g\") :\n  no applicable method for 'g' applied to an object of class \"NULL\"\n00:48:50    Derek Sollberger:   Replying to \"# Simpsons reference...\"\n\n&gt; # group generics example\n&gt; 5 + as.roman(2)\n[1] VII\n00:51:34    Derek Sollberger:   Replying to \"r$&gt; g &lt;- function(x)...\"\n\n&gt; g &lt;- function(x) {\n+     x &lt;- 10\n+     y &lt;- 10\n+     UseMethod(\"g\")\n+ }\n&gt; sloop::s3_methods_generic(\"g\")\n# A tibble: 0 √ó 4\n# ‚ÑπÔ∏è 4 variables: generic &lt;chr&gt;, class &lt;chr&gt;,\n#   visible &lt;lgl&gt;, source &lt;chr&gt;\n&gt; g.default &lt;- function(x) c(x = x, y = y)\n&gt; sloop::s3_methods_generic(\"g\")\n# A tibble: 1 √ó 4\n  generic class   visible source    \n  &lt;chr&gt;   &lt;chr&gt;   &lt;lgl&gt;   &lt;chr&gt;     \n1 g       default TRUE    .GlobalEnv\n00:51:53    Olivier Leroy:  Reacted to \"&gt; g &lt;- function(x) {...\" with üëç\n00:52:05    Diana Garcia Cortes:    Reacted to \"&gt; g &lt;- function(x) {...\" with üëç\n01:06:12    Diana Garcia Cortes:    I guess we can say that polymorphism is implemented in R relying on methods correctly named and an mistery UseMethod() function\n01:06:45    Olivier Leroy:  end"
  },
  {
    "objectID": "videos/13/10.html",
    "href": "videos/13/10.html",
    "title": "Cohort 10",
    "section": "",
    "text": "Meeting chat log\n\n00:16:40    Stas Kolenikov (NORC):  print  is probably the next (fourth) thing you want to write for your S3 class after the constructor, the validator and the helper\n00:21:56    Stas Kolenikov (NORC):  is it a good practice to validate every input of a class object in the class methods? Given how easy it is to fake an S3 class, that seems prudent, but it is also expensive.\n00:23:36    Stas Kolenikov (NORC):  Replying to \"is it a good practic...\"\n\n(I don't think Hadley talks about it in the S3 chapter... although he did say that his objective was to provide the mechanics rather than all of the details about the coding style(s) )\n00:27:21    Jon Harmon (jonthegeek):    Replying to \"is it a good practic...\"\n\nI don't think it's 100% necessary to protect against people faking things. I usually check that the thing coming in has the class I expect, but I generally don't confirm every attribute or whatever. If someone sends in a thing that isn't really that class but just has the class added, they shouldn't be surprised when they get a weird error message.\n00:27:29    Stas Kolenikov (NORC):  Quote: you should only ever write a method if you own the generic or the class\n00:29:03    Stas Kolenikov (NORC):  Replying to \"is it a good practic...\"\n\nwell I occasionally hack the guts of Thomas Lumley's  survey.design  objects. I just hope his validators are strong enough ;)\n00:29:06    Jon Harmon (jonthegeek):    Replying to \" print  is probably ...\"\n\nFor vctrs objects they recommend  format()  and then they have  print()  and  str()  methods that you can inherit that use  format()  under the hood: https://vctrs.r-lib.org/articles/s3-vector.html#format-method\n00:30:08    Stas Kolenikov (NORC):  Reacted to \"For vctrs objects th...\" with üëç\n00:34:49    Stas Kolenikov (NORC):  I feel like  NextMethod()  is most useful when you are developing a hierarchy of classes. You have the basic class that you have  print()  for, and two or three more advanced classes that can just pass the job of printing to the underlying superclass.\n00:37:59    Stas Kolenikov (NORC):  is there a convention that  length()  always returns an integer of length 1? I wrote  length.myclass()  that returns a table describing lengths of the class components... not sure if it is going to break stuff anywhere\n00:38:57    Jon Harmon (jonthegeek):    Replying to \"is there a conventio...\"\n\nI think that would probably break a lot of things.  length()  gets used in  if()  a lot, for example, so, if the return of  length()  itself has  length()  other than 1, that'll get messy.\n00:39:22    Stas Kolenikov (NORC):  also IMO  str()  should have a default  str(... max.level=1)  -- I rarely want to see anything deeper but ymmv\n00:39:32    Jon Harmon (jonthegeek):    Reacted to \"also IMO  str()  sho...\" with ‚òùÔ∏è\n00:39:51    Jon Harmon (jonthegeek):    Replying to \"also IMO  str()  sho...\"\n\nI often want 2 but I probably want 1 first.\n00:40:48    Stas Kolenikov (NORC):  Replying to \"is there a conventio...\"\n\nyeah I think I am getting error messages from  base  that refer to  length(x)\n00:43:05    Stas Kolenikov (NORC):  Replying to \"also IMO  str()  sho...\"\n\n .Rprofile :\n\nstr1 &lt;- function(..., max.level=1) str(..., max.level=max.level)\n00:43:22    Jon Harmon (jonthegeek):    Reacted to \" .Rprofile :\n\nstr1 &lt;...\" with üëè\n01:02:08    Jon Harmon (jonthegeek):    https://cran.r-project.org/package=vctrs"
  },
  {
    "objectID": "videos/12/07.html",
    "href": "videos/12/07.html",
    "title": "Cohort 7",
    "section": "",
    "text": "Meeting chat log\n\n00:35:43    Stone: base::InternalMethods\n00:48:04    collinberke: https://cran.r-project.org/doc/manuals/R-exts.html"
  },
  {
    "objectID": "videos/11/06.html",
    "href": "videos/11/06.html",
    "title": "Cohort 6",
    "section": "",
    "text": "Meeting chat log\n\n00:01:42    Oluwafemi Oyedele:  Hi, Good Evening !!!\n00:05:52    Arthur Shaw:    @federica, love the hex stickers behind you. All from rstudio::conf?\n00:07:12    Arthur Shaw:    I tried doing the same. I had a hard time ordering them. I also thought I'd make the stickers into magnets so that I could rearrange them in future.\n00:48:34    Oluwafemi Oyedele:  Thank you !!!"
  },
  {
    "objectID": "videos/11/07.html",
    "href": "videos/11/07.html",
    "title": "Cohort 7",
    "section": "",
    "text": "Meeting chat log\n\n00:18:21    collinberke: Jenny Bryan debugging: https://www.youtube.com/watch?v=vgYS-F8opgE\n00:31:10    collinberke: https://purrr.tidyverse.org/reference/slowly.html\n00:47:43    Robert Hilly: By guys!"
  },
  {
    "objectID": "videos/10/06.html",
    "href": "videos/10/06.html",
    "title": "Cohort 6",
    "section": "",
    "text": "Meeting chat log\n\n01:02:25    Trevin: I'm good with combining üëç\n01:02:57    Oluwafemi Oyedele:  I agree with combining the chapter!!!"
  },
  {
    "objectID": "videos/09/06.html",
    "href": "videos/09/06.html",
    "title": "Cohort 6",
    "section": "",
    "text": "Meeting chat log\n\n00:15:49    Matt Dupree:    did anyone else lose audio?\n00:15:59    Federica Gazzelloni:    not me\n00:16:02    Arthur Shaw:    Not me either\n00:16:04    Trevin: okay for me\n00:16:27    Matt Dupree:    gonna try rejoining\n00:43:14    Matt Dupree:    oh i didn't know they invisibly returned .x! That's useful!\n00:48:29    Arthur Shaw:    Very cool trick !"
  },
  {
    "objectID": "videos/09/07.html",
    "href": "videos/09/07.html",
    "title": "Cohort 7",
    "section": "",
    "text": "Meeting chat log\n\n00:34:09    Ron:    Someone did: https://cran.r-project.org/web/packages/comprehenr/vignettes/Introduction.html\n00:47:58    collinberke:    https://purrr.tidyverse.org/reference/safely.html\n00:48:24    Ron:    it's a function operator !\n00:49:37    Ron:    \\(x) length(unique(x) is not too verbose though\n00:49:39    Ron:    ;)\n01:06:50    collinberke:    https://colinfay.me/purrr-mappers/\n01:07:45    collinberke:    https://colinfay.me/purrr-web-mining/"
  },
  {
    "objectID": "videos/08/06.html",
    "href": "videos/08/06.html",
    "title": "Cohort 6",
    "section": "",
    "text": "Meeting chat log\n\n00:19:16    Trevin: https://style.tidyverse.org/error-messages.html\n00:20:14    Trevin: More on errors in the design guide: https://design.tidyverse.org/\n01:14:27    Federica Gazzelloni:    more info here: https://colinfay.me/learn-shiny-production/"
  },
  {
    "objectID": "videos/08/07.html",
    "href": "videos/08/07.html",
    "title": "Cohort 7",
    "section": "",
    "text": "Meeting chat log\n\n00:34:09    Ron:    Someone did: https://cran.r-project.org/web/packages/comprehenr/vignettes/Introduction.html\n00:47:58    collinberke:    https://purrr.tidyverse.org/reference/safely.html\n00:48:24    Ron:    it's a function operator !\n00:49:37    Ron:    \\(x) length(unique(x) is not too verbose though\n00:49:39    Ron:    ;)\n01:06:50    collinberke:    https://colinfay.me/purrr-mappers/\n01:07:45    collinberke:    https://colinfay.me/purrr-web-mining/"
  },
  {
    "objectID": "videos/07/06.html",
    "href": "videos/07/06.html",
    "title": "Cohort 6",
    "section": "",
    "text": "Meeting chat log\n\n00:08:41    Arthur Shaw:    Hello, everyone!\n00:21:31    Federica Gazzelloni:    ?walk: Apply a function to each element of a list or atomic vector\n00:23:15    Federica Gazzelloni:    ?caller_env: Get properties of the current or caller frame\n00:24:56    Trevin: purrr::walk(x, function(x, ce, ace = rlang::caller_env()) {\n  .ce &lt;- rlang::caller_env()\n  message(\"Internal: \")\n  print(.ce)\n  message(\"Argument: \")\n  print(ace)\n  message(\"External: \")\n  print(ce)\n  message(\"Internal: \",paste0(ls(.ce), collapse = \"\\n\"))\n  message(\"Argument: \",paste0(ls(ace), collapse = \"\\n\"))\n  message(\"External: \",paste0(ls(ce), collapse = \"\\n\"))\n}, ce = rlang::caller_env())\n00:29:39    Federica Gazzelloni:    ??iwalk: Apply a function to each element of a vector, and its index\n00:35:30    Arthur Shaw:    https://magrittr.tidyverse.org/reference/tee.html\n00:36:05    Federica Gazzelloni:    ?`%T&gt;%`\n00:46:59    Trevin: ?eval\n01:06:03    Federica Gazzelloni:    https://cran.r-project.org/web/packages/withr/index.html\n01:09:21    Federica Gazzelloni:    https://github.com/r-lib/withr\n01:10:38    Trevin: I'm okay if we meet next week\n01:10:53    Oluwafemi Oyedele:  I am ok with next week"
  },
  {
    "objectID": "videos/07/07.html",
    "href": "videos/07/07.html",
    "title": "Cohort 7",
    "section": "",
    "text": "Meeting chat log\n\n00:06:49    Ryan Honomichl: https://r4ds.github.io/bookclub-Advanced_R/QandA/docs/environments.html\n\n\n\nMeeting chat log\n\n00:14:44    collinberke:    https://ivelasq.rbind.io/blog/macos-rig/index.html\n00:21:10    collinberke:    https://github.com/tidyverse/dplyr/blob/main/NAMESPACE\n01:00:21    collinberke:    https://r4ds.hadley.nz/iteration.html"
  },
  {
    "objectID": "videos/06/06.html",
    "href": "videos/06/06.html",
    "title": "Cohort 6",
    "section": "",
    "text": "Meeting chat log\n\n00:01:11    Oluwafemi Oyedele:  Hi, Good evening\n00:01:22    Federica Gazzelloni:    Hello!\n00:43:19    Federica Gazzelloni:    https://r4ds.github.io/bookclub-Advanced_R/QandA/docs/welcome.html\n00:52:48    Priyanka:   sounds good actually\n00:52:59    Federica Gazzelloni:    üëçüèª\n\n\n\nMeeting chat log\n\n00:09:30    Oluwafemi Oyedele:  Hi, Good evening\n00:10:41    Federica Gazzelloni:    Hi\n00:14:40    Federica Gazzelloni:    that's great!\n00:54:24    Trevin: Also, sorry if you are repeating üôÇ\n00:54:52    Arthur Shaw:    @ryan, thank you so much for the awesome synthesis! Could you share your reference list? I'd love to dive more deeply into the material you presented.\n00:57:02    Ryan Metcalf:   https://cran.r-project.org/doc/manuals/r-release/R-lang.pdf\n00:59:32    Trevin: https://github.com/COHHIO/RmData\n01:01:48    Ryan Metcalf:   https://mastering-shiny.org/\n01:02:02    Ryan Metcalf:   https://engineering-shiny.org/\n01:02:15    Arthur Shaw:    @trevin, if you get bored with beepr, move to BRRR ;)\n01:02:16    Arthur Shaw:    https://github.com/brooke-watson/BRRR\n01:09:27    Ryan Metcalf:   This is amazing Trevin! I'll take a closer look. Is it ok to reach out to you with any questions?\n01:09:43    Trevin: Yeah, feel free to reach out\n\n\n\nMeeting chat log\n\n00:05:34    Trevin: I didn't catch that\n00:06:02    priyanka gagneja:   i won't be presenting I said .. so you two have the stage\n00:08:39    Federica Gazzelloni:    no worries\n00:08:46    Federica Gazzelloni:    next time you do it\n00:08:56    Federica Gazzelloni:    did you sign up?\n00:09:45    Trevin: Discord is free: https://discord.gg/rstudioconf2022\n00:10:04    Trevin: Free stream link: https://www.rstudio.com/conference/stream\n00:24:32    Arthur Shaw:    Maybe silly question: is the magrittr pipe an infix function?\n00:32:15    Trevin: https://colinfay.me/playing-r-infix-functions/\n00:33:23    Arthur Shaw:    Maybe another example of an infix function: lubridate's `%within%`\n00:33:47    Trevin: That's a good one too ^\n00:33:55    priyanka gagneja:   yes within would be good.\n00:40:13    Arthur Shaw:    no\n00:49:50    Arthur Shaw:    Sorry for dropping in and out. My WiFi router is having issues today--maybe is failing.\n01:08:59    Trevin: Looking forward to it üôÇ"
  },
  {
    "objectID": "videos/06/07.html",
    "href": "videos/06/07.html",
    "title": "Cohort 7",
    "section": "",
    "text": "Meeting chat log\n\n00:31:54    Ronald Legere:  https://en.wikipedia.org/wiki/First-class_function\n00:42:55    Ronald Legere:  https://en.wikipedia.org/wiki/Immediately_invoked_function_expression\n\n\n\nMeeting chat log\n\n00:54:02    Ron:    Book gives this simple example of when you might want to use prefix form of an infix operator: lapply(list(1:3, 4:5), `+`, 3)\n00:56:49    collinberke:    https://colinfay.me/playing-r-infix-functions/#:~:text=What%20are%20infix%20functions%3F,%2C%20%2B%20%2C%20and%20so%20on.\n01:07:36    Ron:    x[3] &lt;- 33\n01:07:51    Ron:    `[&lt;-`(x,3,value =33)"
  },
  {
    "objectID": "videos/05/06.html",
    "href": "videos/05/06.html",
    "title": "Cohort 6",
    "section": "",
    "text": "Meeting chat log\n\n00:16:34    Federica Gazzelloni:    https://github.com/r4ds/bookclub-Advanced_R\n00:22:28    Federica Gazzelloni:    https://stackoverflow.com/questions/50646133/dplyr-if-else-vs-base-r-ifelse\n00:26:20    Trevin: case_when() is great, makes it easy to read\n00:54:01    Trevin: out[I, ]\n00:54:14    Trevin: out[i, ]\n00:55:03    Trevin: I think you have to specify number of rows and columns before..\n00:55:30    Trevin: iterations = 10\n variables = 2\n output &lt;- matrix(ncol=variables, nrow=iterations)\n00:55:43    Trevin: https://stackoverflow.com/questions/13442461/populating-a-data-frame-in-r-in-a-loop"
  },
  {
    "objectID": "videos/05/07.html",
    "href": "videos/05/07.html",
    "title": "Cohort 7",
    "section": "",
    "text": "Meeting chat log\n\n00:40:18    Ryan Honomichl: What type of vector does each of the following calls to ifelse() return?\n* \"ifelse returns a value with the same shape as test which is filled with elements selected from either yes or no depending on whether the element of test is TRUE or FALSE.\"\n00:42:11    Ryan Honomichl: \"I recommend assigning the results of an if statement only when the entire expression fits on one line; otherwise it tends to be hard to read\"\n00:42:46    Ryan Honomichl: * When you use the single argument form without an `else` statement, `if` invisibly returns NULL if the condition is FALSE. \n-   Since functions like c() and paste() drop NULL inputs, this allows for a compact expression of certain idioms\n00:54:15    collinberke:    https://docs.google.com/spreadsheets/d/1ScrbEw_-vB9DruaJhjtVY8HLQmuNPqyWeOOjmG6OY1M/edit?usp=sharing\n00:58:46    collinberke:    https://www.youtube.com/@safe4democracy/videos"
  },
  {
    "objectID": "videos/04/06.html",
    "href": "videos/04/06.html",
    "title": "Cohort 6",
    "section": "",
    "text": "Meeting chat log\n\n00:36:02    Arthur Shaw:    TIL that the subset operator has parameters. Thanks, Trevin!\n00:38:55    Vaibhav Janve:  its interesting that carriage \"a\" has two set of wheels instread of 4. I wonder that choice is because its atomic.\n00:40:44    Arthur Shaw:    @Vaibhav, because the load is lighter, the carriage needs fewer axles? ;)  I agree: it's a confusing graphical choice.\n00:41:11    Vaibhav Janve:  lol\n01:05:53    Vaibhav Janve:  Thank you Trevin!"
  },
  {
    "objectID": "videos/04/07.html",
    "href": "videos/04/07.html",
    "title": "Cohort 7",
    "section": "",
    "text": "Meeting chat log\n\n00:40:18    Ryan Honomichl: What type of vector does each of the following calls to ifelse() return?\n* \"ifelse returns a value with the same shape as test which is filled with elements selected from either yes or no depending on whether the element of test is TRUE or FALSE.\"\n00:42:11    Ryan Honomichl: \"I recommend assigning the results of an if statement only when the entire expression fits on one line; otherwise it tends to be hard to read\"\n00:42:46    Ryan Honomichl: * When you use the single argument form without an `else` statement, `if` invisibly returns NULL if the condition is FALSE. \n-   Since functions like c() and paste() drop NULL inputs, this allows for a compact expression of certain idioms\n00:54:15    collinberke:    https://docs.google.com/spreadsheets/d/1ScrbEw_-vB9DruaJhjtVY8HLQmuNPqyWeOOjmG6OY1M/edit?usp=sharing\n00:58:46    collinberke:    https://www.youtube.com/@safe4democracy/videos"
  },
  {
    "objectID": "videos/03/06.html",
    "href": "videos/03/06.html",
    "title": "Cohort 6",
    "section": "",
    "text": "Meeting chat log\n\n00:10:18    Oluwafemi Oyedele:  Hi, good evening\n00:23:31    Federica Gazzelloni:    Hi Kiante!\n00:24:21    Federica Gazzelloni:    Thanks Arthur\n00:25:46    Trevin: Welcome Matt!\n00:26:02    Matt Dupree:    hello! thank you!\n00:30:34    Federica Gazzelloni:    Hello Matt!\n00:30:46    Matt Dupree:    hello!\n00:38:24    Ryan Metcalf:   `rlang::cpl()` = ‚Äúcomplex‚Äù. For example `0+1i`\n00:55:37    Trevin: &gt; two &lt;- c(1,2,3)\n&gt; names(two) &lt;- c(\"one\", \"two\")\n&gt; two\n one  two &lt;NA&gt; \n   1    2    3\n00:57:25    Ryan Metcalf:   Excellent Trevin. You beat me to the output! Assuming we didn't supply the string, `NA` is entered instead.\n01:08:50    Ryan Metcalf:   Without further research, this is the \"Unix Epoch‚Äù. However, varying operating systems use different Epochs."
  },
  {
    "objectID": "videos/03/07.html",
    "href": "videos/03/07.html",
    "title": "Cohort 7",
    "section": "",
    "text": "Meeting chat log\n\n00:54:07    Ron:    https://www.tidyverse.org/blog/2021/03/clock-0-1-0/\n01:14:39    Robert Hilly:   https://www.amazon.com/Effective-Pandas-Patterns-Manipulation-Treading/dp/B09MYXXSFM"
  },
  {
    "objectID": "videos/02/06.html",
    "href": "videos/02/06.html",
    "title": "Cohort 6",
    "section": "",
    "text": "Meeting chat log\n\n00:16:57    Federica Gazzelloni:    cohort 2 video: https://www.youtube.com/watch?v=pCiNj2JRK50\n00:18:39    Federica Gazzelloni:    cohort 2 presentation: https://r4ds.github.io/bookclub-Advanced_R/Presentations/Week02/Cohort2_America/Chapter2Slides.html#1\n00:40:24    Arthur Shaw:    Just the opposite, Ryan. Very clear presentation!\n00:51:54    Trevin: parquet?\n00:53:00    Arthur Shaw:    We may all be right. {arrow} looks to deal with feather and parquet files: https://arrow.apache.org/docs/r/\n01:00:04    Arthur Shaw:    Some questions for future meetings. (1) I find Ryan's use of slides hugely effective in conveying information. Would it be OK if future sessions (optionally) used slides? If so, should/could we commit slides to some folder on the repo? (2) I think reusing the images from Hadley's books really helps understanding and discussion. Is that OK to do? Here I'm thinking about copyright concerns. (If possible, I would rather not redraw variants of Hadley's images.)\n01:01:35    Federica Gazzelloni:    It's all ok, you can use past presentation, you don't need to push them to the repo, you can use the images from the book\n01:07:19    Federica Gazzelloni:    Can I use: gc(reset = TRUE) safely?"
  },
  {
    "objectID": "videos/02/07.html",
    "href": "videos/02/07.html",
    "title": "Cohort 7",
    "section": "",
    "text": "Meeting chat log\n\n00:09:40    Ryan Honomichl: https://drdoane.com/three-deep-truths-about-r/\n00:12:51    Robert Hilly:   Be right back\n00:36:12    Ryan Honomichl: brb\n00:41:18    Ron:    I tried mapply and also got different answers\n00:41:44    collinberke:    Interesting, would like to know more what is going on.\n00:49:57    Robert Hilly:   simple_map &lt;- function(x, f, ...) {\n  out &lt;- vector(\"list\", length(x))\n  for (i in seq_along(x)) {\n    out[[i]] &lt;- f(x[[i]], ...)\n  }\n  out\n}"
  },
  {
    "objectID": "videos/01/08.html",
    "href": "videos/01/08.html",
    "title": "Cohort 8",
    "section": "",
    "text": "Meeting chat log\n\n00:11:53    Federica Gazzelloni (she/her):  start\n00:16:39    bdair:  Hello Just listening for now happy to be here\n00:18:21    Betsy:  Reacted to \"Hello Just listening...\" with üëç\n00:24:52    Federica Gazzelloni (she/her):  https://r4ds.github.io/bookclub-advr/introduction.html\n00:25:02    Federica Gazzelloni (she/her):  https://adv-r.hadley.nz/index.html\n00:28:57    Federica Gazzelloni (she/her):  https://docs.google.com/spreadsheets/d/1loyBrLdfbBl2NDc-eoXKTJSnaQKm5Z-D_X1hx_GF8Q8/edit\n00:35:40    Federica Gazzelloni (she/her):  https://advanced-r-solutions.rbind.io/\n00:53:25    Silvana Acosta: You are on mute Federica\n01:06:31    Betsy:  https://adv-r.hadley.nz/names-values.html#copy-on-modify"
  },
  {
    "objectID": "videos/01/09.html",
    "href": "videos/01/09.html",
    "title": "Cohort 9",
    "section": "",
    "text": "Meeting chat log\n\n00:10:07    Gabby Palomo Munoz: I got my PhD at UNL!!! Go Huskers!!!\n00:15:48    Jo Hardin:  @Tataphani, how do *you* say your name?\n00:18:37    tataphani:  we can be good team me too SAS+ r\n00:19:28    Olufemi Ajumobi:    Reacted to \"we can be good team ...\" with üëç\n00:23:24    Gabby Palomo Munoz: This workflow work really well, I always use it when working on slides\n00:23:53    Derek Sollberger:   Aside: to these DSLC book clubs work with Quarto files?\n00:24:29    Gabby Palomo Munoz: SLides are different than the book\n00:24:34    Gabby Palomo Munoz: BUT they are both in bookddown\n00:24:52    Gabby Palomo Munoz: SLIDES are the summarized version that each one of us create for each chapter\n00:26:18    Gabby Palomo Munoz: The idea is that we don't put everything there is in the chapter in the \"slides\". Just important relevant things. Snipets. Jon calls them slides because ideally you should put what you are presenting on what can be shown on the screen (like a slide) and avoid scrolling\n00:26:30    Derek Sollberger:   Reacted to \"The idea is that we ...\" with üëç\n00:26:37    Gabby Palomo Munoz: BUT it's fine if your 'slide' has more info that you have to scroll through\n00:27:00    Gabby Palomo Munoz: My grammar there is awful. Sorry!!\n00:28:14    Gabby Palomo Munoz: I use Windows and have never had any issues with the github\n00:28:18    Gabby Palomo Munoz: instructions\n00:29:25    tataphani:  Reacted to \"I use Windows and ha...\" with üëç\n00:31:57    Derek Sollberger:   It feels odd being part of a book club where the slides are already there, haha\n00:35:18    John Ellis: Any tips for searching for ‚ÄòR‚Äô ‚Ä¶ ‚ÄòR Programming‚Äô?\n00:35:41    Steffi LaZerte (she/her):   I often include the package name or \"stats\" if it's related to statistics\n00:35:47    John Ellis: Reacted to \"I often include the ...\" with üëç\n00:36:02    Jo Hardin:  i usually include the word tidy\n00:36:07    Derek Sollberger:   Replying to \"Any tips for searchi...\"\n\nAt least it is easier than searching for \"pandas\"\n00:36:09    Diana Garcia Cortes:    Reacted to \"i usually include th...\" with üëç\n00:36:26    Derek Sollberger:   Reacted to \"I often include the ...\" with üëç\n00:36:27    Derek Sollberger:   Reacted to \"i usually include th...\" with üëç\n00:36:41    Steffi LaZerte (she/her):   Replying to \"i usually include th...\"\n\nOr base :D depending\n00:39:21    Jo Hardin:  Reacted to \"Or base :D depending\" with üôÇ\n00:39:56    John Ellis: Reacted to \"Or base :D depending\" with üëç\n00:40:13    James Capobianco:   First link doesn‚Äôt work for me - 404d\n00:40:54    Olivier Leroy:  https://mitp-content-server.mit.edu/books/content/sectbyfn/books_pres_0/6515/sicp.zip/index.html\n00:42:00    James Capobianco:   Reacted to \"https://mitp-content...\" with üëç\n00:42:27    James Capobianco:   Like a lot of other people said, I‚Äôm really interested in practicing functional programming.\n00:42:59    Gabby Palomo Munoz: Reacted to \"Like a lot of other ...\" with üíØ\n00:43:17    Derek Sollberger:   Reacted to \"Like a lot of other ...\" with üíØ\n00:45:23    Gabby Palomo Munoz: It's just to highlight that we need to find someone urgently for next week\n00:45:35    James Capobianco:   Yes, I figured it had to do with how soon that week is\n00:45:47    Jo Hardin:  Reacted to \"It's just to highlig...\" with üëç\n00:45:48    Gabby Palomo Munoz: I think Jon designed it like that to help whoever is leading the book\n00:47:31    Gabby Palomo Munoz: One more thing, you don't have to know the content of the chapter and be an expert on that topic to present.\n00:47:40    Derek Sollberger:   Reacted to \"One more thing, you ...\" with üëç\n00:47:46    Gabby Palomo Munoz: Jon recommends sometimes to choose a chapter if you want to learn more about a certain topic\n00:47:48    James Capobianco:   Reacted to \"One more thing, you ...\" with üëç\n00:48:10    Gabby Palomo Munoz: And we are all here to either answer questions or redirect"
  },
  {
    "objectID": "videos/01/10.html",
    "href": "videos/01/10.html",
    "title": "Cohort 10",
    "section": "",
    "text": "Meeting chat log\n\n00:24:52    Jon Harmon (jonthegeek):    Not a recommendation: https://www.amazon.com/New-Language-Programming-Environment-Wadsworth/dp/053409192X\n00:30:00    Ella Kaye (she/her):    This is starting to sound like the 10-year R book club!\n00:30:18    Gabby Palomo:   Reacted to \"This is starting to ...\" with üòÇ\n00:30:24    Sally Chang:    Reacted to \"This is starting to ...\" with üòÇ\n00:30:25    Derek Sollberger:   Reacted to \"This is starting to ...\" with 1Ô∏è‚É£\n00:30:28    Sally Chang:    Reacted to \"This is starting to ...\" with 1Ô∏è‚É£\n00:30:33    Olivier:    Reacted to \"This is starting to ...\" with üòÇ\n00:30:38    Derek Sollberger:   Reacted to \"This is starting to ...\" with 0Ô∏è‚É£\n00:30:41    Olivier:    Reacted to \"This is starting to ...\" with 0Ô∏è‚É£\n00:30:42    Olivier:    Reacted to \"This is starting to ...\" with 1Ô∏è‚É£\n00:30:45    Jon Harmon (jonthegeek):    But don't feel like you have to have 10 years experience! üòÑ\n00:31:21    Jon Harmon (jonthegeek):    Reacted to \"This is starting to ...\" with üîü\n00:31:25    Derek Sollberger:   Reacted to \"This is starting to ...\" with üîü\n00:33:37    Sally Chang:    Oh! Forgot to mention as someone in education I am also super excited to see how this club is organized and hopefully someday facilitate a book club myself :)\n00:33:39    Olivier:    () are the best\n00:34:13    Olivier:    Reacted to \"Oh! Forgot to mentio...\" with üëç\n00:35:43    Jon Harmon (jonthegeek):    Reacted to \"Oh! Forgot to mentio...\" with üëç\n00:38:02    Gabby Palomo:   Reacted to \"Oh! Forgot to mentio...\" with üëç\n00:41:33    BYRON DANIEL ODERA: My name is Byron. I'm calling in from Nairobi,Kenya ( past 8 pm here) Have been using R for 1 year plus now. I'm in behavioral-clinical research. My branching out is after trials with Python which i still find hardüòÖ. I'm looking forward to this class and more R training to help with honing skills in computational genomics and learning from everyone. (Sorry cant be on mic having family dinner but I'm following)\n00:41:40    Sally Chang:    Reacted to \"My name is Byron. I'...\" with ‚ù§Ô∏è\n00:41:47    Sally Chang:    Reacted to \"My name is Byron. I'...\" with üëã\n00:41:55    Gabby Palomo:   Reacted to \"My name is Byron. I'...\" with ‚ù§Ô∏è\n00:42:11    Jon Harmon (jonthegeek):    Reacted to \"My name is Byron. I'...\" with üëã\n00:42:14    Nicholas Giangreco: Reacted to \"My name is Byron. I'...\" with üëã\n00:42:56    Olivier:    my cohort was so good that people are coming again!\n00:43:01    Gabby Palomo:   Reacted to \"my cohort was so goo...\" with ü§©\n00:43:02    Sally Chang:    Reacted to \"my cohort was so goo...\" with üéâ\n00:43:04    Gabby Palomo:   Reacted to \"my cohort was so goo...\" with üéâ\n00:43:08    Nicholas Giangreco: Reacted to \"my cohort was so goo...\" with ü§©\n00:44:56    Jon Harmon (jonthegeek):    usethis::use_package(\"x\")\n00:45:47    Derek Sollberger:   Yeah, that guy (Derek) didn't really make slides\n00:45:53    Sally Chang:    Reacted to \"Yeah, that guy (Dere...\" with üòÇ\n00:45:55    Olivier:    Reacted to \"Yeah, that guy (Dere...\" with üòÑ\n00:45:57    Nicholas Giangreco: Reacted to \"Yeah, that guy (Dere...\" with üòÇ\n00:46:01    Retselisitsoe Monyake:  Reacted to \"Yeah, that guy (Dere...\" with üòÖ\n00:49:23    Ella Kaye (she/her):    But we‚Äôre bringing back C for R users!\n00:49:41    Olivier:    Reacted to \"But we‚Äôre bringing b...\" with üòÑ\n00:51:18    Gabby Palomo:   Reacted to \"Yeah, that guy (Dere...\" with üòÇ\n00:51:46    Olivier:    can we say Hi to the kiddo?\n00:52:24    Eamon Caddigan: (My youngest is the same age!)\n00:52:29    Gabby Palomo:   We also sometime would like to see your dogs Jon. They are adorable!!!\n00:52:29    Ella Kaye (she/her):    Reacted to \"(My youngest is the ...\" with ‚ù§Ô∏è\n00:52:43    Sally Chang:    Reacted to \"We also sometime wou...\" with ‚ûï\n00:55:12    Olivier:    that is optimist about replacing s3 and s4 :)\n00:56:19    Olivier:    having multiple systems also help you understand the one you are using\n00:56:31    Retselisitsoe Monyake:  Reacted to \"having multiple syst...\" with üëç\n00:57:15    Olivier:    masstodon!\n00:57:24    Eamon Caddigan: Reacted to \"masstodon!\" with üíØ\n00:57:26    Nicholas Giangreco: Reacted to \"masstodon!\" with üíØ\n00:57:56    Gabby Palomo:   Replying to \"masstodon!\"\n\nI need to go back, I‚Äôve been soaring the blue skies LOL\n00:58:31    Olivier:    Replying to \"masstodon!\"\n\nahah that is fine, we still love all the blue sky users\n00:58:38    Eamon Caddigan: Reacted to \"ahah that is fine, w...\" with ‚ûï\n00:58:39    Gabby Palomo:   Reacted to \"ahah that is fine, w...\" with ‚ù§Ô∏è\n00:58:48    Sally Chang:    At this point in my job search, anything but linkedIn please üò´\n00:58:55    Gabby Palomo:   Reacted to \"At this point in my ...\" with üòÇ\n00:58:57    Olivier:    Reacted to \"At this point in my ...\" with üòÇ\n00:59:07    Josh Persi: Reacted to \"At this point in my ...\" with üòÇ\n00:59:10    Retselisitsoe Monyake:  Reacted to \"At this point in my ...\" with üòÇ\n00:59:11    Derek Sollberger:   Reacted to \"At this point in my ...\" with üòÇ\n00:59:58    Olivier:    I just discovered that you need to use a third app to preview your post in LinkedIn ...\n01:00:01    Gabby Palomo:   My take on LinkedIn is that is really cool BUT you have to curate the people you follow very carefully to avoid the weirdos posting about how they finding success before breakfast and inspiration in their cereal.\n01:00:08    Sally Chang:    Reacted to \"My take on LinkedIn ...\" with ‚ù§Ô∏è\n01:00:12    Olivier:    Reacted to \"My take on LinkedIn ...\" with ‚ù§Ô∏è\n01:00:16    Sally Chang:    Reacted to \"I just discovered th...\" with üò´\n01:00:43    Nicholas Giangreco: Reacted to \"My take on LinkedIn ...\" with üòÇ\n01:02:40    Olivier:    ones pro of being wrote by scientists is that it tends to be stable (always relative)\n01:06:58    Olivier:    I think it is a good advice, specialy to understand why it can fails\n01:07:22    Eamon Caddigan: HUGE fan of SICP (aka ‚Äúthe Wizard Book‚Äù)\n01:07:40    Olivier:    I still never managed to finish it :P\n01:07:47    Sally Chang:    Reacted to \"HUGE fan of SICP (ak...\" with ü™Ñ\n01:07:59    Nicholas Giangreco: Sorry I got to go to my next work meeting! I think I signed up to do the next chapter. Discussion so I will contribute to that on GitHub and be ready to facilitate next week üôÇ\n01:08:14    Ella Kaye (she/her):    Sorry I won‚Äôt be here next week, but looking forward to seeing you all again the week after."
  },
  {
    "objectID": "slides/24.html#learning-objectives",
    "href": "slides/24.html#learning-objectives",
    "title": "Improving performance",
    "section": "Learning Objectives",
    "text": "Learning Objectives\n\nDetermine when to optimize code\nOrganize code for optimization\nCheck for existing solutions\nCreate simple solutions\nVectorise code\nAvoid code copying\nEvaluate optimization for t.test\n\n\nlibrary(bench)"
  },
  {
    "objectID": "slides/24.html#code-that-works-generates-expected-outputs-and-is-reproducible-should-be-the-first-priority",
    "href": "slides/24.html#code-that-works-generates-expected-outputs-and-is-reproducible-should-be-the-first-priority",
    "title": "Improving performance",
    "section": "Code that works, generates expected outputs, and is reproducible should be the first priority",
    "text": "Code that works, generates expected outputs, and is reproducible should be the first priority\n\nCorrect code generates a good product i.e.¬†expected outputs\nIncorrect code generates a bad product i.e.¬†incorrect outputs\nA good product is more valuable than a bad product\nPeople will use and wait for valuable products\nPeople will not use incorrect products\nDo not optimize code that doesn‚Äôt yet generate a good product"
  },
  {
    "objectID": "slides/24.html#optimizing-correct-code-should-be-the-second-priority",
    "href": "slides/24.html#optimizing-correct-code-should-be-the-second-priority",
    "title": "Improving performance",
    "section": "Optimizing correct code should be the second priority",
    "text": "Optimizing correct code should be the second priority\n\nTime and space constraints should set optimization goals and priorities\nWe all strive to be efficient, whether doing something in less time or with less space\nBut we must first prioritize to meet our various constraints"
  },
  {
    "objectID": "slides/24.html#create-functions-to-evaluate-approaches-and-quantify-optimization",
    "href": "slides/24.html#create-functions-to-evaluate-approaches-and-quantify-optimization",
    "title": "Improving performance",
    "section": "Create functions to evaluate approaches and quantify optimization",
    "text": "Create functions to evaluate approaches and quantify optimization\n\nGoal: Modular, repeatable units of code\nKeep old functions that you‚Äôve tried, even the failures\nCreate examples with {roxygen} and tests with {testthat}\n\n\nmean1 &lt;- function(x) mean(x)\nmean2 &lt;- function(x) sum(x) / length(x)\nx &lt;- runif(1e5)\nbench::mark( #verifies outputs to be the same\n  mean1(x),\n  mean2(x)\n)[c(\"expression\", \"min\", \"median\", \"mem_alloc\")]\n\n#&gt; # A tibble: 2 √ó 4\n#&gt;   expression      min   median mem_alloc\n#&gt;   &lt;bch:expr&gt; &lt;bch:tm&gt; &lt;bch:tm&gt; &lt;bch:byt&gt;\n#&gt; 1 mean1(x)    143.7¬µs  181.8¬µs    23.3KB\n#&gt; 2 mean2(x)     68.9¬µs   86.8¬µs        0B"
  },
  {
    "objectID": "slides/24.html#utilize-usethis-and-devtools-for-developing-and-testing-functions",
    "href": "slides/24.html#utilize-usethis-and-devtools-for-developing-and-testing-functions",
    "title": "Improving performance",
    "section": "Utilize {usethis} and {devtools} for developing and testing functions",
    "text": "Utilize {usethis} and {devtools} for developing and testing functions\n\n\n\n \n\n\n\n\nCreate a project/package directory manually or with usetihs::create_package()\nRevise functions within R scripts in an R folder\nUse devtools::load_all() to load and use functions\nRepeat #2-4"
  },
  {
    "objectID": "slides/24.html#online-resources-and-communities-can-provide-existing-solutions-or-new-coding-approaches",
    "href": "slides/24.html#online-resources-and-communities-can-provide-existing-solutions-or-new-coding-approaches",
    "title": "Improving performance",
    "section": "Online resources and communities can provide existing solutions or new coding approaches",
    "text": "Online resources and communities can provide existing solutions or new coding approaches\n\nAfter exhausting options at hand, online resources can provide new approaches not thought of.\nAlternatively, reframe the problem to find solutions e.g.¬†new paradigm\nTalking to peers helps brainstorm solutions and reframe the problem\nLearning broadly improves your ability to dissect problems and develop solutions"
  },
  {
    "objectID": "slides/24.html#functions-arguments-and-data-types-should-factor-into-code-optimization-for-the-problem-at-hand.",
    "href": "slides/24.html#functions-arguments-and-data-types-should-factor-into-code-optimization-for-the-problem-at-hand.",
    "title": "Improving performance",
    "section": "Functions, arguments, and data types should factor into code optimization for the problem at hand.",
    "text": "Functions, arguments, and data types should factor into code optimization for the problem at hand.\n\nUse vectorisationPrespecify outputsTest equally versus set inclusionAvoid method dispatch\n\n\n\nX &lt;- matrix(1:1e6,nrow=100)\nbench::mark(\n  colMeans(X),\n  apply(X,2,function(x)sum(x) / length(x))\n)[c(\"expression\", \"min\", \"median\", \"mem_alloc\")]\n\n#&gt; # A tibble: 2 √ó 4\n#&gt;   expression                                     min   median mem_alloc\n#&gt;   &lt;bch:expr&gt;                                &lt;bch:tm&gt; &lt;bch:tm&gt; &lt;bch:byt&gt;\n#&gt; 1 colMeans(X)                                559.6¬µs  711.7¬µs    99.3KB\n#&gt; 2 apply(X, 2, function(x) sum(x)/length(x))   15.1ms   17.3ms    12.6MB\n\n\n\n\n\nNote: same speed but vapply allocates less memory\n\n\nX &lt;- rep(list(1:1e4),1e4)\nbench::mark(\n  vapply(X,mean,numeric(1)),\n  sapply(X,mean)\n)[c(\"expression\", \"min\", \"median\", \"mem_alloc\")]\n\n#&gt; # A tibble: 2 √ó 4\n#&gt;   expression                       min   median mem_alloc\n#&gt;   &lt;bch:expr&gt;                  &lt;bch:tm&gt; &lt;bch:tm&gt; &lt;bch:byt&gt;\n#&gt; 1 vapply(X, mean, numeric(1))    498ms    500ms    78.2KB\n#&gt; 2 sapply(X, mean)                510ms    510ms   362.6KB\n\n\n\n\n\nNote: any is faster and allocates less memory than %in%\n\n\nX &lt;- 1:1e8\nbench::mark(\n  any(X == 1450), # .Internal\n  1450 %in% X\n)[c(\"expression\", \"min\", \"median\", \"mem_alloc\")]\n\n#&gt; # A tibble: 2 √ó 4\n#&gt;   expression          min   median mem_alloc\n#&gt;   &lt;bch:expr&gt;     &lt;bch:tm&gt; &lt;bch:tm&gt; &lt;bch:byt&gt;\n#&gt; 1 any(X == 1450)    262ms    291ms  762.94MB\n#&gt; 2 1450 %in% X       446ms    459ms    1.12GB\n\n\n\n\nNote: marginal optimization\n\nx &lt;- runif(1e4)\n\nbench::mark(\n  mean(x),\n  mean.default(x)\n)[c(\"expression\", \"min\", \"median\", \"mem_alloc\")]\n\n#&gt; # A tibble: 2 √ó 4\n#&gt;   expression           min   median mem_alloc\n#&gt;   &lt;bch:expr&gt;      &lt;bch:tm&gt; &lt;bch:tm&gt; &lt;bch:byt&gt;\n#&gt; 1 mean(x)           17.4¬µs   21.7¬µs        0B\n#&gt; 2 mean.default(x)   14.8¬µs   18.8¬µs        0B"
  },
  {
    "objectID": "slides/24.html#using-vectorised-code-often-leads-to-optimized-code",
    "href": "slides/24.html#using-vectorised-code-often-leads-to-optimized-code",
    "title": "Improving performance",
    "section": "Using vectorised code often leads to optimized code",
    "text": "Using vectorised code often leads to optimized code\n\nVectorisation:\n\nAct on entire vector, not element-by-element\nUse an R function implemented in C\n\nMatrix algebra functions are a great example of vectorisation\nThe help documentation can lead you to a vectorised solution\nPerforming operations at the scale of your problem shows actual versus expected optimizations"
  },
  {
    "objectID": "slides/24.html#preallocating-vectors-avoids-copying-and-improves-performance",
    "href": "slides/24.html#preallocating-vectors-avoids-copying-and-improves-performance",
    "title": "Improving performance",
    "section": "Preallocating vectors avoids copying and improves performance",
    "text": "Preallocating vectors avoids copying and improves performance\n\nrandom_string &lt;- function() {\n  paste(sample(letters, 50, replace = TRUE), collapse = \"\")\n}\nstrings10 &lt;- replicate(10, random_string())\nstrings100 &lt;- replicate(100, random_string())\ncollapse &lt;- function(xs) {\n  out &lt;- \"\"\n  for (x in xs) { out &lt;- paste0(out, x) }\n  out\n}\nbench::mark(\n  loop10  = collapse(strings10),\n  loop100 = collapse(strings100),\n  vec10   = paste(strings10, collapse = \"\"),\n  vec100  = paste(strings100, collapse = \"\"),\n  check = FALSE\n)[c(\"expression\", \"min\", \"median\", \"mem_alloc\", \"n_gc\")]\n\n#&gt; # A tibble: 4 √ó 4\n#&gt;   expression      min   median mem_alloc\n#&gt;   &lt;bch:expr&gt; &lt;bch:tm&gt; &lt;bch:tm&gt; &lt;bch:byt&gt;\n#&gt; 1 loop10       15.8¬µs   20.7¬µs    15.5KB\n#&gt; 2 loop100     438.1¬µs  530.1¬µs   251.5KB\n#&gt; 3 vec10           3¬µs    3.6¬µs        0B\n#&gt; 4 vec100       16.4¬µs     20¬µs      848B"
  },
  {
    "objectID": "slides/24.html#most-data-analysis-projects-ask-to-compare-the-means-between-two-groups",
    "href": "slides/24.html#most-data-analysis-projects-ask-to-compare-the-means-between-two-groups",
    "title": "Improving performance",
    "section": "Most data analysis projects ask to compare the means between two groups",
    "text": "Most data analysis projects ask to compare the means between two groups\n\nProblem StatementData\n\n\n\nThough better statistics exist, Student‚Äôs t test is often asked for\nMany tests need to be performed, often in the thousands or more\nSpeed can take precedent over safety given the dozens of projects with this problem\nCorrectness is a key requirement\n\n\n\n\nm &lt;- 100\nn &lt;- 1000\nX &lt;- matrix(rnorm(m * n, mean = 10, sd = 3), nrow = m)\ngrp &lt;- rep(1:2, each = m / 2)"
  },
  {
    "objectID": "slides/24.html#we-can-leverage-our-strategies-to-compute-many-t-tests",
    "href": "slides/24.html#we-can-leverage-our-strategies-to-compute-many-t-tests",
    "title": "Improving performance",
    "section": "We can leverage our strategies to compute many t-tests",
    "text": "We can leverage our strategies to compute many t-tests\n\nBase CaseNo copyingNo dispatchingMatrix algebraVectorise\n\n\n\nttest_base &lt;- function(x,groups) {\n  vec &lt;- double()\n  for(i in 1:ncol(x)) {\n    veci &lt;- t.test(x[groups == 1, i], x[groups == 2, i])[['statistic']]\n    vec &lt;- c(vec,veci)\n  }\n  unname(vec)\n}\n\n\n\n\nttest_nocopy &lt;- function(x,groups) {\n  purrr::map_dbl(\n    1:ncol(x),\n    function(i) {\n      t.test(x[groups == 1, i], x[groups == 2, i])[['statistic']]\n    }\n  )\n}\n\n\n\n\nttest_nodispatch &lt;- function(x,groups) {\n  purrr::map_dbl(\n    1:ncol(x),\n    function(i) {\n      stats:::t.test.default(x[groups == 1, i], x[groups == 2, i])[['statistic']]\n    }\n  )\n}\n\n\n\n\nttest_malgebra &lt;- function(x, groups) {\n  t_stat &lt;- function(x) {\n    m &lt;- mean(x); n &lt;- length(x)\n    var &lt;- sum((x - m) ^ 2) / (n - 1)\n    list(m = m, n = n, var = var)\n  }\n  purrr::map_dbl(\n    1:ncol(x),\n    function(i) {\n      g1 &lt;- t_stat(x[groups == 1,i]); g2 &lt;- t_stat(x[groups == 2,i])\n      se_total &lt;- sqrt(g1$var / g1$n + g2$var / g2$n)\n      (g1$m - g2$m) / se_total\n    }\n  )\n}\n\n\n\n\nttest_vectorise &lt;- function(x, groups) {\n  x1 &lt;- x[groups == 1, , drop = FALSE]\n  x2 &lt;- x[groups == 2, , drop = FALSE]\n  n1 &lt;- nrow(x1)\n  n2 &lt;- nrow(x2)\n  m1 &lt;- Matrix::colMeans(x1)\n  m2 &lt;- Matrix::colMeans(x2)\n  v1 &lt;- Matrix::colSums(\n    (x1 - matrix(m1, n1, ncol(x), byrow = TRUE)\n  )^2) / (nrow(x1) - 1)\n  v2 &lt;- Matrix::colSums(\n    (x2 - matrix(m2, n2, ncol(x), byrow = TRUE)\n  )^2) / (nrow(x2) - 1)\n  se_total &lt;- sqrt(v1 / n1 + v2 / n2)\n  (m1 - m2) / se_total\n}"
  },
  {
    "objectID": "slides/24.html#we-can-identify-optimal-code-by-evaluating-different-t-test-strategies",
    "href": "slides/24.html#we-can-identify-optimal-code-by-evaluating-different-t-test-strategies",
    "title": "Improving performance",
    "section": "We can identify optimal code by evaluating different t-test strategies",
    "text": "We can identify optimal code by evaluating different t-test strategies\n\nbench::mark(\n  ttest_base(X,grp),\n  ttest_nocopy(X,grp),\n  ttest_nodispatch(X,grp),\n  ttest_malgebra(X,grp),\n  ttest_vectorise(X,grp)\n)[c(\"expression\", \"min\", \"median\", \"mem_alloc\", \"n_gc\")]\n\n#&gt; # A tibble: 5 √ó 4\n#&gt;   expression                    min   median mem_alloc\n#&gt;   &lt;bch:expr&gt;               &lt;bch:tm&gt; &lt;bch:tm&gt; &lt;bch:byt&gt;\n#&gt; 1 ttest_base(X, grp)         89.9ms     93ms    13.7MB\n#&gt; 2 ttest_nocopy(X, grp)         84ms   85.3ms    6.48MB\n#&gt; 3 ttest_nodispatch(X, grp)   76.4ms   76.7ms    5.82MB\n#&gt; 4 ttest_malgebra(X, grp)     10.8ms   13.6ms    4.02MB\n#&gt; 5 ttest_vectorise(X, grp)   490.8¬µs    785¬µs   99.38MB"
  },
  {
    "objectID": "slides/22.html#learning-objectives",
    "href": "slides/22.html#learning-objectives",
    "title": "Debugging",
    "section": "Learning objectives:",
    "text": "Learning objectives:\n\nOverall: Find and fix errors.\nLocate exactly where an error occurred with the traceback() function.\nPause the execution of a function and launch an environment to interactively explore what‚Äôs happening.\nDebug non-interactively executed code.\nRecognize other (non-error) problems that occasionally also need debugging."
  },
  {
    "objectID": "slides/22.html#types-of-errors",
    "href": "slides/22.html#types-of-errors",
    "title": "Debugging",
    "section": "Types of errors",
    "text": "Types of errors\n\nParsing errors: you are missing a closing ), } or \" so the code AST cannot even be formed\n\nUsually captured by IDEs such as RStudio and Positron with red flashing pointers\n\nSyntax errors:\n\nParentheses are matched but one of them closes at wrong time\nThe name of a function input is misspelled\nPassing more inputs to a function than it expects\n\nRuntime errors: the code is syntactically correct, but it does a weird thing in your actual environment with your actual data"
  },
  {
    "objectID": "slides/22.html#we-want-to-subset-our-closures",
    "href": "slides/22.html#we-want-to-subset-our-closures",
    "title": "Debugging",
    "section": "We want to subset our closures!!!",
    "text": "We want to subset our closures!!!\nAnd then of course there‚Äôs this classic:\n\nExplanation: df is a closure, in this case, the function stats::df(), the density of F-distribution. (It is not a data frame, as you thought it was, ha!) It does not have elements that you could subset."
  },
  {
    "objectID": "slides/22.html#google-first",
    "href": "slides/22.html#google-first",
    "title": "Debugging",
    "section": "Google first!",
    "text": "Google first!\n\nGoogle new error messages to help translate\nPackages that help:\n\n{errorist}\n{searcher}\nProbably AI agents after 2026"
  },
  {
    "objectID": "slides/22.html#repeatable-bugs-are-more-debuggable",
    "href": "slides/22.html#repeatable-bugs-are-more-debuggable",
    "title": "Debugging",
    "section": "Repeatable bugs are more debuggable",
    "text": "Repeatable bugs are more debuggable\n\nMay need to execute many times\nUp-front investment to make a minimal {reprex} pays off"
  },
  {
    "objectID": "slides/22.html#use-the-scientific-method-to-find-bugs",
    "href": "slides/22.html#use-the-scientific-method-to-find-bugs",
    "title": "Debugging",
    "section": "Use the scientific method to find bugs",
    "text": "Use the scientific method to find bugs\n\nGenerate a hypothesis.\nDesign experiments to test that hypothesis.\nRecord your results.\n\nBeing systematic often saves time in the end."
  },
  {
    "objectID": "slides/22.html#automated-tests-help",
    "href": "slides/22.html#automated-tests-help",
    "title": "Debugging",
    "section": "Automated tests help",
    "text": "Automated tests help\n\nAdd tests for nearby working code to avoid new bugs.\nAdd tests for specific broken cases.\nAdd tests for hypotheses.\n\nConcepts of unit tests are generally associated with R package development, see chapters on testing in ‚ÄúWriting R Packages‚Äù.\n\nAutomated testing sometimes brings a dilemma: you add something to a working function, and the stuff that you added does work according to the new tests, but an old test gets broken. This is may not be an error per se, but it shows a gap in your knowledge of and assumptions about the code (see Norm Matloff‚Äôs quote above) and you have to deal with that one way or another."
  },
  {
    "objectID": "slides/22.html#common-syntax-errors",
    "href": "slides/22.html#common-syntax-errors",
    "title": "Debugging",
    "section": "Common syntax errors",
    "text": "Common syntax errors\nLonger list here\n\nParenthesis mismatches\n[[...]] vs.¬†[...]\n== vs.¬†=\nComparing real numbers exactly using == after calculations that result in non-integers\nYou expect a single value but your code gives you a vector\n\nYou may need identical() or all(), or form the condition more thoroughly\n\n\n\n\nType coercion and dropping dimensions\n\n\ninherits(mtcars[,1], \"data.frame\")\n\n#&gt; [1] FALSE\n\ninherits(mtcars[,1, drop=FALSE], \"data.frame\")\n\n#&gt; [1] TRUE"
  },
  {
    "objectID": "slides/22.html#example-chained-functions",
    "href": "slides/22.html#example-chained-functions",
    "title": "Debugging",
    "section": "Example: Chained functions",
    "text": "Example: Chained functions"
  },
  {
    "objectID": "slides/22.html#traceback-shows-the-call-stack-that-lead-to-the-error",
    "href": "slides/22.html#traceback-shows-the-call-stack-that-lead-to-the-error",
    "title": "Debugging",
    "section": "traceback() shows the call stack that lead to the error",
    "text": "traceback() shows the call stack that lead to the error\nClick ‚ÄúShow traceback‚Äù:: \nRead bottom to top.\n\n\nf() calls g() calls h() calls i()\nrlang::global_handle() for better traceback."
  },
  {
    "objectID": "slides/22.html#traceback-is-confusing-with-lazy-evaluation",
    "href": "slides/22.html#traceback-is-confusing-with-lazy-evaluation",
    "title": "Debugging",
    "section": "traceback() is confusing with lazy evaluation",
    "text": "traceback() is confusing with lazy evaluation\n\n\n\n\nj() isn‚Äôt evaluated until it gets to i().\nI honestly don‚Äôt find this example all that confusing."
  },
  {
    "objectID": "slides/22.html#traceback-limits",
    "href": "slides/22.html#traceback-limits",
    "title": "Debugging",
    "section": "traceback() limits",
    "text": "traceback() limits\nIn real world, traceback may look like 25 layers\n\nYour code is the first 2-3 layers.\nThe last 5 layers are very clearly formatting the error and making a safe return of appropriate objects.\nThe middle 15 layers are classes and methods of dplyr, rlang, purrr and base and maybe packages you have never heard of, passing very opaque things to one another, your informatively named objects are abstracted somewhere in ..., .x and envir‚Ä¶\n‚Ä¶ and you are still left wondering what‚Äôs going on."
  },
  {
    "objectID": "slides/22.html#rlangglobal_handle-in-.rprofile-makes-traceback-better",
    "href": "slides/22.html#rlangglobal_handle-in-.rprofile-makes-traceback-better",
    "title": "Debugging",
    "section": "rlang::global_handle() in .Rprofile makes traceback better",
    "text": "rlang::global_handle() in .Rprofile makes traceback better\n\n\n\nrlang::with_abort() from book no longer exists\nI‚Äôm now experimenting with turning this off, because it breaks ‚Äúrerun with debug‚Äù!"
  },
  {
    "objectID": "slides/22.html#rstudio-has-tools-for-debugging",
    "href": "slides/22.html#rstudio-has-tools-for-debugging",
    "title": "Debugging",
    "section": "RStudio has tools for debugging",
    "text": "RStudio has tools for debugging\n\nClick ‚ÄúRerun with Debug‚Äù in error message\nEnable Debug &gt; On Error &gt; Break in Code to always jump to error"
  },
  {
    "objectID": "slides/22.html#use-browser-to-set-a-break-point-in-code",
    "href": "slides/22.html#use-browser-to-set-a-break-point-in-code",
    "title": "Debugging",
    "section": "Use browser() to set a break point in code",
    "text": "Use browser() to set a break point in code"
  },
  {
    "objectID": "slides/22.html#browser-can-be-conditional",
    "href": "slides/22.html#browser-can-be-conditional",
    "title": "Debugging",
    "section": "browser() can be conditional",
    "text": "browser() can be conditional\n\nA better practice would be to define your own debugging flags that would be turned off or disappear in production code\nif (exists(\"my_debugging_flag\")) browser()"
  },
  {
    "objectID": "slides/22.html#browser-provides-special-commands",
    "href": "slides/22.html#browser-provides-special-commands",
    "title": "Debugging",
    "section": "browser() provides special commands",
    "text": "browser() provides special commands\nThese commands work in the Console; RStudio also makes the toolbar buttons available.\n\n\nNext (n): Execute the next step\nStep into (s): Dive into function (or n)\nFinish (f): Finish execution of the current loop/function\nContinue (c): Continue regular execution of the function (leave interactive)\nStop (Q): Stop debugging, terminate the function, and return to the global workspace"
  },
  {
    "objectID": "slides/22.html#browser-practical-tips",
    "href": "slides/22.html#browser-practical-tips",
    "title": "Debugging",
    "section": "browser() practical tips",
    "text": "browser() practical tips\n\nRStudio runs its best attempt to show the code that is being executed in the ‚ÄúSource‚Äù pane\n\nparsed AST for external functions (no comments, no indents);\nactual source files within your packages when you are in the package project.\n\nThat means you can select the code and Ctrl+Enter to execute it\n\nif in doubt about the source of the error, do that rather than hitting n ‚ÄúNext‚Äù\nespecially if the computations leading to this point in your code are costly in terms of time"
  },
  {
    "objectID": "slides/22.html#set-breakpoints-in-rstudio-for-virtual-browser",
    "href": "slides/22.html#set-breakpoints-in-rstudio-for-virtual-browser",
    "title": "Debugging",
    "section": "Set breakpoints in RStudio for virtual browser()",
    "text": "Set breakpoints in RStudio for virtual browser()\nActivate:\n\nClick to left of line number, or\nPress Shift + F9\n\nDownsides:\n\nFail in unusual situations\nCan‚Äôt be conditional"
  },
  {
    "objectID": "slides/22.html#use-optionserror-recover-for-interactive-debugging-prompt",
    "href": "slides/22.html#use-optionserror-recover-for-interactive-debugging-prompt",
    "title": "Debugging",
    "section": "Use options(error = recover) for interactive debugging prompt",
    "text": "Use options(error = recover) for interactive debugging prompt\n\nTurn off with options(error = NULL)"
  },
  {
    "objectID": "slides/22.html#debugfn_name-to-insert-browser-in-first-line-of-fn_name",
    "href": "slides/22.html#debugfn_name-to-insert-browser-in-first-line-of-fn_name",
    "title": "Debugging",
    "section": "debug(fn_name) to insert browser() in first line of fn_name()",
    "text": "debug(fn_name) to insert browser() in first line of fn_name()\n\nundebug(fn_name) to remove it\ndebugonce(fn_name) to do it once (similar to rerun with debug)\nutils::setBreakpoint(\"file_name\", line_number)\n\n\n\nPronounce debugonce() like ‚ÄúBeyonce‚Äù"
  },
  {
    "objectID": "slides/22.html#call-stacks-printed-by-traceback-browser-where-and-recover-are-not-consistent",
    "href": "slides/22.html#call-stacks-printed-by-traceback-browser-where-and-recover-are-not-consistent",
    "title": "Debugging",
    "section": "Call stacks printed by traceback(), browser() & where, and recover() are not consistent",
    "text": "Call stacks printed by traceback(), browser() & where, and recover() are not consistent\n\n\nRStudio displays calls in the same order as traceback()\n{rlang} functions use the same ordering & numbering as recover()\n\nAlso indent to reinforce hierarchy"
  },
  {
    "objectID": "slides/22.html#use-callrr-or-fresh-start-to-look-for-differences",
    "href": "slides/22.html#use-callrr-or-fresh-start-to-look-for-differences",
    "title": "Debugging",
    "section": "Use callr::r() or fresh start to look for differences",
    "text": "Use callr::r() or fresh start to look for differences\ncallr::r(f, list(1, 2)) calls f(1, 2) in a fresh session\n\nGlobal env\nPackages\nObject\nWorking directory\nPATH environment variable\nR_LIBS environment variable"
  },
  {
    "objectID": "slides/22.html#dump.frames-is-the-equivalent-to-recover-for-non-interactive-code.",
    "href": "slides/22.html#dump.frames-is-the-equivalent-to-recover-for-non-interactive-code.",
    "title": "Debugging",
    "section": "dump.frames() is the equivalent to recover() for non-interactive code.",
    "text": "dump.frames() is the equivalent to recover() for non-interactive code."
  },
  {
    "objectID": "slides/22.html#print-debugging-can-help-if-nothing-else-works",
    "href": "slides/22.html#print-debugging-can-help-if-nothing-else-works",
    "title": "Debugging",
    "section": "Print debugging can help if nothing else works",
    "text": "Print debugging can help if nothing else works"
  },
  {
    "objectID": "slides/22.html#debugging-withing-packages",
    "href": "slides/22.html#debugging-withing-packages",
    "title": "Debugging",
    "section": "Debugging withing packages",
    "text": "Debugging withing packages\nRecall Chapter 8 on classed conditions:\n\nyou can create richer structured objects with\n\nrlang::abort(\n  message = \"cli-formatted-message\",\n  class   = \"your-special-class-to-distinguish-from-other-errors\",\n  ...\n)\n\nyou can pass your situation report in ... so that error handlers and/or reporters can more effectively peek into your environment that errored\nyou can capture the class with testthat::expect_s3_class()"
  },
  {
    "objectID": "slides/22.html#debugging-rmarkdownquarto-has-challenges",
    "href": "slides/22.html#debugging-rmarkdownquarto-has-challenges",
    "title": "Debugging",
    "section": "Debugging Rmarkdown/Quarto has challenges",
    "text": "Debugging Rmarkdown/Quarto has challenges\n\nCall rmarkdown::render(\"path/to/file.Rmd\") instead of IDE knitting.\n\ndownside: the content of your current environment propagates into the markdown code\n\nUse sink() for tricksy error handling\n\n\nSee also ‚ÄúMarkdown test drive‚Äù in Jenny Bryan‚Äôs Happy Git With R book."
  },
  {
    "objectID": "slides/22.html#functions-can-fail-without-errors",
    "href": "slides/22.html#functions-can-fail-without-errors",
    "title": "Debugging",
    "section": "Functions can fail without errors",
    "text": "Functions can fail without errors\n\nUnexpected warning: options(warn = 2) turns warnings into errors.\nUnexpected message: Proposed solution in book no longer available.\nFunction might never return. Terminate & traceback().\nCrashed R = bug in compiled (C, C++, etc) code."
  },
  {
    "objectID": "slides/22.html#some-useful-resources-on-debugging",
    "href": "slides/22.html#some-useful-resources-on-debugging",
    "title": "Debugging",
    "section": "Some useful resources on debugging",
    "text": "Some useful resources on debugging\n\n‚ÄúObject of type closure is not subsettable‚Äù (Jenny Bryan, rstudio::conf(2020))\n‚ÄúWhat They Forgot to Teach You About R‚Äù Chapter 12 (by Jenny Bryan and Jim Hester)\nMinimal reprex for a shiny app (video by Hadley)\nDebugging in RStudio, by Posit\nIf you have access to ‚ÄúCode Complete‚Äù, it provides generic debugging principles that are meant to be applicable across programming languages"
  },
  {
    "objectID": "slides/20.html#learning-objectives",
    "href": "slides/20.html#learning-objectives",
    "title": "Evaluation",
    "section": "Learning objectives:",
    "text": "Learning objectives:\n\nLearn evaluation basics\nLearn about quosures and data mask\nUnderstand tidy evaluation\n\n\nlibrary(rlang)\nlibrary(purrr)"
  },
  {
    "objectID": "slides/20.html#a-bit-of-a-recap",
    "href": "slides/20.html#a-bit-of-a-recap",
    "title": "Evaluation",
    "section": "A bit of a recap",
    "text": "A bit of a recap\n\nMetaprogramming: To separate our description of the action from the action itself\n\nSeparate the code from its evaluation.\n\nQuasiquotation: combine code written by the function‚Äôs author with code (expressions) written by the function‚Äôs user.\n\nUnquotation: gives the user the ability to evaluate parts of a quoted argument.\nEvaluation: gives the developer the ability to evaluate quoted expression in custom environments.\n\n\nNon-standard evaluation (NSE): dealing with expressions as function inputs in base R.\nTidy evaluation: quasiquotation, quosures and data masks."
  },
  {
    "objectID": "slides/20.html#evaluation-basics",
    "href": "slides/20.html#evaluation-basics",
    "title": "Evaluation",
    "section": "Evaluation basics",
    "text": "Evaluation basics\nWe use base::eval() to evaluate, run, or execute expressions. It requires two arguments:\n\nexpr: the object to evaluate, either an expression or a symbol.\nenvir: the environment in which to evaluate the expression or where to look for the values. Defaults to current environment (techncially parent.frame() which is the environment that eval() was called from).\n\n\nsumexpr &lt;- expr(x + y)\nx &lt;- 10\ny &lt;- 40\neval(sumexpr)\n\n#&gt; [1] 50\n\n\n\neval(sumexpr, envir = env(x = 1000, y = 10))\n\n#&gt; [1] 1010"
  },
  {
    "objectID": "slides/20.html#application-reimplementing-source",
    "href": "slides/20.html#application-reimplementing-source",
    "title": "Evaluation",
    "section": "Application: reimplementing source()",
    "text": "Application: reimplementing source()\nWhat do we need?\n\nRead the file being sourced.\nParse its expressions (think: do we need to quote them?)\nEvaluate each expression saving the results\nReturn the results (result of the last expression)\n\n\nsource2 &lt;- function(path, env = caller_env()) {\n  file &lt;- paste(readLines(path, warn = FALSE), collapse = \"\\n\")\n  exprs &lt;- parse_exprs(file)\n\n  res &lt;- NULL\n  for (i in seq_along(exprs)) {\n    res &lt;- eval(exprs[[i]], env)\n  }\n\n  invisible(res)\n}\n\nThe real source is much more complex."
  },
  {
    "objectID": "slides/20.html#quosures-1",
    "href": "slides/20.html#quosures-1",
    "title": "Evaluation",
    "section": "Quosures (1)",
    "text": "Quosures (1)\neval() needs both the code and the environment to run the code in.\nquosures are a data structure from rlang containing both the expression and the environment.\nQuoting + closure because it quotes the expression and encloses the environment.\nThree ways to create quosures, in the upcoming slides."
  },
  {
    "objectID": "slides/20.html#quosures-2",
    "href": "slides/20.html#quosures-2",
    "title": "Evaluation",
    "section": "Quosures (2)",
    "text": "Quosures (2)\nUsed mostly for learning: new_quosure(), creates a quosure from its components.\n\nq1 &lt;- rlang::new_quosure(expr(x + y), \n                         env(x = 1, y = 10))"
  },
  {
    "objectID": "slides/20.html#quosures-3",
    "href": "slides/20.html#quosures-3",
    "title": "Evaluation",
    "section": "Quosures (3)",
    "text": "Quosures (3)\nUsed in the real world: enquo() or enquos(), to capture user supplied expressions. They take the environment from where they are created.\n\nfoo &lt;- function(x) enquo(x)\nquo_foo &lt;- foo(a + b)\n\n\nget_expr(quo_foo)\n\n#&gt; a + b\n\nget_env(quo_foo)\n\n#&gt; &lt;environment: R_GlobalEnv&gt;"
  },
  {
    "objectID": "slides/20.html#quosures-4",
    "href": "slides/20.html#quosures-4",
    "title": "Evaluation",
    "section": "Quosures (4)",
    "text": "Quosures (4)\nAlmost never used: quo() and quos(), to match to expr() and exprs()."
  },
  {
    "objectID": "slides/20.html#evaluation-eval_tidy",
    "href": "slides/20.html#evaluation-eval_tidy",
    "title": "Evaluation",
    "section": "Evaluation: eval_tidy()",
    "text": "Evaluation: eval_tidy()\nThe purpose of the concept of quosure is to be able to pass a single object to rlang::eval_tidy(), as opposed to the expression-environment pair, as required for base::eval():\n\nrlang::eval_tidy(q1)\n\n#&gt; [1] 11\n\n\nGet the quosure components if you need them:\n\nrlang::get_expr(q1)\n\n#&gt; x + y\n\nrlang::get_env(q1)\n\n#&gt; &lt;environment: 0x0000027140d5c6c8&gt;\n\n\nOr set them\n\nq1 &lt;- set_env(q1, env(x = 3, y = 4))\neval_tidy(q1)\n\n#&gt; [1] 7"
  },
  {
    "objectID": "slides/20.html#quosures-and",
    "href": "slides/20.html#quosures-and",
    "title": "Evaluation",
    "section": "Quosures and ‚Ä¶",
    "text": "Quosures and ‚Ä¶\nQuosures are just a convenience, but they are essential when it comes to working with ..., because you can have different arguments from ... associated with different environments.\n\ng &lt;- function(...) {\n  ## Creating our quosures from ...\n  enquos(...)\n}\n\ncreateQuos &lt;- function(...) {\n  ## symbol from the function environment\n  x &lt;- 1\n  g(..., f = x)\n}\n\n\n## symbol from the global environment\nx &lt;- 0\nqs &lt;- createQuos(global = x)\nqs\n\n#&gt; &lt;list_of&lt;quosure&gt;&gt;\n#&gt; \n#&gt; $global\n#&gt; &lt;quosure&gt;\n#&gt; expr: ^x\n#&gt; env:  global\n#&gt; \n#&gt; $f\n#&gt; &lt;quosure&gt;\n#&gt; expr: ^x\n#&gt; env:  0x00000271438a6388"
  },
  {
    "objectID": "slides/20.html#other-facts-about-quosures",
    "href": "slides/20.html#other-facts-about-quosures",
    "title": "Evaluation",
    "section": "Other facts about quosures",
    "text": "Other facts about quosures\nFormulas were the predecessor and inspiration for quosures because they also capture an expression and an environment.\n\nf &lt;- ~runif(3)\nstr(f)\n\n#&gt; Class 'formula'  language ~runif(3)\n#&gt;   ..- attr(*, \".Environment\")=&lt;environment: R_GlobalEnv&gt;\n\n\n(This creates weird problems when functions return formulas, which in turn may drag the entire GlobalEnv with them. Have 10Gb worth of objects in there? Let‚Äôs store them all!!!)\nThere was an early version of tidy evaluation with formulas, but there‚Äôs no easy way to implement quasiquotation with them.\nThey are actually call objects\n\nq4 &lt;- new_quosure(expr(x + y + z))\nclass(q4)\n\n#&gt; [1] \"quosure\" \"formula\"\n\nis.call(q4)\n\n#&gt; [1] TRUE\n\n\nwith an attribute to store the environment\n\nattr(q4, \".Environment\")\n\n#&gt; &lt;environment: R_GlobalEnv&gt;"
  },
  {
    "objectID": "slides/20.html#nested-quosures",
    "href": "slides/20.html#nested-quosures",
    "title": "Evaluation",
    "section": "Nested quosures",
    "text": "Nested quosures\nWith quosiquotation we can embed quosures in expressions.\n\nq2 &lt;- new_quosure(expr(x), env(x = 1))\nq3 &lt;- new_quosure(expr(x), env(x = 100))\n\nnq &lt;- expr(!!q2 + !!q3)\n\nAnd evaluate them:\n\neval_tidy(nq)\n\n#&gt; [1] 101\n\n\nDisplay: it is better to use expr_print(x) (note the subtle color differences indicating that the different xs come from different environments).\n\nexpr_print(nq)\n\n#&gt; (^x) + (^x)\n\nnq\n\n#&gt; (~x) + ~x"
  },
  {
    "objectID": "slides/20.html#data-mask-1",
    "href": "slides/20.html#data-mask-1",
    "title": "Evaluation",
    "section": "Data mask (1)",
    "text": "Data mask (1)\nData mask is a special type of quosure where the target environment is a data frame. Thus the evaluated code will look first for the columns in the specified data frame.\nUsed in packages like dplyr and ggplot2.\nSupply the data mask as a second argument to eval_tidy():\n\nq1 &lt;- new_quosure(expr(x * y), env(x = 100))\ndf &lt;- data.frame(y = 1:10)\n\neval_tidy(q1, df)\n\n#&gt;  [1]  100  200  300  400  500  600  700  800  900 1000"
  },
  {
    "objectID": "slides/20.html#data-mask-2",
    "href": "slides/20.html#data-mask-2",
    "title": "Evaluation",
    "section": "Data mask (2)",
    "text": "Data mask (2)\nReimplementing base::with() for the purposes of working with a data.frame:\n\nwith2 &lt;- function(data, expr) {\n  expr &lt;- enquo(expr)\n  eval_tidy(expr, data)\n}\n\nBut we need to create the objects that are not part of our data mask\n\nx &lt;- 100\nwith(df, x * y)\n\n#&gt;  [1]  100  200  300  400  500  600  700  800  900 1000\n\nwith2(df, x * y)\n\n#&gt;  [1]  100  200  300  400  500  600  700  800  900 1000"
  },
  {
    "objectID": "slides/20.html#data-mask-3",
    "href": "slides/20.html#data-mask-3",
    "title": "Evaluation",
    "section": "Data mask (3)",
    "text": "Data mask (3)\nAlso doable with base::eval() instead of rlang::eval_tidy() but a strict base implementation would need to use base::substitute() instead of enquo() (like we did for enexpr()) , and we need to specify the environment.\n\nwith3 &lt;- function(data, expr) {\n  expr &lt;- substitute(expr)\n  eval(expr, data, caller_env())\n}\n\n\nwith3(df, x*y)\n\n#&gt;  [1]  100  200  300  400  500  600  700  800  900 1000"
  },
  {
    "objectID": "slides/20.html#reference-ambiguity",
    "href": "slides/20.html#reference-ambiguity",
    "title": "Evaluation",
    "section": "Reference ambiguity",
    "text": "Reference ambiguity\nWhen you write\nwith2(df, y = x)\nDo you mean x as the column in df, or as an object in the environment?\n(devtools::check() finds these and complains about ‚Äòno visible global bindings‚Äô.)\nAn object value can come from the env or from the data\n\nq1 &lt;- new_quosure(expr(x * y + x), env = env(x = 1))\ndf &lt;- data.frame(y = 1:5, \n                 x = 10)\n\neval_tidy(q1, df)\n\n#&gt; [1] 20 30 40 50 60"
  },
  {
    "objectID": "slides/20.html#rlang-pronouns-.data-and-.env",
    "href": "slides/20.html#rlang-pronouns-.data-and-.env",
    "title": "Evaluation",
    "section": "rlang pronouns: .data$ and .env$",
    "text": "rlang pronouns: .data$ and .env$\nrlang provides pronouns:\n\n.data$x: take x from the data mask\n.env$x: take x from the environment\n\n\nq1 &lt;- new_quosure(expr(.data$x * y + .env$x), env = env(x = 1))\neval_tidy(q1, df)\n\n#&gt; [1] 11 21 31 41 51"
  },
  {
    "objectID": "slides/20.html#application-reimplementing-basesubset",
    "href": "slides/20.html#application-reimplementing-basesubset",
    "title": "Evaluation",
    "section": "Application: reimplementing base::subset()",
    "text": "Application: reimplementing base::subset()\nbase::subset() works like dplyr::filter(): it selects rows of a data frame given an expression.\nWhat do we need?\n\nQuote the expression to filter\nFigure out which rows in the data frame pass the filter\nSubset and return the data frame"
  },
  {
    "objectID": "slides/20.html#subset2",
    "href": "slides/20.html#subset2",
    "title": "Evaluation",
    "section": "subset2()",
    "text": "subset2()\n\nsubset2 &lt;- function(data, rows) {\n  rows &lt;- enquo(rows)\n  rows_val &lt;- eval_tidy(rows, data)\n  stopifnot(\"rows argument does not evaluate to a subsetting condition\" = \n    is.logical(rows_val) && length(rows_val)==nrow(data))\n\n  data[rows_val, , drop = FALSE]\n}\n\n\nsample_df &lt;- data.frame(a = 1:5, b = 5:1, c = c(5, 3, 2, 4, 1))\n\n# Shorthand for sample_df[sample_df$b == sample_df$c, ]\nsubset2(sample_df, b == c)\n\n#&gt;   a b c\n#&gt; 1 1 5 5\n#&gt; 5 5 1 1\n\nsubset2(sample_df, 42)\n\n#&gt; Error in `subset2()`:\n#&gt; ! rows argument does not evaluate to a subsetting condition\n\nsubset2(sample_df, TRUE)\n\n#&gt; Error in `subset2()`:\n#&gt; ! rows argument does not evaluate to a subsetting condition"
  },
  {
    "objectID": "slides/20.html#select-columns-1",
    "href": "slides/20.html#select-columns-1",
    "title": "Evaluation",
    "section": "select() columns (1)",
    "text": "select() columns (1)\nLet us implement one more feature of base::subset(select=_some columns_):\n\ndf &lt;- data.frame(a = 1, b = 2, c = 3, d = 4, e = 5)\nsubset(df, select = b:d)\n\n#&gt;   b c d\n#&gt; 1 2 3 4"
  },
  {
    "objectID": "slides/20.html#select2-columns-2",
    "href": "slides/20.html#select2-columns-2",
    "title": "Evaluation",
    "section": "select2() columns (2)",
    "text": "select2() columns (2)\n\nvars &lt;- as.list(set_names(seq_along(df), names(df)))\nstr(vars)\n\n#&gt; List of 5\n#&gt;  $ a: int 1\n#&gt;  $ b: int 2\n#&gt;  $ c: int 3\n#&gt;  $ d: int 4\n#&gt;  $ e: int 5"
  },
  {
    "objectID": "slides/20.html#select2-columns-3",
    "href": "slides/20.html#select2-columns-3",
    "title": "Evaluation",
    "section": "select2() columns (3)",
    "text": "select2() columns (3)\n(base trivia: why do you need drop = FALSE?)\n\nselect2 &lt;- function(data, ...) {\n  dots &lt;- enquos(...)\n\n  vars &lt;- as.list(set_names(seq_along(data), names(data)))\n  cols &lt;- unlist(map(dots, eval_tidy, vars))\n\n  data[, cols, drop = FALSE]\n}\nselect2(df, b:d)\n\n#&gt;   b c d\n#&gt; 1 2 3 4\n\n\ntidyselect helpers: provide more functions that return logical expressions to be added to cols."
  },
  {
    "objectID": "slides/20.html#using-tidy-evaluation",
    "href": "slides/20.html#using-tidy-evaluation",
    "title": "Evaluation",
    "section": "Using tidy evaluation",
    "text": "Using tidy evaluation\nMost of the time we might not do it in our code, but we often end up calling a function that uses eval_tidy() (becoming developer AND user)\nUse case: resample and subset\nWe have a function that resamples a dataset:\n\nresample &lt;- function(df, n) {\n  idx &lt;- sample(nrow(df), n, replace = TRUE)\n  df[idx, , drop = FALSE]\n}\n\n\nresample(sample_df, 10)\n\n#&gt;     a b c\n#&gt; 2   2 4 3\n#&gt; 2.1 2 4 3\n#&gt; 5   5 1 1\n#&gt; 3   3 3 2\n#&gt; 4   4 2 4\n#&gt; 2.2 2 4 3\n#&gt; 2.3 2 4 3\n#&gt; 5.1 5 1 1\n#&gt; 2.4 2 4 3\n#&gt; 3.1 3 3 2\n\n\nBut we also want to use subset and we want to create a function that allow us to resample and subset (with subset2()) in a single step."
  },
  {
    "objectID": "slides/20.html#resample-and-subset-1",
    "href": "slides/20.html#resample-and-subset-1",
    "title": "Evaluation",
    "section": "Resample and subset (1)",
    "text": "Resample and subset (1)\nFirst attempt:\n\nsubsample &lt;- function(df, cond, n = nrow(df)) {\n  df &lt;- subset2(df, cond)\n  resample(df, n)\n}\n\n\nsubsample(sample_df, b == c, 3)\n\n#&gt; Error:\n#&gt; ! object 'b' not found\n\n\nWhat happened?"
  },
  {
    "objectID": "slides/20.html#resample-and-subset-2",
    "href": "slides/20.html#resample-and-subset-2",
    "title": "Evaluation",
    "section": "Resample and subset (2)",
    "text": "Resample and subset (2)\n\nsubsample &lt;- function(df, cond, n = nrow(df)) {\n  df &lt;- subset2(df, cond)\n  resample(df, n)\n}\n\nsubsample() doesn‚Äôt quote any arguments and cond is evaluated normally. The caller environment does not have b and c (or what is worse, if it does, the intent of the condition goes out the window.)\n\nb &lt;- 5\nc &lt;- c(2,3,4)\nsubsample(sample_df, b == c, 3)\n\n#&gt; Error in `subset2()`:\n#&gt; ! rows argument does not evaluate to a subsetting condition"
  },
  {
    "objectID": "slides/20.html#resample-and-subset-3",
    "href": "slides/20.html#resample-and-subset-3",
    "title": "Evaluation",
    "section": "Resample and subset (3)",
    "text": "Resample and subset (3)\nSo we have to quote cond and unquote it when we pass it to subset2()\n\nsubsample &lt;- function(df, cond, n = nrow(df)) {\n  cond &lt;- enquo(cond)\n  df &lt;- subset2(df, !!cond)\n  resample(df, n)\n}\n\n\nsubsample(sample_df, b == c, 3)\n\n#&gt;     a b c\n#&gt; 5   5 1 1\n#&gt; 1   1 5 5\n#&gt; 1.1 1 5 5"
  },
  {
    "objectID": "slides/20.html#ambiguity-with-known-column-names",
    "href": "slides/20.html#ambiguity-with-known-column-names",
    "title": "Evaluation",
    "section": "Ambiguity with ‚Äúknown‚Äù column names",
    "text": "Ambiguity with ‚Äúknown‚Äù column names\nBe careful!, potential ambiguity:\n\nthreshold_x &lt;- function(df, val) {\n  subset2(df, x &gt;= val)\n}\n\nWhat would happen if x exists in the calling environment but doesn‚Äôt exist in df? Or if val also exists in df?\nSo, as developers of threshold_x() and users of subset2(), we have to add disambiguating pronouns:\n\nthreshold_x &lt;- function(df, val) {\n  subset2(df, .data$x &gt;= .env$val)\n}"
  },
  {
    "objectID": "slides/20.html#tidy-eval-summarized",
    "href": "slides/20.html#tidy-eval-summarized",
    "title": "Evaluation",
    "section": "Tidy eval, summarized",
    "text": "Tidy eval, summarized\nThresholding on steroids:\n\nthreshold_expr &lt;- function(df, expr, val) {\n  expr &lt;- enquo(expr)\n  subset2(df, !!expr &gt;= !!val)\n}\n\nIt may not be possible to evaluate expr only in the data mask, because the data mask does not include any functions nor operations like + or ==.\nJust remember:\n\nAs a general rule of thumb, as a function author it‚Äôs your responsibility to avoid ambiguity with any expressions that you create; it‚Äôs the user‚Äôs responsibility to avoid ambiguity in expressions that they create."
  },
  {
    "objectID": "slides/20.html#base-evaluation-substitute",
    "href": "slides/20.html#base-evaluation-substitute",
    "title": "Evaluation",
    "section": "Base evaluation: substitute()",
    "text": "Base evaluation: substitute()\n\nsubset_base &lt;- function(data, rows) {\n  rows &lt;- substitute(rows)      # instead of enquo()\n  rows_val &lt;- eval(rows, data,  # instead of \n                caller_env())   #  eval_tidy()\n  stopifnot(is.logical(rows_val))\n\n  data[rows_val, , drop = FALSE]\n}\n\nThe base world forces us to evaluate in the caller environment rather in the environment where it is defined (quosure); loss of flexibility."
  },
  {
    "objectID": "slides/20.html#base-evaluation-match.call",
    "href": "slides/20.html#base-evaluation-match.call",
    "title": "Evaluation",
    "section": "Base evaluation: match.call()",
    "text": "Base evaluation: match.call()\nmatch.call() captures the entire call. A number of base functions (and base-only packages like survey) use it:\n\nlm2 &lt;- function(formula, data) {\n  lm(formula, data)\n}\nlm2(mpg ~ disp, mtcars)\n\n#&gt; \n#&gt; Call:\n#&gt; lm(formula = formula, data = data)\n#&gt; \n#&gt; Coefficients:\n#&gt; (Intercept)         disp  \n#&gt;    29.59985     -0.04122\n\nlm2(mpg ~ disp, mtcars)$call\n\n#&gt; lm(formula = formula, data = data)"
  },
  {
    "objectID": "slides/20.html#fixing-match.call",
    "href": "slides/20.html#fixing-match.call",
    "title": "Evaluation",
    "section": "Fixing match.call()",
    "text": "Fixing match.call()\nlm() itself cannot really do better as that was all it received, and it could not possibly figure out the components. To overcome this problem, we need to capture the arguments as expressions, create the call to lm() using unquoting, then evaluate that call.\n\nlm3 &lt;- function(formula, data, env = caller_env()) {\n  formula &lt;- enexpr(formula)\n  data &lt;- enexpr(data)\n\n  lm_call &lt;- expr(lm(!!formula, data = !!data))\n  expr_print(lm_call)\n  eval(lm_call, env)\n}\n\nlm3(mpg ~ disp, mtcars)\n\n#&gt; lm(mpg ~ disp, data = mtcars)\n\n\n#&gt; \n#&gt; Call:\n#&gt; lm(formula = mpg ~ disp, data = mtcars)\n#&gt; \n#&gt; Coefficients:\n#&gt; (Intercept)         disp  \n#&gt;    29.59985     -0.04122"
  },
  {
    "objectID": "slides/18.html#learning-objectives",
    "href": "slides/18.html#learning-objectives",
    "title": "Expressions",
    "section": "Learning objectives:",
    "text": "Learning objectives:\n\nCapture code expressions\nInspect expressions\nDefine expressions\nModify expressions\nGenerate/Automate expressions\n\n\nlibrary(rlang)\nlibrary(lobstr)"
  },
  {
    "objectID": "slides/18.html#expr-captures-code-without-executing",
    "href": "slides/18.html#expr-captures-code-without-executing",
    "title": "Expressions",
    "section": "expr captures code without executing",
    "text": "expr captures code without executing\n\nDistinguishes the operation from the result\n\n\nOperationResult\n\n\n\nCapture code as an expression\n\n\nz &lt;- rlang::expr(x - 10)\nz\n\n#&gt; x - 10\n\nrlang::is_expression(z)\n\n#&gt; [1] TRUE\n\nclass(z)\n\n#&gt; [1] \"call\"\n\n\n\n\n\nEvaluate the code expression immediately\n\n\ny &lt;- x - 10\n\n#&gt; Error:\n#&gt; ! object 'x' not found"
  },
  {
    "objectID": "slides/18.html#eval-evaluates-the-code-expression",
    "href": "slides/18.html#eval-evaluates-the-code-expression",
    "title": "Expressions",
    "section": "eval evaluates the code expression",
    "text": "eval evaluates the code expression\n\nz &lt;- rlang::expr(x - 10)\nx &lt;- 10\neval(z)\n\n#&gt; [1] 0\n\n\n\n\n\n\n\n\nNote\n\n\nThis chapter focuses on capturing and inspecting the operation. eval will be discussed more in chapters 19 and 20."
  },
  {
    "objectID": "slides/18.html#ast-parses-and-identifies-the-parts-of-an-expression",
    "href": "slides/18.html#ast-parses-and-identifies-the-parts-of-an-expression",
    "title": "Expressions",
    "section": "ast parses and identifies the parts of an expression",
    "text": "ast parses and identifies the parts of an expression\n\nExpressions are also called abstract syntax trees (ASTs) because of the hierarchical structure and natural tree representation.\n\n\nUsing infix notationUsing prefix notation\n\n\n\nlobstr::ast(y &lt;- x - 10)\n\n#&gt; ‚ñà‚îÄ`&lt;-` \n#&gt; ‚îú‚îÄy \n#&gt; ‚îî‚îÄ‚ñà‚îÄ`-` \n#&gt;   ‚îú‚îÄx \n#&gt;   ‚îî‚îÄ10\n\n\n\n\n\nlobstr::ast(`&lt;-`(y,`*`(x,10)))\n\n#&gt; ‚ñà‚îÄ`&lt;-` \n#&gt; ‚îú‚îÄy \n#&gt; ‚îî‚îÄ‚ñà‚îÄ`*` \n#&gt;   ‚îú‚îÄx \n#&gt;   ‚îî‚îÄ10"
  },
  {
    "objectID": "slides/18.html#the-leaves-branches-and-colors-from-ast-identify-expression-data-structures",
    "href": "slides/18.html#the-leaves-branches-and-colors-from-ast-identify-expression-data-structures",
    "title": "Expressions",
    "section": "The leaves, branches, and colors from ast identify expression data structures",
    "text": "The leaves, branches, and colors from ast identify expression data structures\n\n\nConstantsSymbolsCalls\n\n\n\nAlso called scalars\nFound in ast leaves\nLeaves have black borders and sharp corners\nIdentify with rlang::is_syntactic_literal\n\n\n\n\nFound in ast leaves\nLeaves have purple borders and rounded corners\nIdentify with is.name or is.symbol\nConvert strings to symbols with rlang::sym or rlang::syms\nConvert a symbol to a string with rlang::as_string or as.character\n\n\n\n\nFound in ast branches.\nBranches are orange rectangles\nFirst child is the function call name\nSubsequent children are arguments to the function call\nCalls behave as lists\ntypeof and str return ‚Äúlanguage‚Äù for call objects"
  },
  {
    "objectID": "slides/18.html#expressions-and-lists-have-similar-memory-mapping",
    "href": "slides/18.html#expressions-and-lists-have-similar-memory-mapping",
    "title": "Expressions",
    "section": "Expressions and lists have similar memory mapping",
    "text": "Expressions and lists have similar memory mapping\n\nx &lt;- rlang::expr(y &lt;- x * 10)\nlength(x)\n\n#&gt; [1] 3\n\nis.list(x)\n\n#&gt; [1] FALSE\n\nlobstr::obj_addr(x)\n\n#&gt; [1] \"0x1d950654c40\"\n\nlobstr::obj_addr(x[[1]])\n\n#&gt; [1] \"0x1d94815bff0\"\n\nlobstr::obj_addr(x[[2]])\n\n#&gt; [1] \"0x1d948b7b9e0\"\n\nlobstr::obj_addr(x[[3]])\n\n#&gt; [1] \"0x1d950654ce8\"\n\nlst_x &lt;- as.list(x)\n# Will not work: lobstr::obj_addrs(x)\nlobstr::obj_addrs(lst_x)\n\n#&gt; [1] \"0x1d94815bff0\" \"0x1d948b7b9e0\" \"0x1d950654ce8\""
  },
  {
    "objectID": "slides/18.html#expressions-can-be-modified-using-list-subsetting",
    "href": "slides/18.html#expressions-can-be-modified-using-list-subsetting",
    "title": "Expressions",
    "section": "Expressions can be modified using list subsetting",
    "text": "Expressions can be modified using list subsetting\n\nInspectModify\n\n\n\nx &lt;- rlang::expr(10*2)\nstr(x)\n\n#&gt;  language 10 * 2\n\nrlang::is_expression(x)\n\n#&gt; [1] TRUE\n\npurrr::map(as.list(x),~{.x})\n\n#&gt; [[1]]\n#&gt; `*`\n#&gt; \n#&gt; [[2]]\n#&gt; [1] 10\n#&gt; \n#&gt; [[3]]\n#&gt; [1] 2\n\n\n\n\n\ntracemem(x)\n\n#&gt; [1] \"&lt;000001D95238AD28&gt;\"\n\nx\n\n#&gt; 10 * 2\n\nx[[2]] &lt;- 4\n\n#&gt; tracemem[0x000001d95238ad28 -&gt; 0x000001d9545baf90]: eval eval withVisible withCallingHandlers eval eval with_handlers doWithOneRestart withOneRestart withRestartList doWithOneRestart withOneRestart withRestartList withRestarts &lt;Anonymous&gt; evaluate in_dir in_input_dir eng_r block_exec call_block process_group withCallingHandlers with_options &lt;Anonymous&gt; process_file &lt;Anonymous&gt; &lt;Anonymous&gt; execute .main\n\nx\n\n#&gt; 4 * 2\n\nuntracemem(x)"
  },
  {
    "objectID": "slides/18.html#simple-expressions-can-be-generated-using-call2-parse_expr-or-expr_text",
    "href": "slides/18.html#simple-expressions-can-be-generated-using-call2-parse_expr-or-expr_text",
    "title": "Expressions",
    "section": "Simple expressions can be generated using call2, parse_expr, or expr_text",
    "text": "Simple expressions can be generated using call2, parse_expr, or expr_text\n\ncall2parse_exprexpr_text\n\n\n\nClunky when creating more complex expressions, see chapter 19 for more details\n\n\nrlang::call2(\"mean\", x = rlang::expr(x), na.rm = TRUE)\n\n#&gt; mean(x = x, na.rm = TRUE)\n\n\n\n\n\nparsing: String to expression\nMore details and safer usage in chapter 19\nbase::parse (text argument) is equivalent to rlang::parse_expr\n\n\n\"5 - 5\" |&gt; \n  rlang::parse_expr()\n\n#&gt; 5 - 5\n\npaste0(\"5 - \",1:10) |&gt; \n  rlang::parse_exprs()\n\n#&gt; [[1]]\n#&gt; 5 - 1\n#&gt; \n#&gt; [[2]]\n#&gt; 5 - 2\n#&gt; \n#&gt; [[3]]\n#&gt; 5 - 3\n#&gt; \n#&gt; [[4]]\n#&gt; 5 - 4\n#&gt; \n#&gt; [[5]]\n#&gt; 5 - 5\n#&gt; \n#&gt; [[6]]\n#&gt; 5 - 6\n#&gt; \n#&gt; [[7]]\n#&gt; 5 - 7\n#&gt; \n#&gt; [[8]]\n#&gt; 5 - 8\n#&gt; \n#&gt; [[9]]\n#&gt; 5 - 9\n#&gt; \n#&gt; [[10]]\n#&gt; 5 - 10\n\n\n\n\n\ndeparsing: Expression to string\nbase::deparse outputs a vector when spanning lines\nThe ‚Äòquestioning‚Äô lifecycle in the Help page is telling‚Ä¶\n\n\nclass(y ~ x)\n\n#&gt; [1] \"formula\"\n\nrlang::is_expression(y ~ x)\n\n#&gt; [1] FALSE\n\nrlang::expr_text(y ~ x)\n\n#&gt; [1] \"y ~ x\"\n\nrlang::expr(x - 8) |&gt; \n  rlang::expr_text()\n\n#&gt; [1] \"x - 8\""
  },
  {
    "objectID": "slides/18.html#complex-expressions-can-be-automated-using-expr-and-purrrreduce",
    "href": "slides/18.html#complex-expressions-can-be-automated-using-expr-and-purrrreduce",
    "title": "Expressions",
    "section": "Complex expressions can be automated using expr and purrr::reduce",
    "text": "Complex expressions can be automated using expr and purrr::reduce\n\nGenerate & filtersGenerate | filters\n\n\n\nand_filters &lt;- \n  purrr::map(\n    letters[6:8], #f, g, h\n    ~{\n      rlang::expr(.data[[\"x\"]] &lt; !!.x)\n     }\n  ) |&gt; \n    purrr::reduce(\n      .f = function(left, right) {\n        rlang::expr(!!left & !!right)\n      }\n    )\ntibble::tibble(\n  x = letters\n) |&gt; \n  dplyr::filter(!!!and_filters)\n\n#&gt; # A tibble: 5 √ó 1\n#&gt;   x    \n#&gt;   &lt;chr&gt;\n#&gt; 1 a    \n#&gt; 2 b    \n#&gt; 3 c    \n#&gt; 4 d    \n#&gt; 5 e\n\n\n\n\n\nor_filters &lt;- \n  purrr::map(\n    letters[6:8], #f, g, h\n    ~{\n      rlang::expr(.data[[\"x\"]] &lt; !!.x)\n     }\n  ) |&gt; \n    purrr::reduce(\n      .f = function(left, right) {\n        rlang::expr(!!left | !!right)\n      }\n    )\ntibble::tibble(\n  x = letters\n) |&gt; \n  dplyr::filter(!!!or_filters)\n\n#&gt; # A tibble: 7 √ó 1\n#&gt;   x    \n#&gt;   &lt;chr&gt;\n#&gt; 1 a    \n#&gt; 2 b    \n#&gt; 3 c    \n#&gt; 4 d    \n#&gt; 5 e    \n#&gt; 6 f    \n#&gt; 7 g"
  },
  {
    "objectID": "slides/18.html#there-are-specialised-data-structures-to-be-aware-of-but-have-been-mostly-replaced",
    "href": "slides/18.html#there-are-specialised-data-structures-to-be-aware-of-but-have-been-mostly-replaced",
    "title": "Expressions",
    "section": "There are specialised data structures to be aware of but have been mostly replaced",
    "text": "There are specialised data structures to be aware of but have been mostly replaced\n\nPairlistsMissing argumentsExpression vectors\n\n\n\nOnly seen when working with calls to the function\nBut can treat it as a regular list\n\n\nf &lt;- rlang::expr(function(x, y = 10) x + y)\nf\n\n#&gt; function(x, y = 10) x + y\n\nf[[1]]\n\n#&gt; `function`\n\nf[[2]]\n\n#&gt; $x\n#&gt; \n#&gt; \n#&gt; $y\n#&gt; [1] 10\n\ntypeof(f[[1]])\n\n#&gt; [1] \"symbol\"\n\ntypeof(f[[2]])\n\n#&gt; [1] \"pairlist\"\n\n\n\n\n\nYou only need to care about the missing symbol if you‚Äôre programmatically creating functions with missing arguments\nUse rlang::missing_arg()\nThe ... argument is associated with an empty symbol\n\n\nf &lt;- rlang::expr(function(x, y = 10) x + y)\nrlang::is_missing(\n  f[[2]][[1]]\n)\n\n#&gt; [1] TRUE\n\n\n\n\n\nOnly generated by base::expression and base::parse\nTheir ‚Äúadvantage‚Äù is base::eval works across te elements, but this is confusing compared to evaluating across a list of expressions\n\n\nex &lt;- expression(x &lt;- 4, x)\nclass(ex) #just one expression???\n\n#&gt; [1] \"expression\"\n\nlength(ex) #so an expression can be 1 ting and more than 1 thing?? Just give me a list of expressions and define an expression as 1 thing\n\n#&gt; [1] 2"
  },
  {
    "objectID": "slides/16.html#learning-objectives",
    "href": "slides/16.html#learning-objectives",
    "title": "Trade-offs",
    "section": "Learning objectives:",
    "text": "Learning objectives:\n\nDecide whether to use S3 or S4 (or maybe S7) for a project.\nDecide whether to use R6 or S3 (or maybe S7) for a project."
  },
  {
    "objectID": "slides/16.html#default-to-s3",
    "href": "slides/16.html#default-to-s3",
    "title": "Trade-offs",
    "section": "Default to S3*",
    "text": "Default to S3*\n\n‚ÄúI recommend that you default to S3.‚Äù - Hadley Wickham\n\n\nSimple & widely used\nR6 leads to non-idiomatic R code\n\nMore like other languages, so tempting for newcomers\n\n\n* Or maybe S7?\n\n\n‚ÄúFunctional OOP‚Äù aka ‚ÄúGeneric function OOP‚Äù aka ‚ÄúMultimethod OOP‚Äù\n\nS3, S4, S7\n\n‚ÄúEncapsulated OOP‚Äù\n\nR6"
  },
  {
    "objectID": "slides/16.html#use-s4-for-large-team-projects",
    "href": "slides/16.html#use-s4-for-large-team-projects",
    "title": "Trade-offs",
    "section": "Use S4 for large team projects*",
    "text": "Use S4 for large team projects*\n\nS4 requires more up-front design than S3\nS4 is more formal, strict, and verbose\nStructure from S4 reduces risk from new team members\nExamples:\n\nBioconductor (~3-4k packages)\n{Matrix} (108 classes, 23 generic functions, and 1780 methods)\n\nS4 lacks great docs (needs a book)\n\n* Maybe use S7 instead?"
  },
  {
    "objectID": "slides/16.html#use-s3-for-standard-shared-methods",
    "href": "slides/16.html#use-s3-for-standard-shared-methods",
    "title": "Trade-offs",
    "section": "Use S3 for standard, shared methods",
    "text": "Use S3 for standard, shared methods\n\nS3 generics are global functions\n\nStandard generics: print(), summary(), plot(), predict(), etc.\nEasy to create your own class & methods\n\nR6 methods are local to the object\n\nCan have different args than standard method\nCan mean something else entirely vs standard\n\nR6 objects are S3 objects, too!\n\nCan define S3 methods for R6 classes"
  },
  {
    "objectID": "slides/16.html#use-r6-for-stateful-objects",
    "href": "slides/16.html#use-r6-for-stateful-objects",
    "title": "Trade-offs",
    "section": "Use R6 for stateful objects",
    "text": "Use R6 for stateful objects\n\nR6 methods can modify object state\n\nNo need to thread state through functions\n\nChain R6 methods with $\n\n\n# Stack is an `R6::R6Class()` with `push()`, `pop()`, and `length()` methods\ns &lt;- Stack$new()\ns$\n  push(10)$\n  push(20)$\n  pop()\n#&gt; [1] 20"
  },
  {
    "objectID": "slides/16.html#oop-system-comparison",
    "href": "slides/16.html#oop-system-comparison",
    "title": "Trade-offs",
    "section": "OOP system comparison",
    "text": "OOP system comparison\n\n\n\n\n\nS3\nS4\nS7\nR6\n\n\n\n\nPackage\nbase R\nbase R\nS7\nR6\n\n\nOOP type\nFunctional\nFunctional\nFunctional\nEncapulated\n\n\nComplexity\nLow\nHigh\nMedium\nHigh\n\n\nPayoff\nLow\nHigh\nHigh\nHigh\n\n\nTeam size\nSmall\nLarge\nLarge\nSmall-large\n\n\nNamespace\nGlobal\nGlobal\nGlobal\nLocal\n\n\nModify in place\nNo\nNo\nNo\nYes\n\n\nMethod chaining\n|&gt;\n|&gt;\n|&gt;\n$\n\n\nGet/set\n$\n@\n@\n$\n\n\nCreate class\nfunction()\nsetClass()\nnew_class()\nR6Class()\n\n\nCreate validator\nfunction()\nsetValidity() | setClass(validator = f())\nnew_class(validator = f())\n$validate()\n\n\nCreate generic\nUseMethod()\nsetGeneric()\nnew_generic()\nNA\n\n\nCreate method\ng.y &lt;- function()\nsetMethod()\nmethod()\nR6Class()\n\n\nCreate object\nclass(x) &lt;- \"y\"\nnew()\nx &lt;- class_y()\n$new()\n\n\nAdditional components\nattributes\nslots\nproperties\nfields & methods"
  },
  {
    "objectID": "slides/15.html#learning-objectives",
    "href": "slides/15.html#learning-objectives",
    "title": "S4",
    "section": "Learning objectives",
    "text": "Learning objectives\n\nIdentify the main components of S4 objects, including the new slot component\nLearn best practices for creating new S4 classes and creating/modifying/accessing their objects\n‚ÄúUnderstand‚Äù multiple inheritance, multiple dispatch, and appreciate their risks and complexity"
  },
  {
    "objectID": "slides/15.html#not-learning-objectives",
    "href": "slides/15.html#not-learning-objectives",
    "title": "S4",
    "section": "Not learning objectives",
    "text": "Not learning objectives\n\nHow to most effectively deploy S4\n\nNo single reference.\nExisting references often conflict."
  },
  {
    "objectID": "slides/15.html#all-functions-related-to-s4-live-in-the-methods-package",
    "href": "slides/15.html#all-functions-related-to-s4-live-in-the-methods-package",
    "title": "S4",
    "section": "All functions related to S4 live in the {methods} package",
    "text": "All functions related to S4 live in the {methods} package\n\nlibrary(methods)\n\n\n\n\n\n\n\nTip\n\n\nBest practice to explicitly call library(methods) since it is not loaded by default in non-interactive environments (i.e.¬†Rscript)"
  },
  {
    "objectID": "slides/15.html#setclass-defines-an-s4-class-and-its-slots-new-creates-a-new-object",
    "href": "slides/15.html#setclass-defines-an-s4-class-and-its-slots-new-creates-a-new-object",
    "title": "S4",
    "section": "setClass() defines an S4 class and its slots; new() creates a new object",
    "text": "setClass() defines an S4 class and its slots; new() creates a new object\n\nsetClass(\"Person\", \n  slots = c(\n    name = \"character\", \n    age = \"numeric\"\n  )\n)\n\njohn &lt;- new(\"Person\", name = \"John Smith\", age = NA_real_)"
  },
  {
    "objectID": "slides/15.html#access-slots-with-or-slot-but-dont-use-it-outside-of-your-own-methods",
    "href": "slides/15.html#access-slots-with-or-slot-but-dont-use-it-outside-of-your-own-methods",
    "title": "S4",
    "section": "Access slots with @ or slot(), but don‚Äôt use it outside of your own methods",
    "text": "Access slots with @ or slot(), but don‚Äôt use it outside of your own methods\n\njohn@name\n\n#&gt; [1] \"John Smith\"\n\nslot(john, \"age\")\n\n#&gt; [1] NA"
  },
  {
    "objectID": "slides/15.html#supply-accessor-functions-for-others-to-use-with-your-class",
    "href": "slides/15.html#supply-accessor-functions-for-others-to-use-with-your-class",
    "title": "S4",
    "section": "Supply accessor functions for others to use with your class",
    "text": "Supply accessor functions for others to use with your class\n\nsetGeneric(\"age\", function(x) standardGeneric(\"age\"))\nsetGeneric(\"age&lt;-\", function(x, value) standardGeneric(\"age&lt;-\"))\n\nsetMethod(\"age\", \"Person\", function(x) x@age)\nsetMethod(\"age&lt;-\", \"Person\", function(x, value) {\n  x@age &lt;- value\n  x\n})\n\n\nage(john) &lt;- 50\nage(john)\n\n#&gt; [1] 50\n\n\n\n\n\n\n\n\nTip\n\n\nLook for accessor functions when working with classes maintained by others"
  },
  {
    "objectID": "slides/15.html#sloop-can-help-you-identify-s4-objects-and-generics",
    "href": "slides/15.html#sloop-can-help-you-identify-s4-objects-and-generics",
    "title": "S4",
    "section": "{sloop} can help you identify S4 objects and generics",
    "text": "{sloop} can help you identify S4 objects and generics\n\nsloop::otype(john)\n\n#&gt; [1] \"S4\"\n\nsloop::ftype(age)\n\n#&gt; [1] \"S4\"      \"generic\""
  },
  {
    "objectID": "slides/15.html#setclass-has-4-arguments-you-should-use.-the-rest-should-be-ignored.",
    "href": "slides/15.html#setclass-has-4-arguments-you-should-use.-the-rest-should-be-ignored.",
    "title": "S4",
    "section": "setClass() has 4 arguments you should use. The rest should be ignored.",
    "text": "setClass() has 4 arguments you should use. The rest should be ignored.\n\nClass sets the class name.\n\nBy convention use UpperCamelCase\n\nslots sets the available slots (fields) using a named character vector of classes\nprototype list default values for each slot\n\nAlways provide prototype, even though its optional\n\ncontains specifies classes to inherit slots from"
  },
  {
    "objectID": "slides/15.html#setclass-has-4-arguments-you-should-use.-the-rest-should-be-ignored.-1",
    "href": "slides/15.html#setclass-has-4-arguments-you-should-use.-the-rest-should-be-ignored.-1",
    "title": "S4",
    "section": "setClass() has 4 arguments you should use. The rest should be ignored.",
    "text": "setClass() has 4 arguments you should use. The rest should be ignored.\n\nsetClass(\"Person\", \n  slots = c(\n    name = \"character\", \n    age = \"numeric\"\n  ), \n  prototype = list(\n    name = NA_character_,\n    age = NA_real_\n  )\n)\n\nme &lt;- new(\"Person\", name = \"Hadley\")\nstr(me)\n\n#&gt; Formal class 'Person' [package \".GlobalEnv\"] with 2 slots\n#&gt;   ..@ name: chr \"Hadley\"\n#&gt;   ..@ age : num NA"
  },
  {
    "objectID": "slides/15.html#setclass-has-4-arguments-you-should-use.-the-rest-should-be-ignored.-2",
    "href": "slides/15.html#setclass-has-4-arguments-you-should-use.-the-rest-should-be-ignored.-2",
    "title": "S4",
    "section": "setClass() has 4 arguments you should use. The rest should be ignored.",
    "text": "setClass() has 4 arguments you should use. The rest should be ignored.\n\nsetClass(\"Employee\", \n  contains = \"Person\", \n  slots = c(\n    boss = \"Person\"\n  ),\n  prototype = list(\n    boss = new(\"Person\")\n  )\n)\n\nstr(new(\"Employee\"))\n\n#&gt; Formal class 'Employee' [package \".GlobalEnv\"] with 3 slots\n#&gt;   ..@ boss:Formal class 'Person' [package \".GlobalEnv\"] with 2 slots\n#&gt;   .. .. ..@ name: chr NA\n#&gt;   .. .. ..@ age : num NA\n#&gt;   ..@ name: chr NA\n#&gt;   ..@ age : num NA"
  },
  {
    "objectID": "slides/15.html#setclass-has-4-arguments-you-should-use.-the-rest-should-be-ignored.-3",
    "href": "slides/15.html#setclass-has-4-arguments-you-should-use.-the-rest-should-be-ignored.-3",
    "title": "S4",
    "section": "setClass() has 4 arguments you should use. The rest should be ignored.",
    "text": "setClass() has 4 arguments you should use. The rest should be ignored.\n\n\n\n\n\n\nCaution\n\n\nUse setClass() with care. It‚Äôs possible to create invalid objects if you redefine a class after already having instantiated an object.\n\n\n\n\nsetClass(\"A\", slots = c(x = \"numeric\"))\na &lt;- new(\"A\", x = 10)\n\nsetClass(\"A\", slots = c(a_different_slot = \"numeric\"))\na\n\n#&gt; An object of class \"A\"\n#&gt; Slot \"a_different_slot\":\n\n\n#&gt; Error in slot(object, what): no slot of name \"a_different_slot\" for this object of class \"A\""
  },
  {
    "objectID": "slides/15.html#use-is-to-determine-an-objects-classes-or-test-for-a-specific-class",
    "href": "slides/15.html#use-is-to-determine-an-objects-classes-or-test-for-a-specific-class",
    "title": "S4",
    "section": "Use is() to determine an objects classes or test for a specific class",
    "text": "Use is() to determine an objects classes or test for a specific class\n\nis(new(\"Person\"))\n\n#&gt; [1] \"Person\"\n\nis(new(\"Employee\"))\n\n#&gt; [1] \"Employee\" \"Person\"\n\nis(john, \"Person\")\n\n#&gt; [1] TRUE"
  },
  {
    "objectID": "slides/15.html#user-facing-classes-should-be-paired-with-a-helper-function-to-create-new-objects",
    "href": "slides/15.html#user-facing-classes-should-be-paired-with-a-helper-function-to-create-new-objects",
    "title": "S4",
    "section": "User-facing classes should be paired with a helper function to create new objects",
    "text": "User-facing classes should be paired with a helper function to create new objects\n\n\n\nPerson &lt;- function(name, age = NA) {\n  age &lt;- as.double(age)\n  \n  new(\"Person\", name = name, age = age)\n}\n\nPerson(\"Hadley\")\n\n#&gt; An object of class \"Person\"\n#&gt; Slot \"name\":\n#&gt; [1] \"Hadley\"\n#&gt; \n#&gt; Slot \"age\":\n#&gt; [1] NA\n\n\n\n\nUse the same name as the class.\nCraft user interface with carefully chosen defaults and useful conversions.\nCraft error messages tailored towards an end-user.\nFinish by calling methods::new()."
  },
  {
    "objectID": "slides/15.html#create-a-validator-to-enforce-rules-around-slot-values",
    "href": "slides/15.html#create-a-validator-to-enforce-rules-around-slot-values",
    "title": "S4",
    "section": "Create a validator to enforce rules around slot values",
    "text": "Create a validator to enforce rules around slot values\n\n\n\nS4 automatically checks slots for the correct class\nUse setValidity() to enforce more complex rules\nCheck validity with validObject()\n\n\n\nsetValidity(\"Person\", function(object) {\n  if (length(object@name) != length(object@age)) {\n    \"@name and @age must be same length\"\n  } else {\n    TRUE\n  }\n})\n\n\nPerson(\"Hadley\", age = c(30, 37))\n\n#&gt; Error in validObject(.Object): invalid class \"Person\" object: @name and @age must be same length\n\nvalidObject(john)\n\n#&gt; [1] TRUE\n\n\n\n\n\n\n\n\n\nCaution\n\n\nValidity is only called automatically by new(). Slots can be modified with invalid values."
  },
  {
    "objectID": "slides/15.html#create-an-s4-generic-with-setgeneric-and-standardgeneric",
    "href": "slides/15.html#create-an-s4-generic-with-setgeneric-and-standardgeneric",
    "title": "S4",
    "section": "Create an S4 generic with setGeneric() and standardGeneric()",
    "text": "Create an S4 generic with setGeneric() and standardGeneric()\n\nsetGeneric(\"myGeneric\", function(x) standardGeneric(\"myGeneric\"))\n\n\nBy convention use lowerCamelCase\n\n\n\n\n\n\n\nCaution\n\n\nUsing {} in function() definition triggers a expensive special case and should be avoided.\n\n# Don't do this!\nsetGeneric(\"myGeneric\", function(x) {\n  standardGeneric(\"myGeneric\")\n})"
  },
  {
    "objectID": "slides/15.html#use-the-signature-argument-of-setgeneric-to-help-control-dispatch",
    "href": "slides/15.html#use-the-signature-argument-of-setgeneric-to-help-control-dispatch",
    "title": "S4",
    "section": "Use the signature argument of setGeneric() to help control dispatch",
    "text": "Use the signature argument of setGeneric() to help control dispatch\n\nsetGeneric(\"myGeneric\", \n  function(x, ..., verbose = TRUE) standardGeneric(\"myGeneric\"),\n  signature = \"x\"\n)\n\n\nWithout signature all arguments (except for ...) are considered during dispatch\nHelpful for adding arguments like verbose = TRUE and quiet = FALSE"
  },
  {
    "objectID": "slides/15.html#define-methods-using-setmethod",
    "href": "slides/15.html#define-methods-using-setmethod",
    "title": "S4",
    "section": "Define methods using setMethod()",
    "text": "Define methods using setMethod()\n\nOnly use the following 3 arguments (never use others)\n\nf: the name of the generic\nsignature: class or classes to use for dispatch\ndefinition: the function definition for the method\n\n\n\nsetMethod(\"myGeneric\", \"Person\", function(x) {\n  # method implementation\n})"
  },
  {
    "objectID": "slides/15.html#the-show-method-controls-how-the-object-is-printed.",
    "href": "slides/15.html#the-show-method-controls-how-the-object-is-printed.",
    "title": "S4",
    "section": "The show() method controls how the object is printed.",
    "text": "The show() method controls how the object is printed.\n\nIt is the most commonly defined S4 method\n\n\n# Determine arguments required\nargs(getGeneric(\"show\"))\n\n#&gt; function (object) \n#&gt; NULL\n\nsetMethod(\"show\", \"Person\", function(object) {\n  cat(is(object)[[1]], \"\\n\",\n      \"  Name: \", object@name, \"\\n\",\n      \"  Age:  \", object@age, \"\\n\",\n      sep = \"\"\n  )\n})\njohn\n\n#&gt; Person\n#&gt;   Name: John Smith\n#&gt;   Age:  50"
  },
  {
    "objectID": "slides/15.html#all-user-accessible-slots-should-be-accompanied-by-a-pair-of-accessors",
    "href": "slides/15.html#all-user-accessible-slots-should-be-accompanied-by-a-pair-of-accessors",
    "title": "S4",
    "section": "All user-accessible slots should be accompanied by a pair of accessors",
    "text": "All user-accessible slots should be accompanied by a pair of accessors\nOne for reading‚Ä¶\n\nsetGeneric(\"name\", function(x) standardGeneric(\"name\"))\n\n#&gt; [1] \"name\"\n\nsetMethod(\"name\", \"Person\", function(x) x@name)\n\nname(john)\n\n#&gt; [1] \"John Smith\""
  },
  {
    "objectID": "slides/15.html#all-user-accessible-slots-should-be-accompanied-by-a-pair-of-accessors-1",
    "href": "slides/15.html#all-user-accessible-slots-should-be-accompanied-by-a-pair-of-accessors-1",
    "title": "S4",
    "section": "All user-accessible slots should be accompanied by a pair of accessors",
    "text": "All user-accessible slots should be accompanied by a pair of accessors\n‚Ä¶and one for writing.\n\nsetGeneric(\"name&lt;-\", function(x, value) standardGeneric(\"name&lt;-\"))\n\n#&gt; [1] \"name&lt;-\"\n\nsetMethod(\"name&lt;-\", \"Person\", function(x, value) {\n  x@name &lt;- value\n  validObject(x)\n  x\n})\n\nname(john) &lt;- \"Jon Smythe\"\nname(john)\n\n#&gt; [1] \"Jon Smythe\"\n\n\n\n\n\n\n\n\nTip\n\n\nAlways include validObject() in the setter function."
  },
  {
    "objectID": "slides/15.html#use-methods-and-selectmethods-to-investigate-available-methods-for-a-generic-or-class",
    "href": "slides/15.html#use-methods-and-selectmethods-to-investigate-available-methods-for-a-generic-or-class",
    "title": "S4",
    "section": "Use methods() and selectMethods() to investigate available methods for a generic or class",
    "text": "Use methods() and selectMethods() to investigate available methods for a generic or class\n\nmethods(\"age\")\n\n#&gt; [1] age,Person-method\n#&gt; see '?methods' for accessing help and source code\n\nmethods(class = \"Person\")\n\n#&gt; [1] age    age&lt;-  name   name&lt;- show  \n#&gt; see '?methods' for accessing help and source code\n\nselectMethod(\"age\", \"Person\")\n\n#&gt; Method Definition:\n#&gt; \n#&gt; function (x) \n#&gt; x@age\n#&gt; \n#&gt; Signatures:\n#&gt;         x       \n#&gt; target  \"Person\"\n#&gt; defined \"Person\""
  },
  {
    "objectID": "slides/15.html#s4-dispatch-is-complicated",
    "href": "slides/15.html#s4-dispatch-is-complicated",
    "title": "S4",
    "section": "S4 dispatch is complicated!",
    "text": "S4 dispatch is complicated!\n\nMultiple inheritance, i.e.¬†a class can have multiple parents\nMultiple dispatch, i.e.¬†a generic can use multiple arguments to pick a method.\n\n\n\n\n\n\n\nTip\n\n\nKeep method dispatch as simple as possible by avoiding multiple inheritance, and reserving multiple dispatch only for where it is absolutely necessary."
  },
  {
    "objectID": "slides/15.html#it-can-help-to-visualize-dispatch-as-a-graph",
    "href": "slides/15.html#it-can-help-to-visualize-dispatch-as-a-graph",
    "title": "S4",
    "section": "It can help to visualize dispatch as a graph",
    "text": "It can help to visualize dispatch as a graph"
  },
  {
    "objectID": "slides/15.html#single-dispatch-is-straight-forward",
    "href": "slides/15.html#single-dispatch-is-straight-forward",
    "title": "S4",
    "section": "Single dispatch is straight forward",
    "text": "Single dispatch is straight forward"
  },
  {
    "objectID": "slides/15.html#pseudo-classes-any-and-missing-can-help-define-useful-behaviors",
    "href": "slides/15.html#pseudo-classes-any-and-missing-can-help-define-useful-behaviors",
    "title": "S4",
    "section": "Pseudo-classes ANY and MISSING can help define useful behaviors",
    "text": "Pseudo-classes ANY and MISSING can help define useful behaviors\n\nANY matches any class and is always at the end of a method graph\n\n\n\nMISSING matches whenever an argument is missing\n\nUseful for functions like + and -"
  },
  {
    "objectID": "slides/15.html#multiple-inheritance-is-tricky",
    "href": "slides/15.html#multiple-inheritance-is-tricky",
    "title": "S4",
    "section": "Multiple inheritance is tricky",
    "text": "Multiple inheritance is tricky\n\nClass with the shortest distance to the specified class gets dispatched."
  },
  {
    "objectID": "slides/15.html#multiple-inheritance-can-lead-to-ambiguous-method-dispatch",
    "href": "slides/15.html#multiple-inheritance-can-lead-to-ambiguous-method-dispatch",
    "title": "S4",
    "section": "Multiple inheritance can lead to ambiguous method dispatch",
    "text": "Multiple inheritance can lead to ambiguous method dispatch\n\n\n\n\n\nMethods of equal distance cause ambiguous method dispatch and generate a warning\nAlways resolve ambiguity by providing a more precise method"
  },
  {
    "objectID": "slides/15.html#use-multiple-inheritance-with-extreme-care",
    "href": "slides/15.html#use-multiple-inheritance-with-extreme-care",
    "title": "S4",
    "section": "Use multiple inheritance with extreme care",
    "text": "Use multiple inheritance with extreme care\nIt is hard to prevent ambiguity, ensure every terminal method has an implementation, and minimize the number of defined methods.\n\nOnly one of the above calls is free from problems."
  },
  {
    "objectID": "slides/15.html#multiple-dispatch-is-less-tricky-to-work-with-than-multiple-inheritance",
    "href": "slides/15.html#multiple-dispatch-is-less-tricky-to-work-with-than-multiple-inheritance",
    "title": "S4",
    "section": "Multiple dispatch is less tricky to work with than multiple inheritance",
    "text": "Multiple dispatch is less tricky to work with than multiple inheritance\n\nFewer terminal class combinations allow you to define a single method and have default behavior\n\n\nClasses are separated by a comma"
  },
  {
    "objectID": "slides/15.html#multiple-dispatch-with-multiple-inheritance-is-complex",
    "href": "slides/15.html#multiple-dispatch-with-multiple-inheritance-is-complex",
    "title": "S4",
    "section": "Multiple dispatch with multiple inheritance is complex üòµ‚Äçüí´",
    "text": "Multiple dispatch with multiple inheritance is complex üòµ‚Äçüí´\n\nTwo classes each with multiple inheritance"
  },
  {
    "objectID": "slides/15.html#s3-must-first-be-registered-with-setoldclass-before-inclusion-in-s4",
    "href": "slides/15.html#s3-must-first-be-registered-with-setoldclass-before-inclusion-in-s4",
    "title": "S4",
    "section": "S3 must first be registered with setOldClass() before inclusion in S4",
    "text": "S3 must first be registered with setOldClass() before inclusion in S4\nCan be as simple as\n\nsetOldClass(\"factor\")"
  },
  {
    "objectID": "slides/15.html#s3-must-first-be-registered-with-setoldclass-before-inclusion-in-s4-1",
    "href": "slides/15.html#s3-must-first-be-registered-with-setoldclass-before-inclusion-in-s4-1",
    "title": "S4",
    "section": "S3 must first be registered with setOldClass() before inclusion in S4",
    "text": "S3 must first be registered with setOldClass() before inclusion in S4\nBut better to specify a full S4 definition\n\nsetClass(\"factor\",\n  contains = \"integer\",\n  slots = c(\n    levels = \"character\"\n  ),\n  prototype = structure(\n    integer(),\n    levels = character()\n  )\n)\nsetOldClass(\"factor\", S4Class = \"factor\")\n\n\n\n\n\n\n\nCaution\n\n\nThese definitions should be provided by the creator of the S3 class. Don‚Äôt trying building an S4 class on top of an S3 class provided by a package. Instead request that the package maintainer add this call to their package."
  },
  {
    "objectID": "slides/15.html#s4-classes-receive-as-special-.data-slot-when-inheriting-from-s3-or-base-types",
    "href": "slides/15.html#s4-classes-receive-as-special-.data-slot-when-inheriting-from-s3-or-base-types",
    "title": "S4",
    "section": "S4 classes receive as special .Data slot when inheriting from S3 or base types",
    "text": "S4 classes receive as special .Data slot when inheriting from S3 or base types\n\nRangedNumeric &lt;- setClass(\n  \"RangedNumeric\",\n  contains = \"numeric\",\n  slots = c(min = \"numeric\", max = \"numeric\"),\n  prototype = structure(numeric(), min = NA_real_, max = NA_real_)\n)\nrn &lt;- RangedNumeric(1:10, min = 1, max = 10)\nrn@min\n\n#&gt; [1] 1\n\nrn@.Data\n\n#&gt;  [1]  1  2  3  4  5  6  7  8  9 10"
  },
  {
    "objectID": "slides/15.html#s3-generics-are-easily-converted-to-s4-generics",
    "href": "slides/15.html#s3-generics-are-easily-converted-to-s4-generics",
    "title": "S4",
    "section": "S3 generics are easily converted to S4 generics",
    "text": "S3 generics are easily converted to S4 generics\n\nsetGeneric(\"mean\")\n\n\nselectMethod(\"mean\", \"ANY\")\n\n#&gt; Method Definition (Class \"derivedDefaultMethod\"):\n#&gt; \n#&gt; function (x, ...) \n#&gt; UseMethod(\"mean\")\n#&gt; &lt;bytecode: 0x00000157b589e8c8&gt;\n#&gt; &lt;environment: namespace:base&gt;\n#&gt; \n#&gt; Signatures:\n#&gt;         x    \n#&gt; target  \"ANY\"\n#&gt; defined \"ANY\"\n\n\n\n\n\n\n\n\nCaution\n\n\nIt is OK to convert an existing S3 generic to S4, but you should avoid converting regular functions to S4 generics"
  },
  {
    "objectID": "slides/15.html#lubridateperiod-returns-an-s4-class.-what-slots-does-it-have-what-class-is-each-slot-what-accessors-does-it-provide",
    "href": "slides/15.html#lubridateperiod-returns-an-s4-class.-what-slots-does-it-have-what-class-is-each-slot-what-accessors-does-it-provide",
    "title": "S4",
    "section": "lubridate::period() returns an S4 class. What slots does it have? What class is each slot? What accessors does it provide?",
    "text": "lubridate::period() returns an S4 class. What slots does it have? What class is each slot? What accessors does it provide?\n\nObjects of the S4 Period class have six slots named year, month, day, hour, minute, and .Data (which contains the number of seconds). All slots are of type double. Most fields can be retrieved by an identically named accessor (e.g.¬†lubridate::year() will return the field), use second() to get the .Data slot.\nAs a short example, we create a period of 1 second, 2 minutes, 3 hours, 4 days and 5 weeks.\n\nexample_12345 &lt;- lubridate::period(\n  c(1, 2, 3, 4, 5), \n  c(\"second\", \"minute\", \"hour\", \"day\", \"week\")\n)\n\nThis should add up to a period of 39 days, 3 hours, 2 minutes and 1 second.\n\nexample_12345\n\n#&gt; [1] \"39d 3H 2M 1S\"\n\n\nWhen we inspect example_12345, we see the fields and infer that the seconds are stored in the .Data field.\n\nstr(example_12345)\n\n#&gt; Formal class 'Period' [package \"lubridate\"] with 6 slots\n#&gt;   ..@ .Data : num 1\n#&gt;   ..@ year  : num 0\n#&gt;   ..@ month : num 0\n#&gt;   ..@ day   : num 39\n#&gt;   ..@ hour  : num 3\n#&gt;   ..@ minute: num 2"
  },
  {
    "objectID": "slides/15.html#what-other-ways-can-you-find-help-for-a-method-read-and-summarise-the-details.",
    "href": "slides/15.html#what-other-ways-can-you-find-help-for-a-method-read-and-summarise-the-details.",
    "title": "S4",
    "section": "What other ways can you find help for a method? Read ?\"?\" and summarise the details.",
    "text": "What other ways can you find help for a method? Read ?\"?\" and summarise the details.\n\nBesides adding ? in front of a function call (i.e.¬†?method()), we may find:\n\ngeneral documentation for a generic via ?genericName\ngeneral documentation for the methods of a generic via methods?genericName\ndocumentation for a specific method via ClassName?methodName."
  },
  {
    "objectID": "slides/15.html#extend-the-person-class-with-fields-to-match-utilsperson.-think-about-what-slots-you-will-need-what-class-each-slot-should-have-and-what-youll-need-to-check-in-your-validity-method.",
    "href": "slides/15.html#extend-the-person-class-with-fields-to-match-utilsperson.-think-about-what-slots-you-will-need-what-class-each-slot-should-have-and-what-youll-need-to-check-in-your-validity-method.",
    "title": "S4",
    "section": "Extend the Person class with fields to match utils::person(). Think about what slots you will need, what class each slot should have, and what you‚Äôll need to check in your validity method.",
    "text": "Extend the Person class with fields to match utils::person(). Think about what slots you will need, what class each slot should have, and what you‚Äôll need to check in your validity method.\n\nThe Person class from Advanced R contains the slots name and age. The person class from the {utils} package contains the slots given (vector of given names), family, role, email and comment (see ?utils::person).\nAll slots from utils::person() besides role must be of type character and length 1. The entries in the role slot must match one of the following abbreviations ‚Äúaut‚Äù, ‚Äúcom‚Äù, ‚Äúcph‚Äù, ‚Äúcre‚Äù, ‚Äúctb‚Äù, ‚Äúctr‚Äù, ‚Äúdtc‚Äù, ‚Äúfnd‚Äù, ‚Äúrev‚Äù, ‚Äúths‚Äù, ‚Äútrl‚Äù. Therefore, role might be of different length than the other slots and we‚Äôll add a corresponding constraint within the validator.\n\n# Definition of the Person class\nsetClass(\"Person\",\n  slots = c(\n    age = \"numeric\",\n    given = \"character\",\n    family = \"character\",\n    role = \"character\",\n    email = \"character\",\n    comment = \"character\"\n  ),\n  prototype = list(\n    age = NA_real_,\n    given = NA_character_,\n    family = NA_character_,\n    role = NA_character_,\n    email = NA_character_,\n    comment = NA_character_\n  )\n)\n\n# Helper to create instances of the Person class\nPerson &lt;- function(given, family,\n                   age = NA_real_,\n                   role = NA_character_,\n                   email = NA_character_,\n                   comment = NA_character_) {\n  age &lt;- as.double(age)\n\n  new(\"Person\",\n    age = age,\n    given = given,\n    family = family,\n    role = role,\n    email = email,\n    comment = comment\n  )\n}\n\n# Validator to ensure that each slot is of length one\nsetValidity(\"Person\", function(object) {\n  invalids &lt;- c()\n  if (length(object@age)     != 1 ||\n      length(object@given)   != 1 ||\n      length(object@family)  != 1 ||\n      length(object@email)   != 1 ||\n      length(object@comment) != 1) {\n    invalids &lt;- paste0(\"@name, @age, @given, @family, @email, \",\n                       \"@comment must be of length 1\")\n  } \n  \n  known_roles &lt;- c(\n    NA_character_, \"aut\", \"com\", \"cph\", \"cre\", \"ctb\",\n    \"ctr\", \"dtc\", \"fnd\", \"rev\", \"ths\", \"trl\"\n  )\n  \n  if (!all(object@role %in% known_roles)) {\n    paste(\n      \"@role(s) must be one of\", \n      paste(known_roles, collapse = \", \")\n    )\n  }\n  \n  if (length(invalids)) return(invalids)  \n  TRUE\n})\n\n#&gt; Class \"Person\" [in \".GlobalEnv\"]\n#&gt; \n#&gt; Slots:\n#&gt;                                                                   \n#&gt; Name:        age     given    family      role     email   comment\n#&gt; Class:   numeric character character character character character"
  },
  {
    "objectID": "slides/15.html#what-happens-if-you-define-a-new-s4-class-that-doesnt-have-any-slots-hint-read-about-virtual-classes-in-setclass.",
    "href": "slides/15.html#what-happens-if-you-define-a-new-s4-class-that-doesnt-have-any-slots-hint-read-about-virtual-classes-in-setclass.",
    "title": "S4",
    "section": "What happens if you define a new S4 class that doesn‚Äôt have any slots? (Hint: read about virtual classes in ?setClass.)",
    "text": "What happens if you define a new S4 class that doesn‚Äôt have any slots? (Hint: read about virtual classes in ?setClass.)\n\nIt depends on the other arguments. If we inherit from another class, we get the same slots. But something interesting happens if we don‚Äôt inherit from an existing class. We get a virtual class. A virtual class can‚Äôt be instantiated:\n\nsetClass(\"Human\")\nnew(\"Human\")\n\n#&gt; Error in new(\"Human\"): trying to generate an object from a virtual class (\"Human\")\n\n\nBut can be inherited from:\n\nsetClass(\"Programmer\", contains = \"Human\")"
  },
  {
    "objectID": "slides/15.html#imagine-you-were-going-to-reimplement-factors-dates-and-data-frames-in-s4.-sketch-out-the-setclass-calls-that-you-would-use-to-define-the-classes.-think-about-appropriate-slots-and-prototype.",
    "href": "slides/15.html#imagine-you-were-going-to-reimplement-factors-dates-and-data-frames-in-s4.-sketch-out-the-setclass-calls-that-you-would-use-to-define-the-classes.-think-about-appropriate-slots-and-prototype.",
    "title": "S4",
    "section": "Imagine you were going to reimplement factors, dates, and data frames in S4. Sketch out the setClass() calls that you would use to define the classes. Think about appropriate slots and prototype.",
    "text": "Imagine you were going to reimplement factors, dates, and data frames in S4. Sketch out the setClass() calls that you would use to define the classes. Think about appropriate slots and prototype.\n\nFor all these classes we need one slot for the data and one slot per attribute. Keep in mind, that inheritance matters for ordered factors and dates. For data frames, special checks like equal lengths of the underlying list‚Äôs elements should be done within a validator.\nFor simplicity we don‚Äôt introduce an explicit subclass for ordered factors. Instead, we introduce ordered as a slot.\n\nsetClass(\"Factor\",\n  slots = c(\n    data = \"integer\",\n    levels = \"character\",\n    ordered = \"logical\"\n  ),\n  prototype = list(\n    data = integer(),\n    levels = character(),\n    ordered = FALSE\n  )\n)\n\n\nnew(\"Factor\", data = c(1L, 2L), levels = letters[1:3])\n\n#&gt; An object of class \"Factor\"\n#&gt; Slot \"data\":\n#&gt; [1] 1 2\n#&gt; \n#&gt; Slot \"levels\":\n#&gt; [1] \"a\" \"b\" \"c\"\n#&gt; \n#&gt; Slot \"ordered\":\n#&gt; [1] FALSE\n\n\nThe Date2 class stores its dates as integers, similarly to base R which uses doubles. Dates don‚Äôt have any other attributes.\n\nsetClass(\"Date2\",\n  slots = list(\n    data = \"integer\"\n  ),\n  prototype = list(\n    data = integer()\n  )\n)\n\nnew(\"Date2\", data = 1L)\n\n#&gt; An object of class \"Date2\"\n#&gt; Slot \"data\":\n#&gt; [1] 1\n\n\nOur DataFrame class consists of a list and a slot for row.names. Most of the logic (e.g.¬†checking that all elements of the list are a vector, and that they all have the same length) would need to be part of a validator.\n\nsetClass(\"DataFrame\",\n  slots = c(\n    data = \"list\",\n    row.names = \"character\"\n  ),\n  prototype = list(\n    data = list(),\n    row.names = character(0)\n  )\n)\n\nnew(\"DataFrame\", data = list(a = 1, b = 2))\n\n#&gt; An object of class \"DataFrame\"\n#&gt; Slot \"data\":\n#&gt; $a\n#&gt; [1] 1\n#&gt; \n#&gt; $b\n#&gt; [1] 2\n#&gt; \n#&gt; \n#&gt; Slot \"row.names\":\n#&gt; character(0)"
  },
  {
    "objectID": "slides/15.html#add-age-accessors-for-the-person-class.",
    "href": "slides/15.html#add-age-accessors-for-the-person-class.",
    "title": "S4",
    "section": "Add age() accessors for the Person class.",
    "text": "Add age() accessors for the Person class.\n\nWe implement the accessors via an age() generic, with a method for the Person class and a corresponding replacement function age&lt;-:\n\nsetGeneric(\"age\", function(x) standardGeneric(\"age\"))\n\n#&gt; [1] \"age\"\n\nsetMethod(\"age\", \"Person\", function(x) x@age)\n\nsetGeneric(\"age&lt;-\", function(x, value) standardGeneric(\"age&lt;-\"))\n\n#&gt; [1] \"age&lt;-\"\n\nsetMethod(\"age&lt;-\", \"Person\", function(x, value) {\n  x@age &lt;- value\n  validObject(x)\n  x\n})"
  },
  {
    "objectID": "slides/15.html#in-the-definition-of-the-generic-why-is-it-necessary-to-repeat-the-name-of-the-generic-twice",
    "href": "slides/15.html#in-the-definition-of-the-generic-why-is-it-necessary-to-repeat-the-name-of-the-generic-twice",
    "title": "S4",
    "section": "In the definition of the generic, why is it necessary to repeat the name of the generic twice?",
    "text": "In the definition of the generic, why is it necessary to repeat the name of the generic twice?\n\nWithin setGeneric() the name (1st argument) is needed as the name of the generic. Then, the name also explicitly incorporates method dispatch via standardGeneric() within the generic‚Äôs body (def parameter of setGeneric()). This behaviour is similar to UseMethod() in S3."
  },
  {
    "objectID": "slides/15.html#why-does-the-show-method-defined-in-section-15.4.3-use-isobject1-hint-try-printing-the-employee-subclass.",
    "href": "slides/15.html#why-does-the-show-method-defined-in-section-15.4.3-use-isobject1-hint-try-printing-the-employee-subclass.",
    "title": "S4",
    "section": "Why does the show() method defined in section 15.4.3 use is(object)[[1]]? (Hint: try printing the employee subclass.)",
    "text": "Why does the show() method defined in section 15.4.3 use is(object)[[1]]? (Hint: try printing the employee subclass.)\n\nis(object) returns the class of the object. is(object) also contains the superclass, for subclasses like Employee. In order to always return the most specific class (the subclass), show() returns the first element of is(object)."
  },
  {
    "objectID": "slides/15.html#what-happens-if-you-define-a-method-with-different-argument-names-to-the-generic",
    "href": "slides/15.html#what-happens-if-you-define-a-method-with-different-argument-names-to-the-generic",
    "title": "S4",
    "section": "What happens if you define a method with different argument names to the generic?",
    "text": "What happens if you define a method with different argument names to the generic?\n\nIt depends. We first create the object hadley of class Person:\n\n.Person &lt;- setClass(\n  \"Person\",\n  slots = c(name = \"character\", age = \"numeric\")\n)\n\nhadley &lt;- .Person(name = \"Hadley\")\nhadley\n\n#&gt; Person\n#&gt;   Name: Hadley\n#&gt;   Age:\n\n\nNow let‚Äôs see which arguments can be supplied to the show() generic.\n\nformals(\"show\")\n\n#&gt; $object\n\n\nUsually, we would use this argument when defining a new method.\n\nsetMethod(\"show\", \"Person\", function(object) {\n  cat(object@name, \"creates hard exercises\")\n})\n\nhadley\n\n#&gt; Hadley creates hard exercises\n\n\nWhen we supply another name as a first element of our method (e.g.¬†x instead of object), this element will be matched to the correct object argument and we receive a warning. Our method will work, though:\n\nsetMethod(\"show\", \"Person\", function(x) {\n  cat(x@name, \"creates hard exercises\")\n})\n\nhadley\n\n#&gt; Hadley creates hard exercises\n\n\nIf we add more arguments to our method than our generic can handle, we will get an error.\n\nsetMethod(\"show\", \"Person\", function(x, y) {\n  cat(x@name, \"is\", x@age, \"years old\")\n})\n\n#&gt; Error in conformMethod(signature, mnames, fnames, f, fdef, definition): in method for 'show' with signature 'object=\"Person\"': formal arguments (object = \"Person\") omitted in the method definition cannot be in the signature\n\n\nIf we do this with arguments added to the correctly written object argument, we will receive an informative error message. It states that we could add other argument names for generics, which can take the ... argument.\n\nsetMethod(\"show\", \"Person\", function(object, y) {\n  cat(object@name, \"is\", object@age, \"years old\")\n})\n\n#&gt; Error in rematchDefinition(definition, fdef, mnames, fnames, signature): methods can add arguments to the generic 'show' only if '...' is an argument to the generic"
  },
  {
    "objectID": "slides/15.html#draw-the-method-graph-for-f-.",
    "href": "slides/15.html#draw-the-method-graph-for-f-.",
    "title": "S4",
    "section": "Draw the method graph for f(üòÖ, üòΩ).",
    "text": "Draw the method graph for f(üòÖ, üòΩ).\n\nLook at the graph and repeat after me: ‚ÄúI will keep my class structure simple and use multiple inheritance sparingly‚Äù."
  },
  {
    "objectID": "slides/15.html#draw-the-method-graph-for-f-.-1",
    "href": "slides/15.html#draw-the-method-graph-for-f-.-1",
    "title": "S4",
    "section": "Draw the method graph for f(üòÉ, üòâ, üòô).",
    "text": "Draw the method graph for f(üòÉ, üòâ, üòô).\n\nWe see that the method graph below looks simpler than the one above. Relatively speaking, multiple dispatch seems to introduce less complexity than multiple inheritance. Use it with care, though!"
  },
  {
    "objectID": "slides/15.html#take-the-last-example-which-shows-multiple-dispatch-over-two-classes-that-use-multiple-inheritance.-what-happens-if-you-define-a-method-for-all-terminal-classes-why-does-method-dispatch-not-save-us-much-work-here",
    "href": "slides/15.html#take-the-last-example-which-shows-multiple-dispatch-over-two-classes-that-use-multiple-inheritance.-what-happens-if-you-define-a-method-for-all-terminal-classes-why-does-method-dispatch-not-save-us-much-work-here",
    "title": "S4",
    "section": "Take the last example which shows multiple dispatch over two classes that use multiple inheritance. What happens if you define a method for all terminal classes? Why does method dispatch not save us much work here?",
    "text": "Take the last example which shows multiple dispatch over two classes that use multiple inheritance. What happens if you define a method for all terminal classes? Why does method dispatch not save us much work here?\n\nWe will introduce ambiguity, since one class has distance 2 to all terminal nodes and the other four have distance 1 to two terminal nodes each. To resolve this ambiguity we have to define five more methods, one per class combination."
  },
  {
    "objectID": "slides/15.html#what-would-a-full-setoldclass-definition-look-like-for-an-ordered-factor-i.e.-add-slots-and-prototype-to-the-definition-above",
    "href": "slides/15.html#what-would-a-full-setoldclass-definition-look-like-for-an-ordered-factor-i.e.-add-slots-and-prototype-to-the-definition-above",
    "title": "S4",
    "section": "What would a full setOldClass() definition look like for an ordered factor (i.e.¬†add slots and prototype to the definition above)?",
    "text": "What would a full setOldClass() definition look like for an ordered factor (i.e.¬†add slots and prototype to the definition above)?\n\nThe purpose of setOldClass() lies in registering an S3 class as a ‚Äúformally defined class‚Äù, so that it can be used within the S4 object-oriented programming system. When using it, we may provide the argument S4Class, which will inherit the slots and their default values (prototype) to the registered class.\nLet‚Äôs build an S4 OrderedFactor on top of the S3 factor in such a way.\n\nsetOldClass(\"factor\")    # use build-in definition for brevity\n\nOrderedFactor &lt;- setClass(\n  \"OrderedFactor\",\n  contains = \"factor\",   # inherit from registered S3 class\n  slots = c(\n    levels = \"character\",\n    ordered = \"logical\"  # add logical order slot\n  ),\n  prototype = structure(\n    integer(),\n    levels = character(),\n    ordered = logical()  # add default value\n  )\n)\n\nWe can now register the (S3) ordered-class, while providing an ‚ÄúS4 template‚Äù. We can also use the S4-class to create new object directly.\n\nsetOldClass(\"ordered\", S4Class = \"OrderedFactor\")\n\nx &lt;- OrderedFactor(\n  c(1L, 2L, 2L),\n  levels = c(\"a\", \"b\", \"c\"),\n  ordered = TRUE\n)\nstr(x)\n\n#&gt; Formal class 'OrderedFactor' [package \".GlobalEnv\"] with 4 slots\n#&gt;   ..@ .Data   : int [1:3] 1 2 2\n#&gt;   ..@ levels  : chr [1:3] \"a\" \"b\" \"c\"\n#&gt;   ..@ ordered : logi TRUE\n#&gt;   ..@ .S3Class: chr \"factor\""
  },
  {
    "objectID": "slides/15.html#define-a-length-method-for-the-person-class.",
    "href": "slides/15.html#define-a-length-method-for-the-person-class.",
    "title": "S4",
    "section": "Define a length method for the Person class.",
    "text": "Define a length method for the Person class.\n\nWe keep things simple and will just return \"180cm\" when the length() method is called on a Person object. The method can be defined either as an S3 or S4 method.\n\nlength.Person &lt;- function(x) \"180cm\"  # S3\nsetMethod(\"length\", \"Person\", function(x) \"180cm\")  # S4"
  },
  {
    "objectID": "slides/13.html#learning-objectives",
    "href": "slides/13.html#learning-objectives",
    "title": "S3",
    "section": "Learning Objectives",
    "text": "Learning Objectives\n\nRecognize S3 objects and classes.\nAssign S3 classes to objects.\nCreate S3 generics and methods.\nImplement advanced features of S3."
  },
  {
    "objectID": "slides/13.html#s3-objects-have-a-class-attribute",
    "href": "slides/13.html#s3-objects-have-a-class-attribute",
    "title": "S3",
    "section": "S3 objects have a class attribute",
    "text": "S3 objects have a class attribute\nAn S3 object has an attribute called ‚Äúclass‚Äù with at least one value.\n\nf &lt;- factor(c(\"a\", \"b\", \"c\"))\nattributes(f)\n\n#&gt; $levels\n#&gt; [1] \"a\" \"b\" \"c\"\n#&gt; \n#&gt; $class\n#&gt; [1] \"factor\""
  },
  {
    "objectID": "slides/13.html#s3-generics-provide-an-interface-to-a-particular-behavior",
    "href": "slides/13.html#s3-generics-provide-an-interface-to-a-particular-behavior",
    "title": "S3",
    "section": "S3 generics provide an interface to a particular behavior",
    "text": "S3 generics provide an interface to a particular behavior\n\nGeneric function (or ‚Äúgeneric‚Äù): Function that can be customized for different object classes.\nprint() is an S3 generic for displaying objects depending on their class attribute."
  },
  {
    "objectID": "slides/13.html#print-is-an-s3-generic",
    "href": "slides/13.html#print-is-an-s3-generic",
    "title": "S3",
    "section": "print() is an S3 generic",
    "text": "print() is an S3 generic\n\nsloop::ftype(print)\n\n#&gt; [1] \"S3\"      \"generic\"\n\nbody(print)\n\n#&gt; UseMethod(\"print\")\n\nsloop::s3_dispatch(print(f))\n\n#&gt; =&gt; print.factor\n#&gt;  * print.default"
  },
  {
    "objectID": "slides/13.html#print-behaves-differently-depending-on-the-objects-class",
    "href": "slides/13.html#print-behaves-differently-depending-on-the-objects-class",
    "title": "S3",
    "section": "print() behaves differently depending on the object‚Äôs class",
    "text": "print() behaves differently depending on the object‚Äôs class\n\nclass(f)\n\n#&gt; [1] \"factor\"\n\nprint(f)\n\n#&gt; [1] a b c\n#&gt; Levels: a b c\n\nf_uc &lt;- unclass(f)\nclass(f_uc)\n\n#&gt; [1] \"integer\"\n\nprint(f_uc)\n\n#&gt; [1] 1 2 3\n#&gt; attr(,\"levels\")\n#&gt; [1] \"a\" \"b\" \"c\""
  },
  {
    "objectID": "slides/13.html#print.factor-is-a-print-method-for-factors",
    "href": "slides/13.html#print.factor-is-a-print-method-for-factors",
    "title": "S3",
    "section": "print.factor() is a print() method for factors",
    "text": "print.factor() is a print() method for factors\nMethod: A function customized for a particular class.\n\nprint.factor # or sloop::s3_get_method(\"print.factor\")\n\n#&gt; function (x, quote = FALSE, max.levels = NULL, width = getOption(\"width\"), \n#&gt;     ...) \n#&gt; {\n#&gt;     ord &lt;- is.ordered(x)\n#&gt;     if (length(x) == 0L) \n#&gt;         cat(if (ord) \n#&gt;             \"ordered\"\n#&gt;         else \"factor\", \"()\\n\", sep = \"\")\n#&gt;     else {\n#&gt;         xx &lt;- character(length(x))\n#&gt;         xx[] &lt;- as.character(x)\n#&gt;         keepAttrs &lt;- setdiff(names(attributes(x)), c(\"levels\", \n#&gt;             \"class\"))\n#&gt;         attributes(xx)[keepAttrs] &lt;- attributes(x)[keepAttrs]\n#&gt;         print(xx, quote = quote, ...)\n#&gt;     }\n#&gt;     maxl &lt;- max.levels %||% TRUE\n#&gt;     if (maxl) {\n#&gt;         n &lt;- length(lev &lt;- encodeString(levels(x), quote = ifelse(quote, \n#&gt;             \"\\\"\", \"\")))\n#&gt;         colsep &lt;- if (ord) \n#&gt;             \" &lt; \"\n#&gt;         else \" \"\n#&gt;         T0 &lt;- \"Levels: \"\n#&gt;         if (is.logical(maxl)) \n#&gt;             maxl &lt;- {\n#&gt;                 width &lt;- width - (nchar(T0, \"w\") + 3L + 1L + \n#&gt;                   3L)\n#&gt;                 lenl &lt;- cumsum(nchar(lev, \"w\") + nchar(colsep, \n#&gt;                   \"w\"))\n#&gt;                 if (n &lt;= 1L || lenl[n] &lt;= width) \n#&gt;                   n\n#&gt;                 else max(1L, which.max(lenl &gt; width) - 1L)\n#&gt;             }\n#&gt;         drop &lt;- n &gt; maxl\n#&gt;         cat(if (drop) \n#&gt;             paste(format(n), \"\"), T0, paste(if (drop) \n#&gt;             c(lev[1L:max(1, maxl - 1)], \"...\", if (maxl &gt; 1) lev[n])\n#&gt;         else lev, collapse = colsep), \"\\n\", sep = \"\")\n#&gt;     }\n#&gt;     if (!isTRUE(val &lt;- .valid.factor(x))) \n#&gt;         warning(val)\n#&gt;     invisible(x)\n#&gt; }\n#&gt; &lt;bytecode: 0x0000022856b4d820&gt;\n#&gt; &lt;environment: namespace:base&gt;"
  },
  {
    "objectID": "slides/13.html#assign-an-s3-class-to-a-new-object-with-structure-or-class-",
    "href": "slides/13.html#assign-an-s3-class-to-a-new-object-with-structure-or-class-",
    "title": "S3",
    "section": "Assign an S3 class to a new object with structure() or class()<-",
    "text": "Assign an S3 class to a new object with structure() or class()&lt;-\n\nx &lt;- structure(list(), class = \"my_class\")\n\nx &lt;- list()\nclass(x) &lt;- \"my_class\"\nattributes(x)\n\n#&gt; $class\n#&gt; [1] \"my_class\"\n\n\nBut currently, this is pretty useless‚Ä¶"
  },
  {
    "objectID": "slides/13.html#create-new-s3-classes-with-3-functions",
    "href": "slides/13.html#create-new-s3-classes-with-3-functions",
    "title": "S3",
    "section": "Create new S3 classes with 3 functions",
    "text": "Create new S3 classes with 3 functions\n\nA low-level constructor, new_myclass(), that efficiently creates new objects with the correct structure.\nA validator, validate_myclass(), that performs more computationally expensive checks to ensure that the object has correct values.\nA user-friendly helper, myclass(), that provides a convenient way for others to create objects of your class."
  },
  {
    "objectID": "slides/13.html#new_factor-creates-the-new-s3-object",
    "href": "slides/13.html#new_factor-creates-the-new-s3-object",
    "title": "S3",
    "section": "1. new_factor() creates the new S3 object",
    "text": "1. new_factor() creates the new S3 object\nThe developer-facing function applies the correct structure for the object.\n\nnew_factor &lt;- function(x = integer(), levels = character()) {\n  stopifnot(is.integer(x))\n  stopifnot(is.character(levels))\n\n  structure(\n    x,\n    levels = levels,\n    class = \"factor\"\n  )\n}\n\nnew_factor(1:3, c(\"a\",\"b\",\"c\"))\n\n#&gt; [1] a b c\n#&gt; Levels: a b c"
  },
  {
    "objectID": "slides/13.html#validate_factor-provides-assurances-on-correctness",
    "href": "slides/13.html#validate_factor-provides-assurances-on-correctness",
    "title": "S3",
    "section": "2. validate_factor() provides assurances on correctness",
    "text": "2. validate_factor() provides assurances on correctness\nThough computationally expensive, the checks ensure correct values before creating the S3 object.\n\nvalidate_factor &lt;- function(x) {\n  values &lt;- unclass(x)\n  levels &lt;- attr(x, \"levels\")\n\n  if (!all(!is.na(values) & values &gt; 0)) {\n    stop(\n      \"All `x` values must be non-missing and greater than zero\",\n      call. = FALSE\n    )\n  }\n\n  if (length(levels) &lt; max(values)) {\n    stop(\n      \"There must be at least as many `levels` as possible values in `x`\",\n      call. = FALSE\n    )\n  }\n\n  x\n}\n\nvalidate_factor(new_factor(1:5, \"a\"))\n\n#&gt; Error: There must be at least as many `levels` as possible values in `x`\n\nvalidate_factor(new_factor(0:1, \"a\"))\n\n#&gt; Error: All `x` values must be non-missing and greater than zero"
  },
  {
    "objectID": "slides/13.html#factor-provides-a-safe-approach-for-users-to-create-objects",
    "href": "slides/13.html#factor-provides-a-safe-approach-for-users-to-create-objects",
    "title": "S3",
    "section": "3. factor() provides a safe approach for users to create objects",
    "text": "3. factor() provides a safe approach for users to create objects\nThe user-facing validates the values before creating the S3 object.\n\nfactor &lt;- function(x = character(), levels = unique(x)) {\n  ind &lt;- match(x, levels)\n  new_factor(ind, levels) |&gt; \n    validate_factor()\n}\n\nfactor(c(\"a\", \"a\", \"b\"))\n\n#&gt; [1] a a b\n#&gt; Levels: a b"
  },
  {
    "objectID": "slides/13.html#example-s3-classes-in-the-wild-use-the-recommended-interface",
    "href": "slides/13.html#example-s3-classes-in-the-wild-use-the-recommended-interface",
    "title": "S3",
    "section": "Example S3 classes ‚Äúin the wild‚Äù use the recommended interface",
    "text": "Example S3 classes ‚Äúin the wild‚Äù use the recommended interface\n\ntibble::new_tibble(), tibble::validate_tibble(), tibble::tibble()\ndplyr::new_grouped_df(), dplyr::validate_grouped_df(), dplyr::grouped_df()"
  },
  {
    "objectID": "slides/13.html#summary-is-an-s3-generic-that-behaves-based-on-an-objects-class",
    "href": "slides/13.html#summary-is-an-s3-generic-that-behaves-based-on-an-objects-class",
    "title": "S3",
    "section": "summary() is an S3 generic that behaves based on an object‚Äôs class",
    "text": "summary() is an S3 generic that behaves based on an object‚Äôs class\n\nsloop::is_s3_generic(\"summary\")\n\n#&gt; [1] TRUE\n\nsummary\n\n#&gt; function (object, ...) \n#&gt; UseMethod(\"summary\")\n#&gt; &lt;bytecode: 0x0000022854118238&gt;\n#&gt; &lt;environment: namespace:base&gt;\n\nsloop::s3_methods_generic(\n  \"summary\"\n) |&gt; \n  knitr::kable()\n\n\n\n\ngeneric\nclass\nvisible\nsource\n\n\n\n\nsummary\naov\nTRUE\nstats\n\n\nsummary\naovlist\nFALSE\nregistered S3method\n\n\nsummary\naspell\nFALSE\nregistered S3method\n\n\nsummary\ncheck_packages_in_dir\nFALSE\nregistered S3method\n\n\nsummary\nconnection\nTRUE\nbase\n\n\nsummary\ndata.frame\nTRUE\nbase\n\n\nsummary\nDate\nTRUE\nbase\n\n\nsummary\ndefault\nTRUE\nbase\n\n\nsummary\ndifftime\nTRUE\nbase\n\n\nsummary\necdf\nFALSE\nregistered S3method\n\n\nsummary\nfactor\nTRUE\nbase\n\n\nsummary\nglm\nTRUE\nstats\n\n\nsummary\ninfl\nFALSE\nregistered S3method\n\n\nsummary\nlm\nTRUE\nstats\n\n\nsummary\nloess\nFALSE\nregistered S3method\n\n\nsummary\nmanova\nTRUE\nstats\n\n\nsummary\nmatrix\nTRUE\nbase\n\n\nsummary\nmlm\nFALSE\nregistered S3method\n\n\nsummary\nnls\nFALSE\nregistered S3method\n\n\nsummary\npackageStatus\nFALSE\nregistered S3method\n\n\nsummary\nPOSIXct\nTRUE\nbase\n\n\nsummary\nPOSIXlt\nTRUE\nbase\n\n\nsummary\nppr\nFALSE\nregistered S3method\n\n\nsummary\nprcomp\nFALSE\nregistered S3method\n\n\nsummary\nprincomp\nFALSE\nregistered S3method\n\n\nsummary\nproc_time\nTRUE\nbase\n\n\nsummary\nrlang:::list_of_conditions\nFALSE\nregistered S3method\n\n\nsummary\nrlang_error\nFALSE\nregistered S3method\n\n\nsummary\nrlang_message\nFALSE\nregistered S3method\n\n\nsummary\nrlang_trace\nFALSE\nregistered S3method\n\n\nsummary\nrlang_warning\nFALSE\nregistered S3method\n\n\nsummary\nsrcfile\nTRUE\nbase\n\n\nsummary\nsrcref\nTRUE\nbase\n\n\nsummary\nstepfun\nTRUE\nstats\n\n\nsummary\nstl\nFALSE\nregistered S3method\n\n\nsummary\ntable\nTRUE\nbase\n\n\nsummary\ntukeysmooth\nFALSE\nregistered S3method\n\n\nsummary\nvctrs_sclr\nFALSE\nregistered S3method\n\n\nsummary\nvctrs_vctr\nFALSE\nregistered S3method\n\n\nsummary\nwarnings\nTRUE\nbase\n\n\n\n\n\n\nThis slide throws a warning because the generated table actually includes 3 colons. It isn‚Äôt a ‚Äúproblem with a fenced div‚Äù like the warning thinks."
  },
  {
    "objectID": "slides/13.html#summary-is-an-interface-to-different-methods",
    "href": "slides/13.html#summary-is-an-interface-to-different-methods",
    "title": "S3",
    "section": "summary() is an interface to different methods",
    "text": "summary() is an interface to different methods\n\nPolymorphism: a single interface to different behaviors.\nHowever, summary() does not have a consistent output class.\n\n\niris$Sepal.Lengthiris$Species\n\n\n\na &lt;- iris$Sepal.Length\nclass(a)\n\n#&gt; [1] \"numeric\"\n\n(a_summary &lt;- summary(a))\n\n#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. \n#&gt;   4.300   5.100   5.800   5.843   6.400   7.900\n\nsloop::s3_class(a_summary)\n\n#&gt; [1] \"summaryDefault\" \"table\"\n\n\n\n\n\nb &lt;- iris$Species\nclass(b)\n\n#&gt; [1] \"factor\"\n\n(b_summary &lt;- summary(b))\n\n#&gt;     setosa versicolor  virginica \n#&gt;         50         50         50\n\nsloop::s3_class(b_summary)\n\n#&gt; [1] \"integer\" \"numeric\""
  },
  {
    "objectID": "slides/13.html#the-custom-summarizer-s3-generic-outputs-a-consistent-object",
    "href": "slides/13.html#the-custom-summarizer-s3-generic-outputs-a-consistent-object",
    "title": "S3",
    "section": "The custom summarizer() S3 generic outputs a consistent object",
    "text": "The custom summarizer() S3 generic outputs a consistent object\n\nThe goal is to summarize characters, factors, and numeric objects\nThe output should always be a length one character object\n\nCreate a new S3 generic following two rules\n\nOnly write a method if you own the generic. Otherwise, it is considdered bad manners.\nThe method must have the same arguments as its generic‚Äìwith one important exception: ..."
  },
  {
    "objectID": "slides/13.html#summarizer-includes-usemethod-for-dispatching",
    "href": "slides/13.html#summarizer-includes-usemethod-for-dispatching",
    "title": "S3",
    "section": "summarizer() includes UseMethod for dispatching",
    "text": "summarizer() includes UseMethod for dispatching\n\nsummarizer &lt;- function(x, probs = c(0.25, 0.5, 0.75)) {\n  UseMethod(\"summarizer\")\n}\n\n\n\n\n\n\n\nCaution\n\n\nYou don‚Äôt pass any of the arguments of the generic to UseMethod(); it uses deep magic to pass to the method automatically. The precise process is complicated and frequently surprising, so you should avoid doing any computation in a generic. See ?UseMethod for details."
  },
  {
    "objectID": "slides/13.html#summarizer-outputs-consistent-summary-strings",
    "href": "slides/13.html#summarizer-outputs-consistent-summary-strings",
    "title": "S3",
    "section": "summarizer() outputs consistent summary strings",
    "text": "summarizer() outputs consistent summary strings\nEncapsulation: Bundle data and methods into a single object or ‚Äúunit‚Äù.\n\nCharactersNumericsFactorsDefaultVector ExamplesDataframe Example\n\n\n\nsummarizer.character &lt;- function(x, probs = c(0.25, 0.5, 0.75)) {\n  tab &lt;- sort(table(x), decreasing = TRUE)\n  # Format as \"value (n)\"\n  pairs &lt;- paste0(names(tab), \" (\", tab, \")\")\n  paste(pairs, collapse = \", \")\n}\n\n\n\n\nsummarizer.numeric &lt;- function(x, probs = c(0.25, 0.5, 0.75)) {\n  # Remove NAs to avoid warnings\n  x_no_na &lt;- x[!is.na(x)]\n  \n  qs &lt;- quantile(x_no_na, probs = probs, names = FALSE)\n  names(qs) &lt;- paste0(\"Q\", seq_along(qs))\n\n  stats &lt;- c(\n    Min = min(x_no_na),\n    qs,\n    Max = max(x_no_na)\n  )\n  \n  paste0(\n    paste(names(stats), format(stats), sep = \": \", collapse = \", \")\n  )\n}\n\n\n\n\nsummarizer.factor &lt;- function(x, probs = c(0.25, 0.5, 0.75)) {\n  # Just delegate to character method on the labels\n  summarizer(as.character(x), probs = probs)\n}\n\n\n\n\nsummarizer.default &lt;- function(x, probs = c(0.25, 0.5, 0.75)) {\n  cls &lt;- paste(class(x), collapse = \", \")\n  paste0(\"No summarizer method for class: \", cls)\n}\n\n\n\n\nsummarizer(c(\"apple\", \"apple\", \"pear\", \"pear\", \"pear\", \"orange\"))\n\n#&gt; [1] \"pear (3), apple (2), orange (1)\"\n\nsummarizer(factor(c(\"a\",\"b\",\"b\",\"a\",\"c\",\"c\",\"c\")))\n\n#&gt; [1] \"c (3), a (2), b (2)\"\n\nsummarizer(c(1,2,3,4,5,6,10))\n\n#&gt; [1] \"Min:  1.0, Q1:  2.5, Q2:  4.0, Q3:  5.5, Max: 10.0\"\n\nsummarizer(c(1,50,100,250), probs = c(.1, .9))\n\n#&gt; [1] \"Min:   1.0, Q1:  15.7, Q2: 205.0, Max: 250.0\"\n\n\n\n\n\niris |&gt; \n  vapply(\n    summarizer,\n    character(1)\n  )\n\n#&gt;                                         Sepal.Length \n#&gt;      \"Min: 4.3, Q1: 5.1, Q2: 5.8, Q3: 6.4, Max: 7.9\" \n#&gt;                                          Sepal.Width \n#&gt;      \"Min: 2.0, Q1: 2.8, Q2: 3.0, Q3: 3.3, Max: 4.4\" \n#&gt;                                         Petal.Length \n#&gt; \"Min: 1.00, Q1: 1.60, Q2: 4.35, Q3: 5.10, Max: 6.90\" \n#&gt;                                          Petal.Width \n#&gt;      \"Min: 0.1, Q1: 0.3, Q2: 1.3, Q3: 1.8, Max: 2.5\" \n#&gt;                                              Species \n#&gt;       \"setosa (50), versicolor (50), virginica (50)\"\n\nsurvival::lung |&gt; \n  vapply(\n    summarizer,\n    character(1)\n  )\n\n#&gt;                                                                inst \n#&gt;                          \"Min:  1, Q1:  3, Q2: 11, Q3: 16, Max: 33\" \n#&gt;                                                                time \n#&gt; \"Min:    5.00, Q1:  166.75, Q2:  255.50, Q3:  396.50, Max: 1022.00\" \n#&gt;                                                              status \n#&gt;                               \"Min: 1, Q1: 1, Q2: 2, Q3: 2, Max: 2\" \n#&gt;                                                                 age \n#&gt;                          \"Min: 39, Q1: 56, Q2: 63, Q3: 69, Max: 82\" \n#&gt;                                                                 sex \n#&gt;                               \"Min: 1, Q1: 1, Q2: 1, Q3: 2, Max: 2\" \n#&gt;                                                             ph.ecog \n#&gt;                               \"Min: 0, Q1: 0, Q2: 1, Q3: 1, Max: 3\" \n#&gt;                                                            ph.karno \n#&gt;                     \"Min:  50, Q1:  75, Q2:  80, Q3:  90, Max: 100\" \n#&gt;                                                           pat.karno \n#&gt;                     \"Min:  30, Q1:  70, Q2:  80, Q3:  90, Max: 100\" \n#&gt;                                                            meal.cal \n#&gt;                \"Min:   96, Q1:  635, Q2:  975, Q3: 1150, Max: 2600\" \n#&gt;                                                             wt.loss \n#&gt;      \"Min: -24.00, Q1:   0.00, Q2:   7.00, Q3:  15.75, Max:  68.00\""
  },
  {
    "objectID": "slides/13.html#the-next-method-is-used-for-missing-summarizer-generics",
    "href": "slides/13.html#the-next-method-is-used-for-missing-summarizer-generics",
    "title": "S3",
    "section": "The next method is used for missing summarizer() generics",
    "text": "The next method is used for missing summarizer() generics\nInheritance: method dispatching through the ‚Äúclass‚Äù attribute.\n\na &lt;- iris$Species\nsummarizer(a)\n\n#&gt; [1] \"setosa (50), versicolor (50), virginica (50)\"\n\n(class(a) &lt;- c(\"my_class\",class(a)))\n\n#&gt; [1] \"my_class\" \"factor\"\n\nsummarizer(a)\n\n#&gt; [1] \"setosa (50), versicolor (50), virginica (50)\""
  },
  {
    "objectID": "slides/13.html#s3-classes-can-conceal-data-elements-from-length-for-concise-representation",
    "href": "slides/13.html#s3-classes-can-conceal-data-elements-from-length-for-concise-representation",
    "title": "S3",
    "section": "S3 classes can conceal data elements from length() for concise representation",
    "text": "S3 classes can conceal data elements from length() for concise representation\n\nRecord style objects use a list of equal-length vectors to represent individual components of the object.\nThe best example of this is POSIXlt, which underneath the hood is a list of 11 date-time components like year, month, and day.\nRecord style classes override length() and subsetting methods to conceal this implementation detail.\n\n\nx &lt;- as.POSIXlt(ISOdatetime(2020, 1, 1, 0, 0, 1:3))\nx\n\n#&gt; [1] \"2020-01-01 00:00:01 CST\" \"2020-01-01 00:00:02 CST\"\n#&gt; [3] \"2020-01-01 00:00:03 CST\"\n\nlength(x)\n\n#&gt; [1] 3\n\nlength(unclass(x))\n\n#&gt; [1] 11\n\nx[[1]] # the first date time\n\n#&gt; [1] \"2020-01-01 00:00:01 CST\"\n\nunclass(x)[[1]] # the first component, the number of seconds\n\n#&gt; [1] 1 2 3"
  },
  {
    "objectID": "slides/13.html#nextmethoddelegates-dispatch-behavior-for-classes-without-explicit-generics",
    "href": "slides/13.html#nextmethoddelegates-dispatch-behavior-for-classes-without-explicit-generics",
    "title": "S3",
    "section": "NextMethod()delegates dispatch behavior for classes without explicit generics",
    "text": "NextMethod()delegates dispatch behavior for classes without explicit generics"
  },
  {
    "objectID": "slides/13.html#secret-masks-each-character-of-the-input-with-x-in-the-output",
    "href": "slides/13.html#secret-masks-each-character-of-the-input-with-x-in-the-output",
    "title": "S3",
    "section": "secret() masks each character of the input with x in the output",
    "text": "secret() masks each character of the input with x in the output\n\nnew_secret &lt;- function(x = double()) {\n  stopifnot(is.double(x))\n  structure(x, class = \"secret\")\n}\n\nprint.secret &lt;- function(x, ...) {\n  print(strrep(\"x\", nchar(x)))\n  invisible(x)\n}\n\ny &lt;- new_secret(c(15, 1, 456))\ny\n\n#&gt; [1] \"xx\"  \"x\"   \"xxx\""
  },
  {
    "objectID": "slides/13.html#there-is-unexpected-behavior-without-a-generic-for-the-secret-class",
    "href": "slides/13.html#there-is-unexpected-behavior-without-a-generic-for-the-secret-class",
    "title": "S3",
    "section": "There is unexpected behavior without a [ generic for the secret class",
    "text": "There is unexpected behavior without a [ generic for the secret class\n\nThe [ method is problematic in that it does not preserve the secret class.\ny[1] returns 15 as the first element instead of xx.\n\n\nsloop::s3_dispatch(y[1])\n\n#&gt;    [.secret\n#&gt;    [.default\n#&gt; =&gt; [ (internal)\n\ny[1]\n\n#&gt; [1] 15\n\n\nFix this with a [.secret method:"
  },
  {
    "objectID": "slides/13.html#nextmethod-is-an-efficient-way-to-subset-a-secret-class",
    "href": "slides/13.html#nextmethod-is-an-efficient-way-to-subset-a-secret-class",
    "title": "S3",
    "section": "NextMethod() is an efficient way to subset a secret class",
    "text": "NextMethod() is an efficient way to subset a secret class\n\nNextMethod()Inefficient approach\n\n\n\n`[.secret` &lt;- function(x, i) {\n  # first, dispatch to `[`\n  # then, coerce subset value to `secret` class\n  new_secret(NextMethod())\n}\n\n\n[.secret is selected, but delegates to internal [.\nMakes secret object for that element alone\n\n\nsloop::s3_dispatch(y[1])\n\n#&gt; =&gt; [.secret\n#&gt;    [.default\n#&gt; -&gt; [ (internal)\n\ny[1]\n\n#&gt; [1] \"xx\"\n\n\n\n\n\nIncludes copying and infinite loop\n\n\n# not run\n`[.secret` &lt;- function(x, i) {\n  x &lt;- unclass(x)\n  new_secret(x[i])\n}"
  },
  {
    "objectID": "slides/13.html#s3-classes-can-inherit-generics-from-the-superclass",
    "href": "slides/13.html#s3-classes-can-inherit-generics-from-the-superclass",
    "title": "S3",
    "section": "S3 classes can inherit generics from the superclass",
    "text": "S3 classes can inherit generics from the superclass\n\nInclude superclassCreate subclass genericUse vctrs::vec_restore\n\n\n\nNote: You should ‚Äòown‚Äô the superclass constructor\n\n\nnew_secret &lt;- function(x, ..., class = character()) {\n  stopifnot(is.double(x))\n\n  structure(\n    x,\n    ...,\n    class = c(class, \"secret\")\n  )\n}\n\n\n\n\nSimply invoke the superclass constructor inside of the subclass constructor:\n\n\nnew_supersecret &lt;- function(x) {\n  new_secret(x, class = \"supersecret\")\n}\n\nprint.supersecret &lt;- function(x, ...) {\n  print(rep(\"xxxxx\", length(x)))\n  invisible(x)\n}\n\nx2 &lt;- new_supersecret(c(15, 1, 456))\nx2\n\n#&gt; [1] \"xxxxx\" \"xxxxx\" \"xxxxx\"\n\n\n\n\n\nNo way in base R to properly delegate methods in inheritance chain\nvctrs::vec_restore provides proper method chaining\n\n\nvec_restore.secret &lt;- function(x, to, ...) new_secret(x)\nvec_restore.supersecret &lt;- function(x, to, ...) new_supersecret(x)\n`[.secret` &lt;- function(x, ...) {\n  vctrs::vec_restore(NextMethod(), x)\n}\nx2[1:3]\n\n#&gt; [1] \"xxxxx\" \"xxxxx\" \"xxxxx\""
  },
  {
    "objectID": "slides/11.html#learning-objectives",
    "href": "slides/11.html#learning-objectives",
    "title": "Function operators",
    "section": "Learning objectives:",
    "text": "Learning objectives:\n\nDefine function operator\nExplore some existing function operators\nMake our own function operator"
  },
  {
    "objectID": "slides/11.html#introduction",
    "href": "slides/11.html#introduction",
    "title": "Function operators",
    "section": "Introduction",
    "text": "Introduction\n\n\nA function operator is a function that takes one (or more) functions as input and returns a function as output.\nFunction operators are a special case of function factories, since they return functions.\nThey are often used to wrap an existing function to provide additional capability, similar to python‚Äôs decorators.\n\n\nchatty &lt;- function(f) {\n  force(f)\n  \n  function(x, ...) {\n    res &lt;- f(x, ...)\n    cat(\"Processing \", x, \"\\n\", sep = \"\")\n    res\n  }\n}\n\nf &lt;- function(x) x ^ 2\ns &lt;- c(3, 2, 1)\n\npurrr::map_dbl(s, chatty(f))\n\n#&gt; Processing 3\n#&gt; Processing 2\n#&gt; Processing 1\n\n\n#&gt; [1] 9 4 1"
  },
  {
    "objectID": "slides/11.html#existing-function-operators",
    "href": "slides/11.html#existing-function-operators",
    "title": "Function operators",
    "section": "Existing function operators",
    "text": "Existing function operators\nTwo function operator examples are purrr:safely() and memoise::memoise(). These can be found in purr and memoise:\n\nlibrary(purrr)\nlibrary(memoise)"
  },
  {
    "objectID": "slides/11.html#purrrsafely",
    "href": "slides/11.html#purrrsafely",
    "title": "Function operators",
    "section": "purrr::safely",
    "text": "purrr::safely\nCapturing Errors: turns errors into data!\n\nx &lt;- list(\n  c(0.512, 0.165, 0.717),\n  c(0.064, 0.781, 0.427),\n  c(0.890, 0.785, 0.495),\n  \"oops\"\n)\n\n\nmap_dbl(x, sum)\n#&gt; Error in .Primitive(\"sum\")(..., na.rm = na.rm): invalid 'type' (character) of\n#&gt; argument\n\n\n# note use of map (not map_dbl), safely returns a lisst\n\nout &lt;- map(x, safely(sum))\nstr(transpose(out))\n\n#&gt; List of 2\n#&gt;  $ result:List of 4\n#&gt;   ..$ : num 1.39\n#&gt;   ..$ : num 1.27\n#&gt;   ..$ : num 2.17\n#&gt;   ..$ : NULL\n#&gt;  $ error :List of 4\n#&gt;   ..$ : NULL\n#&gt;   ..$ : NULL\n#&gt;   ..$ : NULL\n#&gt;   ..$ :List of 2\n#&gt;   .. ..$ message: chr \"invalid 'type' (character) of argument\"\n#&gt;   .. ..$ call   : language .Primitive(\"sum\")(..., na.rm = na.rm)\n#&gt;   .. ..- attr(*, \"class\")= chr [1:3] \"simpleError\" \"error\" \"condition\""
  },
  {
    "objectID": "slides/11.html#other-purrr-function-operators",
    "href": "slides/11.html#other-purrr-function-operators",
    "title": "Function operators",
    "section": "Other purrr function operators",
    "text": "Other purrr function operators\n\n\npurrr comes with three other function operators in a similar vein:\n\n  possibly(): returns a default value when there‚Äôs an error. It provides no way to tell if an error occured or not, so it‚Äôs best reserved for cases when there‚Äôs some obvious sentinel value (like NA).\n\n  quietly(): turns output, messages, and warning side-effects into output, message, and warning components of the output.\n\n  auto_browser(): automatically executes browser() inside the function when there‚Äôs an error."
  },
  {
    "objectID": "slides/11.html#memoisememoise",
    "href": "slides/11.html#memoisememoise",
    "title": "Function operators",
    "section": "memoise::memoise",
    "text": "memoise::memoise\nCaching computations: avoid repeated computations!\n\nslow_function &lt;- function(x) {\n  Sys.sleep(1)\n  x * 10 * runif(1)\n}\nsystem.time(print(slow_function(1)))\n\n#&gt; [1] 3.054764\n\n\n#&gt;    user  system elapsed \n#&gt;    0.02    0.00    1.02\n\nsystem.time(print(slow_function(1)))\n\n#&gt; [1] 3.644634\n\n\n#&gt;    user  system elapsed \n#&gt;    0.00    0.00    1.03\n\n\n\nfast_function &lt;- memoise::memoise(slow_function)\nsystem.time(print(fast_function(1)))\n\n#&gt; [1] 7.451108\n\n\n#&gt;    user  system elapsed \n#&gt;    0.00    0.00    1.01\n\nsystem.time(print(fast_function(1)))\n\n#&gt; [1] 7.451108\n\n\n#&gt;    user  system elapsed \n#&gt;    0.00    0.00    0.01\n\n\n\nBe careful about memoising impure functions!"
  },
  {
    "objectID": "slides/11.html#exercise",
    "href": "slides/11.html#exercise",
    "title": "Function operators",
    "section": "Exercise",
    "text": "Exercise\nHow does safely() work?\nThe source code looks like this:\n\nsafely\n\n#&gt; function (.f, otherwise = NULL, quiet = TRUE) \n#&gt; {\n#&gt;     .f &lt;- as_mapper(.f)\n#&gt;     force(otherwise)\n#&gt;     check_bool(quiet)\n#&gt;     function(...) capture_error(.f(...), otherwise, quiet)\n#&gt; }\n#&gt; &lt;bytecode: 0x00000183867aacf0&gt;\n#&gt; &lt;environment: namespace:purrr&gt;\n\n\nThe real work is done in capture_error which is defined in the package namespace. We can access it with the ::: operator. (Could also grab it from the function‚Äôs environment.)\n\npurrr:::capture_error\n\n#&gt; function (code, otherwise = NULL, quiet = TRUE) \n#&gt; {\n#&gt;     tryCatch(list(result = code, error = NULL), error = function(e) {\n#&gt;         if (!quiet) {\n#&gt;             message(\"Error: \", conditionMessage(e))\n#&gt;         }\n#&gt;         list(result = otherwise, error = e)\n#&gt;     })\n#&gt; }\n#&gt; &lt;bytecode: 0x0000018386817b60&gt;\n#&gt; &lt;environment: namespace:purrr&gt;"
  },
  {
    "objectID": "slides/11.html#case-study-make-your-own-function-operator",
    "href": "slides/11.html#case-study-make-your-own-function-operator",
    "title": "Function operators",
    "section": "Case study: make your own function operator",
    "text": "Case study: make your own function operator\n\nurls &lt;- c(\n  \"adv-r\" = \"https://adv-r.hadley.nz\", \n  \"r4ds\" = \"http://r4ds.had.co.nz/\"\n  # and many many more\n)\npath &lt;- paste(tempdir(), names(urls), \".html\")\n\nwalk2(urls, path, download.file, quiet = TRUE)\n\nHere we make a function operator that add a little delay in reading each page:\n\ndelay_by &lt;- function(f, amount) {\n  force(f)\n  force(amount)\n  \n  function(...) {\n    Sys.sleep(amount)\n    f(...)\n  }\n}\nsystem.time(runif(100))\n\n#&gt;    user  system elapsed \n#&gt;       0       0       0\n\nsystem.time(delay_by(runif, 0.1)(100))\n\n#&gt;    user  system elapsed \n#&gt;    0.00    0.00    0.11\n\n\nAnd another to add a dot after nth invocation:\n\ndot_every &lt;- function(f, n) {\n  force(f)\n  force(n)\n  \n  i &lt;- 0\n  function(...) {\n    i &lt;&lt;- i + 1\n    if (i %% n == 0) cat(\".\")\n    f(...)\n  }\n}\n\nwalk(1:100, dot_every(runif, 10))\n\n#&gt; ..........\n\n\nCan now use both of these function operators to express our desired result:\n\nwalk2(\n  urls, path, \n  download.file %&gt;% dot_every(10) %&gt;% delay_by(0.1), \n  quiet = TRUE\n)"
  },
  {
    "objectID": "slides/11.html#exercise-1",
    "href": "slides/11.html#exercise-1",
    "title": "Function operators",
    "section": "Exercise",
    "text": "Exercise\n\nShould you memoise file.download? Why or why not?"
  },
  {
    "objectID": "slides/09.html#learning-objectives",
    "href": "slides/09.html#learning-objectives",
    "title": "Functionals",
    "section": "Learning objectives",
    "text": "Learning objectives\n\nDescribe the ‚Äúfunctional style‚Äù of programming in R.\nReplace for loops with functionals.\nUse the purrr::map() family of functions to apply a function to each element of a list or vector.\nCombine multiple functionals to solve complex problems.\nUse purrr::reduce() to combine elements of a vector into a single result.\nUse predicate functionals to work with logical conditions.\nRecognize and use base R functionals that lack purrr equivalents."
  },
  {
    "objectID": "slides/09.html#r-is-a-functional-language-at-heart",
    "href": "slides/09.html#r-is-a-functional-language-at-heart",
    "title": "Functionals",
    "section": "R is a functional language at heart",
    "text": "R is a functional language at heart\n\nR lends itself to a style of problem solving centered on functions.\nThis ‚Äúfunctional style‚Äù is a good fit for data analysis problems.\nFunctional techniques can produce efficient and elegant solutions."
  },
  {
    "objectID": "slides/09.html#functional-programming-languages-have-first-class-functions",
    "href": "slides/09.html#functional-programming-languages-have-first-class-functions",
    "title": "Functionals",
    "section": "Functional programming languages have first-class functions",
    "text": "Functional programming languages have first-class functions\nA key feature of functional languages is their use of first-class functions.\nIn R, this means you can:\n\nAssign functions to variables.\nStore them in lists.\nPass them as arguments to other functions.\nCreate them inside functions.\nReturn them as the result of a function."
  },
  {
    "objectID": "slides/09.html#pure-functions-depend-only-on-their-inputs",
    "href": "slides/09.html#pure-functions-depend-only-on-their-inputs",
    "title": "Functionals",
    "section": "Pure functions depend only on their inputs",
    "text": "Pure functions depend only on their inputs\nMany functional languages require functions to be pure.\n\nA pure function‚Äôs output only depends on its inputs.\n\nrunif(), read.csv(), and Sys.time() are not pure.\n\nA pure function has no side-effects (e.g., changing global variables, writing to disk).\n\nprint(), write.csv(), and &lt;- are not pure.\n\n\nR is not a strictly functional language because it doesn‚Äôt require pure functions."
  },
  {
    "objectID": "slides/09.html#the-functional-style-decomposes-a-big-problem-into-smaller-pieces",
    "href": "slides/09.html#the-functional-style-decomposes-a-big-problem-into-smaller-pieces",
    "title": "Functionals",
    "section": "The ‚Äúfunctional style‚Äù decomposes a big problem into smaller pieces",
    "text": "The ‚Äúfunctional style‚Äù decomposes a big problem into smaller pieces\n\nSolve each piece with a function or combination of functions.\nStrive to create isolated functions that operate independently.\nComplexity is handled by composing functions in various ways."
  },
  {
    "objectID": "slides/09.html#key-functional-techniques",
    "href": "slides/09.html#key-functional-techniques",
    "title": "Functionals",
    "section": "Key functional techniques",
    "text": "Key functional techniques\n\nChapter 9: Functionals: Functions that take a function as an argument.\nChapter 10: Function factories: Functions that create functions.\nChapter 11: Function operators: Functions that take functions as input and produce functions as output."
  },
  {
    "objectID": "slides/09.html#a-functional-takes-a-function-as-input-and-returns-a-vector-as-output",
    "href": "slides/09.html#a-functional-takes-a-function-as-input-and-returns-a-vector-as-output",
    "title": "Functionals",
    "section": "A functional takes a function as input and returns a vector as output",
    "text": "A functional takes a function as input and returns a vector as output\n\nrandomise &lt;- function(f) f(runif(1e3))\nrandomise(mean)\n\n#&gt; [1] 0.4903279\n\nrandomise(sum)\n\n#&gt; [1] 500.9905\n\n\nCommon examples:\n\nlapply(), apply(), and tapply() in base R\npurrr::map()\nMathematical functionals like integrate() or optim()"
  },
  {
    "objectID": "slides/09.html#functionals-are-better-than-for-loops",
    "href": "slides/09.html#functionals-are-better-than-for-loops",
    "title": "Functionals",
    "section": "Functionals are better than for loops",
    "text": "Functionals are better than for loops\n\nTo become significantly more reliable, code must become more transparent. In particular, nested conditions and loops must be viewed with great suspicion. Complicated control flows confuse programmers. Messy code often hides bugs.\n‚Äî Bjarne Stroustrup\n\n\nfor loops are too flexible. You‚Äôre iterating, but why?\nEach functional is tailored for a specific task. Conveys intent."
  },
  {
    "objectID": "slides/09.html#purrrmap-applies-a-function-to-each-element-of-a-vector",
    "href": "slides/09.html#purrrmap-applies-a-function-to-each-element-of-a-vector",
    "title": "Functionals",
    "section": "purrr::map() applies a function to each element of a vector",
    "text": "purrr::map() applies a function to each element of a vector\nmap(1:3, f) == list(f(1), f(2), f(3))\n\nlibrary(purrr)\ntriple &lt;- function(x) x * 3\nmap(1:3, triple)\n\n#&gt; [[1]]\n#&gt; [1] 3\n#&gt; \n#&gt; [[2]]\n#&gt; [1] 6\n#&gt; \n#&gt; [[3]]\n#&gt; [1] 9"
  },
  {
    "objectID": "slides/09.html#use-map_type-to-return-an-atomic-vector",
    "href": "slides/09.html#use-map_type-to-return-an-atomic-vector",
    "title": "Functionals",
    "section": "Use map_<type>() to return an atomic vector",
    "text": "Use map_&lt;type&gt;() to return an atomic vector\n\nmap() returns a list.\nmap_lgl() returns a logical vector.\nmap_int() returns an integer vector.\nmap_dbl() returns a double vector.\nmap_chr() returns a character vector."
  },
  {
    "objectID": "slides/09.html#use-map_type-to-return-an-atomic-vector-cont.",
    "href": "slides/09.html#use-map_type-to-return-an-atomic-vector-cont.",
    "title": "Functionals",
    "section": "Use map_<type>() to return an atomic vector (cont.)",
    "text": "Use map_&lt;type&gt;() to return an atomic vector (cont.)\n\n# map_chr() always returns a character vector\nmap_chr(mtcars, typeof)\n\n#&gt;      mpg      cyl     disp       hp     drat       wt     qsec       vs \n#&gt; \"double\" \"double\" \"double\" \"double\" \"double\" \"double\" \"double\" \"double\" \n#&gt;       am     gear     carb \n#&gt; \"double\" \"double\" \"double\"\n\n# map_dbl() always returns a double vector\nmap_dbl(mtcars, mean)\n\n#&gt;        mpg        cyl       disp         hp       drat         wt       qsec \n#&gt;  20.090625   6.187500 230.721875 146.687500   3.596563   3.217250  17.848750 \n#&gt;         vs         am       gear       carb \n#&gt;   0.437500   0.406250   3.687500   2.812500"
  },
  {
    "objectID": "slides/09.html#use-anonymous-functions-for-concise-operations",
    "href": "slides/09.html#use-anonymous-functions-for-concise-operations",
    "title": "Functionals",
    "section": "Use anonymous functions for concise operations",
    "text": "Use anonymous functions for concise operations\n\nmap_dbl(mtcars, function(x) length(unique(x)))\n\n#&gt;  mpg  cyl disp   hp drat   wt qsec   vs   am gear carb \n#&gt;   25    3   27   22   22   29   30    2    2    3    6\n\n\npurrr provides ~ shortcut:\n\nmap_dbl(mtcars, ~ length(unique(.x)))\n\n#&gt;  mpg  cyl disp   hp drat   wt qsec   vs   am gear carb \n#&gt;   25    3   27   22   22   29   30    2    2    3    6\n\n\nR 4.1.0 provides \\() shortcut (\\ == function):\n\nmap_dbl(mtcars, \\(x) length(unique(x)))\n\n#&gt;  mpg  cyl disp   hp drat   wt qsec   vs   am gear carb \n#&gt;   25    3   27   22   22   29   30    2    2    3    6"
  },
  {
    "objectID": "slides/09.html#pass-additional-arguments-to-map-with-...-or-via-anonymous-function",
    "href": "slides/09.html#pass-additional-arguments-to-map-with-...-or-via-anonymous-function",
    "title": "Functionals",
    "section": "Pass additional arguments to map() with ... or via anonymous function",
    "text": "Pass additional arguments to map() with ... or via anonymous function\n\nx &lt;- list(1:5, c(1:10, NA))\nmap_dbl(x, mean, na.rm = TRUE)\n\n#&gt; [1] 3.0 5.5\n\n\n\nmap_dbl(x, ~ mean(.x, na.rm = TRUE))\n\n#&gt; [1] 3.0 5.5\n\n\n\nmap_dbl(x, \\(x) mean(x, na.rm = TRUE))\n\n#&gt; [1] 3.0 5.5"
  },
  {
    "objectID": "slides/09.html#purrr-style-pipe-simple-steps-together",
    "href": "slides/09.html#purrr-style-pipe-simple-steps-together",
    "title": "Functionals",
    "section": "purrr style: pipe simple steps together",
    "text": "purrr style: pipe simple steps together\n\nPipe (|&gt; / %&gt;%) + purrr ‚û°Ô∏è readable code\nEach line is a single, understandable step.\n\n\nmtcars |&gt;\n  split(mtcars$cyl) |&gt;\n  map(~ lm(mpg ~ wt, data = .x)) |&gt;\n  map(coef) |&gt;\n  map_dbl(2)\n\n#&gt;         4         6         8 \n#&gt; -5.647025 -2.780106 -2.192438"
  },
  {
    "objectID": "slides/09.html#purrrmodify-returns-the-same-type-as-the-input",
    "href": "slides/09.html#purrrmodify-returns-the-same-type-as-the-input",
    "title": "Functionals",
    "section": "purrr::modify() returns the same type as the input",
    "text": "purrr::modify() returns the same type as the input\nmap() always returns a list:\n\ndf &lt;- data.frame(x = 1:3, y = 6:4)\nmap(df, ~ .x * 2)\n\n#&gt; $x\n#&gt; [1] 2 4 6\n#&gt; \n#&gt; $y\n#&gt; [1] 12 10  8\n\n\nmodify() returns the same type as the input:\n\nmodify(df, ~ .x * 2)\n\n#&gt;   x  y\n#&gt; 1 2 12\n#&gt; 2 4 10\n#&gt; 3 6  8"
  },
  {
    "objectID": "slides/09.html#purrrmap2-iterates-over-two-vectors-in-parallel",
    "href": "slides/09.html#purrrmap2-iterates-over-two-vectors-in-parallel",
    "title": "Functionals",
    "section": "purrr::map2() iterates over two vectors in parallel",
    "text": "purrr::map2() iterates over two vectors in parallel\nFind a weighted mean from 2 lists: observations (xs) & weights (ws).\n\nxs &lt;- map(1:3, ~ runif(5))\nws &lt;- map(1:3, ~ rpois(5, 5) + 1)\n\nmap() passes the whole ws list to each call:\n\nmap_dbl(xs, weighted.mean, w = ws)\n\n#&gt; Error in `map_dbl()`:\n#&gt; ‚Ñπ In index: 1.\n#&gt; Caused by error in `weighted.mean.default()`:\n#&gt; ! 'x' and 'w' must have the same length\n\n\nmap2() iterates over xs and ws in parallel:\n\nmap2_dbl(xs, ws, weighted.mean)\n\n#&gt; [1] 0.5589596 0.4285742 0.6900269"
  },
  {
    "objectID": "slides/09.html#purrrwalk-is-for-functions-called-for-their-side-effects",
    "href": "slides/09.html#purrrwalk-is-for-functions-called-for-their-side-effects",
    "title": "Functionals",
    "section": "purrr::walk() is for functions called for their side effects",
    "text": "purrr::walk() is for functions called for their side effects\n\nE.g., cat(), write.csv(), ggsave().\nwalk() returns its input invisibly.\n\n\ncyls &lt;- split(mtcars, mtcars$cyl)\npaths &lt;- file.path(tempdir(), paste0(\"cyl-\", names(cyls), \".csv\"))\nwalk2(cyls, paths, write.csv)\ndir(tempdir(), pattern = \"cyl-\")\n#&gt; [1] \"cyl-4.csv\" \"cyl-6.csv\" \"cyl-8.csv\""
  },
  {
    "objectID": "slides/09.html#purrrimap-iterates-over-values-and-indices",
    "href": "slides/09.html#purrrimap-iterates-over-values-and-indices",
    "title": "Functionals",
    "section": "purrr::imap() iterates over values and indices",
    "text": "purrr::imap() iterates over values and indices\nNamed input == map2(.x, names(.x), .f)\n\nimap_chr(iris[, 1:2], ~ paste0(\"The first value of '\", .y, \"' is \", .x[[1]]))\n\n#&gt;                               Sepal.Length \n#&gt; \"The first value of 'Sepal.Length' is 5.1\" \n#&gt;                                Sepal.Width \n#&gt;  \"The first value of 'Sepal.Width' is 3.5\"\n\n\nUnnamed input == map2(.x, seq_along(.x), .f)\n\nx &lt;- map(1:2, ~ sample(100, 5))\nimap_chr(x, ~ paste0(\"The max of element \", .y, \" is \", max(.x)))\n\n#&gt; [1] \"The max of element 1 is 70\" \"The max of element 2 is 82\""
  },
  {
    "objectID": "slides/09.html#purrrpmap-iterates-over-multiple-arguments-in-a-list",
    "href": "slides/09.html#purrrpmap-iterates-over-multiple-arguments-in-a-list",
    "title": "Functionals",
    "section": "purrr::pmap() iterates over multiple arguments in a list",
    "text": "purrr::pmap() iterates over multiple arguments in a list\npmap() applies function to list of arguments\n\nmap2(x, y, f) is equivalent to pmap(list(x, y), f).\nA data frame is a list, works great with pmap().\n\n\nparams &lt;- tibble::tribble(\n  ~n, ~min, ~max,\n  1L, 0, 1,\n  2L, 10, 100,\n)\n\npmap(params, runif)\n\n#&gt; [[1]]\n#&gt; [1] 0.324684\n#&gt; \n#&gt; [[2]]\n#&gt; [1] 86.14710 73.00569"
  },
  {
    "objectID": "slides/09.html#purrrreduce-combines-vector-elements-with-a-binary-function",
    "href": "slides/09.html#purrrreduce-combines-vector-elements-with-a-binary-function",
    "title": "Functionals",
    "section": "purrr::reduce() combines vector elements with a binary function",
    "text": "purrr::reduce() combines vector elements with a binary function\n\n‚ÄúReduces‚Äù a vector to 1 value by repeatedly applying 2-arg function\nreduce(1:4, f) is equivalent to f(f(f(1, 2), 3), 4).\n\nExample: Find the numbers that appear in every vector in a list.\n\nset.seed(123)\nlst &lt;- map(1:4, ~ sample(1:10, 15, replace = TRUE))\nreduce(lst, intersect)\n\n#&gt; [1] 10  5  9"
  },
  {
    "objectID": "slides/09.html#purrraccumulate-shows-intermediate-results",
    "href": "slides/09.html#purrraccumulate-shows-intermediate-results",
    "title": "Functionals",
    "section": "purrr::accumulate() shows intermediate results",
    "text": "purrr::accumulate() shows intermediate results\n\nLike reduce(), but returns all the intermediate results.\nGreat way to understand how reduce() works.\n\n\naccumulate(lst, intersect)\n\n#&gt; [[1]]\n#&gt;  [1]  3  3 10  2  6  5  4  6  9 10  5  3  9  9  9\n#&gt; \n#&gt; [[2]]\n#&gt; [1]  3 10  5  4  9\n#&gt; \n#&gt; [[3]]\n#&gt; [1] 10  5  9\n#&gt; \n#&gt; [[4]]\n#&gt; [1] 10  5  9"
  },
  {
    "objectID": "slides/09.html#purrraccumulate-is-useful-for-cumulative-calculations",
    "href": "slides/09.html#purrraccumulate-is-useful-for-cumulative-calculations",
    "title": "Functionals",
    "section": "purrr::accumulate() is useful for cumulative calculations",
    "text": "purrr::accumulate() is useful for cumulative calculations\n\naccumulate(c(4, 3, 10), `+`)\n\n#&gt; [1]  4  7 17"
  },
  {
    "objectID": "slides/09.html#predicate-functionals-apply-a-predicate-to-each-element",
    "href": "slides/09.html#predicate-functionals-apply-a-predicate-to-each-element",
    "title": "Functionals",
    "section": "Predicate functionals apply a predicate to each element",
    "text": "Predicate functionals apply a predicate to each element\nPredicate: function that returns single TRUE or FALSE.\n\nsome() / every() / none(): True for any / all / no elements?\ndetect() / detect_index(): Find value / location of 1st match.\nkeep() / discard(): Keep / drop all matching elements.\n\n\ndf &lt;- data.frame(x = 1:3, y = c(\"a\", \"b\", \"c\"))\nstr(keep(df, is.numeric))\n\n#&gt; 'data.frame':    3 obs. of  1 variable:\n#&gt;  $ x: int  1 2 3\n\nstr(discard(df, is.numeric))\n\n#&gt; 'data.frame':    3 obs. of  1 variable:\n#&gt;  $ y: chr  \"a\" \"b\" \"c\""
  },
  {
    "objectID": "slides/09.html#map_if-and-modify_if-transform-elements-where-a-predicate-is-true",
    "href": "slides/09.html#map_if-and-modify_if-transform-elements-where-a-predicate-is-true",
    "title": "Functionals",
    "section": "map_if() and modify_if() transform elements where a predicate is true",
    "text": "map_if() and modify_if() transform elements where a predicate is true\nE.g, calculate mean of only numeric columns in a data frame.\n\ndf &lt;- data.frame(\n  num1 = c(0, 10, 20),\n  num2 = c(5, 6, 7),\n  chr1 = c(\"a\", \"b\", \"c\")\n)\n\nstr(map_if(df, is.numeric, mean))\n\n#&gt; List of 3\n#&gt;  $ num1: num 10\n#&gt;  $ num2: num 6\n#&gt;  $ chr1: chr [1:3] \"a\" \"b\" \"c\"\n\nstr(modify_if(df, is.numeric, mean))\n\n#&gt; 'data.frame':    3 obs. of  3 variables:\n#&gt;  $ num1: num  10 10 10\n#&gt;  $ num2: num  6 6 6\n#&gt;  $ chr1: chr  \"a\" \"b\" \"c\""
  },
  {
    "objectID": "slides/09.html#baseapply-summarizes-matrices-and-arrays",
    "href": "slides/09.html#baseapply-summarizes-matrices-and-arrays",
    "title": "Functionals",
    "section": "base::apply() summarizes matrices and arrays",
    "text": "base::apply() summarizes matrices and arrays\n\nCollapses 1 or more matrix/array dimensions by applying a summary function.\n\napply(X, MARGIN, FUN): MARGIN? 1 for rows, 2 for columns.\n\na2d &lt;- matrix(1:20, nrow = 5)\n# Row means\napply(a2d, 1, mean)\n\n#&gt; [1]  8.5  9.5 10.5 11.5 12.5\n\n# Column means\napply(a2d, 2, mean)\n\n#&gt; [1]  3  8 13 18\n\n\nWarning: apply() will coerce df to a matrix!"
  },
  {
    "objectID": "slides/09.html#base-r-has-mathematical-functionals",
    "href": "slides/09.html#base-r-has-mathematical-functionals",
    "title": "Functionals",
    "section": "Base R has mathematical functionals",
    "text": "Base R has mathematical functionals\nBase R includes several mathematical functionals.\n\nintegrate(): Find the area under a curve.\nuniroot(): Find where a function equals zero.\noptimise(): Find the minimum or maximum value of a function.\n\n\nintegrate(sin, 0, pi)\n\n#&gt; 2 with absolute error &lt; 2.2e-14"
  },
  {
    "objectID": "slides/07.html#learning-objectives",
    "href": "slides/07.html#learning-objectives",
    "title": "Environments",
    "section": "Learning objectives",
    "text": "Learning objectives\n\nCreate, modify, and inspect environments\nRecognize special environments\nUnderstand how environments power lexical scoping and namespaces"
  },
  {
    "objectID": "slides/07.html#environments-are-similar-to-lists",
    "href": "slides/07.html#environments-are-similar-to-lists",
    "title": "Environments",
    "section": "Environments are similar to lists",
    "text": "Environments are similar to lists\nGenerally, an environment is similar to a named list, with four important exceptions:\n\nEvery name must be unique.\nThe names in an environment are not ordered.\nAn environment has a parent.\nEnvironments are not copied when modified.\n\n\n\nLists can have duplicate names, e.g.¬†x &lt;- base::list(a = 1, a = 1)\nLists have an inherent order, e.g.¬†x[[1]] returns the first element of the list above\nEnvironments copy by reference, not by replacement, e.g.:\nModifying a list produces a different memory address base::identical(lobstr::obj_addr(x), lobstr::obj_addr({x[[1]] &lt;- 2; x}))\ny &lt;- rlang::env() y$‚Äòa‚Äô &lt;- 1\nbase::identical( lobstr::obj_addr(y), lobstr::obj_addr({y[[‚Äòa‚Äô]] &lt;- 2; y}) )"
  },
  {
    "objectID": "slides/07.html#create-a-new-environment-with-rlang",
    "href": "slides/07.html#create-a-new-environment-with-rlang",
    "title": "Environments",
    "section": "Create a new environment with {rlang}",
    "text": "Create a new environment with {rlang}\n\n\n\ne1 &lt;- rlang::env(\n  rlang::global_env(),\n  a = FALSE,\n  b = \"a\",\n  c = 2.3,\n  d = 1:3,\n)\n\n\n\ne2 &lt;- rlang::new_environment(\n  data = list(\n    a = FALSE,\n    b = \"a\",\n    c = 2.3,\n    d = 1:3\n  ),\n  parent = rlang::global_env()\n)\n\n\n\nrlang::env() creates a child of the current environment by default and takes a variable number of named objects to populate it.\nrlang::new_environment() creates a child of the empty environment by default and takes a named list of objects to populate it."
  },
  {
    "objectID": "slides/07.html#an-environment-associates-or-binds-a-set-of-names-to-a-set-of-values",
    "href": "slides/07.html#an-environment-associates-or-binds-a-set-of-names-to-a-set-of-values",
    "title": "Environments",
    "section": "An environment associates, or binds a set of names to a set of values",
    "text": "An environment associates, or binds a set of names to a set of values\n\n\n\nA bag of names with no implied order\nBindings live within the environment\n\n\n\n\nEnvironments have reference semantics and thus can contain themselves\n\n\ne1$d &lt;- e1\n\n\n\n\nno implied order (unlike a list, so no index subsetting)\nthe grey box represents an environment\nthe blue dot represents the parent environment\nletters represent variable names bound within the environment\n\nreference semantics store a reference to the object‚Äôs memory address, not the actual value (as is done in value semantics)"
  },
  {
    "objectID": "slides/07.html#inspect-environments-with-rlang",
    "href": "slides/07.html#inspect-environments-with-rlang",
    "title": "Environments",
    "section": "Inspect environments with {rlang}",
    "text": "Inspect environments with {rlang}\n\nrlang::env_print(e1)\n\n#&gt; &lt;environment: 0x00000242caa09348&gt;\n#&gt; Parent: &lt;environment: global&gt;\n#&gt; Bindings:\n#&gt; ‚Ä¢ a: &lt;lgl&gt;\n#&gt; ‚Ä¢ b: &lt;chr&gt;\n#&gt; ‚Ä¢ c: &lt;dbl&gt;\n#&gt; ‚Ä¢ d: &lt;int&gt;\n\n\n\nrlang::env_names(e1)\n\n#&gt; [1] \"a\" \"b\" \"c\" \"d\"\n\n\n\nrlang::env_has(e1, \"a\")\n\n#&gt;    a \n#&gt; TRUE\n\n\n\nrlang::env_get(e1, \"a\")\n\n#&gt; [1] FALSE\n\n\n\nrlang::env_parent(e1)\n\n#&gt; &lt;environment: R_GlobalEnv&gt;\n\n\n\nbase::print() displays the memory address and is not as helpful as rlang::env_print()"
  },
  {
    "objectID": "slides/07.html#by-default-the-current-environment-is-your-global-environment",
    "href": "slides/07.html#by-default-the-current-environment-is-your-global-environment",
    "title": "Environments",
    "section": "By default, the current environment is your global environment",
    "text": "By default, the current environment is your global environment\n\nThe current environment is where code is currently executing\nThe global environment is your current environment when working interactively\n\n\nrlang::current_env()\n\n#&gt; &lt;environment: R_GlobalEnv&gt;\n\nrlang::global_env()\n\n#&gt; &lt;environment: R_GlobalEnv&gt;\n\nbase::identical(\n  rlang::current_env(),\n  rlang::global_env()\n)\n\n#&gt; [1] TRUE\n\n\n\nIf you open a new R session, you are in the global environment by default (unless otherwise modified by say the .rprofile file)\nThe current environment isn‚Äôt always your global environment. Your current environment changes as you move into and out of functions, for example."
  },
  {
    "objectID": "slides/07.html#every-environment-has-a-parent-environment",
    "href": "slides/07.html#every-environment-has-a-parent-environment",
    "title": "Environments",
    "section": "Every environment has a parent environment",
    "text": "Every environment has a parent environment\n\nAllows for lexical scoping\n\n\ne2a &lt;- rlang::env(d = 4, e = 5)\n\ne2b &lt;- rlang::env(e2a, a = 1, b = 2, c = 3)\n\nrlang::env_parent(e2b)\n\n#&gt; &lt;environment: 0x00000242cc7ab7e0&gt;\n\nrlang::env_parents(e2b)\n\n#&gt; [[1]]   &lt;env: 0x00000242cc7ab7e0&gt;\n#&gt; [[2]] $ &lt;env: global&gt;\n\n\n\n\nLexical scoping means if a name is not found in an environment, then R will look in its parent (and so on)\nLexical scoping is in contrast to dynamic scoping, where the variable is retrieved as it is defined at run time"
  },
  {
    "objectID": "slides/07.html#only-the-empty-environment-does-not-have-a-parent",
    "href": "slides/07.html#only-the-empty-environment-does-not-have-a-parent",
    "title": "Environments",
    "section": "Only the empty environment does not have a parent",
    "text": "Only the empty environment does not have a parent\n\ne2c &lt;- rlang::env(rlang::empty_env(), d = 4, e = 5)\n\ne2d &lt;- rlang::env(e2c, a = 1, b = 2, c = 3)\n\n\n\nTHe lack of a parent is shown by the hollow blue dot"
  },
  {
    "objectID": "slides/07.html#all-environments-eventually-terminate-with-the-empty-environment",
    "href": "slides/07.html#all-environments-eventually-terminate-with-the-empty-environment",
    "title": "Environments",
    "section": "All environments eventually terminate with the empty environment",
    "text": "All environments eventually terminate with the empty environment\n\nrlang::env_parents(e2b, last = rlang::empty_env())\n\n#&gt;  [[1]]   &lt;env: 0x00000242cc7ab7e0&gt;\n#&gt;  [[2]] $ &lt;env: global&gt;\n#&gt;  [[3]] $ &lt;env: package:stats&gt;\n#&gt;  [[4]] $ &lt;env: package:graphics&gt;\n#&gt;  [[5]] $ &lt;env: package:grDevices&gt;\n#&gt;  [[6]] $ &lt;env: package:utils&gt;\n#&gt;  [[7]] $ &lt;env: package:datasets&gt;\n#&gt;  [[8]] $ &lt;env: package:methods&gt;\n#&gt;  [[9]] $ &lt;env: Autoloads&gt;\n#&gt; [[10]] $ &lt;env: package:base&gt;\n#&gt; [[11]] $ &lt;env: empty&gt;\n\n\n\nThe empty enviornment typically isn‚Äôt shown but can be displayed by setting the last parameter of rlang::env_parents()"
  },
  {
    "objectID": "slides/07.html#be-wary-of-using--",
    "href": "slides/07.html#be-wary-of-using--",
    "title": "Environments",
    "section": "Be wary of using <<-",
    "text": "Be wary of using &lt;&lt;-\n\nRegular assignment (&lt;-) always creates a variable in the current environment\nSuper assignment (&lt;&lt;-) does a few things:\n\nmodifies the variable if it exists in a parent environment\ncreates the variable in the global environment if it does not exist\n\n\n\n&lt;&lt;- searches through environments via the search path, using the first found instance of the variable\n&lt;&lt;-- does not search through package environments as they are above the global environment on the search path\ne1 &lt;- rlang::env() e2 &lt;- rlang::env(e1)\nrlang::env_poke(e1, ‚Äúa‚Äù, 1)\nwithr::with_environment( e2, a &lt;&lt;- 2 )"
  },
  {
    "objectID": "slides/07.html#retrieve-environment-variables-with-or-rlang-functions",
    "href": "slides/07.html#retrieve-environment-variables-with-or-rlang-functions",
    "title": "Environments",
    "section": "Retrieve environment variables with $, [[, or {rlang} functions",
    "text": "Retrieve environment variables with $, [[, or {rlang} functions\n\ne3 &lt;- rlang::env(x = 1, y = 2)\n\ne3$x\n\n#&gt; [1] 1\n\n\n\ne3[[\"x\"]]\n\n#&gt; [1] 1\n\n\n\nrlang::env_get(e3, \"x\")\n\n#&gt; [1] 1\n\n\n\ne3[[1]]\n\n#&gt; Error in e3[[1]]: wrong arguments for subsetting an environment\n\n\n\ne3[\"x\"]\n\n#&gt; Error in e3[\"x\"]: object of type 'environment' is not subsettable"
  },
  {
    "objectID": "slides/07.html#add-bindings-to-an-environment-with-or-rlang-functions",
    "href": "slides/07.html#add-bindings-to-an-environment-with-or-rlang-functions",
    "title": "Environments",
    "section": "Add bindings to an environment with `$, [[, or {rlang} functions`",
    "text": "Add bindings to an environment with `$, [[, or {rlang} functions`\n\ne3$z &lt;- 3\n\ne3[[\"z\"]] &lt;- 3\n\nrlang::env_poke(e3, \"z\", 3)\n\nrlang::env_bind(e3, z = 3, b = 20)\n\nrlang::env_unbind(e3, \"z\")\n\n\nrlang::env_has() is used to check if a variable exists within the environment\nrlang::env_unbind() is used to unbind a variable from an environment"
  },
  {
    "objectID": "slides/07.html#special-cases-for-binding-environment-variables",
    "href": "slides/07.html#special-cases-for-binding-environment-variables",
    "title": "Environments",
    "section": "Special cases for binding environment variables",
    "text": "Special cases for binding environment variables\n\nrlang::env_bind_lazy() creates delayed bindings\n\nevaluated the first time they are accessed\n\nrlang::env_bind_active() creates active bindings\n\nre-computed every time they‚Äôre accessed"
  },
  {
    "objectID": "slides/07.html#explore-environments-recursively",
    "href": "slides/07.html#explore-environments-recursively",
    "title": "Environments",
    "section": "Explore environments recursively",
    "text": "Explore environments recursively\n\nwhere &lt;- function(name, env = caller_env()) {\n  if (identical(env, empty_env())) {\n    # Base case\n    stop(\"Can't find \", name, call. = FALSE)\n  } else if (env_has(env, name)) {\n    # Success case\n    env\n  } else {\n    # Recursive case\n    where(name, env_parent(env))\n  }\n}\n\n\nWhy is recursing over environments important?\nRecursion is not the same thing as iteration"
  },
  {
    "objectID": "slides/07.html#attaching-packages-changes-the-search-path",
    "href": "slides/07.html#attaching-packages-changes-the-search-path",
    "title": "Environments",
    "section": "Attaching packages changes the search path",
    "text": "Attaching packages changes the search path\n\nThe search path is the order in which R will look through environments for objects\nAttached packages become a parent of the global environment\nThe immediate parent of the global environment is that last package attached\n\n\n\nAutoloads and base are always the last two environments on the search path\nAutoloads uses lazy loading to make large package objects (like datasets) available without taking up memory\nFunctions within base are used to load all other packages"
  },
  {
    "objectID": "slides/07.html#attaching-packages-changes-the-search-path-1",
    "href": "slides/07.html#attaching-packages-changes-the-search-path-1",
    "title": "Environments",
    "section": "Attaching packages changes the search path",
    "text": "Attaching packages changes the search path\n\n\n\nrlang::search_envs()\n\n#&gt; [[1]] $ &lt;env: global&gt;\n#&gt; [[2]] $ &lt;env: package:stats&gt;\n#&gt; [[3]] $ &lt;env: package:graphics&gt;\n#&gt; [[4]] $ &lt;env: package:grDevices&gt;\n#&gt; [[5]] $ &lt;env: package:utils&gt;\n#&gt; [[6]] $ &lt;env: package:datasets&gt;\n#&gt; [[7]] $ &lt;env: package:methods&gt;\n#&gt; [[8]] $ &lt;env: Autoloads&gt;\n#&gt; [[9]] $ &lt;env: package:base&gt;\n\n\n\n\nlibrary(rlang)\n\nrlang::search_envs()\n\n#&gt;  [[1]] $ &lt;env: global&gt;\n#&gt;  [[2]] $ &lt;env: package:rlang&gt;\n#&gt;  [[3]] $ &lt;env: package:stats&gt;\n#&gt;  [[4]] $ &lt;env: package:graphics&gt;\n#&gt;  [[5]] $ &lt;env: package:grDevices&gt;\n#&gt;  [[6]] $ &lt;env: package:utils&gt;\n#&gt;  [[7]] $ &lt;env: package:datasets&gt;\n#&gt;  [[8]] $ &lt;env: package:methods&gt;\n#&gt;  [[9]] $ &lt;env: Autoloads&gt;\n#&gt; [[10]] $ &lt;env: package:base&gt;\n\n\n\n\nAttaching {rlang} modifies the search path"
  },
  {
    "objectID": "slides/07.html#functions-enclose-their-current-environment",
    "href": "slides/07.html#functions-enclose-their-current-environment",
    "title": "Environments",
    "section": "Functions enclose their current environment",
    "text": "Functions enclose their current environment\n\nFunctions enclose current environment when it is created\n\n\ny &lt;- 1\n\nf &lt;- function(x) x + y\n\nrlang::fn_env(f)\n\n#&gt; &lt;environment: R_GlobalEnv&gt;\n\n\n\n\nThe function environment is represented by the black dot\nThe function f() knows where to look for y thanks to the function environment"
  },
  {
    "objectID": "slides/07.html#functions-enclose-their-current-environment-1",
    "href": "slides/07.html#functions-enclose-their-current-environment-1",
    "title": "Environments",
    "section": "Functions enclose their current environment",
    "text": "Functions enclose their current environment\n\ng() is being bound by the environment e but binds the global environment\nThe function environment is the global environment but the binding environment is e\n\n\ne &lt;- env()\n\ne$g &lt;- function() 1\n\nrlang::fn_env(e$g)\n\n#&gt; &lt;environment: R_GlobalEnv&gt;"
  },
  {
    "objectID": "slides/07.html#functions-enclose-their-current-environment-2",
    "href": "slides/07.html#functions-enclose-their-current-environment-2",
    "title": "Environments",
    "section": "Functions enclose their current environment",
    "text": "Functions enclose their current environment"
  },
  {
    "objectID": "slides/07.html#namespaces-ensure-package-environment-independence",
    "href": "slides/07.html#namespaces-ensure-package-environment-independence",
    "title": "Environments",
    "section": "Namespaces ensure package environment independence",
    "text": "Namespaces ensure package environment independence\n\nEvery package has an underlying namespace\nEvery function is associated with a package environment and namespace environment\nPackage environments contain exported objects\nNamespace environments contain exported and internal objects\n\n\nContrast dplyr::across and dplyr:::across_glue_mask()\nsd() is bound to the {stats} namespace environment"
  },
  {
    "objectID": "slides/07.html#namespaces-ensure-package-environment-independence-1",
    "href": "slides/07.html#namespaces-ensure-package-environment-independence-1",
    "title": "Environments",
    "section": "Namespaces ensure package environment independence",
    "text": "Namespaces ensure package environment independence"
  },
  {
    "objectID": "slides/07.html#namespaces-ensure-package-environment-independence-2",
    "href": "slides/07.html#namespaces-ensure-package-environment-independence-2",
    "title": "Environments",
    "section": "Namespaces ensure package environment independence",
    "text": "Namespaces ensure package environment independence\n\n\nvar() is found in the stats namespace first, so that is the definition of var that is used by sd()\nIf an object called by sd() wasn‚Äôt found in the stats namespace, it would be searched for according to the search path"
  },
  {
    "objectID": "slides/07.html#functions-use-ephemeral-execution-environments",
    "href": "slides/07.html#functions-use-ephemeral-execution-environments",
    "title": "Environments",
    "section": "Functions use ephemeral execution environments",
    "text": "Functions use ephemeral execution environments\n\nFunctions create a new environment to use whenever executed\nThe execution environment is a child of the function environment\nExecution environments are garbage collected on function exit"
  },
  {
    "objectID": "slides/07.html#functions-use-ephemeral-execution-environments-1",
    "href": "slides/07.html#functions-use-ephemeral-execution-environments-1",
    "title": "Environments",
    "section": "Functions use ephemeral execution environments",
    "text": "Functions use ephemeral execution environments"
  },
  {
    "objectID": "slides/07.html#the-caller-environment-informs-the-call-stack",
    "href": "slides/07.html#the-caller-environment-informs-the-call-stack",
    "title": "Environments",
    "section": "The caller environment informs the call stack",
    "text": "The caller environment informs the call stack\n\nThe caller environment is the environment from which the function was called\nAccessed with rlang::caller_env()\nThe call stack is created within the caller environment\n\n\n\n\nf &lt;- function(x) {\n  g(x = 2)\n}\ng &lt;- function(x) {\n  h(x = 3)\n}\nh &lt;- function(x) {\n  lobstr::cst()\n}\n\n\n\nf(x = 1)\n\n#&gt;     ‚ñÜ\n#&gt;  1. ‚îî‚îÄglobal f(x = 1)\n#&gt;  2.   ‚îî‚îÄglobal g(x = 2)\n#&gt;  3.     ‚îî‚îÄglobal h(x = 3)\n#&gt;  4.       ‚îî‚îÄlobstr::cst()\n\n\n\n\ntraceback() is the base R approach\nlobstr::cst() prints the call stack in order of call, opposite of traceback()\nDoes lobstr::cst() now prints the caller environment?"
  },
  {
    "objectID": "slides/07.html#the-caller-environment-informs-the-call-stack-1",
    "href": "slides/07.html#the-caller-environment-informs-the-call-stack-1",
    "title": "Environments",
    "section": "The caller environment informs the call stack",
    "text": "The caller environment informs the call stack\n\nCall stack is more complicated with lazy evaluation\n\n\na &lt;- function(x) b(x)\nb &lt;- function(x) d(x)\nd &lt;- function(x) x\n\na(f())\n\n#&gt;     ‚ñÜ\n#&gt;  1. ‚îú‚îÄglobal a(f())\n#&gt;  2. ‚îÇ ‚îî‚îÄglobal b(x)\n#&gt;  3. ‚îÇ   ‚îî‚îÄglobal d(x)\n#&gt;  4. ‚îî‚îÄglobal f()\n#&gt;  5.   ‚îî‚îÄglobal g(x = 2)\n#&gt;  6.     ‚îî‚îÄglobal h(x = 3)\n#&gt;  7.       ‚îî‚îÄlobstr::cst()\n\n\n\nDo different branches represent different caller environments?\nNote that c() was replaced with d() as it could not be rendered with c()"
  },
  {
    "objectID": "slides/07.html#the-caller-environment-informs-the-call-stack-2",
    "href": "slides/07.html#the-caller-environment-informs-the-call-stack-2",
    "title": "Environments",
    "section": "The caller environment informs the call stack",
    "text": "The caller environment informs the call stack\n\n\n\nEach frame contains:\n\nAn expression\nAn environment\nA parent"
  },
  {
    "objectID": "slides/07.html#r-uses-lexical-scoping-not-dynamic-scoping",
    "href": "slides/07.html#r-uses-lexical-scoping-not-dynamic-scoping",
    "title": "Environments",
    "section": "R uses lexical scoping, not dynamic scoping",
    "text": "R uses lexical scoping, not dynamic scoping\n\nR uses lexical scoping: it looks up the values of names based on how a function is defined, not how it is called. ‚ÄúLexical‚Äù here is not the English adjective that means relating to words or a vocabulary. It‚Äôs a technical CS term that tells us that the scoping rules use a parse-time, rather than a run-time structure. - Chapter 6 - functions\n\n\nDynamic scoping means functions use variables as they are defined in the calling environment"
  },
  {
    "objectID": "slides/07.html#environments-are-useful-data-structures",
    "href": "slides/07.html#environments-are-useful-data-structures",
    "title": "Environments",
    "section": "Environments are useful data structures",
    "text": "Environments are useful data structures\n\nUsecase include:\n\nAvoiding copies of large data\nManaging state within a package\nAs a hashmap\n\n\n\nFinding a function in a package uses constant time"
  },
  {
    "objectID": "slides/05.html#learning-objectives",
    "href": "slides/05.html#learning-objectives",
    "title": "Control flow",
    "section": "Learning objectives",
    "text": "Learning objectives\n\nUnderstand the two primary tools for control flow: choices and loops\nLearn best practices to void common pitfalls\nDistinguish when to use if, ifelse(), and switch() for choices\nDistinguish when to use for, while, and repeat for loops\n\n\n\n\n\n\n\nNote\n\n\nBasic familiarity with choices and loops is assumed."
  },
  {
    "objectID": "slides/05.html#if-is-the-basic-statement-for-a-choice",
    "href": "slides/05.html#if-is-the-basic-statement-for-a-choice",
    "title": "Control flow",
    "section": "if is the basic statement for a choice",
    "text": "if is the basic statement for a choice\nSingle line format\n\nif (condition) true_action\nif (condition) true_action else false_action\n\nCompound statement within {\n\ngrade &lt;- function(x) {\n  if (x &gt; 90) {\n    \"A\"\n  } else if (x &gt; 80) {\n    \"B\"\n  } else if (x &gt; 50) {\n    \"C\"\n  } else {\n    \"F\"\n  }\n}"
  },
  {
    "objectID": "slides/05.html#results-of-if-can-be-assigned",
    "href": "slides/05.html#results-of-if-can-be-assigned",
    "title": "Control flow",
    "section": "Results of if can be assigned",
    "text": "Results of if can be assigned\n\nx1 &lt;- if (TRUE) 1 else 2\nx2 &lt;- if (FALSE) 1 else 2\n\nc(x1, x2)\n\n#&gt; [1] 1 2\n\n\n\n\n\n\n\n\nTip\n\n\nOnly recommended with single line format; otherwise hard to read."
  },
  {
    "objectID": "slides/05.html#if-without-else-can-be-combined-with-c-or-paste-to-create-compact-expressions",
    "href": "slides/05.html#if-without-else-can-be-combined-with-c-or-paste-to-create-compact-expressions",
    "title": "Control flow",
    "section": "if without else can be combined with c() or paste() to create compact expressions",
    "text": "if without else can be combined with c() or paste() to create compact expressions\n\nif without else invisibly returns NULL when FALSE.\n\n\ngreet &lt;- function(name, birthday = FALSE) {\n  paste0(\n    \"Hi \", name,\n    if (birthday) \" and HAPPY BIRTHDAY\"\n  )\n}\ngreet(\"Maria\", FALSE)\n\n#&gt; [1] \"Hi Maria\"\n\ngreet(\"Jaime\", TRUE)\n\n#&gt; [1] \"Hi Jaime and HAPPY BIRTHDAY\""
  },
  {
    "objectID": "slides/05.html#if-should-have-a-single-true-or-false-condition-other-inputs-generate-errors",
    "href": "slides/05.html#if-should-have-a-single-true-or-false-condition-other-inputs-generate-errors",
    "title": "Control flow",
    "section": "if should have a single TRUE or FALSE condition, other inputs generate errors",
    "text": "if should have a single TRUE or FALSE condition, other inputs generate errors\n\nif (\"x\") 1\n\n#&gt; Error in if (\"x\") 1: argument is not interpretable as logical\n\nif (logical()) 1\n\n#&gt; Error in if (logical()) 1: argument is of length zero\n\nif (NA) 1\n\n#&gt; Error in if (NA) 1: missing value where TRUE/FALSE needed\n\nif (c(TRUE, FALSE)) 1\n\n#&gt; Error in if (c(TRUE, FALSE)) 1: the condition has length &gt; 1"
  },
  {
    "objectID": "slides/05.html#use-ifelse-for-vectorized-conditions",
    "href": "slides/05.html#use-ifelse-for-vectorized-conditions",
    "title": "Control flow",
    "section": "Use ifelse() for vectorized conditions",
    "text": "Use ifelse() for vectorized conditions\n\nx &lt;- 1:10\nifelse(x %% 5 == 0, \"XXX\", as.character(x))\n\n#&gt;  [1] \"1\"   \"2\"   \"3\"   \"4\"   \"XXX\" \"6\"   \"7\"   \"8\"   \"9\"   \"XXX\"\n\nifelse(x %% 2 == 0, \"even\", \"odd\")\n\n#&gt;  [1] \"odd\"  \"even\" \"odd\"  \"even\" \"odd\"  \"even\" \"odd\"  \"even\" \"odd\"  \"even\"\n\n\n\n\n\n\n\n\nTip\n\n\nOnly use ifelse() if both results are of the same type; otherwise output type is hard to predict."
  },
  {
    "objectID": "slides/05.html#use-dplyrcase_when-for-multiple-condition-vector-pairs",
    "href": "slides/05.html#use-dplyrcase_when-for-multiple-condition-vector-pairs",
    "title": "Control flow",
    "section": "Use dplyr::case_when() for multiple condition-vector pairs",
    "text": "Use dplyr::case_when() for multiple condition-vector pairs\n\ndplyr::case_when(\n  x %% 35 == 0 ~ \"fizz buzz\",\n  x %% 5 == 0 ~ \"fizz\",\n  x %% 7 == 0 ~ \"buzz\",\n  is.na(x) ~ \"???\",\n  TRUE ~ as.character(x)\n)\n\n#&gt;  [1] \"1\"    \"2\"    \"3\"    \"4\"    \"fizz\" \"6\"    \"buzz\" \"8\"    \"9\"    \"fizz\""
  },
  {
    "objectID": "slides/05.html#switch-is-a-special-purpose-equivalent-to-if-that-can-be-used-to-compact-code",
    "href": "slides/05.html#switch-is-a-special-purpose-equivalent-to-if-that-can-be-used-to-compact-code",
    "title": "Control flow",
    "section": "switch() is a special purpose equivalent to if that can be used to compact code",
    "text": "switch() is a special purpose equivalent to if that can be used to compact code\n\n\n\nx_option &lt;- function(x) {\n  if (x == \"a\") {\n    \"option 1\"\n  } else if (x == \"b\") {\n    \"option 2\" \n  } else if (x == \"c\") {\n    \"option 3\"\n  } else {\n    stop(\"Invalid `x` value\")\n  }\n}\n\n\n\nx_option &lt;- function(x) {\n  switch(x,\n    a = \"option 1\",\n    b = \"option 2\",\n    c = \"option 3\",\n    stop(\"Invalid `x` value\")\n  )\n}"
  },
  {
    "objectID": "slides/05.html#switch-is-a-special-purpose-equivalent-to-if-that-can-be-used-to-compact-code-1",
    "href": "slides/05.html#switch-is-a-special-purpose-equivalent-to-if-that-can-be-used-to-compact-code-1",
    "title": "Control flow",
    "section": "switch() is a special purpose equivalent to if that can be used to compact code",
    "text": "switch() is a special purpose equivalent to if that can be used to compact code\n\n\n\n\n\n\nTip\n\n\n\nThe last component of a switch() should always throw an error, otherwise unmatched inputs will invisibly return NULL.\nOnly use switch() with character inputs. Numeric inputs are hard to read and have undesirable failure modes.\n\n\n\n\n\n\n\n\n\n\nCaution\n\n\nLike if, switch() can only take a single condition, not vector conditions"
  },
  {
    "objectID": "slides/05.html#avoid-repeat-outputs-by-leaving-the-right-side-of-empty",
    "href": "slides/05.html#avoid-repeat-outputs-by-leaving-the-right-side-of-empty",
    "title": "Control flow",
    "section": "Avoid repeat outputs by leaving the right side of = empty",
    "text": "Avoid repeat outputs by leaving the right side of = empty\n\nInputs will ‚Äúfall through‚Äù to the next value.\n\n\nlegs &lt;- function(x) {\n  switch(x,\n    cow = ,\n    horse = ,\n    dog = 4,\n    human = ,\n    chicken = 2,\n    plant = 0,\n    stop(\"Unknown input\")\n  )\n}\nlegs(\"cow\")\n\n#&gt; [1] 4\n\nlegs(\"dog\")\n\n#&gt; [1] 4"
  },
  {
    "objectID": "slides/05.html#to-iterate-over-items-in-a-vector-use-a-for-loop",
    "href": "slides/05.html#to-iterate-over-items-in-a-vector-use-a-for-loop",
    "title": "Control flow",
    "section": "To iterate over items in a vector, use a for loop",
    "text": "To iterate over items in a vector, use a for loop\n\nfor (item in vector) perform_action\n\n\nfor (i in 1:3) {\n  print(i)\n}\n\n#&gt; [1] 1\n#&gt; [1] 2\n#&gt; [1] 3\n\n\n\n\n\n\n\n\nNote\n\n\nConvention uses short variables like i, j, or k for iterating vector indices"
  },
  {
    "objectID": "slides/05.html#for-will-overwrite-existing-variables-in-the-current-environment",
    "href": "slides/05.html#for-will-overwrite-existing-variables-in-the-current-environment",
    "title": "Control flow",
    "section": "for will overwrite existing variables in the current environment",
    "text": "for will overwrite existing variables in the current environment\n\ni &lt;- 100\nfor (i in 1:3) {}\ni\n\n#&gt; [1] 3"
  },
  {
    "objectID": "slides/05.html#use-next-or-break-to-terminate-loops-early",
    "href": "slides/05.html#use-next-or-break-to-terminate-loops-early",
    "title": "Control flow",
    "section": "Use next or break to terminate loops early",
    "text": "Use next or break to terminate loops early\n\nnext exits the current iteration, but continues the loop\nbreak exits the entire loop"
  },
  {
    "objectID": "slides/05.html#use-next-or-break-to-terminate-loops-early-1",
    "href": "slides/05.html#use-next-or-break-to-terminate-loops-early-1",
    "title": "Control flow",
    "section": "Use next or break to terminate loops early",
    "text": "Use next or break to terminate loops early\n\nfor (i in 1:10) {\n  if (i &lt; 3) \n    next\n\n  print(i)\n  \n  if (i &gt;= 5)\n    break\n}\n\n#&gt; [1] 3\n#&gt; [1] 4\n#&gt; [1] 5"
  },
  {
    "objectID": "slides/05.html#preallocate-an-output-container-to-avoid-slow-loops",
    "href": "slides/05.html#preallocate-an-output-container-to-avoid-slow-loops",
    "title": "Control flow",
    "section": "Preallocate an output container to avoid slow loops",
    "text": "Preallocate an output container to avoid slow loops\n\nmeans &lt;- c(1, 50, 20)\nout &lt;- vector(\"list\", length(means))\nfor (i in 1:length(means)) {\n  out[[i]] &lt;- rnorm(10, means[[i]])\n}\n\n\n\n\n\n\n\nTip\n\n\nvector() function is helpful for preallocation"
  },
  {
    "objectID": "slides/05.html#use-seq_alongx-instead-of-1lengthx",
    "href": "slides/05.html#use-seq_alongx-instead-of-1lengthx",
    "title": "Control flow",
    "section": "Use seq_along(x) instead of 1:length(x)",
    "text": "Use seq_along(x) instead of 1:length(x)\n\n1:length(x) causes unexpected failure for 0 length vectors\n: works with both increasing and decreasing sequences\n\n\nmeans &lt;- c()\n1:length(means)\n\n#&gt; [1] 1 0\n\nseq_along(means)\n\n#&gt; integer(0)"
  },
  {
    "objectID": "slides/05.html#use-seq_alongx-instead-of-1lengthx-1",
    "href": "slides/05.html#use-seq_alongx-instead-of-1lengthx-1",
    "title": "Control flow",
    "section": "Use seq_along(x) instead of 1:length(x)",
    "text": "Use seq_along(x) instead of 1:length(x)\n\n\n\nout &lt;- vector(\"list\", length(means))\nfor (i in 1:length(means)) {\n  out[[i]] &lt;- rnorm(10, means[[i]])\n}\n\n#&gt; Error in rnorm(10, means[[i]]): invalid arguments\n\n\n\n\nout &lt;- vector(\"list\", length(means))\nfor (i in seq_along(means)) {\n  out[[i]] &lt;- rnorm(10, means[[i]])\n}\nout\n\n#&gt; list()"
  },
  {
    "objectID": "slides/05.html#avoid-problems-when-iterating-over-s3-vectors-by-using-seq_alongx-and-xi",
    "href": "slides/05.html#avoid-problems-when-iterating-over-s3-vectors-by-using-seq_alongx-and-xi",
    "title": "Control flow",
    "section": "Avoid problems when iterating over S3 vectors by using seq_along(x) and x[[i]]",
    "text": "Avoid problems when iterating over S3 vectors by using seq_along(x) and x[[i]]\n\n\nloops typically strip attributes\n\n\nxs &lt;- as.Date(c(\"2020-01-01\", \"2010-01-01\"))\n\n\n\n\n\nfor (x in xs) {\n  print(x)\n}\n\n#&gt; [1] 18262\n#&gt; [1] 14610\n\n\n\n\nfor (i in seq_along(xs)) {\n  print(xs[[i]])\n}\n\n#&gt; [1] \"2020-01-01\"\n#&gt; [1] \"2010-01-01\""
  },
  {
    "objectID": "slides/05.html#use-while-or-repeat-when-you-dont-know-the-number-of-iterations",
    "href": "slides/05.html#use-while-or-repeat-when-you-dont-know-the-number-of-iterations",
    "title": "Control flow",
    "section": "Use while or repeat when you don‚Äôt know the number of iterations",
    "text": "Use while or repeat when you don‚Äôt know the number of iterations\n\nwhile(condition) action: perfoms action while condition is TRUE\nrepeat(action): repeats action forever (or until a break)"
  },
  {
    "objectID": "slides/05.html#always-use-the-least-flexible-loop-option-possible",
    "href": "slides/05.html#always-use-the-least-flexible-loop-option-possible",
    "title": "Control flow",
    "section": "Always use the least-flexible loop option possible",
    "text": "Always use the least-flexible loop option possible\n\nUse for before while or repeat\nIn data analysis use apply() or purrr::map() before for"
  },
  {
    "objectID": "slides/05.html#what-is-the-difference-between-if-and-ifelse",
    "href": "slides/05.html#what-is-the-difference-between-if-and-ifelse",
    "title": "Control flow",
    "section": "What is the difference between if and ifelse()?",
    "text": "What is the difference between if and ifelse()?\n\nif works with scalars; ifelse() works with vectors."
  },
  {
    "objectID": "slides/05.html#in-the-following-code-what-will-the-value-of-y-be-if-x-is-true-what-if-x-is-false-what-if-x-is-na",
    "href": "slides/05.html#in-the-following-code-what-will-the-value-of-y-be-if-x-is-true-what-if-x-is-false-what-if-x-is-na",
    "title": "Control flow",
    "section": "In the following code, what will the value of y be if x is TRUE? What if x is FALSE? What if x is NA?",
    "text": "In the following code, what will the value of y be if x is TRUE? What if x is FALSE? What if x is NA?\n\ny &lt;- if (x) 3\n\n\nWhen x is TRUE, y will be 3; when FALSE, y will be NULL; when NA the if statement will throw an error."
  },
  {
    "objectID": "slides/05.html#what-does-switchx-x-y-2-z-3-return",
    "href": "slides/05.html#what-does-switchx-x-y-2-z-3-return",
    "title": "Control flow",
    "section": "What does switch(\"x\", x = , y = 2, z = 3) return?",
    "text": "What does switch(\"x\", x = , y = 2, z = 3) return?\n\nswitch(\n  \"x\",\n  x = ,\n  y = 2,\n  x = 3\n)\n\n\nThis switch() statement makes use of fall-through so it will return 2."
  },
  {
    "objectID": "slides/05.html#what-type-of-vector-does-each-of-the-following-calls-to-ifelse-return",
    "href": "slides/05.html#what-type-of-vector-does-each-of-the-following-calls-to-ifelse-return",
    "title": "Control flow",
    "section": "What type of vector does each of the following calls to ifelse() return?",
    "text": "What type of vector does each of the following calls to ifelse() return?\nRead the documentation and write down the rules in your own words.\n\nifelse(TRUE, 1, \"no\")\nifelse(FALSE, 1, \"no\")\nifelse(NA, 1, \"no\")"
  },
  {
    "objectID": "slides/05.html#what-type-of-vector-does-each-of-the-following-calls-to-ifelse-return-1",
    "href": "slides/05.html#what-type-of-vector-does-each-of-the-following-calls-to-ifelse-return-1",
    "title": "Control flow",
    "section": "What type of vector does each of the following calls to ifelse() return?",
    "text": "What type of vector does each of the following calls to ifelse() return?\nThe arguments of ifelse() are named test, yes and no. In general, ifelse() returns the entry for yes when test is TRUE, the entry for no when test is FALSE and NA when test is NA.\n\nifelse(TRUE, 1, \"no\")\n\n#&gt; [1] 1\n\nifelse(FALSE, 1, \"no\")\n\n#&gt; [1] \"no\"\n\nifelse(NA, 1, \"no\")\n\n#&gt; [1] NA"
  },
  {
    "objectID": "slides/05.html#what-type-of-vector-does-each-of-the-following-calls-to-ifelse-return-2",
    "href": "slides/05.html#what-type-of-vector-does-each-of-the-following-calls-to-ifelse-return-2",
    "title": "Control flow",
    "section": "What type of vector does each of the following calls to ifelse() return?",
    "text": "What type of vector does each of the following calls to ifelse() return?\nIn practice, test is first converted to logical and if the result is neither TRUE nor FALSE, then as.logical(test) is returned.\n\nifelse(logical(), 1, \"no\")\n\n#&gt; logical(0)\n\nifelse(NaN, 1, \"no\")\n\n#&gt; [1] NA\n\nifelse(NA_character_, 1, \"no\")\n\n#&gt; [1] NA\n\nifelse(\"a\", 1, \"no\")\n\n#&gt; [1] NA\n\nifelse(\"true\", 1, \"no\")\n\n#&gt; [1] 1"
  },
  {
    "objectID": "slides/05.html#why-does-the-following-code-work",
    "href": "slides/05.html#why-does-the-following-code-work",
    "title": "Control flow",
    "section": "Why does the following code work?",
    "text": "Why does the following code work?\n\nx &lt;- 1:10\nif (length(x)) \"not empty\" else \"empty\"\n\n#&gt; [1] \"not empty\"\n\nx &lt;- numeric()\nif (length(x)) \"not empty\" else \"empty\"\n\n#&gt; [1] \"empty\"\n\n\n\nif() expects a logical condition, but also accepts a numeric vector where 0 is treated as FALSE and all other numbers are treated as TRUE. Numerical missing values (including NaN) lead to an error in the same way that a logical missing, NA, does."
  },
  {
    "objectID": "slides/05.html#why-does-this-code-succeed-without-errors-or-warnings",
    "href": "slides/05.html#why-does-this-code-succeed-without-errors-or-warnings",
    "title": "Control flow",
    "section": "Why does this code succeed without errors or warnings?",
    "text": "Why does this code succeed without errors or warnings?\n\nx &lt;- numeric()\nout &lt;- vector(\"list\", length(x))\nfor (i in 1:length(x)) {\n  out[i] &lt;- x[i] ^ 2\n}\nout\n\n#&gt; [[1]]\n#&gt; [1] NA"
  },
  {
    "objectID": "slides/05.html#why-does-this-code-succeed-without-errors-or-warnings-1",
    "href": "slides/05.html#why-does-this-code-succeed-without-errors-or-warnings-1",
    "title": "Control flow",
    "section": "Why does this code succeed without errors or warnings?",
    "text": "Why does this code succeed without errors or warnings?\n\nSubsetting behavior for out-of-bounds & 0 indices when using [&lt;- and [\nx[1] generates an NA. NA is assigned to the empty length-1 list out[1]\nx[0] returns numeric(0). numeric(0) is assigned to out[0]. Assigning a 0-length vector to a 0-length subset doesn‚Äôt change the object.\nEach step includes valid R operations (even though the result may not be what the user intended)."
  },
  {
    "objectID": "slides/05.html#walk-through",
    "href": "slides/05.html#walk-through",
    "title": "Control flow",
    "section": "Walk-through",
    "text": "Walk-through\nSetup\n\nx &lt;- numeric()\nout &lt;- vector(\"list\", length(x))\n1:length(x)\n\n#&gt; [1] 1 0"
  },
  {
    "objectID": "slides/05.html#walk-through-1",
    "href": "slides/05.html#walk-through-1",
    "title": "Control flow",
    "section": "Walk-through",
    "text": "Walk-through\nFirst Iteration\n\nx[1]\n\n#&gt; [1] NA\n\nx[1]^2\n\n#&gt; [1] NA\n\nout[1]\n\n#&gt; [[1]]\n#&gt; NULL\n\nout[1] &lt;- x[1]^2\nout[1]\n\n#&gt; [[1]]\n#&gt; [1] NA"
  },
  {
    "objectID": "slides/05.html#walk-through-2",
    "href": "slides/05.html#walk-through-2",
    "title": "Control flow",
    "section": "Walk-through",
    "text": "Walk-through\nSecond Iteration\n\nx[0]\n\n#&gt; numeric(0)\n\nx[0]^2\n\n#&gt; numeric(0)\n\nout[0]\n\n#&gt; list()\n\nout[0] &lt;- x[0]^2\nout[0]\n\n#&gt; list()"
  },
  {
    "objectID": "slides/05.html#walk-through-3",
    "href": "slides/05.html#walk-through-3",
    "title": "Control flow",
    "section": "Walk-through",
    "text": "Walk-through\nFinal Result\n\nout\n\n#&gt; [[1]]\n#&gt; [1] NA"
  },
  {
    "objectID": "slides/05.html#when-the-following-code-is-evaluated-what-can-you-say-about-the-vector-being-iterated",
    "href": "slides/05.html#when-the-following-code-is-evaluated-what-can-you-say-about-the-vector-being-iterated",
    "title": "Control flow",
    "section": "When the following code is evaluated, what can you say about the vector being iterated?",
    "text": "When the following code is evaluated, what can you say about the vector being iterated?\n\nxs &lt;- c(1, 2, 3)\nfor (x in xs) {\n  xs &lt;- c(xs, x * 2)\n}\nxs\n\n#&gt; [1] 1 2 3 2 4 6\n\n\n\nIn this loop x takes on the values of the initial xs (1, 2 and 3), indicating that it is evaluated just once in the beginning of the loop, not after each iteration. (Otherwise, we would run into an infinite loop.)"
  },
  {
    "objectID": "slides/05.html#what-does-the-following-code-tell-you-about-when-the-index-is-updated",
    "href": "slides/05.html#what-does-the-following-code-tell-you-about-when-the-index-is-updated",
    "title": "Control flow",
    "section": "What does the following code tell you about when the index is updated?",
    "text": "What does the following code tell you about when the index is updated?\n\nfor (i in 1:3) {\n  i &lt;- i * 2\n  print(i) \n}\n\n#&gt; [1] 2\n#&gt; [1] 4\n#&gt; [1] 6\n\n\n\nIn a for loop the index is updated in the beginning of each iteration. Therefore, reassigning the index symbol during one iteration doesn‚Äôt affect the following iterations. (Again, we would otherwise run into an infinite loop.)"
  },
  {
    "objectID": "slides/03.html#learning-objectives",
    "href": "slides/03.html#learning-objectives",
    "title": "Vectors",
    "section": "Learning objectives",
    "text": "Learning objectives\n\nLearn about different types of vectors and their attributes\nNavigate through vector types and their value types\nVenture into factors and date-time objects\nDiscuss the differences between data frames and tibbles\nDo not get absorbed by the NA and NULL black hole"
  },
  {
    "objectID": "slides/03.html#session-info",
    "href": "slides/03.html#session-info",
    "title": "Vectors",
    "section": "Session Info",
    "text": "Session Info\n\nlibrary(\"dplyr\")\nlibrary(\"gt\")\nlibrary(\"palmerpenguins\")\n\n\n\nSession Info\n\n\nutils::sessionInfo()\n\n#&gt; R version 4.5.1 (2025-06-13 ucrt)\n#&gt; Platform: x86_64-w64-mingw32/x64\n#&gt; Running under: Windows 11 x64 (build 26200)\n#&gt; \n#&gt; Matrix products: default\n#&gt;   LAPACK version 3.12.1\n#&gt; \n#&gt; locale:\n#&gt; [1] LC_COLLATE=English_United States.utf8 \n#&gt; [2] LC_CTYPE=English_United States.utf8   \n#&gt; [3] LC_MONETARY=English_United States.utf8\n#&gt; [4] LC_NUMERIC=C                          \n#&gt; [5] LC_TIME=English_United States.utf8    \n#&gt; \n#&gt; time zone: America/Chicago\n#&gt; tzcode source: internal\n#&gt; \n#&gt; attached base packages:\n#&gt; [1] stats     graphics  grDevices utils     datasets  methods   base     \n#&gt; \n#&gt; other attached packages:\n#&gt; [1] palmerpenguins_0.1.1 gt_1.1.0             dplyr_1.1.4         \n#&gt; \n#&gt; loaded via a namespace (and not attached):\n#&gt;  [1] digest_0.6.37     R6_2.6.1          fastmap_1.2.0     tidyselect_1.2.1 \n#&gt;  [5] xfun_0.54         magrittr_2.0.4    glue_1.8.0        tibble_3.3.0     \n#&gt;  [9] knitr_1.50        pkgconfig_2.0.3   htmltools_0.5.8.1 rmarkdown_2.30   \n#&gt; [13] generics_0.1.4    lifecycle_1.0.4   xml2_1.4.1        cli_3.6.5        \n#&gt; [17] vctrs_0.6.5       compiler_4.5.1    tools_4.5.1       pillar_1.11.1    \n#&gt; [21] evaluate_1.0.5    yaml_2.3.10       fs_1.6.6          rlang_1.1.6.9000 \n#&gt; [25] jsonlite_2.0.0    keyring_1.4.1"
  },
  {
    "objectID": "slides/03.html#aperitif",
    "href": "slides/03.html#aperitif",
    "title": "Vectors",
    "section": "Aperitif",
    "text": "Aperitif\n\nPalmer Penguins"
  },
  {
    "objectID": "slides/03.html#counting-penguins",
    "href": "slides/03.html#counting-penguins",
    "title": "Vectors",
    "section": "Counting Penguins",
    "text": "Counting Penguins\nConsider this code to count the number of Gentoo penguins in the penguins data set. We see that there are 124 Gentoo penguins.\n\nsum(\"Gentoo\" == penguins$species)\n# output: 124"
  },
  {
    "objectID": "slides/03.html#in",
    "href": "slides/03.html#in",
    "title": "Vectors",
    "section": "In",
    "text": "In\nOne subtle error can arise in trying out %in% here instead.\n\nspecies_vector &lt;- penguins |&gt; select(species)\nprint(\"Gentoo\" %in% species_vector)\n# output: FALSE\n\n\nWhere did the penguins go?"
  },
  {
    "objectID": "slides/03.html#fix-base-r",
    "href": "slides/03.html#fix-base-r",
    "title": "Vectors",
    "section": "Fix: base R",
    "text": "Fix: base R\n\nspecies_unlist &lt;- penguins |&gt; select(species) |&gt; unlist()\nprint(\"Gentoo\" %in% species_unlist)\n# output: TRUE"
  },
  {
    "objectID": "slides/03.html#fix-dplyr",
    "href": "slides/03.html#fix-dplyr",
    "title": "Vectors",
    "section": "Fix: dplyr",
    "text": "Fix: dplyr\n\nspecies_pull &lt;- penguins |&gt; select(species) |&gt; pull()\nprint(\"Gentoo\" %in% species_pull)\n# output: TRUE"
  },
  {
    "objectID": "slides/03.html#motivation",
    "href": "slides/03.html#motivation",
    "title": "Vectors",
    "section": "Motivation",
    "text": "Motivation\n\nWhat are the different types of vectors?\nHow does this affect accessing vectors?\n\n\n\nSide Quest: Looking up the %in% operator\n\nIf you want to look up the manual pages for the %in% operator with the ?, use backticks:\n\n?`%in%`\n\nand we find that %in% is a wrapper for the match() function."
  },
  {
    "objectID": "slides/03.html#types-of-vectors",
    "href": "slides/03.html#types-of-vectors",
    "title": "Vectors",
    "section": "Types of Vectors",
    "text": "Types of Vectors\n\nImage Credit: Advanced RTwo main types:\n\nAtomic: Elements all the same type.\nList: Elements are different Types.\n\nClosely related but not technically a vector:\n\nNULL: Null elements. Often length zero."
  },
  {
    "objectID": "slides/03.html#types-of-atomic-vectors-12",
    "href": "slides/03.html#types-of-atomic-vectors-12",
    "title": "Vectors",
    "section": "Types of Atomic Vectors (1/2)",
    "text": "Types of Atomic Vectors (1/2)\n\nImage Credit: Advanced R"
  },
  {
    "objectID": "slides/03.html#types-of-atomic-vectors-22",
    "href": "slides/03.html#types-of-atomic-vectors-22",
    "title": "Vectors",
    "section": "Types of Atomic Vectors (2/2)",
    "text": "Types of Atomic Vectors (2/2)\n\nLogical: True/False\nInteger: Numeric (discrete, no decimals)\nDouble: Numeric (continuous, decimals)\nCharacter: String"
  },
  {
    "objectID": "slides/03.html#vectors-of-length-one",
    "href": "slides/03.html#vectors-of-length-one",
    "title": "Vectors",
    "section": "Vectors of Length One",
    "text": "Vectors of Length One\nScalars are vectors that consist of a single value."
  },
  {
    "objectID": "slides/03.html#logicals",
    "href": "slides/03.html#logicals",
    "title": "Vectors",
    "section": "Logicals",
    "text": "Logicals\n\nlgl1 &lt;- TRUE\nlgl2 &lt;- T #abbreviation for TRUE\nlgl3 &lt;- FALSE\nlgl4 &lt;- F #abbreviation for FALSE"
  },
  {
    "objectID": "slides/03.html#doubles",
    "href": "slides/03.html#doubles",
    "title": "Vectors",
    "section": "Doubles",
    "text": "Doubles\n\n# integer, decimal, scientific, or hexidecimal format\ndbl1 &lt;- 1\ndbl2 &lt;- 1.234 # decimal\ndbl3 &lt;- 1.234e0 # scientific format\ndbl4 &lt;- 0xcafe # hexidecimal format"
  },
  {
    "objectID": "slides/03.html#integers",
    "href": "slides/03.html#integers",
    "title": "Vectors",
    "section": "Integers",
    "text": "Integers\nIntegers must be followed by L and cannot have fractional values\n\nint1 &lt;- 1L\nint2 &lt;- 1234L\nint3 &lt;- 1234e0L\nint4 &lt;- 0xcafeL\n\n\n\nPop Quiz: Why ‚ÄúL‚Äù for integers?\n\nWickham notes that the use of L dates back to the C programming language and its ‚Äúlong int‚Äù type for memory allocation."
  },
  {
    "objectID": "slides/03.html#strings",
    "href": "slides/03.html#strings",
    "title": "Vectors",
    "section": "Strings",
    "text": "Strings\nStrings can use single or double quotes and special characters are escaped with\n\n\nstr1 &lt;- \"hello\" # double quotes\nstr2 &lt;- 'hello' # single quotes\nstr3 &lt;- \"ŸÖÿ±ÿ≠ÿ®Ÿãÿß\" # Unicode\nstr4 &lt;- \"\\U0001f605\" # sweaty_smile üòÖ"
  },
  {
    "objectID": "slides/03.html#longer-12",
    "href": "slides/03.html#longer-12",
    "title": "Vectors",
    "section": "Longer 1/2",
    "text": "Longer 1/2\nThere are several ways to make longer vectors:\n1. With single values inside c() for combine.\n\nlgl_var &lt;- c(TRUE, FALSE)\nint_var &lt;- c(1L, 6L, 10L)\ndbl_var &lt;- c(1, 2.5, 4.5)\nchr_var &lt;- c(\"these are\", \"some strings\")\n\n\nImage Credit: Advanced R"
  },
  {
    "objectID": "slides/03.html#longer-22",
    "href": "slides/03.html#longer-22",
    "title": "Vectors",
    "section": "Longer 2/2",
    "text": "Longer 2/2\n2. With other vectors\n\nc(c(1, 2), c(3, 4)) # output is not nested\n\n#&gt; [1] 1 2 3 4"
  },
  {
    "objectID": "slides/03.html#type-and-length",
    "href": "slides/03.html#type-and-length",
    "title": "Vectors",
    "section": "Type and Length",
    "text": "Type and Length\nWe can determine the type of a vector with typeof() and its length with length()\n\n\n\n\n\n\n\n\nTypes of Atomic Vectors1\n\n\nname\nvalue\ntypeof()\nlength()\n\n\n\n\nlgl_var\nTRUE, FALSE\nlogical\n2\n\n\nint_var\n1L, 6L, 10L\ninteger\n3\n\n\ndbl_var\n1, 2.5, 4.5\ndouble\n3\n\n\nchr_var\n'these are', 'some strings'\ncharacter\n2\n\n\n\n1 Source: https://adv-r.hadley.nz/index.html"
  },
  {
    "objectID": "slides/03.html#side-quest-penguins",
    "href": "slides/03.html#side-quest-penguins",
    "title": "Vectors",
    "section": "Side Quest: Penguins",
    "text": "Side Quest: Penguins\n\n\ntypeof(penguins$species)\n\n#&gt; [1] \"integer\"\n\nclass(penguins$species)\n\n#&gt; [1] \"factor\"\n\ntypeof(species_unlist)\n\n#&gt; [1] \"integer\"\n\nclass(species_unlist)\n\n#&gt; [1] \"factor\"\n\ntypeof(species_pull)\n\n#&gt; [1] \"integer\"\n\nclass(species_pull)\n\n#&gt; [1] \"factor\""
  },
  {
    "objectID": "slides/03.html#missing-values-contagion",
    "href": "slides/03.html#missing-values-contagion",
    "title": "Vectors",
    "section": "Missing values: Contagion",
    "text": "Missing values: Contagion\nFor most computations, an operation over values that includes a missing value yields a missing value (unless you‚Äôre careful)\n\n# contagion\n5*NA\n\n#&gt; [1] NA\n\nsum(c(1, 2, NA, 3))\n\n#&gt; [1] NA"
  },
  {
    "objectID": "slides/03.html#missing-values-contagion-exceptions",
    "href": "slides/03.html#missing-values-contagion-exceptions",
    "title": "Vectors",
    "section": "Missing values: Contagion Exceptions",
    "text": "Missing values: Contagion Exceptions\n\nNA ^ 0\n#&gt; [1] 1\nNA | TRUE\n#&gt; [1] TRUE\nNA & FALSE\n#&gt; [1] FALSE\n\nInnoculation\n\nsum(c(1, 2, NA, 3), na.rm = TRUE)\n# output: 6\n\nTo search for missing values use is.na()\n\nx &lt;- c(NA, 5, NA, 10)\nx == NA\n# output: NA NA NA NA [BATMAN!]\n\n\nis.na(x)\n# output: TRUE FALSE TRUE FALSE"
  },
  {
    "objectID": "slides/03.html#missing-values-na-types",
    "href": "slides/03.html#missing-values-na-types",
    "title": "Vectors",
    "section": "Missing Values: NA Types",
    "text": "Missing Values: NA Types\n\nEach type has its own NA type\n\nLogical: NA\nInteger: NA_integer\nDouble: NA_double\nCharacter: NA_character\n\nThis may not matter in many contexts.\nCan matter for operations where types matter like dplyr::if_else()."
  },
  {
    "objectID": "slides/03.html#testing-12",
    "href": "slides/03.html#testing-12",
    "title": "Vectors",
    "section": "Testing (1/2)",
    "text": "Testing (1/2)\nWhat type of vector is.*() it?\nTest data type:\n\nLogical: is.logical()\nInteger: is.integer()\nDouble: is.double()\nCharacter: is.character()"
  },
  {
    "objectID": "slides/03.html#testing-22",
    "href": "slides/03.html#testing-22",
    "title": "Vectors",
    "section": "Testing (2/2)",
    "text": "Testing (2/2)\nWhat type of object is it?\nDon‚Äôt test objects with these tools:\n\nis.vector()\nis.atomic()\nis.numeric()\n\nThey don‚Äôt test if you have a vector, atomic vector, or numeric vector; you‚Äôll need to carefully read the documentation to figure out what they actually do (preview: attributes)"
  },
  {
    "objectID": "slides/03.html#side-quest-rlang-is_",
    "href": "slides/03.html#side-quest-rlang-is_",
    "title": "Vectors",
    "section": "Side Quest: rlang is_*()",
    "text": "Side Quest: rlang is_*()\n\n\nMaybe use {rlang}?\n\n\nrlang::is_vector\nrlang::is_atomic\n\n\n# vector\nrlang::is_vector(c(1, 2))\n\n#&gt; [1] TRUE\n\nrlang::is_vector(list(1, 2))\n\n#&gt; [1] TRUE\n\n# atomic\nrlang::is_atomic(c(1, 2))\n\n#&gt; [1] TRUE\n\nrlang::is_atomic(list(1, \"a\"))\n\n#&gt; [1] FALSE\n\n\nSee more here"
  },
  {
    "objectID": "slides/03.html#coercion",
    "href": "slides/03.html#coercion",
    "title": "Vectors",
    "section": "Coercion",
    "text": "Coercion\n\nR follows rules for coercion: character ‚Üí double ‚Üí integer ‚Üí logical\nR can coerce either automatically or explicitly\n\nAutomatic\nTwo contexts for automatic coercion:\n\nCombination\nMathematical"
  },
  {
    "objectID": "slides/03.html#coercion-by-combination",
    "href": "slides/03.html#coercion-by-combination",
    "title": "Vectors",
    "section": "Coercion by Combination:",
    "text": "Coercion by Combination:\n\nstr(c(TRUE, \"TRUE\"))\n\n#&gt;  chr [1:2] \"TRUE\" \"TRUE\""
  },
  {
    "objectID": "slides/03.html#coercion-by-mathematical-operations",
    "href": "slides/03.html#coercion-by-mathematical-operations",
    "title": "Vectors",
    "section": "Coercion by Mathematical operations:",
    "text": "Coercion by Mathematical operations:\n\n# imagine a logical vector about whether an attribute is present\nhas_attribute &lt;- c(TRUE, FALSE, TRUE, TRUE)\n\n# number with attribute\nsum(has_attribute)\n\n#&gt; [1] 3"
  },
  {
    "objectID": "slides/03.html#explicit",
    "href": "slides/03.html#explicit",
    "title": "Vectors",
    "section": "Explicit",
    "text": "Explicit\n\n\n\n\n\n\n\n\n\nCoercion of Atomic Vectors1\n\n\nname\nvalue\nas.logical()\nas.integer()\nas.double()\nas.character()\n\n\n\n\nlgl_var\nTRUE, FALSE\nTRUE FALSE\n1 0\n1 0\n'TRUE' 'FALSE'\n\n\nint_var\n1L, 6L, 10L\nTRUE TRUE TRUE\n1 6 10\n1 6 10\n'1' '6' '10'\n\n\ndbl_var\n1, 2.5, 4.5\nTRUE TRUE TRUE\n1 2 4\n1.0 2.5 4.5\n'1' '2.5' '4.5'\n\n\nchr_var\n'these are', 'some strings'\nNA NA\nNA_integer\nNA_double\n'these are', 'some strings'\n\n\n\n1 Source: https://adv-r.hadley.nz/index.html\n\n\n\n\n\n\n\n\nBut note that coercion may fail in one of two ways, or both:\n\nWith warning/error\nNAs\n\n\nas.integer(c(1, 2, \"three\"))\n\n#&gt; [1]  1  2 NA"
  },
  {
    "objectID": "slides/03.html#exercises-15",
    "href": "slides/03.html#exercises-15",
    "title": "Vectors",
    "section": "Exercises 1/5",
    "text": "Exercises 1/5\n\nHow do you create raw and complex scalars?\n\n\n\nAnswer(s)\n\n\nas.raw(42)\n#&gt; [1] 2a\ncharToRaw(\"A\")\n#&gt; [1] 41\ncomplex(length.out = 1, real = 1, imaginary = 1)\n#&gt; [1] 1+1i"
  },
  {
    "objectID": "slides/03.html#exercises-25",
    "href": "slides/03.html#exercises-25",
    "title": "Vectors",
    "section": "Exercises 2/5",
    "text": "Exercises 2/5\n\nTest your knowledge of the vector coercion rules by predicting the output of the following uses of c():\n\n\nc(1, FALSE)\nc(\"a\", 1)\nc(TRUE, 1L)\n\n\n\nAnswer(s)\n\n\nc(1, FALSE)      # will be coerced to double    -&gt; 1 0\nc(\"a\", 1)        # will be coerced to character -&gt; \"a\" \"1\"\nc(TRUE, 1L)      # will be coerced to integer   -&gt; 1 1"
  },
  {
    "objectID": "slides/03.html#exercises-35",
    "href": "slides/03.html#exercises-35",
    "title": "Vectors",
    "section": "Exercises 3/5",
    "text": "Exercises 3/5\n\nWhy is 1 == \"1\" true? Why is -1 &lt; FALSE true? Why is \"one\" &lt; 2 false?\n\n\n\nAnswer(s)\n\nThese comparisons are carried out by operator-functions (==, &lt;), which coerce their arguments to a common type. In the examples above, these types will be character, double and character: 1 will be coerced to ‚Äú1‚Äù, FALSE is represented as 0 and 2 turns into ‚Äú2‚Äù (and numbers precede letters in lexicographic order (may depend on locale))."
  },
  {
    "objectID": "slides/03.html#exercises-45",
    "href": "slides/03.html#exercises-45",
    "title": "Vectors",
    "section": "Exercises 4/5",
    "text": "Exercises 4/5\n\nWhy is the default missing value, NA, a logical vector? What‚Äôs special about logical vectors?\n\n\n\nAnswer(s)\n\nThe presence of missing values shouldn‚Äôt affect the type of an object. Recall that there is a type-hierarchy for coercion from character ‚Üí double ‚Üí integer ‚Üí logical. When combining NAs with other atomic types, the NAs will be coerced to integer (NA_integer_), double (NA_real_) or character (NA_character_) and not the other way round. If NA were a character and added to a set of other values all of these would be coerced to character as well."
  },
  {
    "objectID": "slides/03.html#exercises-55",
    "href": "slides/03.html#exercises-55",
    "title": "Vectors",
    "section": "Exercises 5/5",
    "text": "Exercises 5/5\n\nPrecisely what do is.atomic(), is.numeric(), and is.vector() test for?\n\n\n\nAnswer(s)\n\n\nis.atomic() tests if an object is an atomic vector or is NULL (!). Atomic vectors are objects of type logical, integer, double, complex, character or raw.\nis.numeric() tests if an object has type integer or double and is not of class factor, Date, POSIXt or difftime.\nis.vector() tests if an object is a vector or an expression and has no attributes, apart from names. Vectors are atomic vectors or lists."
  },
  {
    "objectID": "slides/03.html#attributes",
    "href": "slides/03.html#attributes",
    "title": "Vectors",
    "section": "Attributes",
    "text": "Attributes\nAttributes are name-value pairs that attach metadata to an object (vector).\n\nName-value pairs: attributes have a name and a value\nMetadata: not data itself, but data about the data"
  },
  {
    "objectID": "slides/03.html#getting-and-setting",
    "href": "slides/03.html#getting-and-setting",
    "title": "Vectors",
    "section": "Getting and Setting",
    "text": "Getting and Setting\nThree functions:\n\nretrieve and modify single attributes with attr()\nretrieve en masse with attributes()\nset en masse with structure()"
  },
  {
    "objectID": "slides/03.html#single-attribute",
    "href": "slides/03.html#single-attribute",
    "title": "Vectors",
    "section": "Single attribute",
    "text": "Single attribute\nUse attr()\n\n# some object\na &lt;- c(1, 2, 3)\n\n# set attribute\nattr(x = a, which = \"attribute_name\") &lt;- \"some attribute\"\n\n# get attribute\nattr(a, \"attribute_name\")\n\n#&gt; [1] \"some attribute\""
  },
  {
    "objectID": "slides/03.html#multiple-attributes",
    "href": "slides/03.html#multiple-attributes",
    "title": "Vectors",
    "section": "Multiple attributes",
    "text": "Multiple attributes\nstructure(): set multiple attributes, attributes(): get multiple attributes\n\n\n\na &lt;- 1:3\nattr(a, \"x\") &lt;- \"abcdef\"\nattr(a, \"x\")\n\n#&gt; [1] \"abcdef\"\n\nattr(a, \"y\") &lt;- 4:6\nstr(attributes(a))\n\n#&gt; List of 2\n#&gt;  $ x: chr \"abcdef\"\n#&gt;  $ y: int [1:3] 4 5 6\n\nb &lt;- structure(\n  1:3, \n  x = \"abcdef\",\n  y = 4:6\n)\nidentical(a, b)\n\n#&gt; [1] TRUE\n\n\n\n\n\n\nImage Credit: Advanced R"
  },
  {
    "objectID": "slides/03.html#why",
    "href": "slides/03.html#why",
    "title": "Vectors",
    "section": "Why",
    "text": "Why\nThree particularly important attributes:\n\nnames - a character vector giving each element a name\ndimension - (or dim) turns vectors into matrices and arrays\nclass - powers the S3 object system (we‚Äôll learn more about this in chapter 13)\n\nMost attributes are lost by most operations. Only two attributes are routinely preserved: names and dimension."
  },
  {
    "objectID": "slides/03.html#names",
    "href": "slides/03.html#names",
    "title": "Vectors",
    "section": "Names",
    "text": "Names\nThree Four ways to name:\n\n\n\n# (1) On creation: \nx &lt;- c(A = 1, B = 2, C = 3)\nx\n\n#&gt; A B C \n#&gt; 1 2 3\n\n# (2) Assign to names():\ny &lt;- 1:3\nnames(y) &lt;- c(\"a\", \"b\", \"c\")\ny\n\n#&gt; a b c \n#&gt; 1 2 3\n\n# (3) Inline:\nz &lt;- setNames(1:3, c(\"a\", \"b\", \"c\"))\nz\n\n#&gt; a b c \n#&gt; 1 2 3\n\n\n\n\n\n\nproper diagram"
  },
  {
    "objectID": "slides/03.html#rlang-names",
    "href": "slides/03.html#rlang-names",
    "title": "Vectors",
    "section": "rlang Names",
    "text": "rlang Names\n\n\n\n# (4) Inline with {rlang}:\na &lt;- 1:3\nrlang::set_names(\n  a,\n  c(\"a\", \"b\", \"c\")\n)\n\n#&gt; a b c \n#&gt; 1 2 3\n\n\n\n\n\n\nsimplified diagram"
  },
  {
    "objectID": "slides/03.html#removing-names",
    "href": "slides/03.html#removing-names",
    "title": "Vectors",
    "section": "Removing names",
    "text": "Removing names\n\nx &lt;- unname(x) or names(x) &lt;- NULL\nThematically but not directly related: labelled class vectors with haven::labelled()"
  },
  {
    "objectID": "slides/03.html#dimensions-matrix-and-array",
    "href": "slides/03.html#dimensions-matrix-and-array",
    "title": "Vectors",
    "section": "Dimensions: matrix() and array()",
    "text": "Dimensions: matrix() and array()\n\n# Two scalar arguments specify row and column sizes\nx &lt;- matrix(1:6, nrow = 2, ncol = 3)\nx\n\n#&gt;      [,1] [,2] [,3]\n#&gt; [1,]    1    3    5\n#&gt; [2,]    2    4    6\n\n# One vector argument to describe all dimensions\ny &lt;- array(1:12, c(2, 3, 2)) # rows, columns, no of arrays\ny\n\n#&gt; , , 1\n#&gt; \n#&gt;      [,1] [,2] [,3]\n#&gt; [1,]    1    3    5\n#&gt; [2,]    2    4    6\n#&gt; \n#&gt; , , 2\n#&gt; \n#&gt;      [,1] [,2] [,3]\n#&gt; [1,]    7    9   11\n#&gt; [2,]    8   10   12"
  },
  {
    "objectID": "slides/03.html#dimensions-assign-to-dim",
    "href": "slides/03.html#dimensions-assign-to-dim",
    "title": "Vectors",
    "section": "Dimensions: assign to dim()",
    "text": "Dimensions: assign to dim()\n\n# You can also modify an object in place by setting dim()\nz &lt;- 1:6\ndim(z) &lt;- c(2, 3) # rows, columns\nz\n\n#&gt;      [,1] [,2] [,3]\n#&gt; [1,]    1    3    5\n#&gt; [2,]    2    4    6\n\na &lt;- 1:12\ndim(a) &lt;- c(2, 3, 2) # rows, columns, no of arrays\na\n\n#&gt; , , 1\n#&gt; \n#&gt;      [,1] [,2] [,3]\n#&gt; [1,]    1    3    5\n#&gt; [2,]    2    4    6\n#&gt; \n#&gt; , , 2\n#&gt; \n#&gt;      [,1] [,2] [,3]\n#&gt; [1,]    7    9   11\n#&gt; [2,]    8   10   12"
  },
  {
    "objectID": "slides/03.html#functions-for-working-with-vectors-matrices-and-arrays-12",
    "href": "slides/03.html#functions-for-working-with-vectors-matrices-and-arrays-12",
    "title": "Vectors",
    "section": "Functions for working with vectors, matrices and arrays (1/2):",
    "text": "Functions for working with vectors, matrices and arrays (1/2):\n\n\n\nVector\nMatrix\nArray\n\n\n\n\nnames()\nrownames(), colnames()\ndimnames()\n\n\nlength()\nnrow(), ncol()\ndim()\n\n\nc()\nrbind(), cbind()\nabind::abind()\n\n\n‚Äî\nt()\naperm()\n\n\nis.null(dim(x))\nis.matrix()\nis.array()\n\n\n\n\nCaution: Vector without dim set has NULL dimensions, not 1.\nOne dimension?"
  },
  {
    "objectID": "slides/03.html#functions-for-working-with-vectors-matrices-and-arrays-22",
    "href": "slides/03.html#functions-for-working-with-vectors-matrices-and-arrays-22",
    "title": "Vectors",
    "section": "Functions for working with vectors, matrices and arrays (2/2):",
    "text": "Functions for working with vectors, matrices and arrays (2/2):\n\nstr(1:3)                   # 1d vector\n#&gt;  int [1:3] 1 2 3\nstr(matrix(1:3, ncol = 1)) # column vector\n#&gt;  int [1:3, 1] 1 2 3\nstr(matrix(1:3, nrow = 1)) # row vector\n#&gt;  int [1, 1:3] 1 2 3\nstr(array(1:3, 3))         # \"array\" vector\n#&gt;  int [1:3(1d)] 1 2 3"
  },
  {
    "objectID": "slides/03.html#exercises-14",
    "href": "slides/03.html#exercises-14",
    "title": "Vectors",
    "section": "Exercises 1/4",
    "text": "Exercises 1/4\n\nHow is setNames() implemented? Read the source code.\n\n\n\nAnswer(s)\n\n\nsetNames &lt;- function(object = nm, nm) {\n  names(object) &lt;- nm\n  object\n}\n\n\nData arg 1st = works well with pipe.\n1st arg is optional\n\n\nsetNames( , c(\"a\", \"b\", \"c\"))\n#&gt;   a   b   c \n#&gt; \"a\" \"b\" \"c\""
  },
  {
    "objectID": "slides/03.html#exercises-14-cont",
    "href": "slides/03.html#exercises-14-cont",
    "title": "Vectors",
    "section": "Exercises 1/4 (cont)",
    "text": "Exercises 1/4 (cont)\n\nHow is unname() implemented? Read the source code.\n\n\n\nAnswer(s)\n\n\nunname &lt;- function(obj, force = FALSE) {\n  if (!is.null(names(obj))) \n    names(obj) &lt;- NULL\n  if (!is.null(dimnames(obj)) && (force || !is.data.frame(obj))) \n    dimnames(obj) &lt;- NULL\n  obj\n}\n\nunname() sets existing names or dimnames to NULL."
  },
  {
    "objectID": "slides/03.html#exercises-24",
    "href": "slides/03.html#exercises-24",
    "title": "Vectors",
    "section": "Exercises 2/4",
    "text": "Exercises 2/4\n\nWhat does dim() return when applied to a 1-dimensional vector? When might you use NROW() or NCOL()?\n\n\n\nAnswer(s)\n\n\ndim() returns NULL when applied to a 1d vector.\n\nNROW() and NCOL() treats NULL and vectors like they have dimensions:\n\nx &lt;- 1:10\nnrow(x)\n#&gt; NULL\nncol(x)\n#&gt; NULL\nNROW(x)\n#&gt; [1] 10\nNCOL(x)\n#&gt; [1] 1"
  },
  {
    "objectID": "slides/03.html#exercises-34",
    "href": "slides/03.html#exercises-34",
    "title": "Vectors",
    "section": "Exercises 3/4",
    "text": "Exercises 3/4\n\nHow would you describe the following three objects? What makes them different from 1:5?\n\n\nx1 &lt;- array(1:5, c(1, 1, 5))\nx2 &lt;- array(1:5, c(1, 5, 1))\nx3 &lt;- array(1:5, c(5, 1, 1))\n\n\n\nAnswer(s)\n\n\nx1 &lt;- array(1:5, c(1, 1, 5))  # 1 row,  1 column,  5 in third dim.\nx2 &lt;- array(1:5, c(1, 5, 1))  # 1 row,  5 columns, 1 in third dim.\nx3 &lt;- array(1:5, c(5, 1, 1))  # 5 rows, 1 column,  1 in third dim."
  },
  {
    "objectID": "slides/03.html#exercises-44",
    "href": "slides/03.html#exercises-44",
    "title": "Vectors",
    "section": "Exercises 4/4",
    "text": "Exercises 4/4\n\nAn early draft used this code to illustrate structure():\n\n\nstructure(1:5, comment = \"my attribute\")\n#&gt; [1] 1 2 3 4 5\n\nWhy don‚Äôt you see the comment attribute on print? Is the attribute missing, or is there something else special about it?\n\n\nAnswer(s)\n\nThe documentation states (see ?comment):\n\nContrary to other attributes, the comment is not printed (by print or print.default)."
  },
  {
    "objectID": "slides/03.html#exercises-44-cont",
    "href": "slides/03.html#exercises-44-cont",
    "title": "Vectors",
    "section": "Exercises 4/4 (cont)",
    "text": "Exercises 4/4 (cont)\n\n\nAnswer(s)\n\nAlso, from ?attributes:\n\nNote that some attributes (namely class, comment, dim, dimnames, names, row.names and tsp) are treated specially and have restrictions on the values which can be set.\n\nRetrieve comment attributes with attr():\n\nfoo &lt;- structure(1:5, comment = \"my attribute\")\n\nattributes(foo)\n#&gt; $comment\n#&gt; [1] \"my attribute\"\nattr(foo, which = \"comment\")\n#&gt; [1] \"my attribute\""
  },
  {
    "objectID": "slides/03.html#class---s3-atomic-vectors",
    "href": "slides/03.html#class---s3-atomic-vectors",
    "title": "Vectors",
    "section": "Class - S3 atomic vectors",
    "text": "Class - S3 atomic vectors\n\nCredit: Advanced R by Hadley Wickham\nHaving a class attribute turns an object into an S3 object.\nWhat makes S3 atomic vectors different?\n\nbehave differently from a regular vector when passed to a generic function\noften store additional information in other attributes"
  },
  {
    "objectID": "slides/03.html#four-important-s3-vectors-used-in-base-r",
    "href": "slides/03.html#four-important-s3-vectors-used-in-base-r",
    "title": "Vectors",
    "section": "Four important S3 vectors used in base R:",
    "text": "Four important S3 vectors used in base R:\n\nFactors (categorical data)\nDates\nDate-times (POSIXct)\nDurations (difftime)"
  },
  {
    "objectID": "slides/03.html#factors",
    "href": "slides/03.html#factors",
    "title": "Vectors",
    "section": "Factors",
    "text": "Factors\nA factor is a vector used to store categorical data that can contain only predefined values.\nFactors are integer vectors with:\n\nClass: ‚Äúfactor‚Äù\nAttributes: ‚Äúlevels‚Äù, or the set of allowed values"
  },
  {
    "objectID": "slides/03.html#factors-examples",
    "href": "slides/03.html#factors-examples",
    "title": "Vectors",
    "section": "Factors examples",
    "text": "Factors examples\n\ncolors = c('red', 'blue', 'green','red','red', 'green')\ncolors_factor &lt;- factor(\n  x = colors, levels = c('red', 'blue', 'green', 'yellow')\n)\n\n\n\n\ntable(colors)\n\n#&gt; colors\n#&gt;  blue green   red \n#&gt;     1     2     3\n\ntable(colors_factor)\n\n#&gt; colors_factor\n#&gt;    red   blue  green yellow \n#&gt;      3      1      2      0\n\n\n\n\ntypeof(colors_factor)\n\n#&gt; [1] \"integer\"\n\nclass(colors_factor)\n\n#&gt; [1] \"factor\"\n\nattributes(colors_factor)\n\n#&gt; $levels\n#&gt; [1] \"red\"    \"blue\"   \"green\"  \"yellow\"\n#&gt; \n#&gt; $class\n#&gt; [1] \"factor\""
  },
  {
    "objectID": "slides/03.html#custom-order",
    "href": "slides/03.html#custom-order",
    "title": "Vectors",
    "section": "Custom Order",
    "text": "Custom Order\nFactors can be ordered. This can be useful for models or visualizations where order matters.\n\nvalues &lt;- c('high', 'med', 'low', 'med', 'high', 'low', 'med', 'high')\nordered_factor &lt;- ordered(\n  x = values,\n  levels = c('low', 'med', 'high') # in order\n)\nordered_factor\n\n#&gt; [1] high med  low  med  high low  med  high\n#&gt; Levels: low &lt; med &lt; high\n\ntable(values)\n\n#&gt; values\n#&gt; high  low  med \n#&gt;    3    2    3\n\ntable(ordered_factor)\n\n#&gt; ordered_factor\n#&gt;  low  med high \n#&gt;    2    3    3"
  },
  {
    "objectID": "slides/03.html#dates",
    "href": "slides/03.html#dates",
    "title": "Vectors",
    "section": "Dates",
    "text": "Dates\nDates are:\n\nDouble vectors\nWith class ‚ÄúDate‚Äù\nNo other attributes\n\n\nnotes_date &lt;- Sys.Date()\n\n# type\ntypeof(notes_date)\n\n#&gt; [1] \"double\"\n\n# class\nattributes(notes_date)\n\n#&gt; $class\n#&gt; [1] \"Date\""
  },
  {
    "objectID": "slides/03.html#dates-unix-epoch",
    "href": "slides/03.html#dates-unix-epoch",
    "title": "Vectors",
    "section": "Dates Unix epoch",
    "text": "Dates Unix epoch\nThe double component represents the number of days since since the Unix epoch 1970-01-01\n\ndate &lt;- as.Date(\"1970-02-01\")\nunclass(date)\n\n#&gt; [1] 31"
  },
  {
    "objectID": "slides/03.html#date-times",
    "href": "slides/03.html#date-times",
    "title": "Vectors",
    "section": "Date-times",
    "text": "Date-times\nThere are 2 Date-time representations in base R:\n\nPOSIXct, where ‚Äúct‚Äù denotes calendar time\nPOSIXlt, where ‚Äúlt‚Äù designates local time"
  },
  {
    "objectID": "slides/03.html#dates-times-posixct",
    "href": "slides/03.html#dates-times-posixct",
    "title": "Vectors",
    "section": "Dates-times: POSIXct",
    "text": "Dates-times: POSIXct\nWe‚Äôll focus on POSIXct because:\n\nSimplest\nBuilt on an atomic (double) vector\nMost appropriate for use in a data frame\n\nLet‚Äôs now build and deconstruct a Date-time\n\n# Build\nnote_date_time &lt;- as.POSIXct(\n  x = Sys.time(), # time\n  tz = \"America/New_York\" # time zone, used only for formatting\n)\n\n# Inspect\nnote_date_time\n\n#&gt; [1] \"2025-11-18 07:44:07 EST\"\n\n# - type\ntypeof(note_date_time)\n\n#&gt; [1] \"double\"\n\n# - attributes\nattributes(note_date_time)\n\n#&gt; $class\n#&gt; [1] \"POSIXct\" \"POSIXt\" \n#&gt; \n#&gt; $tzone\n#&gt; [1] \"America/New_York\"\n\nstructure(note_date_time, tzone = \"Europe/Paris\")\n\n#&gt; [1] \"2025-11-18 13:44:07 CET\"\n\n\n\ndate_time &lt;- as.POSIXct(\"2024-02-22 12:34:56\", tz = \"EST\")\nunclass(date_time)\n\n#&gt; [1] 1708623296\n#&gt; attr(,\"tzone\")\n#&gt; [1] \"EST\""
  },
  {
    "objectID": "slides/03.html#durations",
    "href": "slides/03.html#durations",
    "title": "Vectors",
    "section": "Durations",
    "text": "Durations\nDurations represent the amount of time between pairs of dates or date-times.\n\nDouble vectors\nClass: ‚Äúdifftime‚Äù\nAttributes: ‚Äúunits‚Äù, or the unit of duration (e.g., weeks, hours, minutes, seconds, etc.)\n\n\n# Construct\none_minute &lt;- as.difftime(1, units = \"mins\")\n# Inspect\none_minute\n\n#&gt; Time difference of 1 mins\n\n# Dissect\n# - type\ntypeof(one_minute)\n\n#&gt; [1] \"double\"\n\n# - attributes\nattributes(one_minute)\n\n#&gt; $class\n#&gt; [1] \"difftime\"\n#&gt; \n#&gt; $units\n#&gt; [1] \"mins\"\n\n\n\ntime_since_01_01_1970 &lt;- notes_date - date\ntime_since_01_01_1970\n\n#&gt; Time difference of 20379 days\n\n\nSee also:\n\nlubridate::make_difftime()\nclock::date_time_build()"
  },
  {
    "objectID": "slides/03.html#exercises-13",
    "href": "slides/03.html#exercises-13",
    "title": "Vectors",
    "section": "Exercises 1/3",
    "text": "Exercises 1/3\n\nWhat sort of object does table() return? What is its type? What attributes does it have? How does the dimensionality change as you tabulate more variables?\n\n\n\nAnswer(s)\n\ntable() returns a contingency table of its input variables. It is implemented as an integer vector with class table and dimensions (which makes it act like an array). Its attributes are dim (dimensions) and dimnames (one name for each input column). The dimensions correspond to the number of unique values (factor levels) in each input variable.\n\nx &lt;- table(mtcars[c(\"vs\", \"cyl\", \"am\")])\n\ntypeof(x)\n#&gt; [1] \"integer\"\nattributes(x)\n#&gt; $dim\n#&gt; [1] 2 3 2\n#&gt; \n#&gt; $dimnames\n#&gt; $dimnames$vs\n#&gt; [1] \"0\" \"1\"\n#&gt; \n#&gt; $dimnames$cyl\n#&gt; [1] \"4\" \"6\" \"8\"\n#&gt; \n#&gt; $dimnames$am\n#&gt; [1] \"0\" \"1\"\n#&gt; \n#&gt; \n#&gt; $class\n#&gt; [1] \"table\""
  },
  {
    "objectID": "slides/03.html#exercises-23",
    "href": "slides/03.html#exercises-23",
    "title": "Vectors",
    "section": "Exercises 2/3",
    "text": "Exercises 2/3\n\nWhat happens to a factor when you modify its levels?\n\n\nf1 &lt;- factor(letters)\nlevels(f1) &lt;- rev(levels(f1))\n\n\n\nAnswer(s)\n\nThe underlying integer values stay the same, but the levels are changed, making it look like the data has changed.\n\nf1 &lt;- factor(letters)\nf1\n#&gt;  [1] a b c d e f g h i j k l m n o p q r s t u v w x y z\n#&gt; Levels: a b c d e f g h i j k l m n o p q r s t u v w x y z\nas.integer(f1)\n#&gt;  [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25\n#&gt; [26] 26\n\nlevels(f1) &lt;- rev(levels(f1))\nf1\n#&gt;  [1] z y x w v u t s r q p o n m l k j i h g f e d c b a\n#&gt; Levels: z y x w v u t s r q p o n m l k j i h g f e d c b a\nas.integer(f1)\n#&gt;  [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25\n#&gt; [26] 26"
  },
  {
    "objectID": "slides/03.html#exercises-33",
    "href": "slides/03.html#exercises-33",
    "title": "Vectors",
    "section": "Exercises 3/3",
    "text": "Exercises 3/3\n\nWhat does this code do? How do f2 and f3 differ from f1?\n\n\nf2 &lt;- rev(factor(letters))\nf3 &lt;- factor(letters, levels = rev(letters))\n\n\n\nAnswer(s)\n\nFor f2 and f3 either the order of the factor elements or its levels are being reversed. For f1 both transformations are occurring.\n\n# Reverse element order\n(f2 &lt;- rev(factor(letters)))\n#&gt;  [1] z y x w v u t s r q p o n m l k j i h g f e d c b a\n#&gt; Levels: a b c d e f g h i j k l m n o p q r s t u v w x y z\nas.integer(f2)\n#&gt;  [1] 26 25 24 23 22 21 20 19 18 17 16 15 14 13 12 11 10  9  8  7  6  5  4  3  2\n#&gt; [26]  1\n\n# Reverse factor levels (when creating factor)\n(f3 &lt;- factor(letters, levels = rev(letters)))\n#&gt;  [1] a b c d e f g h i j k l m n o p q r s t u v w x y z\n#&gt; Levels: z y x w v u t s r q p o n m l k j i h g f e d c b a\nas.integer(f3)\n#&gt;  [1] 26 25 24 23 22 21 20 19 18 17 16 15 14 13 12 11 10  9  8  7  6  5  4  3  2\n#&gt; [26]  1"
  },
  {
    "objectID": "slides/03.html#lists",
    "href": "slides/03.html#lists",
    "title": "Vectors",
    "section": "Lists",
    "text": "Lists\n\nsometimes called a generic vector or recursive vector\nRecall (section 2.3.3): each element is really a reference to another object\nan be composed of elements of different types (as opposed to atomic vectors which must be of only one type)"
  },
  {
    "objectID": "slides/03.html#constructing",
    "href": "slides/03.html#constructing",
    "title": "Vectors",
    "section": "Constructing",
    "text": "Constructing\nSimple lists:\n\n# Construct\nsimple_list &lt;- list(\n  c(TRUE, FALSE),   # logicals\n  1:20,             # integers\n  c(1.2, 2.3, 3.4), # doubles\n  c(\"primo\", \"secundo\", \"tercio\") # characters\n)\n\nsimple_list\n\n#&gt; [[1]]\n#&gt; [1]  TRUE FALSE\n#&gt; \n#&gt; [[2]]\n#&gt;  [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20\n#&gt; \n#&gt; [[3]]\n#&gt; [1] 1.2 2.3 3.4\n#&gt; \n#&gt; [[4]]\n#&gt; [1] \"primo\"   \"secundo\" \"tercio\"\n\n# Inspect\n# - type\ntypeof(simple_list)\n\n#&gt; [1] \"list\"\n\n# - structure\nstr(simple_list)\n\n#&gt; List of 4\n#&gt;  $ : logi [1:2] TRUE FALSE\n#&gt;  $ : int [1:20] 1 2 3 4 5 6 7 8 9 10 ...\n#&gt;  $ : num [1:3] 1.2 2.3 3.4\n#&gt;  $ : chr [1:3] \"primo\" \"secundo\" \"tercio\"\n\n# Accessing\nsimple_list[1]\n\n#&gt; [[1]]\n#&gt; [1]  TRUE FALSE\n\nsimple_list[2]\n\n#&gt; [[1]]\n#&gt;  [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20\n\nsimple_list[3]\n\n#&gt; [[1]]\n#&gt; [1] 1.2 2.3 3.4\n\nsimple_list[4]\n\n#&gt; [[1]]\n#&gt; [1] \"primo\"   \"secundo\" \"tercio\"\n\nsimple_list[[1]][2]\n\n#&gt; [1] FALSE\n\nsimple_list[[2]][8]\n\n#&gt; [1] 8\n\nsimple_list[[3]][2]\n\n#&gt; [1] 2.3\n\nsimple_list[[4]][3]\n\n#&gt; [1] \"tercio\""
  },
  {
    "objectID": "slides/03.html#even-simpler-list",
    "href": "slides/03.html#even-simpler-list",
    "title": "Vectors",
    "section": "Even Simpler List",
    "text": "Even Simpler List\n\n# Construct\nsimpler_list &lt;- list(TRUE, FALSE, \n                    1, 2, 3, 4, 5, \n                    1.2, 2.3, 3.4, \n                    \"primo\", \"secundo\", \"tercio\")\n\n# Accessing\nsimpler_list[1]\n\n#&gt; [[1]]\n#&gt; [1] TRUE\n\nsimpler_list[5]\n\n#&gt; [[1]]\n#&gt; [1] 3\n\nsimpler_list[9]\n\n#&gt; [[1]]\n#&gt; [1] 2.3\n\nsimpler_list[11]\n\n#&gt; [[1]]\n#&gt; [1] \"primo\""
  },
  {
    "objectID": "slides/03.html#nested-lists",
    "href": "slides/03.html#nested-lists",
    "title": "Vectors",
    "section": "Nested lists:",
    "text": "Nested lists:\n\nnested_list &lt;- list(\n  # first level\n  list(\n    # second level\n    list(\n      # third level\n      list(1)\n    )\n  )\n)\n\nstr(nested_list)\n\n#&gt; List of 1\n#&gt;  $ :List of 1\n#&gt;   ..$ :List of 1\n#&gt;   .. ..$ :List of 1\n#&gt;   .. .. ..$ : num 1\n\n\nLike JSON."
  },
  {
    "objectID": "slides/03.html#combined-lists",
    "href": "slides/03.html#combined-lists",
    "title": "Vectors",
    "section": "Combined lists",
    "text": "Combined lists\n\nlist_comb1 &lt;- list(list(1, 2), list(3, 4)) # with list()\nlist_comb2 &lt;- c(list(1, 2), list(3, 4)) # with c()\n\n# compare structure\nstr(list_comb1)\n\n#&gt; List of 2\n#&gt;  $ :List of 2\n#&gt;   ..$ : num 1\n#&gt;   ..$ : num 2\n#&gt;  $ :List of 2\n#&gt;   ..$ : num 3\n#&gt;   ..$ : num 4\n\nstr(list_comb2)\n\n#&gt; List of 4\n#&gt;  $ : num 1\n#&gt;  $ : num 2\n#&gt;  $ : num 3\n#&gt;  $ : num 4\n\n# does this work if they are different data types?\nlist_comb3 &lt;- c(list(1, 2), list(TRUE, FALSE))\nstr(list_comb3)\n\n#&gt; List of 4\n#&gt;  $ : num 1\n#&gt;  $ : num 2\n#&gt;  $ : logi TRUE\n#&gt;  $ : logi FALSE"
  },
  {
    "objectID": "slides/03.html#testing",
    "href": "slides/03.html#testing",
    "title": "Vectors",
    "section": "Testing",
    "text": "Testing\nCheck that is a list:\n\nis.list()\n`rlang::is_list()``\n\nThe two do the same, except that the latter can check for the number of elements\n\n# is list\nbase::is.list(list_comb2)\n\n#&gt; [1] TRUE\n\nrlang::is_list(list_comb2)\n\n#&gt; [1] TRUE\n\n# is list of 4 elements\nrlang::is_list(x = list_comb2, n = 4)\n\n#&gt; [1] TRUE\n\n# is a vector (of a special type)\n# remember the family tree?\nrlang::is_vector(list_comb2)\n\n#&gt; [1] TRUE"
  },
  {
    "objectID": "slides/03.html#coercion-1",
    "href": "slides/03.html#coercion-1",
    "title": "Vectors",
    "section": "Coercion",
    "text": "Coercion\nUse as.list()\n\nlist(1:3)\n\n#&gt; [[1]]\n#&gt; [1] 1 2 3\n\nas.list(1:3)\n\n#&gt; [[1]]\n#&gt; [1] 1\n#&gt; \n#&gt; [[2]]\n#&gt; [1] 2\n#&gt; \n#&gt; [[3]]\n#&gt; [1] 3"
  },
  {
    "objectID": "slides/03.html#matrices-and-arrays",
    "href": "slides/03.html#matrices-and-arrays",
    "title": "Vectors",
    "section": "Matrices and arrays",
    "text": "Matrices and arrays\nAlthough not often used, the dimension attribute can be added to create list-matrices or list-arrays.\n\nl &lt;- list(1:3, \"a\", TRUE, 1.0)\ndim(l) &lt;- c(2, 2); l\n\n#&gt;      [,1]      [,2]\n#&gt; [1,] integer,3 TRUE\n#&gt; [2,] \"a\"       1\n\nl[[1, 1]]\n\n#&gt; [1] 1 2 3"
  },
  {
    "objectID": "slides/03.html#exercises-13-1",
    "href": "slides/03.html#exercises-13-1",
    "title": "Vectors",
    "section": "Exercises 1/3",
    "text": "Exercises 1/3\n\nList all the ways that a list differs from an atomic vector.\n\n\n\nAnswer(s)\n\n\nAtomic vectors are always homogeneous (all elements must be of the same type). Lists may be heterogeneous (the elements can be of different types) as described in the introduction of the vectors chapter.\nAtomic vectors point to one address in memory, while lists contain a separate reference for each element. (This was described in the list sections of the vectors and the names and values chapters.)\n\n\nlobstr::ref(1:2)\n#&gt; [1:0x7fcd936f6e80] &lt;int&gt;\nlobstr::ref(list(1:2, 2))\n#&gt; ‚ñà [1:0x7fcd93d53048] &lt;list&gt; \n#&gt; ‚îú‚îÄ[2:0x7fcd91377e40] &lt;int&gt; \n#&gt; ‚îî‚îÄ[3:0x7fcd93b41eb0] &lt;dbl&gt;\n\n\nSubsetting with out-of-bounds and NA values leads to different output. For example, [ returns NA for atomics and NULL for lists. (This is described in more detail within the subsetting chapter.)\n\n\n# Subsetting atomic vectors\n(1:2)[3]\n#&gt; [1] NA\n(1:2)[NA]\n#&gt; [1] NA NA\n\n# Subsetting lists\nas.list(1:2)[3]\n#&gt; [[1]]\n#&gt; NULL\nas.list(1:2)[NA]\n#&gt; [[1]]\n#&gt; NULL\n#&gt; \n#&gt; [[2]]\n#&gt; NULL"
  },
  {
    "objectID": "slides/03.html#exercises-23-1",
    "href": "slides/03.html#exercises-23-1",
    "title": "Vectors",
    "section": "Exercises 2/3",
    "text": "Exercises 2/3\n\nWhy do you need to use unlist() to convert a list to an atomic vector? Why doesn‚Äôt as.vector() work?\n\n\n\nAnswer(s)\n\nA list is already a vector, though not an atomic one! Note that as.vector() and is.vector() use different definitions of ‚Äúvector!‚Äù\n\nis.vector(as.vector(mtcars))\n#&gt; [1] FALSE"
  },
  {
    "objectID": "slides/03.html#exercises-33-1",
    "href": "slides/03.html#exercises-33-1",
    "title": "Vectors",
    "section": "Exercises 3/3",
    "text": "Exercises 3/3\n\nCompare and contrast c() and unlist() when combining a date and date-time into a single vector.\n\n\n\nAnswer(s)\n\nDate and date-time objects are both built upon doubles. While dates store the number of days since the reference date 1970-01-01 (also known as ‚Äúthe Epoch‚Äù) in days, date-time-objects (POSIXct) store the time difference to this date in seconds.\n\ndate    &lt;- as.Date(\"1970-01-02\")\ndttm_ct &lt;- as.POSIXct(\"1970-01-01 01:00\", tz = \"UTC\")\n\n# Internal representations\nunclass(date)\n#&gt; [1] 1\nunclass(dttm_ct)\n#&gt; [1] 3600\n#&gt; attr(,\"tzone\")\n#&gt; [1] \"UTC\"\n\nAs the c() generic only dispatches on its first argument, combining date and date-time objects via c() could lead to surprising results in older R versions (pre R 4.0.0):\n\n# Output in R version 3.6.2\nc(date, dttm_ct)  # equal to c.Date(date, dttm_ct) \n#&gt; [1] \"1970-01-02\" \"1979-11-10\"\nc(dttm_ct, date)  # equal to c.POSIXct(date, dttm_ct)\n#&gt; [1] \"1970-01-01 02:00:00 CET\" \"1970-01-01 01:00:01 CET\"\n\nIn the first statement above c.Date() is executed, which incorrectly treats the underlying double of dttm_ct (3600) as days instead of seconds. Conversely, when c.POSIXct() is called on a date, one day is counted as one second only.\nWe can highlight these mechanics by the following code:\n\n# Output in R version 3.6.2\nunclass(c(date, dttm_ct))  # internal representation\n#&gt; [1] 1 3600\ndate + 3599\n#&gt; \"1979-11-10\"\n\nAs of R 4.0.0 these issues have been resolved and both methods now convert their input first into POSIXct and Date, respectively.\n\nc(dttm_ct, date)\n#&gt; [1] \"1970-01-01 01:00:00 UTC\" \"1970-01-02 00:00:00 UTC\"\nunclass(c(dttm_ct, date))\n#&gt; [1]  3600 86400\n\nc(date, dttm_ct)\n#&gt; [1] \"1970-01-02\" \"1970-01-01\"\nunclass(c(date, dttm_ct))\n#&gt; [1] 1 0\n\nHowever, as c() strips the time zone (and other attributes) of POSIXct objects, some caution is still recommended.\n\n(dttm_ct &lt;- as.POSIXct(\"1970-01-01 01:00\", tz = \"HST\"))\n#&gt; [1] \"1970-01-01 01:00:00 HST\"\nattributes(c(dttm_ct))\n#&gt; $class\n#&gt; [1] \"POSIXct\" \"POSIXt\"\n\nA package that deals with these kinds of problems in more depth and provides a structural solution for them is the {vctrs} package9 which is also used throughout the tidyverse.10\nLet‚Äôs look at unlist(), which operates on list input.\n\n# Attributes are stripped\nunlist(list(date, dttm_ct))  \n#&gt; [1]     1 39600\n\nWe see again that dates and date-times are internally stored as doubles. Unfortunately, this is all we are left with, when unlist strips the attributes of the list.\nTo summarise: c() coerces types and strips time zones. Errors may have occurred in older R versions because of inappropriate method dispatch/immature methods. unlist() strips attributes."
  },
  {
    "objectID": "slides/03.html#data-frames-and-tibbles",
    "href": "slides/03.html#data-frames-and-tibbles",
    "title": "Vectors",
    "section": "Data frames and tibbles",
    "text": "Data frames and tibbles\n\nCredit: Advanced R by Hadley Wickham"
  },
  {
    "objectID": "slides/03.html#data-frame",
    "href": "slides/03.html#data-frame",
    "title": "Vectors",
    "section": "Data frame",
    "text": "Data frame\nA data frame is a:\n\nNamed list of vectors (i.e., column names)\nAttributes:\n\n(column) names\nrow.names\nClass: ‚Äúdata frame‚Äù"
  },
  {
    "objectID": "slides/03.html#data-frame-examples-12",
    "href": "slides/03.html#data-frame-examples-12",
    "title": "Vectors",
    "section": "Data frame, examples 1/2:",
    "text": "Data frame, examples 1/2:\n\n# Construct\ndf &lt;- data.frame(\n  col1 = c(1, 2, 3),              # named atomic vector\n  col2 = c(\"un\", \"deux\", \"trois\") # another named atomic vector\n  # ,stringsAsFactors = FALSE # default for versions after R 4.1\n)\n# Inspect\ndf\n\n#&gt;   col1  col2\n#&gt; 1    1    un\n#&gt; 2    2  deux\n#&gt; 3    3 trois\n\n# Deconstruct\n# - type\ntypeof(df)\n\n#&gt; [1] \"list\"\n\n# - attributes\nattributes(df)\n\n#&gt; $names\n#&gt; [1] \"col1\" \"col2\"\n#&gt; \n#&gt; $class\n#&gt; [1] \"data.frame\"\n#&gt; \n#&gt; $row.names\n#&gt; [1] 1 2 3"
  },
  {
    "objectID": "slides/03.html#data-frame-examples-22",
    "href": "slides/03.html#data-frame-examples-22",
    "title": "Vectors",
    "section": "Data frame, examples 2/2:",
    "text": "Data frame, examples 2/2:\n\nrownames(df)\n\n#&gt; [1] \"1\" \"2\" \"3\"\n\ncolnames(df)\n\n#&gt; [1] \"col1\" \"col2\"\n\nnames(df) # Same as colnames(df)\n\n#&gt; [1] \"col1\" \"col2\"\n\nnrow(df) \n\n#&gt; [1] 3\n\nncol(df)\n\n#&gt; [1] 2\n\nlength(df) # Same as ncol(df)\n\n#&gt; [1] 2\n\n\nUnlike other lists, the length of each vector must be the same (i.e.¬†as many vector elements as rows in the data frame)."
  },
  {
    "objectID": "slides/03.html#tibble",
    "href": "slides/03.html#tibble",
    "title": "Vectors",
    "section": "Tibble",
    "text": "Tibble\nCreated to relieve some of the frustrations and pain points created by data frames, tibbles are data frames that are:\n\nLazy (do less)\nSurly (complain more)"
  },
  {
    "objectID": "slides/03.html#lazy",
    "href": "slides/03.html#lazy",
    "title": "Vectors",
    "section": "Lazy",
    "text": "Lazy\nTibbles do not:\n\nCoerce strings\nTransform non-syntactic names\nRecycle vectors of length greater than 1"
  },
  {
    "objectID": "slides/03.html#coerce-strings",
    "href": "slides/03.html#coerce-strings",
    "title": "Vectors",
    "section": "! Coerce strings",
    "text": "! Coerce strings\n\nchr_col &lt;- c(\"don't\", \"factor\", \"me\", \"bro\")\n\n# data frame\ndf &lt;- data.frame(\n  a = chr_col,\n  # in R 4.1 and earlier, this was the default\n  stringsAsFactors = TRUE\n)\n\n# tibble\ntbl &lt;- tibble::tibble(\n  a = chr_col\n)\n\n# contrast the structure\nstr(df$a)\n\n#&gt;  Factor w/ 4 levels \"bro\",\"don't\",..: 2 3 4 1\n\nstr(tbl$a)\n\n#&gt;  chr [1:4] \"don't\" \"factor\" \"me\" \"bro\""
  },
  {
    "objectID": "slides/03.html#transform-non-syntactic-names",
    "href": "slides/03.html#transform-non-syntactic-names",
    "title": "Vectors",
    "section": "! Transform non-syntactic names",
    "text": "! Transform non-syntactic names\n\n# data frame\ndf &lt;- data.frame(\n  `1` = c(1, 2, 3)\n)\n\n# tibble\ntbl &lt;- tibble::tibble(\n  `1` = c(1, 2, 3)\n)\n\n# contrast the names\nnames(df)\n\n#&gt; [1] \"X1\"\n\nnames(tbl)\n\n#&gt; [1] \"1\""
  },
  {
    "objectID": "slides/03.html#recycle-vectors-of-length-greater-than-1",
    "href": "slides/03.html#recycle-vectors-of-length-greater-than-1",
    "title": "Vectors",
    "section": "! Recycle vectors of length greater than 1",
    "text": "! Recycle vectors of length greater than 1\n\n# data frame\ndf &lt;- data.frame(\n  col1 = c(1, 2, 3, 4),\n  col2 = c(1, 2)\n)\n\n# tibble\ntbl &lt;- tibble::tibble(\n  col1 = c(1, 2, 3, 4),\n  col2 = c(1, 2)\n)\n\n#&gt; Error in `tibble::tibble()`:\n#&gt; ! Tibble columns must have compatible sizes.\n#&gt; ‚Ä¢ Size 4: Existing data.\n#&gt; ‚Ä¢ Size 2: Column `col2`.\n#&gt; ‚Ñπ Only values of size one are recycled."
  },
  {
    "objectID": "slides/03.html#surly",
    "href": "slides/03.html#surly",
    "title": "Vectors",
    "section": "Surly",
    "text": "Surly\nTibbles do only what they‚Äôre asked and complain if what they‚Äôre asked doesn‚Äôt make sense:\n\nSubsetting always yields a tibble\nComplains if cannot find column"
  },
  {
    "objectID": "slides/03.html#subsetting-always-yields-a-tibble",
    "href": "slides/03.html#subsetting-always-yields-a-tibble",
    "title": "Vectors",
    "section": "Subsetting always yields a tibble",
    "text": "Subsetting always yields a tibble\n\n# data frame\ndf &lt;- data.frame(\n  col1 = c(1, 2, 3, 4)\n)\n\n# tibble\ntbl &lt;- tibble::tibble(\n  col1 = c(1, 2, 3, 4)\n)\n\n# contrast\ndf_col &lt;- df[, \"col1\"]\nstr(df_col)\n\n#&gt;  num [1:4] 1 2 3 4\n\ntbl_col &lt;- tbl[, \"col1\"]\nstr(tbl_col)\n\n#&gt; tibble [4 √ó 1] (S3: tbl_df/tbl/data.frame)\n#&gt;  $ col1: num [1:4] 1 2 3 4\n\n# to select a vector, do one of these instead\ntbl_col_1 &lt;- tbl[[\"col1\"]]\nstr(tbl_col_1)\n\n#&gt;  num [1:4] 1 2 3 4\n\ntbl_col_2 &lt;- dplyr::pull(tbl, col1)\nstr(tbl_col_2)\n\n#&gt;  num [1:4] 1 2 3 4"
  },
  {
    "objectID": "slides/03.html#complains-if-cannot-find-column",
    "href": "slides/03.html#complains-if-cannot-find-column",
    "title": "Vectors",
    "section": "Complains if cannot find column",
    "text": "Complains if cannot find column\n\nnames(df)\n\n#&gt; [1] \"col1\"\n\ndf$col\n\n#&gt; [1] 1 2 3 4\n\nnames(tbl)\n\n#&gt; [1] \"col1\"\n\ntbl$col\n\n#&gt; Warning: Unknown or uninitialised column: `col`.\n\n\n#&gt; NULL"
  },
  {
    "objectID": "slides/03.html#one-more-difference",
    "href": "slides/03.html#one-more-difference",
    "title": "Vectors",
    "section": "One more difference",
    "text": "One more difference\ntibble() allows you to refer to variables created during construction\n\ntibble::tibble(\n  x = 1:3,\n  y = x * 2 # x refers to the line above\n)\n\n#&gt; # A tibble: 3 √ó 2\n#&gt;       x     y\n#&gt;   &lt;int&gt; &lt;dbl&gt;\n#&gt; 1     1     2\n#&gt; 2     2     4\n#&gt; 3     3     6\n\n\n\n\nSide Quest: Row Names\n\n\ncharacter vector containing only unique values\nget and set with rownames()\ncan use them to subset rows\n\n\ndf3 &lt;- data.frame(\n  age = c(35, 27, 18),\n  hair = c(\"blond\", \"brown\", \"black\"),\n  row.names = c(\"Bob\", \"Susan\", \"Sam\")\n)\ndf3\n\n#&gt;       age  hair\n#&gt; Bob    35 blond\n#&gt; Susan  27 brown\n#&gt; Sam    18 black\n\nrownames(df3)\n\n#&gt; [1] \"Bob\"   \"Susan\" \"Sam\"\n\ndf3[\"Bob\", ]\n\n#&gt;     age  hair\n#&gt; Bob  35 blond\n\nrownames(df3) &lt;- c(\"Susan\", \"Bob\", \"Sam\")\nrownames(df3)\n\n#&gt; [1] \"Susan\" \"Bob\"   \"Sam\"\n\ndf3[\"Bob\", ]\n\n#&gt;     age  hair\n#&gt; Bob  27 brown\n\n\nThere are three reasons why row names are undesirable:\n\nMetadata is data, so storing it in a different way to the rest of the data is fundamentally a bad idea.\nRow names are a poor abstraction for labelling rows because they only work when a row can be identified by a single string. This fails in many cases.\nRow names must be unique, so any duplication of rows (e.g.¬†from bootstrapping) will create new row names."
  },
  {
    "objectID": "slides/03.html#tibles-printing",
    "href": "slides/03.html#tibles-printing",
    "title": "Vectors",
    "section": "Tibles: Printing",
    "text": "Tibles: Printing\nData frames and tibbles print differently\n\ndf3\n\n#&gt;       age  hair\n#&gt; Susan  35 blond\n#&gt; Bob    27 brown\n#&gt; Sam    18 black\n\ntibble::as_tibble(df3)\n\n#&gt; # A tibble: 3 √ó 2\n#&gt;     age hair \n#&gt;   &lt;dbl&gt; &lt;chr&gt;\n#&gt; 1    35 blond\n#&gt; 2    27 brown\n#&gt; 3    18 black"
  },
  {
    "objectID": "slides/03.html#tibles-subsetting",
    "href": "slides/03.html#tibles-subsetting",
    "title": "Vectors",
    "section": "Tibles: Subsetting",
    "text": "Tibles: Subsetting\nTwo undesirable subsetting behaviours:\n\nWhen you subset columns with df[, vars], you will get a vector if vars selects one variable, otherwise you‚Äôll get a data frame, unless you always remember to use df[, vars, drop = FALSE].\nWhen you attempt to extract a single column with df$x and there is no column x, a data frame will instead select any variable that starts with x. If no variable starts with x, df$x will return NULL.\n\nTibbles tweak these behaviours so that a [ always returns a tibble, and a $ doesn‚Äôt do partial matching and warns if it can‚Äôt find a variable (this is what makes tibbles surly)."
  },
  {
    "objectID": "slides/03.html#tibles-testing",
    "href": "slides/03.html#tibles-testing",
    "title": "Vectors",
    "section": "Tibles: Testing",
    "text": "Tibles: Testing\nWhether data frame: is.data.frame(). Note: both data frame and tibble are data frames.\nWhether tibble: tibble::is_tibble. Note: only tibbles are tibbles. Vanilla data frames are not."
  },
  {
    "objectID": "slides/03.html#tibles-coercion",
    "href": "slides/03.html#tibles-coercion",
    "title": "Vectors",
    "section": "Tibles: Coercion",
    "text": "Tibles: Coercion\n\nTo data frame: as.data.frame()\nTo tibble: tibble::as_tibble()"
  },
  {
    "objectID": "slides/03.html#tibles-list-columns",
    "href": "slides/03.html#tibles-list-columns",
    "title": "Vectors",
    "section": "Tibles: List Columns",
    "text": "Tibles: List Columns\nList-columns are allowed in data frames but you have to do a little extra work by either adding the list-column after creation or wrapping the list in I()\n\ndf4 &lt;- data.frame(x = 1:3)\ndf4$y &lt;- list(1:2, 1:3, 1:4)\ndf4\n\n#&gt;   x          y\n#&gt; 1 1       1, 2\n#&gt; 2 2    1, 2, 3\n#&gt; 3 3 1, 2, 3, 4\n\ndf5 &lt;- data.frame(\n  x = 1:3, \n  y = I(list(1:2, 1:3, 1:4))\n)\ndf5\n\n#&gt;   x          y\n#&gt; 1 1       1, 2\n#&gt; 2 2    1, 2, 3\n#&gt; 3 3 1, 2, 3, 4"
  },
  {
    "objectID": "slides/03.html#tibbles-matrix-and-data-frame-columns",
    "href": "slides/03.html#tibbles-matrix-and-data-frame-columns",
    "title": "Vectors",
    "section": "Tibbles: Matrix and data frame columns",
    "text": "Tibbles: Matrix and data frame columns\n\nAs long as the number of rows matches the data frame, it‚Äôs also possible to have a matrix or data frame as a column of a data frame.\nsame as list-columns, must either addi the list-column after creation or wrapping the list in I()\n\n\ndfm &lt;- data.frame(\n  x = 1:3 * 10,\n  y = I(matrix(1:9, nrow = 3))\n)\n\ndfm$z &lt;- data.frame(a = 3:1, b = letters[1:3], stringsAsFactors = FALSE)\n\nstr(dfm)\n\n#&gt; 'data.frame':    3 obs. of  3 variables:\n#&gt;  $ x: num  10 20 30\n#&gt;  $ y: 'AsIs' int [1:3, 1:3] 1 2 3 4 5 6 7 8 9\n#&gt;  $ z:'data.frame':   3 obs. of  2 variables:\n#&gt;   ..$ a: int  3 2 1\n#&gt;   ..$ b: chr  \"a\" \"b\" \"c\"\n\ndfm$y\n\n#&gt;      [,1] [,2] [,3]\n#&gt; [1,]    1    4    7\n#&gt; [2,]    2    5    8\n#&gt; [3,]    3    6    9\n\ndfm$z\n\n#&gt;   a b\n#&gt; 1 3 a\n#&gt; 2 2 b\n#&gt; 3 1 c"
  },
  {
    "objectID": "slides/03.html#exercises-14-1",
    "href": "slides/03.html#exercises-14-1",
    "title": "Vectors",
    "section": "Exercises 1/4",
    "text": "Exercises 1/4\n\nCan you have a data frame with zero rows? What about zero columns?\n\n\n\nAnswer(s)\n\nYes, you can create these data frames easily; either during creation or via subsetting. Even both dimensions can be zero. Create a 0-row, 0-column, or an empty data frame directly:\n\ndata.frame(a = integer(), b = logical())\n#&gt; [1] a b\n#&gt; &lt;0 rows&gt; (or 0-length row.names)\n\ndata.frame(row.names = 1:3)  # or data.frame()[1:3, ]\n#&gt; data frame with 0 columns and 3 rows\n\ndata.frame()\n#&gt; data frame with 0 columns and 0 rows\n\nCreate similar data frames via subsetting the respective dimension with either 0, NULL, FALSE or a valid 0-length atomic (logical(0), character(0), integer(0), double(0)). Negative integer sequences would also work. The following example uses a zero:\n\nmtcars[0, ]\n#&gt;  [1] mpg  cyl  disp hp   drat wt   qsec vs   am   gear carb\n#&gt; &lt;0 rows&gt; (or 0-length row.names)\n\nmtcars[ , 0]  # or mtcars[0]\n#&gt; data frame with 0 columns and 32 rows\n\nmtcars[0, 0]\n#&gt; data frame with 0 columns and 0 rows"
  },
  {
    "objectID": "slides/03.html#exercises-24-1",
    "href": "slides/03.html#exercises-24-1",
    "title": "Vectors",
    "section": "Exercises 2/4",
    "text": "Exercises 2/4\n\nWhat happens if you attempt to set rownames that are not unique?\n\n\n\nAnswer(s)\n\nMatrices can have duplicated row names, so this does not cause problems.\nData frames, however, require unique rownames and you get different results depending on how you attempt to set them. If you set them directly or via row.names(), you get an error:\n\ndata.frame(row.names = c(\"x\", \"y\", \"y\"))\n#&gt; Error in data.frame(row.names = c(\"x\", \"y\", \"y\")): duplicate row.names: y\n\ndf &lt;- data.frame(x = 1:3)\nrow.names(df) &lt;- c(\"x\", \"y\", \"y\")\n#&gt; Warning: non-unique value when setting 'row.names': 'y'\n#&gt; Error in `.rowNamesDF&lt;-`(x, value = value): duplicate 'row.names' are not allowed\n\nIf you use subsetting, [ automatically deduplicates:\n\nrow.names(df) &lt;- c(\"x\", \"y\", \"z\")\ndf[c(1, 1, 1), , drop = FALSE]\n#&gt;     x\n#&gt; x   1\n#&gt; x.1 1\n#&gt; x.2 1"
  },
  {
    "objectID": "slides/03.html#exercises-34-1",
    "href": "slides/03.html#exercises-34-1",
    "title": "Vectors",
    "section": "Exercises 3/4",
    "text": "Exercises 3/4\n\nIf df is a data frame, what can you say about t(df), and t(t(df))? Perform some experiments, making sure to try different column types.\n\n\n\nAnswer(s)\n\nBoth of t(df) and t(t(df)) will return matrices:\n\ndf &lt;- data.frame(x = 1:3, y = letters[1:3])\nis.matrix(df)\n#&gt; [1] FALSE\nis.matrix(t(df))\n#&gt; [1] TRUE\nis.matrix(t(t(df)))\n#&gt; [1] TRUE\n\nThe dimensions will respect the typical transposition rules:\n\ndim(df)\n#&gt; [1] 3 2\ndim(t(df))\n#&gt; [1] 2 3\ndim(t(t(df)))\n#&gt; [1] 3 2\n\nBecause the output is a matrix, every column is coerced to the same type. (It is implemented within t.data.frame() via as.matrix() which is described below).\n\ndf\n#&gt;   x y\n#&gt; 1 1 a\n#&gt; 2 2 b\n#&gt; 3 3 c\nt(df)\n#&gt;   [,1] [,2] [,3]\n#&gt; x \"1\"  \"2\"  \"3\" \n#&gt; y \"a\"  \"b\"  \"c\""
  },
  {
    "objectID": "slides/03.html#exercises-44-1",
    "href": "slides/03.html#exercises-44-1",
    "title": "Vectors",
    "section": "Exercises 4/4",
    "text": "Exercises 4/4\n\nWhat does as.matrix() do when applied to a data frame with columns of different types? How does it differ from data.matrix()?\n\n\n\nAnswer(s)\n\nThe type of the result of as.matrix depends on the types of the input columns (see ?as.matrix):\n\nThe method for data frames will return a character matrix if there is only atomic columns and any non-(numeric/logical/complex) column, applying as.vector to factors and format to other non-character columns. Otherwise the usual coercion hierarchy (logical &lt; integer &lt; double &lt; complex) will be used, e.g.¬†all-logical data frames will be coerced to a logical matrix, mixed logical-integer will give an integer matrix, etc.\n\nOn the other hand, data.matrix will always return a numeric matrix (see ?data.matrix()).\n\nReturn the matrix obtained by converting all the variables in a data frame to numeric mode and then binding them together as the columns of a matrix. Factors and ordered factors are replaced by their internal codes. [‚Ä¶] Character columns are first converted to factors and then to integers.\n\nWe can illustrate and compare the mechanics of these functions using a concrete example. as.matrix() makes it possible to retrieve most of the original information from the data frame but leaves us with characters. To retrieve all information from data.matrix()‚Äôs output, we would need a lookup table for each column.\n\ndf_coltypes &lt;- data.frame(\n  a = c(\"a\", \"b\"),\n  b = c(TRUE, FALSE),\n  c = c(1L, 0L),\n  d = c(1.5, 2),\n  e = factor(c(\"f1\", \"f2\"))\n)\n\nas.matrix(df_coltypes)\n#&gt;      a   b       c   d     e   \n#&gt; [1,] \"a\" \"TRUE\"  \"1\" \"1.5\" \"f1\"\n#&gt; [2,] \"b\" \"FALSE\" \"0\" \"2.0\" \"f2\"\ndata.matrix(df_coltypes)\n#&gt;      a b c   d e\n#&gt; [1,] 1 1 1 1.5 1\n#&gt; [2,] 2 0 0 2.0 2"
  },
  {
    "objectID": "slides/03.html#null",
    "href": "slides/03.html#null",
    "title": "Vectors",
    "section": "NULL",
    "text": "NULL\nSpecial type of object that:\n\nLength 0\nCannot have attributes\n\n\ntypeof(NULL)\n#&gt; [1] \"NULL\"\n\nlength(NULL)\n#&gt; [1] 0\n\n\nx &lt;- NULL\nattr(x, \"y\") &lt;- 1\n\n#&gt; Error in attr(x, \"y\") &lt;- 1: attempt to set an attribute on NULL\n\n\n\nis.null(NULL)\n\n#&gt; [1] TRUE"
  },
  {
    "objectID": "slides/03.html#digestif",
    "href": "slides/03.html#digestif",
    "title": "Vectors",
    "section": "Digestif",
    "text": "Digestif\nLet is use some of this chapter‚Äôs skills on the penguins data."
  },
  {
    "objectID": "slides/03.html#attributes-1",
    "href": "slides/03.html#attributes-1",
    "title": "Vectors",
    "section": "Attributes",
    "text": "Attributes\n\nstr(penguins_raw)\n\n#&gt; tibble [344 √ó 17] (S3: tbl_df/tbl/data.frame)\n#&gt;  $ studyName          : chr [1:344] \"PAL0708\" \"PAL0708\" \"PAL0708\" \"PAL0708\" ...\n#&gt;  $ Sample Number      : num [1:344] 1 2 3 4 5 6 7 8 9 10 ...\n#&gt;  $ Species            : chr [1:344] \"Adelie Penguin (Pygoscelis adeliae)\" \"Adelie Penguin (Pygoscelis adeliae)\" \"Adelie Penguin (Pygoscelis adeliae)\" \"Adelie Penguin (Pygoscelis adeliae)\" ...\n#&gt;  $ Region             : chr [1:344] \"Anvers\" \"Anvers\" \"Anvers\" \"Anvers\" ...\n#&gt;  $ Island             : chr [1:344] \"Torgersen\" \"Torgersen\" \"Torgersen\" \"Torgersen\" ...\n#&gt;  $ Stage              : chr [1:344] \"Adult, 1 Egg Stage\" \"Adult, 1 Egg Stage\" \"Adult, 1 Egg Stage\" \"Adult, 1 Egg Stage\" ...\n#&gt;  $ Individual ID      : chr [1:344] \"N1A1\" \"N1A2\" \"N2A1\" \"N2A2\" ...\n#&gt;  $ Clutch Completion  : chr [1:344] \"Yes\" \"Yes\" \"Yes\" \"Yes\" ...\n#&gt;  $ Date Egg           : Date[1:344], format: \"2007-11-11\" \"2007-11-11\" ...\n#&gt;  $ Culmen Length (mm) : num [1:344] 39.1 39.5 40.3 NA 36.7 39.3 38.9 39.2 34.1 42 ...\n#&gt;  $ Culmen Depth (mm)  : num [1:344] 18.7 17.4 18 NA 19.3 20.6 17.8 19.6 18.1 20.2 ...\n#&gt;  $ Flipper Length (mm): num [1:344] 181 186 195 NA 193 190 181 195 193 190 ...\n#&gt;  $ Body Mass (g)      : num [1:344] 3750 3800 3250 NA 3450 ...\n#&gt;  $ Sex                : chr [1:344] \"MALE\" \"FEMALE\" \"FEMALE\" NA ...\n#&gt;  $ Delta 15 N (o/oo)  : num [1:344] NA 8.95 8.37 NA 8.77 ...\n#&gt;  $ Delta 13 C (o/oo)  : num [1:344] NA -24.7 -25.3 NA -25.3 ...\n#&gt;  $ Comments           : chr [1:344] \"Not enough blood for isotopes.\" NA NA \"Adult not sampled.\" ...\n#&gt;  - attr(*, \"spec\")=List of 3\n#&gt;   ..$ cols   :List of 17\n#&gt;   .. ..$ studyName          : list()\n#&gt;   .. .. ..- attr(*, \"class\")= chr [1:2] \"collector_character\" \"collector\"\n#&gt;   .. ..$ Sample Number      : list()\n#&gt;   .. .. ..- attr(*, \"class\")= chr [1:2] \"collector_double\" \"collector\"\n#&gt;   .. ..$ Species            : list()\n#&gt;   .. .. ..- attr(*, \"class\")= chr [1:2] \"collector_character\" \"collector\"\n#&gt;   .. ..$ Region             : list()\n#&gt;   .. .. ..- attr(*, \"class\")= chr [1:2] \"collector_character\" \"collector\"\n#&gt;   .. ..$ Island             : list()\n#&gt;   .. .. ..- attr(*, \"class\")= chr [1:2] \"collector_character\" \"collector\"\n#&gt;   .. ..$ Stage              : list()\n#&gt;   .. .. ..- attr(*, \"class\")= chr [1:2] \"collector_character\" \"collector\"\n#&gt;   .. ..$ Individual ID      : list()\n#&gt;   .. .. ..- attr(*, \"class\")= chr [1:2] \"collector_character\" \"collector\"\n#&gt;   .. ..$ Clutch Completion  : list()\n#&gt;   .. .. ..- attr(*, \"class\")= chr [1:2] \"collector_character\" \"collector\"\n#&gt;   .. ..$ Date Egg           :List of 1\n#&gt;   .. .. ..$ format: chr \"\"\n#&gt;   .. .. ..- attr(*, \"class\")= chr [1:2] \"collector_date\" \"collector\"\n#&gt;   .. ..$ Culmen Length (mm) : list()\n#&gt;   .. .. ..- attr(*, \"class\")= chr [1:2] \"collector_double\" \"collector\"\n#&gt;   .. ..$ Culmen Depth (mm)  : list()\n#&gt;   .. .. ..- attr(*, \"class\")= chr [1:2] \"collector_double\" \"collector\"\n#&gt;   .. ..$ Flipper Length (mm): list()\n#&gt;   .. .. ..- attr(*, \"class\")= chr [1:2] \"collector_double\" \"collector\"\n#&gt;   .. ..$ Body Mass (g)      : list()\n#&gt;   .. .. ..- attr(*, \"class\")= chr [1:2] \"collector_double\" \"collector\"\n#&gt;   .. ..$ Sex                : list()\n#&gt;   .. .. ..- attr(*, \"class\")= chr [1:2] \"collector_character\" \"collector\"\n#&gt;   .. ..$ Delta 15 N (o/oo)  : list()\n#&gt;   .. .. ..- attr(*, \"class\")= chr [1:2] \"collector_double\" \"collector\"\n#&gt;   .. ..$ Delta 13 C (o/oo)  : list()\n#&gt;   .. .. ..- attr(*, \"class\")= chr [1:2] \"collector_double\" \"collector\"\n#&gt;   .. ..$ Comments           : list()\n#&gt;   .. .. ..- attr(*, \"class\")= chr [1:2] \"collector_character\" \"collector\"\n#&gt;   ..$ default: list()\n#&gt;   .. ..- attr(*, \"class\")= chr [1:2] \"collector_guess\" \"collector\"\n#&gt;   ..$ skip   : num 1\n#&gt;   ..- attr(*, \"class\")= chr \"col_spec\"\n\n\n\nstr(penguins_raw, give.attr = FALSE)\n\n#&gt; tibble [344 √ó 17] (S3: tbl_df/tbl/data.frame)\n#&gt;  $ studyName          : chr [1:344] \"PAL0708\" \"PAL0708\" \"PAL0708\" \"PAL0708\" ...\n#&gt;  $ Sample Number      : num [1:344] 1 2 3 4 5 6 7 8 9 10 ...\n#&gt;  $ Species            : chr [1:344] \"Adelie Penguin (Pygoscelis adeliae)\" \"Adelie Penguin (Pygoscelis adeliae)\" \"Adelie Penguin (Pygoscelis adeliae)\" \"Adelie Penguin (Pygoscelis adeliae)\" ...\n#&gt;  $ Region             : chr [1:344] \"Anvers\" \"Anvers\" \"Anvers\" \"Anvers\" ...\n#&gt;  $ Island             : chr [1:344] \"Torgersen\" \"Torgersen\" \"Torgersen\" \"Torgersen\" ...\n#&gt;  $ Stage              : chr [1:344] \"Adult, 1 Egg Stage\" \"Adult, 1 Egg Stage\" \"Adult, 1 Egg Stage\" \"Adult, 1 Egg Stage\" ...\n#&gt;  $ Individual ID      : chr [1:344] \"N1A1\" \"N1A2\" \"N2A1\" \"N2A2\" ...\n#&gt;  $ Clutch Completion  : chr [1:344] \"Yes\" \"Yes\" \"Yes\" \"Yes\" ...\n#&gt;  $ Date Egg           : Date[1:344], format: \"2007-11-11\" \"2007-11-11\" ...\n#&gt;  $ Culmen Length (mm) : num [1:344] 39.1 39.5 40.3 NA 36.7 39.3 38.9 39.2 34.1 42 ...\n#&gt;  $ Culmen Depth (mm)  : num [1:344] 18.7 17.4 18 NA 19.3 20.6 17.8 19.6 18.1 20.2 ...\n#&gt;  $ Flipper Length (mm): num [1:344] 181 186 195 NA 193 190 181 195 193 190 ...\n#&gt;  $ Body Mass (g)      : num [1:344] 3750 3800 3250 NA 3450 ...\n#&gt;  $ Sex                : chr [1:344] \"MALE\" \"FEMALE\" \"FEMALE\" NA ...\n#&gt;  $ Delta 15 N (o/oo)  : num [1:344] NA 8.95 8.37 NA 8.77 ...\n#&gt;  $ Delta 13 C (o/oo)  : num [1:344] NA -24.7 -25.3 NA -25.3 ...\n#&gt;  $ Comments           : chr [1:344] \"Not enough blood for isotopes.\" NA NA \"Adult not sampled.\" ..."
  },
  {
    "objectID": "slides/03.html#data-frames-vs-tibbles",
    "href": "slides/03.html#data-frames-vs-tibbles",
    "title": "Vectors",
    "section": "Data Frames vs Tibbles",
    "text": "Data Frames vs Tibbles\n\npenguins_df &lt;- data.frame(penguins)\npenguins_tb &lt;- penguins #i.e. penguins was already a tibble"
  },
  {
    "objectID": "slides/03.html#printing",
    "href": "slides/03.html#printing",
    "title": "Vectors",
    "section": "Printing",
    "text": "Printing\n\nTip: print out these results in RStudio under different editor themes\n\n\nprint(penguins_df) #don't run this\n\n\nhead(penguins_df)\n\n#&gt;   species    island bill_length_mm bill_depth_mm flipper_length_mm body_mass_g\n#&gt; 1  Adelie Torgersen           39.1          18.7               181        3750\n#&gt; 2  Adelie Torgersen           39.5          17.4               186        3800\n#&gt; 3  Adelie Torgersen           40.3          18.0               195        3250\n#&gt; 4  Adelie Torgersen             NA            NA                NA          NA\n#&gt; 5  Adelie Torgersen           36.7          19.3               193        3450\n#&gt; 6  Adelie Torgersen           39.3          20.6               190        3650\n#&gt;      sex year\n#&gt; 1   male 2007\n#&gt; 2 female 2007\n#&gt; 3 female 2007\n#&gt; 4   &lt;NA&gt; 2007\n#&gt; 5 female 2007\n#&gt; 6   male 2007\n\n\n\npenguins_tb\n\n#&gt; # A tibble: 344 √ó 8\n#&gt;    species island    bill_length_mm bill_depth_mm flipper_length_mm body_mass_g\n#&gt;    &lt;fct&gt;   &lt;fct&gt;              &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;       &lt;int&gt;\n#&gt;  1 Adelie  Torgersen           39.1          18.7               181        3750\n#&gt;  2 Adelie  Torgersen           39.5          17.4               186        3800\n#&gt;  3 Adelie  Torgersen           40.3          18                 195        3250\n#&gt;  4 Adelie  Torgersen           NA            NA                  NA          NA\n#&gt;  5 Adelie  Torgersen           36.7          19.3               193        3450\n#&gt;  6 Adelie  Torgersen           39.3          20.6               190        3650\n#&gt;  7 Adelie  Torgersen           38.9          17.8               181        3625\n#&gt;  8 Adelie  Torgersen           39.2          19.6               195        4675\n#&gt;  9 Adelie  Torgersen           34.1          18.1               193        3475\n#&gt; 10 Adelie  Torgersen           42            20.2               190        4250\n#&gt; # ‚Ñπ 334 more rows\n#&gt; # ‚Ñπ 2 more variables: sex &lt;fct&gt;, year &lt;int&gt;"
  },
  {
    "objectID": "slides/03.html#atomic-vectors",
    "href": "slides/03.html#atomic-vectors",
    "title": "Vectors",
    "section": "Atomic Vectors",
    "text": "Atomic Vectors\n\nspecies_vector_df &lt;- penguins_df |&gt; select(species)\nspecies_unlist_df &lt;- penguins_df |&gt; select(species) |&gt; unlist()\nspecies_pull_df   &lt;- penguins_df |&gt; select(species) |&gt; pull()\n\nspecies_vector_tb &lt;- penguins_tb |&gt; select(species)\nspecies_unlist_tb &lt;- penguins_tb |&gt; select(species) |&gt; unlist()\nspecies_pull_tb   &lt;- penguins_tb |&gt; select(species) |&gt; pull()\n\n\n\ntypeof() and class()\n\n\ntypeof(species_vector_df)\n\n#&gt; [1] \"list\"\n\nclass(species_vector_df)\n\n#&gt; [1] \"data.frame\"\n\ntypeof(species_unlist_df)\n\n#&gt; [1] \"integer\"\n\nclass(species_unlist_df)\n\n#&gt; [1] \"factor\"\n\ntypeof(species_pull_df)\n\n#&gt; [1] \"integer\"\n\nclass(species_pull_df)\n\n#&gt; [1] \"factor\"\n\ntypeof(species_vector_tb)\n\n#&gt; [1] \"list\"\n\nclass(species_vector_tb)\n\n#&gt; [1] \"tbl_df\"     \"tbl\"        \"data.frame\"\n\ntypeof(species_unlist_tb)\n\n#&gt; [1] \"integer\"\n\nclass(species_unlist_tb)\n\n#&gt; [1] \"factor\"\n\ntypeof(species_pull_tb)\n\n#&gt; [1] \"integer\"\n\nclass(species_pull_tb)\n\n#&gt; [1] \"factor\""
  },
  {
    "objectID": "slides/03.html#column-names",
    "href": "slides/03.html#column-names",
    "title": "Vectors",
    "section": "Column Names",
    "text": "Column Names\n\ncolnames(penguins_tb)\n\n#&gt; [1] \"species\"           \"island\"            \"bill_length_mm\"   \n#&gt; [4] \"bill_depth_mm\"     \"flipper_length_mm\" \"body_mass_g\"      \n#&gt; [7] \"sex\"               \"year\"\n\n\n\nnames(penguins_tb) == colnames(penguins_tb)\n\n#&gt; [1] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n\n\n\nnames(penguins_df) == names(penguins_tb)\n\n#&gt; [1] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE"
  },
  {
    "objectID": "slides/03.html#what-if-we-only-invoke-a-partial-name-of-a-column-of-a-tibble",
    "href": "slides/03.html#what-if-we-only-invoke-a-partial-name-of-a-column-of-a-tibble",
    "title": "Vectors",
    "section": "What if we only invoke a partial name of a column of a tibble?",
    "text": "What if we only invoke a partial name of a column of a tibble?\n\npenguins_tb$y \n\n#&gt; NULL\n\n\n\ntibbles are surly!\nWhat if we only invoke a partial name of a column of a data frame?\n\n\nhead(penguins_df$y) #instead of `year`\n\n#&gt; [1] 2007 2007 2007 2007 2007 2007\n\n\n\nIs this evaluation in alphabetical order or column order?\n\n\npenguins_df_se_sp &lt;- penguins_df |&gt; select(sex, species)\npenguins_df_sp_se &lt;- penguins_df |&gt; select(species, sex)\n\n\nhead(penguins_df_se_sp$s)\n\n#&gt; NULL\n\n\n\nhead(penguins_df_sp_se$s)\n\n#&gt; NULL"
  },
  {
    "objectID": "slides/03.html#chapter-quiz-15",
    "href": "slides/03.html#chapter-quiz-15",
    "title": "Vectors",
    "section": "Chapter Quiz 1/5",
    "text": "Chapter Quiz 1/5\n\nWhat are the four common types of atomic vectors? What are the two rare types?\n\n\n\nAnswer(s)\n\nThe four common types of atomic vector are logical, integer, double and character. The two rarer types are complex and raw."
  },
  {
    "objectID": "slides/03.html#chapter-quiz-25",
    "href": "slides/03.html#chapter-quiz-25",
    "title": "Vectors",
    "section": "Chapter Quiz 2/5",
    "text": "Chapter Quiz 2/5\n\nWhat are attributes? How do you get them and set them?\n\n\n\nAnswer(s)\n\nAttributes allow you to associate arbitrary additional metadata to any object. You can get and set individual attributes with attr(x, \"y\") and attr(x, \"y\") &lt;- value; or you can get and set all attributes at once with attributes()."
  },
  {
    "objectID": "slides/03.html#chapter-quiz-35",
    "href": "slides/03.html#chapter-quiz-35",
    "title": "Vectors",
    "section": "Chapter Quiz 3/5",
    "text": "Chapter Quiz 3/5\n\nHow is a list different from an atomic vector? How is a matrix different from a data frame?\n\n\n\nAnswer(s)\n\nThe elements of a list can be any type (even a list); the elements of an atomic vector are all of the same type. Similarly, every element of a matrix must be the same type; in a data frame, different columns can have different types."
  },
  {
    "objectID": "slides/03.html#chapter-quiz-45",
    "href": "slides/03.html#chapter-quiz-45",
    "title": "Vectors",
    "section": "Chapter Quiz 4/5",
    "text": "Chapter Quiz 4/5\n\nCan you have a list that is a matrix? Can a data frame have a column that is a matrix?\n\n\n\nAnswer(s)\n\nYou can make a list-array by assigning dimensions to a list. You can make a matrix a column of a data frame with df$x &lt;- matrix(), or by using I() when creating a new data frame data.frame(x = I(matrix()))."
  },
  {
    "objectID": "slides/03.html#chapter-quiz-55",
    "href": "slides/03.html#chapter-quiz-55",
    "title": "Vectors",
    "section": "Chapter Quiz 5/5",
    "text": "Chapter Quiz 5/5\n\nHow do tibbles behave differently from data frames?\n\n\n\nAnswer(s)\n\nTibbles have an enhanced print method, never coerce strings to factors, and provide stricter subsetting methods."
  },
  {
    "objectID": "slides/01.html#los-for-the-entire-book",
    "href": "slides/01.html#los-for-the-entire-book",
    "title": "Introduction",
    "section": "LOs for the entire book",
    "text": "LOs for the entire book\n\nImprove programming skills.\nDevelop a deep understanding of R language fundamentals.\nUnderstand what functional programming means.\nUnderstand object-oriented programming as applied in R.\nUnderstand metaprogramming while developing in R.\nBe able to identify what to optimize and how to optimize it."
  },
  {
    "objectID": "slides/01.html#los-for-this-chapter",
    "href": "slides/01.html#los-for-this-chapter",
    "title": "Introduction",
    "section": "LOs for this chapter",
    "text": "LOs for this chapter\n\nRecognize the differences between the 1st and 2nd edition of this book.\nDescribe the overall structure of the book.\nDecide whether this book is right for you."
  },
  {
    "objectID": "slides/01.html#hadleys-goals",
    "href": "slides/01.html#hadleys-goals",
    "title": "Introduction",
    "section": "Hadley‚Äôs goals",
    "text": "Hadley‚Äôs goals\n\nImprove coverage of concepts Hadley understood better after 1e\nReduce coverage of unimportant topics\nEasier to understand (including many more diagrams)"
  },
  {
    "objectID": "slides/01.html#base-vs-rlang",
    "href": "slides/01.html#base-vs-rlang",
    "title": "Introduction",
    "section": "Base vs rlang",
    "text": "Base vs rlang\n\n1e used base R almost exclusively\n2e uses {rlang}, {purrr}, etc"
  },
  {
    "objectID": "slides/01.html#the-5-sections",
    "href": "slides/01.html#the-5-sections",
    "title": "Introduction",
    "section": "The 5 sections",
    "text": "The 5 sections\n\nFoundations: (7 chapters) Building blocks of R\nFunctional programming: (3 chapters) Treating functions as objects (that can be args in functions)\nObject-oriented programming: (5 chapters + 1) The many object systems of R (we‚Äôll add S7)\nMetaprogramming: (5 chapters) Generating code with code\nTechniques: (4 chapters) Debugging, measuring performance, improving performance\n\n\n\nMight be useful to open TOC here."
  },
  {
    "objectID": "slides/01.html#why-r",
    "href": "slides/01.html#why-r",
    "title": "Introduction",
    "section": "Why R?",
    "text": "Why R?\n\nDiverse & welcoming community\nMany packages for stats & modeling, ML, dataviz, data wrangling\nRmarkdown / Quarto\nRStudio / Positron\nOften used in science\nFunctional programming powerful for data\nMetaprogramming\nEase of connection to C, C++, etc"
  },
  {
    "objectID": "slides/01.html#r-imperfections",
    "href": "slides/01.html#r-imperfections",
    "title": "Introduction",
    "section": "R imperfections",
    "text": "R imperfections\n\nMuch code by non-coders (messy)\nCommunity more about results than programming best practices\nMetaprogramming can lead to weird failures\nInconsistency from &gt; 30 years of evolution\nPoorly written R code runs very poorly"
  },
  {
    "objectID": "slides/01.html#who-should-read-advanced-r",
    "href": "slides/01.html#who-should-read-advanced-r",
    "title": "Introduction",
    "section": "Who should read Advanced R?",
    "text": "Who should read Advanced R?\n\nIntermediate (and up) R programmers who want to really understand R\nProgrammers from other langs who want to know why R is weird\nPrereqs:\n\nYou‚Äôve written lots of code\nYou understand basics of data analysis\nYou can install CRAN packages"
  },
  {
    "objectID": "slides/01.html#what-this-book-is-not",
    "href": "slides/01.html#what-this-book-is-not",
    "title": "Introduction",
    "section": "What this book is not",
    "text": "What this book is not\n\nR for Data Science\nR Packages"
  },
  {
    "objectID": "slides/01.html#meta-techniques",
    "href": "slides/01.html#meta-techniques",
    "title": "Introduction",
    "section": "Meta-techniques",
    "text": "Meta-techniques\n\nRead source code\n\nF2 to see code in RStudio/Positron (with RStudio bindings)\n\nAdopt a scientific mindset\n\nDon‚Äôt understand something? Hypothesize & experiment"
  },
  {
    "objectID": "slides/01.html#other-books",
    "href": "slides/01.html#other-books",
    "title": "Introduction",
    "section": "Other books",
    "text": "Other books\n\nThe Structure and Interpretation of Computer Programs (Abelson, Sussman, and Sussman, 1996) PDF\nConcepts, Techniques and Models of Computer Programming (Van Roy & Haridi, 2003) PDF\nThe Pragmatic Programmer (Hunt & Thomas, 1990) buy eBook\n\n\n\nAs far as I can tell, first 2 PDFs are legal.\nI don‚Äôt think a legal, free version of The Pragmatic Programmer is available."
  },
  {
    "objectID": "slides/00.html#book-club-meetings",
    "href": "slides/00.html#book-club-meetings",
    "title": "Club meetings",
    "section": "Book club meetings",
    "text": "Book club meetings\n\nVolunteer leads discussion of a chapter\n\nThis is the best way to learn the material.\n\nPresentations:\n\nReview of material\nQuestions you have\nMaybe live demo\n\nMore info about editing: this github repo\nIdeally convert existing Rmd to qmd as we go\nRecorded, available on the Data Science Learning Community YouTube Channel (DSLC.video)",
    "crumbs": [
      "Club meetings"
    ]
  },
  {
    "objectID": "slides/00.html#pace",
    "href": "slides/00.html#pace",
    "title": "Club meetings",
    "section": "Pace",
    "text": "Pace\n\nGoal: 1 chapter/week\nOk to split overwhelming chapters\nOk to combine short chapters\nMeet every week except holidays, etc\n\nWe will meet even if scheduled presenter unavailable\nPush to finish before Daylight Savings Madness March 8",
    "crumbs": [
      "Club meetings"
    ]
  },
  {
    "objectID": "slides/00.html#learning-objectives-los",
    "href": "slides/00.html#learning-objectives-los",
    "title": "Club meetings",
    "section": "Learning objectives (LOs)",
    "text": "Learning objectives (LOs)\n\nStudents who study with LOs in mind retain more\nTips:\n\nThink ‚ÄúAfter today‚Äôs session, you will be able to {LO}‚Äù\nVery roughly 1 per heading",
    "crumbs": [
      "Club meetings"
    ]
  },
  {
    "objectID": "slides/00.html#group-introductions",
    "href": "slides/00.html#group-introductions",
    "title": "Club meetings",
    "section": "Group introductions",
    "text": "Group introductions\n\nIf you feel comfortable sharing:\n\nWho are you?\nWhere you calling in from? (If you‚Äôre not comfortable sharing, skip)\nHow long have you been using R?\nWhat was your introduction to R?\nWhat are you most looking forward to during the club?",
    "crumbs": [
      "Club meetings"
    ]
  },
  {
    "objectID": "slides/02.html#learning-objectives",
    "href": "slides/02.html#learning-objectives",
    "title": "Names and values",
    "section": "Learning objectives",
    "text": "Learning objectives\n\nDistinguish between an object and its name.\nIdentify when data are copied versus modified.\nTrace and identify the memory used by R.\n\nThe {lobstr} package will help us throughout the chapter\n\nlibrary(lobstr)"
  },
  {
    "objectID": "slides/02.html#syntactic-names-are-easier-to-create-and-work-with-than-non-syntactic-names",
    "href": "slides/02.html#syntactic-names-are-easier-to-create-and-work-with-than-non-syntactic-names",
    "title": "Names and values",
    "section": "Syntactic names are easier to create and work with than non-syntactic names",
    "text": "Syntactic names are easier to create and work with than non-syntactic names\n\nSyntactic names: my_variable, x, cpp11, .by.\n\nCan‚Äôt use names in ?Reserved\n\nNon-syntactic names need to be surrounded in backticks."
  },
  {
    "objectID": "slides/02.html#names-are-bound-to-values-with--",
    "href": "slides/02.html#names-are-bound-to-values-with--",
    "title": "Names and values",
    "section": "Names are bound to values with <-",
    "text": "Names are bound to values with &lt;-\n\na &lt;- c(1, 2, 3)\na\n\n#&gt; [1] 1 2 3\n\nobj_addr(a)\n\n#&gt; [1] \"0x1624dfae968\""
  },
  {
    "objectID": "slides/02.html#many-names-can-be-bound-to-the-same-values",
    "href": "slides/02.html#many-names-can-be-bound-to-the-same-values",
    "title": "Names and values",
    "section": "Many names can be bound to the same values",
    "text": "Many names can be bound to the same values\n\nb &lt;- a\nobj_addr(a)\n\n#&gt; [1] \"0x1624dfae968\"\n\nobj_addr(b)\n\n#&gt; [1] \"0x1624dfae968\""
  },
  {
    "objectID": "slides/02.html#if-shared-values-are-modified-the-object-is-copied-to-a-new-address",
    "href": "slides/02.html#if-shared-values-are-modified-the-object-is-copied-to-a-new-address",
    "title": "Names and values",
    "section": "If shared values are modified, the object is copied to a new address",
    "text": "If shared values are modified, the object is copied to a new address\n\nb[[1]] &lt;- 5\nobj_addr(a)\n\n#&gt; [1] \"0x1624dfae968\"\n\nobj_addr(b)\n\n#&gt; [1] \"0x16249d8f228\""
  },
  {
    "objectID": "slides/02.html#memory-addresses-can-differ-even-if-objects-seem-the-same",
    "href": "slides/02.html#memory-addresses-can-differ-even-if-objects-seem-the-same",
    "title": "Names and values",
    "section": "Memory addresses can differ even if objects seem the same",
    "text": "Memory addresses can differ even if objects seem the same\n\na &lt;- 1:10\nb &lt;- a\nc &lt;- 1:10\n\nobj_addr(a)\n\n#&gt; [1] \"0x1624bd3f5e8\"\n\nobj_addr(b)\n\n#&gt; [1] \"0x1624bd3f5e8\"\n\nobj_addr(c)\n\n#&gt; [1] \"0x1624bd7a540\""
  },
  {
    "objectID": "slides/02.html#functions-have-a-single-address-regardless-of-how-theyre-referenced",
    "href": "slides/02.html#functions-have-a-single-address-regardless-of-how-theyre-referenced",
    "title": "Names and values",
    "section": "Functions have a single address regardless of how they‚Äôre referenced",
    "text": "Functions have a single address regardless of how they‚Äôre referenced\n\nobj_addr(mean)\n\n#&gt; [1] \"0x162498c1738\"\n\nobj_addr(base::mean)\n\n#&gt; [1] \"0x162498c1738\"\n\nobj_addr(get(\"mean\"))\n\n#&gt; [1] \"0x162498c1738\""
  },
  {
    "objectID": "slides/02.html#unlike-most-objects-environments-keep-the-same-memory-address-on-modify",
    "href": "slides/02.html#unlike-most-objects-environments-keep-the-same-memory-address-on-modify",
    "title": "Names and values",
    "section": "Unlike most objects, environments keep the same memory address on modify",
    "text": "Unlike most objects, environments keep the same memory address on modify\n\nd &lt;- new.env()\nobj_addr(d)\n\n#&gt; [1] \"0x1624d749900\"\n\ne &lt;- d\ne[['a']] &lt;- 1\nobj_addr(e)\n\n#&gt; [1] \"0x1624d749900\"\n\nobj_addr(d)\n\n#&gt; [1] \"0x1624d749900\"\n\nd[['a']]\n\n#&gt; [1] 1"
  },
  {
    "objectID": "slides/02.html#use-tracemem-to-validate-if-values-are-copied-or-modified",
    "href": "slides/02.html#use-tracemem-to-validate-if-values-are-copied-or-modified",
    "title": "Names and values",
    "section": "Use tracemem to validate if values are copied or modified",
    "text": "Use tracemem to validate if values are copied or modified\n\nx &lt;- runif(10)\ntracemem(x)\n#&gt; [1] \"&lt;000001F4185B4B08&gt;\"\ny &lt;- x\nx[[1]] &lt;- 10\n#&gt; tracemem[0x000001f4185b4b08 -&gt; 0x000001f4185b4218]:\nuntracemem(x)"
  },
  {
    "objectID": "slides/02.html#tracemem-shows-internal-c-code-minimizes-copying",
    "href": "slides/02.html#tracemem-shows-internal-c-code-minimizes-copying",
    "title": "Names and values",
    "section": "tracemem shows internal C code minimizes copying",
    "text": "tracemem shows internal C code minimizes copying\n\ny &lt;- as.list(x)\ntracemem(y)\n#&gt; [1] \"&lt;000001AD67FDCD38&gt;\"\nmedians &lt;- vapply(x, median, numeric(1))\nfor (i in 1:5) {\n  y[[i]] &lt;- y[[i]] - medians[[i]]\n}\n#&gt; tracemem[0x000001ad67fdcd38 -&gt; 0x000001ad61982638]:\nuntracemem(y)"
  },
  {
    "objectID": "slides/02.html#a-functions-environment-follows-copy-on-modify-rules",
    "href": "slides/02.html#a-functions-environment-follows-copy-on-modify-rules",
    "title": "Names and values",
    "section": "A function‚Äôs environment follows copy-on-modify rules",
    "text": "A function‚Äôs environment follows copy-on-modify rules\n\n\n\nf &lt;- function(a) {\n  a\n}\n\nx &lt;- c(1, 2, 3)\nz &lt;- f(x) # No change in value\n\nobj_addr(x)\n\n#&gt; [1] \"0x1624dda26e8\"\n\nobj_addr(z) # No address change \n\n#&gt; [1] \"0x1624dda26e8\"\n\n\n\n\n\n\n\nDiagrams will be explained more in chapter 7.\na points to same address as x.\nIf a modified inside function, z would have new address."
  },
  {
    "objectID": "slides/02.html#ref-shows-the-memory-address-of-a-list-and-its-elements",
    "href": "slides/02.html#ref-shows-the-memory-address-of-a-list-and-its-elements",
    "title": "Names and values",
    "section": "ref() shows the memory address of a list and its elements",
    "text": "ref() shows the memory address of a list and its elements\n\n\n\nl1 &lt;- list(1, 2, 3)\nobj_addr(l1)\n\n#&gt; [1] \"0x1624e315d68\"\n\nl2 &lt;- l1\nl2[[3]] &lt;- 4\nref(l1, l2)\n\n#&gt; ‚ñà [1:0x1624e315d68] &lt;list&gt; \n#&gt; ‚îú‚îÄ[2:0x1624e77ebd0] &lt;dbl&gt; \n#&gt; ‚îú‚îÄ[3:0x1624e77ea10] &lt;dbl&gt; \n#&gt; ‚îî‚îÄ[4:0x1624e77e850] &lt;dbl&gt; \n#&gt;  \n#&gt; ‚ñà [5:0x1624e34ed18] &lt;list&gt; \n#&gt; ‚îú‚îÄ[2:0x1624e77ebd0] \n#&gt; ‚îú‚îÄ[3:0x1624e77ea10] \n#&gt; ‚îî‚îÄ[6:0x1624e754e70] &lt;dbl&gt;"
  },
  {
    "objectID": "slides/02.html#since-dataframes-are-lists-of-column-vectors-mutating-a-column-modifies-only-that-column",
    "href": "slides/02.html#since-dataframes-are-lists-of-column-vectors-mutating-a-column-modifies-only-that-column",
    "title": "Names and values",
    "section": "Since dataframes are lists of (column) vectors, mutating a column modifies only that column",
    "text": "Since dataframes are lists of (column) vectors, mutating a column modifies only that column\n\nd1 &lt;- data.frame(x = c(1, 5, 6), y = c(2, 4, 3))\nd2 &lt;- d1\nd2[, 2] &lt;- d2[, 2] * 2\nref(d1, d2)\n\n#&gt; ‚ñà [1:0x1624ec8d348] &lt;df[,2]&gt; \n#&gt; ‚îú‚îÄx = [2:0x1624f230148] &lt;dbl&gt; \n#&gt; ‚îî‚îÄy = [3:0x1624f2300f8] &lt;dbl&gt; \n#&gt;  \n#&gt; ‚ñà [4:0x1624ee2aec8] &lt;df[,2]&gt; \n#&gt; ‚îú‚îÄx = [2:0x1624f230148] \n#&gt; ‚îî‚îÄy = [5:0x1624f7aab98] &lt;dbl&gt;"
  },
  {
    "objectID": "slides/02.html#since-dataframes-are-lists-of-column-vectors-mutating-a-row-modifies-the-value",
    "href": "slides/02.html#since-dataframes-are-lists-of-column-vectors-mutating-a-row-modifies-the-value",
    "title": "Names and values",
    "section": "Since dataframes are lists of (column) vectors, mutating a row modifies the value",
    "text": "Since dataframes are lists of (column) vectors, mutating a row modifies the value\n\nd1 &lt;- data.frame(x = c(1, 5, 6), y = c(2, 4, 3))\nd2 &lt;- d1\nd2[1, ] &lt;- d2[1, ] * 2\nref(d1, d2)\n\n#&gt; ‚ñà [1:0x1624f91a508] &lt;df[,2]&gt; \n#&gt; ‚îú‚îÄx = [2:0x16250095318] &lt;dbl&gt; \n#&gt; ‚îî‚îÄy = [3:0x162500952c8] &lt;dbl&gt; \n#&gt;  \n#&gt; ‚ñà [4:0x1624fb324c8] &lt;df[,2]&gt; \n#&gt; ‚îú‚îÄx = [5:0x162501700e8] &lt;dbl&gt; \n#&gt; ‚îî‚îÄy = [6:0x16250170098] &lt;dbl&gt;\n\n\n\n\nHere ‚Äúmutate‚Äù means ‚Äúchange‚Äù, not dplyr::mutate()"
  },
  {
    "objectID": "slides/02.html#characters-are-unique-due-to-the-global-string-pool",
    "href": "slides/02.html#characters-are-unique-due-to-the-global-string-pool",
    "title": "Names and values",
    "section": "Characters are unique due to the global string pool",
    "text": "Characters are unique due to the global string pool\n\n\n\nx &lt;- 1:4\nref(x)\n\n#&gt; [1:0x1624ff60cb0] &lt;int&gt;\n\ny &lt;- 1:4\nref(y)\n\n#&gt; [1:0x162500b4318] &lt;int&gt;\n\nx &lt;- c(\"a\", \"a\", \"b\")\nref(x, character = TRUE)\n\n#&gt; ‚ñà [1:0x1625089a188] &lt;chr&gt; \n#&gt; ‚îú‚îÄ[2:0x16241da3118] &lt;string: \"a\"&gt; \n#&gt; ‚îú‚îÄ[2:0x16241da3118] \n#&gt; ‚îî‚îÄ[3:0x1624818b3b8] &lt;string: \"b\"&gt;\n\ny &lt;- c(\"a\")\nref(y, character = TRUE)\n\n#&gt; ‚ñà [1:0x16250892930] &lt;chr&gt; \n#&gt; ‚îî‚îÄ[2:0x16241da3118] &lt;string: \"a\"&gt;\n\n\n\n\n\n\n\n‚Äúa‚Äù is always at the same address.\nEach member of character vector has its own address (kind of list-like)."
  },
  {
    "objectID": "slides/02.html#memory-amount-can-also-be-measured-using-lobstrobj_size",
    "href": "slides/02.html#memory-amount-can-also-be-measured-using-lobstrobj_size",
    "title": "Names and values",
    "section": "Memory amount can also be measured, using lobstr::obj_size",
    "text": "Memory amount can also be measured, using lobstr::obj_size\n\nbanana &lt;- \"bananas bananas bananas\"\nobj_addr(banana)\n\n#&gt; [1] \"0x1624bb90318\"\n\nobj_size(banana)\n\n#&gt; 136 B"
  },
  {
    "objectID": "slides/02.html#alternative-representation-or-altreps-represent-vector-values-efficiently",
    "href": "slides/02.html#alternative-representation-or-altreps-represent-vector-values-efficiently",
    "title": "Names and values",
    "section": "Alternative Representation or ALTREPs represent vector values efficiently",
    "text": "Alternative Representation or ALTREPs represent vector values efficiently\n\nx &lt;- 1:10\nobj_size(x)\n\n#&gt; 680 B\n\ny &lt;- 1:10000\nobj_size(y)\n\n#&gt; 680 B"
  },
  {
    "objectID": "slides/02.html#we-can-measure-memory-speed-using-benchmark",
    "href": "slides/02.html#we-can-measure-memory-speed-using-benchmark",
    "title": "Names and values",
    "section": "We can measure memory & speed using bench::mark()",
    "text": "We can measure memory & speed using bench::mark()\n\nmed &lt;- function(d, medians) {\n  for (i in seq_along(medians)) {\n    d[[i]] &lt;- d[[i]] - medians[[i]]\n  }\n}\nx &lt;- data.frame(matrix(runif(5 * 1e4), ncol = 5))\nmedians &lt;- vapply(x, median, numeric(1))\ny &lt;- as.list(x)\n\nbench::mark(\n  \"data.frame\" = med(x, medians),\n  \"list\" = med(y, medians)\n)[, c(\"min\", \"median\", \"mem_alloc\")]\n\n#&gt; # A tibble: 2 √ó 3\n#&gt;        min   median mem_alloc\n#&gt;   &lt;bch:tm&gt; &lt;bch:tm&gt; &lt;bch:byt&gt;\n#&gt; 1   52.7¬µs   71.2¬µs     491KB\n#&gt; 2   16.8¬µs   35.1¬µs     391KB\n\n\n\n\nThe thing to see: list version uses less RAM and is faster"
  },
  {
    "objectID": "slides/02.html#the-garbage-collector-gc-explicitly-clears-out-unbound-objects",
    "href": "slides/02.html#the-garbage-collector-gc-explicitly-clears-out-unbound-objects",
    "title": "Names and values",
    "section": "The garbage collector gc() explicitly clears out unbound objects",
    "text": "The garbage collector gc() explicitly clears out unbound objects\n\nx &lt;- 1:3\nx &lt;- 2:4 # \"1:3\" is orphaned\nrm(x) # \"2:4\" is orphaned\ngc()\n\n#&gt;           used (Mb) gc trigger (Mb) max used (Mb)\n#&gt; Ncells  791094 42.3    1505455 80.4  1505455 80.4\n#&gt; Vcells 1497588 11.5    8388608 64.0  8388528 64.0\n\nlobstr::mem_used() # Wrapper around gc()\n\n#&gt; 56.29 MB\n\n\n\n\n\nmem_used() multiplies Ncells ‚Äúused‚Äù by either 28 (32-bit architecture) or 56 (64-bit architecture)., and Vcells ‚Äúused‚Äù by 8, adds them, and converts to Mb.\n\n\n\n\n\ngc() runs automatically, never need to call"
  },
  {
    "objectID": "slides/04.html#learning-objectives",
    "href": "slides/04.html#learning-objectives",
    "title": "Subsetting",
    "section": "Learning objectives",
    "text": "Learning objectives\n\nSelect multiple elements from a vector with [\nSelect single elements from a vector with [[ and $\nAssign to subsets of vectors\nUse subsetting to expand data"
  },
  {
    "objectID": "slides/04.html#positive-integers-return-elements-at-specified-positions",
    "href": "slides/04.html#positive-integers-return-elements-at-specified-positions",
    "title": "Subsetting",
    "section": "1. Positive integers return elements at specified positions",
    "text": "1. Positive integers return elements at specified positions\n\nx &lt;- c(1.1, 2.2, 3.3, 4.4) # decimal = original position\nx\n\n#&gt; [1] 1.1 2.2 3.3 4.4\n\nx[c(4, 1)]\n\n#&gt; [1] 4.4 1.1\n\nx[c(1, 1, 1)]\n\n#&gt; [1] 1.1 1.1 1.1\n\nx[c(1.9999)]\n\n#&gt; [1] 1.1\n\n\nReals truncate to integers.\n\nx[c(1.0001, 1.9999)]\n\n#&gt; [1] 1.1 1.1"
  },
  {
    "objectID": "slides/04.html#negative-integers-remove-specified-elements",
    "href": "slides/04.html#negative-integers-remove-specified-elements",
    "title": "Subsetting",
    "section": "2. Negative integers remove specified elements",
    "text": "2. Negative integers remove specified elements\n\nx[-c(1, 3)] # same as x[c(-1, -3)] or x[c(2, 4)]\n\n#&gt; [1] 2.2 4.4"
  },
  {
    "objectID": "slides/04.html#b.-mixing-negative-and-positive-integers-throws-an-error",
    "href": "slides/04.html#b.-mixing-negative-and-positive-integers-throws-an-error",
    "title": "Subsetting",
    "section": "2b. Mixing negative and positive integers throws an error",
    "text": "2b. Mixing negative and positive integers throws an error\n\nx[c(-1, 3)]\n\n#&gt; Error in x[c(-1, 3)]: only 0's may be mixed with negative subscripts"
  },
  {
    "objectID": "slides/04.html#c.-zeros-ignored-with-other-ints",
    "href": "slides/04.html#c.-zeros-ignored-with-other-ints",
    "title": "Subsetting",
    "section": "2c. Zeros ignored with other ints",
    "text": "2c. Zeros ignored with other ints\n\nx[c(-1, 0)]\n\n#&gt; [1] 2.2 3.3 4.4\n\nx[c(-1, 0, 0, 0, 0, 0 ,0 ,0)]\n\n#&gt; [1] 2.2 3.3 4.4\n\nx[c(1, 0, 2, 0, 3, 0)]\n\n#&gt; [1] 1.1 2.2 3.3"
  },
  {
    "objectID": "slides/04.html#logical-vectors-select-specified-elements",
    "href": "slides/04.html#logical-vectors-select-specified-elements",
    "title": "Subsetting",
    "section": "3. Logical vectors select specified elements",
    "text": "3. Logical vectors select specified elements\n\nx[c(TRUE, TRUE, FALSE, TRUE)]\n\n#&gt; [1] 1.1 2.2 4.4\n\nx[x &lt; 3]\n\n#&gt; [1] 1.1 2.2\n\ncond &lt;- x &gt; 2.5\nx[cond]\n\n#&gt; [1] 3.3 4.4"
  },
  {
    "objectID": "slides/04.html#b.-shorter-element-are-recycled-to-higher-length",
    "href": "slides/04.html#b.-shorter-element-are-recycled-to-higher-length",
    "title": "Subsetting",
    "section": "3b. Shorter element are recycled to higher length",
    "text": "3b. Shorter element are recycled to higher length\n\nx[FALSE]\n\n#&gt; numeric(0)\n\nx[TRUE]\n\n#&gt; [1] 1.1 2.2 3.3 4.4\n\nx[c(FALSE, TRUE)] # equivalent to: x[c(FALSE, TRUE, FALSE, TRUE)]\n\n#&gt; [1] 2.2 4.4\n\n\n\nEasy to understand if x or y is 1, best to avoid other lengths"
  },
  {
    "objectID": "slides/04.html#c.-na-index-returns-na",
    "href": "slides/04.html#c.-na-index-returns-na",
    "title": "Subsetting",
    "section": "3c. NA index returns NA",
    "text": "3c. NA index returns NA\n\nx[c(NA, TRUE, NA, TRUE)]\n\n#&gt; [1]  NA 2.2  NA 4.4"
  },
  {
    "objectID": "slides/04.html#d.-extra-true-index-returns-na",
    "href": "slides/04.html#d.-extra-true-index-returns-na",
    "title": "Subsetting",
    "section": "3d. Extra TRUE index returns NA",
    "text": "3d. Extra TRUE index returns NA\n\nx[c(FALSE, TRUE, TRUE, TRUE, TRUE, TRUE)]\n\n#&gt; [1] 2.2 3.3 4.4  NA  NA\n\nx[1:5]\n\n#&gt; [1] 1.1 2.2 3.3 4.4  NA"
  },
  {
    "objectID": "slides/04.html#indexing-with-nothing-returns-original-vector",
    "href": "slides/04.html#indexing-with-nothing-returns-original-vector",
    "title": "Subsetting",
    "section": "4. Indexing with nothing returns original vector",
    "text": "4. Indexing with nothing returns original vector\n\nx[]\n\n#&gt; [1] 1.1 2.2 3.3 4.4"
  },
  {
    "objectID": "slides/04.html#indexing-with-just-0-returns-0-length-vector-with-class",
    "href": "slides/04.html#indexing-with-just-0-returns-0-length-vector-with-class",
    "title": "Subsetting",
    "section": "5. Indexing with just 0 returns 0-length vector (with class)",
    "text": "5. Indexing with just 0 returns 0-length vector (with class)\n\nx[0]\n\n#&gt; numeric(0)\n\nletters[0]\n\n#&gt; character(0)"
  },
  {
    "objectID": "slides/04.html#indexing-with-character-vector-returns-element-of-named-vector",
    "href": "slides/04.html#indexing-with-character-vector-returns-element-of-named-vector",
    "title": "Subsetting",
    "section": "6. Indexing with character vector returns element of named vector",
    "text": "6. Indexing with character vector returns element of named vector\n\n(y &lt;- setNames(x, letters[1:4]))\n\n#&gt;   a   b   c   d \n#&gt; 1.1 2.2 3.3 4.4\n\ny[c(\"d\", \"b\", \"a\")]\n\n#&gt;   d   b   a \n#&gt; 4.4 2.2 1.1\n\ny[c(\"a\", \"a\", \"a\")]\n\n#&gt;   a   a   a \n#&gt; 1.1 1.1 1.1"
  },
  {
    "objectID": "slides/04.html#b.-names-must-be-exact-for",
    "href": "slides/04.html#b.-names-must-be-exact-for",
    "title": "Subsetting",
    "section": "6b. Names must be exact for [",
    "text": "6b. Names must be exact for [\n\nz &lt;- c(abc = 1, def = 2)\nz\n\n#&gt; abc def \n#&gt;   1   2\n\nz[c(\"a\", \"d\")]\n\n#&gt; &lt;NA&gt; &lt;NA&gt; \n#&gt;   NA   NA"
  },
  {
    "objectID": "slides/04.html#subsetting-a-list-with-returns-a-list",
    "href": "slides/04.html#subsetting-a-list-with-returns-a-list",
    "title": "Subsetting",
    "section": "Subsetting a list with [ returns a list",
    "text": "Subsetting a list with [ returns a list\n\nmy_list &lt;- list(a = c(T, F), b = letters[5:15], c = 100:108)\nmy_list\n\n#&gt; $a\n#&gt; [1]  TRUE FALSE\n#&gt; \n#&gt; $b\n#&gt;  [1] \"e\" \"f\" \"g\" \"h\" \"i\" \"j\" \"k\" \"l\" \"m\" \"n\" \"o\"\n#&gt; \n#&gt; $c\n#&gt; [1] 100 101 102 103 104 105 106 107 108\n\nmy_list[c(\"a\", \"b\")]\n\n#&gt; $a\n#&gt; [1]  TRUE FALSE\n#&gt; \n#&gt; $b\n#&gt;  [1] \"e\" \"f\" \"g\" \"h\" \"i\" \"j\" \"k\" \"l\" \"m\" \"n\" \"o\""
  },
  {
    "objectID": "slides/04.html#lists-use-same-rules-for",
    "href": "slides/04.html#lists-use-same-rules-for",
    "title": "Subsetting",
    "section": "Lists use same rules for [",
    "text": "Lists use same rules for [\n\nmy_list[2:3]\n\n#&gt; $b\n#&gt;  [1] \"e\" \"f\" \"g\" \"h\" \"i\" \"j\" \"k\" \"l\" \"m\" \"n\" \"o\"\n#&gt; \n#&gt; $c\n#&gt; [1] 100 101 102 103 104 105 106 107 108\n\nmy_list[c(TRUE, FALSE, TRUE)]\n\n#&gt; $a\n#&gt; [1]  TRUE FALSE\n#&gt; \n#&gt; $c\n#&gt; [1] 100 101 102 103 104 105 106 107 108"
  },
  {
    "objectID": "slides/04.html#matrices-arrays-take-multidimensional-indices",
    "href": "slides/04.html#matrices-arrays-take-multidimensional-indices",
    "title": "Subsetting",
    "section": "Matrices & arrays take multidimensional indices",
    "text": "Matrices & arrays take multidimensional indices\n\na &lt;- matrix(1:9, nrow = 3)\na\n\n#&gt;      [,1] [,2] [,3]\n#&gt; [1,]    1    4    7\n#&gt; [2,]    2    5    8\n#&gt; [3,]    3    6    9\n\na[1:2, 2:3] # rows, columns\n\n#&gt;      [,1] [,2]\n#&gt; [1,]    4    7\n#&gt; [2,]    5    8"
  },
  {
    "objectID": "slides/04.html#matrices-arrays-can-accept-character-logical-etc",
    "href": "slides/04.html#matrices-arrays-can-accept-character-logical-etc",
    "title": "Subsetting",
    "section": "Matrices & arrays can accept character, logical, etc",
    "text": "Matrices & arrays can accept character, logical, etc\n\ncolnames(a) &lt;- c(\"A\", \"B\", \"C\")\na[c(TRUE, TRUE, FALSE), c(\"B\", \"A\")] # a[1:2, 2:1]\n\n#&gt;      B A\n#&gt; [1,] 4 1\n#&gt; [2,] 5 2"
  },
  {
    "objectID": "slides/04.html#matrices-arrays-are-also-vectors",
    "href": "slides/04.html#matrices-arrays-are-also-vectors",
    "title": "Subsetting",
    "section": "Matrices & arrays are also vectors",
    "text": "Matrices & arrays are also vectors\n\nvals &lt;- outer(1:5, 1:5, FUN = \"paste\", sep = \",\") # All chr combos of 1:5\nvals\n\n#&gt;      [,1]  [,2]  [,3]  [,4]  [,5] \n#&gt; [1,] \"1,1\" \"1,2\" \"1,3\" \"1,4\" \"1,5\"\n#&gt; [2,] \"2,1\" \"2,2\" \"2,3\" \"2,4\" \"2,5\"\n#&gt; [3,] \"3,1\" \"3,2\" \"3,3\" \"3,4\" \"3,5\"\n#&gt; [4,] \"4,1\" \"4,2\" \"4,3\" \"4,4\" \"4,5\"\n#&gt; [5,] \"5,1\" \"5,2\" \"5,3\" \"5,4\" \"5,5\"\n\nvals[c(4, 15)]\n\n#&gt; [1] \"4,1\" \"5,3\"\n\na[a &gt; 5]\n\n#&gt; [1] 6 7 8 9"
  },
  {
    "objectID": "slides/04.html#data-frames-subset-list-like-with-single-index",
    "href": "slides/04.html#data-frames-subset-list-like-with-single-index",
    "title": "Subsetting",
    "section": "Data frames subset list-like with single index",
    "text": "Data frames subset list-like with single index\n\ndf &lt;- data.frame(x = 1:3, y = 3:1, z = letters[1:3])\ndf[1:2]\n\n#&gt;   x y\n#&gt; 1 1 3\n#&gt; 2 2 2\n#&gt; 3 3 1\n\ndf[c(\"x\", \"z\")]\n\n#&gt;   x z\n#&gt; 1 1 a\n#&gt; 2 2 b\n#&gt; 3 3 c"
  },
  {
    "objectID": "slides/04.html#data-frames-subset-matrix-like-with-multiple-indices",
    "href": "slides/04.html#data-frames-subset-matrix-like-with-multiple-indices",
    "title": "Subsetting",
    "section": "Data frames subset matrix-like with multiple indices",
    "text": "Data frames subset matrix-like with multiple indices\n\ndf[1:2, c(\"x\", \"z\")] # rows, columns\n\n#&gt;   x z\n#&gt; 1 1 a\n#&gt; 2 2 b\n\ndf[df$x == 2, ] # matching rows, all columns\n\n#&gt;   x y z\n#&gt; 2 2 2 b\n\ndf[, c(\"x\", \"z\")] # equivalent to no ,\n\n#&gt;   x z\n#&gt; 1 1 a\n#&gt; 2 2 b\n#&gt; 3 3 c"
  },
  {
    "objectID": "slides/04.html#subsetting-a-tibble-with-returns-a-tibble",
    "href": "slides/04.html#subsetting-a-tibble-with-returns-a-tibble",
    "title": "Subsetting",
    "section": "Subsetting a tibble with [ returns a tibble",
    "text": "Subsetting a tibble with [ returns a tibble\n\ntbl &lt;- tibble::as_tibble(df)\ndf[, 1]\n\n#&gt; [1] 1 2 3\n\ndf[, 1, drop = FALSE] # Prevent errors\n\n#&gt;   x\n#&gt; 1 1\n#&gt; 2 2\n#&gt; 3 3\n\ntbl[, 1]\n\n#&gt; # A tibble: 3 √ó 1\n#&gt;       x\n#&gt;   &lt;int&gt;\n#&gt; 1     1\n#&gt; 2     2\n#&gt; 3     3"
  },
  {
    "objectID": "slides/04.html#selects-a-single-element",
    "href": "slides/04.html#selects-a-single-element",
    "title": "Subsetting",
    "section": "[[ selects a single element",
    "text": "[[ selects a single element\n\n\n\nx &lt;- list(1:3, \"a\", 4:6)\nx[1]\n\n#&gt; [[1]]\n#&gt; [1] 1 2 3\n\nclass(x[1])\n\n#&gt; [1] \"list\"\n\nx[[1]]\n\n#&gt; [1] 1 2 3\n\nclass(x[[1]])\n\n#&gt; [1] \"integer\"\n\nx[[1]][[1]]\n\n#&gt; [1] 1"
  },
  {
    "objectID": "slides/04.html#is-shorthand-for-...-exact-false",
    "href": "slides/04.html#is-shorthand-for-...-exact-false",
    "title": "Subsetting",
    "section": "$ is shorthand for [[..., exact = FALSE]]",
    "text": "$ is shorthand for [[..., exact = FALSE]]\n\nx &lt;- list(abc = 1)\nx$abc\n\n#&gt; [1] 1\n\nx$a\n\n#&gt; [1] 1\n\nx[[\"a\"]]\n\n#&gt; NULL\n\nx[[\"a\", exact = FALSE]]\n\n#&gt; [1] 1\n\noptions(warnPartialMatchDollar = TRUE)\nx$a\n\n#&gt; Warning in x$a: partial match of 'a' to 'abc'\n\n\n#&gt; [1] 1"
  },
  {
    "objectID": "slides/04.html#behavior-for-missing-ish-indices-is-inconsistent",
    "href": "slides/04.html#behavior-for-missing-ish-indices-is-inconsistent",
    "title": "Subsetting",
    "section": "Behavior for missing-ish indices is inconsistent",
    "text": "Behavior for missing-ish indices is inconsistent\n\na &lt;- c(a = 1L, b = 2L)\nlst &lt;- list(a = 1:2)\n\n# Errors:\n# a[[NULL]]\n# lst[[NULL]]\n# a[[5]]\n# lst[[5]]\n# a[[\"c\"]]\n# a[[NA]]\n\nlst[[\"c\"]]\n\n#&gt; NULL\n\nlst[[NA]]\n\n#&gt; NULL"
  },
  {
    "objectID": "slides/04.html#purrrpluck-and-purrrchuck-provide-consistent-wrappers",
    "href": "slides/04.html#purrrpluck-and-purrrchuck-provide-consistent-wrappers",
    "title": "Subsetting",
    "section": "purrr::pluck() and purrr::chuck() provide consistent wrappers",
    "text": "purrr::pluck() and purrr::chuck() provide consistent wrappers\n\npurrr::pluck() always returns NULL or .default for (non-NULL) missing\npurrr::chuck() always throws error\n\n\npurrr::pluck(a, 5)\n\n#&gt; NULL\n\npurrr::pluck(a, \"c\")\n\n#&gt; NULL\n\npurrr::pluck(lst, 5)\n\n#&gt; NULL\n\npurrr::pluck(lst, \"c\")\n\n#&gt; NULL"
  },
  {
    "objectID": "slides/04.html#s4-has-two-additional-subsetting-operators",
    "href": "slides/04.html#s4-has-two-additional-subsetting-operators",
    "title": "Subsetting",
    "section": "S4 has two additional subsetting operators",
    "text": "S4 has two additional subsetting operators\n\n@ equivalent to $ (but error if bad)\nslot() equivalent to [[\n\nMore in Chapter 15"
  },
  {
    "objectID": "slides/04.html#can-assign-to-position-with",
    "href": "slides/04.html#can-assign-to-position-with",
    "title": "Subsetting",
    "section": "Can assign to position with [",
    "text": "Can assign to position with [\n\nx &lt;- 1:5\nx[1:2] &lt;- c(101, 102)\nx\n\n#&gt; [1] 101 102   3   4   5\n\nx[1:3] &lt;- 1:2\nx\n\n#&gt; [1] 1 2 1 4 5"
  },
  {
    "objectID": "slides/04.html#remove-list-component-with-null",
    "href": "slides/04.html#remove-list-component-with-null",
    "title": "Subsetting",
    "section": "Remove list component with NULL",
    "text": "Remove list component with NULL\n\nx &lt;- list(a = 1, b = 2)\nx[[\"b\"]] &lt;- NULL\nx\n\n#&gt; $a\n#&gt; [1] 1"
  },
  {
    "objectID": "slides/04.html#use-listnull-to-add-null",
    "href": "slides/04.html#use-listnull-to-add-null",
    "title": "Subsetting",
    "section": "Use list(NULL) to add NULL",
    "text": "Use list(NULL) to add NULL\n\nx &lt;- list(a = 1, b = 2)\nx[[\"b\"]] &lt;- list(NULL)\nx\n\n#&gt; $a\n#&gt; [1] 1\n#&gt; \n#&gt; $b\n#&gt; $b[[1]]\n#&gt; NULL"
  },
  {
    "objectID": "slides/04.html#subset-with-nothing-to-retain-shape",
    "href": "slides/04.html#subset-with-nothing-to-retain-shape",
    "title": "Subsetting",
    "section": "Subset with nothing to retain shape",
    "text": "Subset with nothing to retain shape\n\ndf &lt;- data.frame(a = 1:3, b = 1:3)\ndf[] &lt;- \"a\"\ndf\n\n#&gt;   a b\n#&gt; 1 a a\n#&gt; 2 a a\n#&gt; 3 a a\n\ndf &lt;- \"a\"\ndf\n\n#&gt; [1] \"a\""
  },
  {
    "objectID": "slides/04.html#use-a-lookup-vector-and-recycling-rules-to-translate-values",
    "href": "slides/04.html#use-a-lookup-vector-and-recycling-rules-to-translate-values",
    "title": "Subsetting",
    "section": "Use a lookup vector and recycling rules to translate values",
    "text": "Use a lookup vector and recycling rules to translate values\n\nx &lt;- c(\"b\", \"g\", \"x\", \"g\", \"g\", \"b\")\nlookup &lt;- c(b = \"blue\", g = \"green\", x = NA)\nlookup[x]\n\n#&gt;       b       g       x       g       g       b \n#&gt;  \"blue\" \"green\"      NA \"green\" \"green\"  \"blue\"\n\nunname(lookup[x])\n\n#&gt; [1] \"blue\"  \"green\" NA      \"green\" \"green\" \"blue\""
  },
  {
    "objectID": "slides/04.html#use-a-lookup-table-to-generate-rows-of-data",
    "href": "slides/04.html#use-a-lookup-table-to-generate-rows-of-data",
    "title": "Subsetting",
    "section": "Use a lookup table to generate rows of data",
    "text": "Use a lookup table to generate rows of data\n\ninfo &lt;- data.frame(\n  code = c(\"b\", \"g\", \"x\"),\n  color = c(\"blue\", \"green\", NA),\n  other_thing = 3:1\n)\nmatch(x, info$code) # Indices of info$code in x\n\n#&gt; [1] 1 2 3 2 2 1\n\ninfo[match(x, info$code), ]\n\n#&gt;     code color other_thing\n#&gt; 1      b  blue           3\n#&gt; 2      g green           2\n#&gt; 3      x  &lt;NA&gt;           1\n#&gt; 2.1    g green           2\n#&gt; 2.2    g green           2\n#&gt; 1.1    b  blue           3"
  },
  {
    "objectID": "slides/04.html#sort-with-order",
    "href": "slides/04.html#sort-with-order",
    "title": "Subsetting",
    "section": "Sort with order()",
    "text": "Sort with order()\n\nx &lt;- c(\"b\", \"c\", \"a\")\norder(x)\n\n#&gt; [1] 3 1 2\n\nx[order(x)]\n\n#&gt; [1] \"a\" \"b\" \"c\"\n\ndf &lt;- data.frame(b = 3:1, a = 1:3)\ndf[order(df$b), ]\n\n#&gt;   b a\n#&gt; 3 1 3\n#&gt; 2 2 2\n#&gt; 1 3 1\n\ndf[, order(names(df))]\n\n#&gt;   a b\n#&gt; 1 1 3\n#&gt; 2 2 2\n#&gt; 3 3 1"
  },
  {
    "objectID": "slides/04.html#expand-counts",
    "href": "slides/04.html#expand-counts",
    "title": "Subsetting",
    "section": "Expand counts",
    "text": "Expand counts\n\ndf &lt;- data.frame(x = c(2, 4, 1), y = c(9, 11, 6), n = c(3, 5, 1))\nrep(1:nrow(df), df$n)\n\n#&gt; [1] 1 1 1 2 2 2 2 2 3\n\ndf[rep(1:nrow(df), df$n), ]\n\n#&gt;     x  y n\n#&gt; 1   2  9 3\n#&gt; 1.1 2  9 3\n#&gt; 1.2 2  9 3\n#&gt; 2   4 11 5\n#&gt; 2.1 4 11 5\n#&gt; 2.2 4 11 5\n#&gt; 2.3 4 11 5\n#&gt; 2.4 4 11 5\n#&gt; 3   1  6 1"
  },
  {
    "objectID": "slides/04.html#ran-out-of-time-to-make-slides-for",
    "href": "slides/04.html#ran-out-of-time-to-make-slides-for",
    "title": "Subsetting",
    "section": "Ran out of time to make slides for",
    "text": "Ran out of time to make slides for\nIdeally a future cohort should expand these:\n\nRemove df columns with setdiff()\nLogically subset rows df[df$col &gt; 5, ]\nThe next slide about which()"
  },
  {
    "objectID": "slides/04.html#boolean-algebra-versus-sets-logical-and-integer",
    "href": "slides/04.html#boolean-algebra-versus-sets-logical-and-integer",
    "title": "Subsetting",
    "section": "Boolean algebra versus sets (logical and integer)",
    "text": "Boolean algebra versus sets (logical and integer)\n\nwhich() gives the indices of a Boolean vector\n\n\n(x1 &lt;- 1:10 %% 2 == 0) # 1-10 divisible by 2\n#  [1] FALSE  TRUE FALSE  TRUE FALSE  TRUE FALSE  TRUE FALSE  TRUE\n(x2 &lt;- which(x1))\n# [1]  2  4  6  8 10\n(y1 &lt;- 1:10 %% 5 == 0) # 1-10 divisible by 5\n#  [1] FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE  TRUE\n(y2 &lt;- which(y1))\n# [1]  5 10\nx1 & y1\n# [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE"
  },
  {
    "objectID": "slides/06.html#learning-objectives",
    "href": "slides/06.html#learning-objectives",
    "title": "Functions",
    "section": "Learning objectives",
    "text": "Learning objectives\n\nHow to make functions in R\nWhat are the parts of a function\nNested functions"
  },
  {
    "objectID": "slides/06.html#how-to-make-a-simple-function-in-r",
    "href": "slides/06.html#how-to-make-a-simple-function-in-r",
    "title": "Functions",
    "section": "How to make a simple function in R",
    "text": "How to make a simple function in R\nFunction components\nFunctions have three parts, formals(), body(), and environment()."
  },
  {
    "objectID": "slides/06.html#primitive-functions",
    "href": "slides/06.html#primitive-functions",
    "title": "Functions",
    "section": "Primitive functions",
    "text": "Primitive functions\nAre the core function in base R, such as sum()\n\nsum\n\n#&gt; function (..., na.rm = FALSE)  .Primitive(\"sum\")\n\n\nType of primitives:\n\nbuiltin\nspecial\n\n\ntypeof(sum)\n\n#&gt; [1] \"builtin\"\n\n\nThese core functions have components to NULL."
  },
  {
    "objectID": "slides/06.html#anonymous-functions",
    "href": "slides/06.html#anonymous-functions",
    "title": "Functions",
    "section": "Anonymous functions",
    "text": "Anonymous functions\nIf you don‚Äôt provide a name to a function\n\nlapply(mtcars |&gt; select(mpg, cyl), function(x) length(unique(x)))\n\n#&gt; $mpg\n#&gt; [1] 25\n#&gt; \n#&gt; $cyl\n#&gt; [1] 3\n\n\n\nvector_len &lt;- function(x) {\n  length(unique(x))\n}\n\n\nlapply(mtcars |&gt; select(mpg, cyl), vector_len)\n\n#&gt; $mpg\n#&gt; [1] 25\n#&gt; \n#&gt; $cyl\n#&gt; [1] 3"
  },
  {
    "objectID": "slides/06.html#function-composition",
    "href": "slides/06.html#function-composition",
    "title": "Functions",
    "section": "Function composition",
    "text": "Function composition\n\nx &lt;- runif(100)\n# Nested function calls\nsquare &lt;- function(x) x^2\ndeviation &lt;- function(x) x - mean(x)\nsqrt(mean(square(deviation(x))))\n\n#&gt; [1] 0.2905932\n\n\n\n# intermediate result\nout &lt;- deviation(x)\nout &lt;- square(out)\nout &lt;- mean(out)\nout &lt;- sqrt(out)\nout\n\n#&gt; [1] 0.2905932\n\n\n\n# Pipe workflow\nx |&gt; \n  deviation() |&gt;\n  square() |&gt;\n  mean() |&gt;\n  sqrt()\n\n#&gt; [1] 0.2905932"
  },
  {
    "objectID": "slides/06.html#more-about-functions-insights",
    "href": "slides/06.html#more-about-functions-insights",
    "title": "Functions",
    "section": "More about functions insights",
    "text": "More about functions insights\nLexical scoping\nRules\n\nName masking\nFunctions versus variables\nA fresh start\nDynamic lookup"
  },
  {
    "objectID": "slides/06.html#lazy-evaluation",
    "href": "slides/06.html#lazy-evaluation",
    "title": "Functions",
    "section": "Lazy Evaluation:",
    "text": "Lazy Evaluation:\n\n\n\n\n\n\nImportant\n\n\nfunction arguments are only evaluated when accessed"
  },
  {
    "objectID": "slides/06.html#case-study-sir-model-function",
    "href": "slides/06.html#case-study-sir-model-function",
    "title": "Functions",
    "section": "Case Study: SIR model function",
    "text": "Case Study: SIR model function\nThis is an interesting example taken from a course on Coursera: Infectious disease modelling-ICL\nThe purpose of this example is to show how to make a model passing through making a function.\nFirst we need to load some useful libraries:\n\nlibrary(deSolve)\nlibrary(reshape2)\n\nThen set the model inputs:\n\npopulation size (N)\nnumber of susceptable (S)\ninfected (I)\nrecovered (R)\n\nAnd add the model parameters:\n\ninfection rate (\\(\\beta\\))\nrecovery rate (\\(\\gamma\\))\n\n\nN&lt;- 100000                  # population\n\nstate_values&lt;- c(S = N -1,   # susceptible\n                 I = 1,      # infected\n                 R = 0)      # recovered\n\nparameters&lt;- c(beta = 1/2,  # infection rate days^-1\n               gamma = 1/4) # recovery rate days^-1\n\nThen we set the time as an important factor, which defines the length of time we are looking at this model run. It is intended as the time range in which the infections spread out, let‚Äôs say that we are aiming to investigate an infection period of 100 days.\n\ntimes&lt;- seq(0, 100, by = 1)\n\nFinally, we set up the SIR model, the susceptable, infected and recovered model. How do we do that is passing the paramenters through a function of the time, and state.\nWithin the model function we calculate one more paramenter, the force of infection: \\(\\lambda\\)\n\nsir_model&lt;- function(time, state, parameters){\n  with(as.list(c(state, parameters)),{\n    N&lt;- S + I + R\n    lambda = beta * I/N    # force of infection\n    dS&lt;- - lambda * S \n    dI&lt;- lambda * S - gamma * I\n    dR&lt;- gamma * I\n    return(list(c(dS,dI,dR)))\n  })\n}\n\nOnce we have our SIR model function ready, we can calculate the output of the model, with the help of the function ode() from {deSolve} package.\n\noutput&lt;- as.data.frame(ode(y = state_values,\n                           times = times,\n                           func = sir_model,\n                           parms = parameters))\noutput %&gt;% head\n\n#&gt;   time        S        I         R\n#&gt; 1    0 99999.00 1.000000 0.0000000\n#&gt; 2    1 99998.43 1.284018 0.2840252\n#&gt; 3    2 99997.70 1.648696 0.6487171\n#&gt; 4    3 99996.77 2.116939 1.1169863\n#&gt; 5    4 99995.56 2.718152 1.7182450\n#&gt; 6    5 99994.02 3.490086 2.4902600\n\n\nIn addition to our builtin SIR model function we can have a look at:\n\n?deSolve::ode()\n\nIt solves Ordinary Differential Equations.\n\ndeSolve:::ode\n\n#&gt; function (y, times, func, parms, method = c(\"lsoda\", \"lsode\", \n#&gt;     \"lsodes\", \"lsodar\", \"vode\", \"daspk\", \"euler\", \"rk4\", \"ode23\", \n#&gt;     \"ode45\", \"radau\", \"bdf\", \"bdf_d\", \"adams\", \"impAdams\", \"impAdams_d\", \n#&gt;     \"iteration\"), ...) \n#&gt; {\n#&gt;     if (is.null(method)) \n#&gt;         method &lt;- \"lsoda\"\n#&gt;     if (is.list(method)) {\n#&gt;         if (!inherits(method, \"rkMethod\")) \n#&gt;             stop(\"'method' should be given as string or as a list of class 'rkMethod'\")\n#&gt;         out &lt;- rk(y, times, func, parms, method = method, ...)\n#&gt;     }\n#&gt;     else if (is.function(method)) \n#&gt;         out &lt;- method(y, times, func, parms, ...)\n#&gt;     else if (is.complex(y)) \n#&gt;         out &lt;- switch(match.arg(method), vode = zvode(y, times, \n#&gt;             func, parms, ...), bdf = zvode(y, times, func, parms, \n#&gt;             mf = 22, ...), bdf_d = zvode(y, times, func, parms, \n#&gt;             mf = 23, ...), adams = zvode(y, times, func, parms, \n#&gt;             mf = 10, ...), impAdams = zvode(y, times, func, parms, \n#&gt;             mf = 12, ...), impAdams_d = zvode(y, times, func, \n#&gt;             parms, mf = 13, ...))\n#&gt;     else out &lt;- switch(match.arg(method), lsoda = lsoda(y, times, \n#&gt;         func, parms, ...), vode = vode(y, times, func, parms, \n#&gt;         ...), lsode = lsode(y, times, func, parms, ...), lsodes = lsodes(y, \n#&gt;         times, func, parms, ...), lsodar = lsodar(y, times, func, \n#&gt;         parms, ...), daspk = daspk(y, times, func, parms, ...), \n#&gt;         euler = rk(y, times, func, parms, method = \"euler\", ...), \n#&gt;         rk4 = rk(y, times, func, parms, method = \"rk4\", ...), \n#&gt;         ode23 = rk(y, times, func, parms, method = \"ode23\", ...), \n#&gt;         ode45 = rk(y, times, func, parms, method = \"ode45\", ...), \n#&gt;         radau = radau(y, times, func, parms, ...), bdf = lsode(y, \n#&gt;             times, func, parms, mf = 22, ...), bdf_d = lsode(y, \n#&gt;             times, func, parms, mf = 23, ...), adams = lsode(y, \n#&gt;             times, func, parms, mf = 10, ...), impAdams = lsode(y, \n#&gt;             times, func, parms, mf = 12, ...), impAdams_d = lsode(y, \n#&gt;             times, func, parms, mf = 13, ...), iteration = iteration(y, \n#&gt;             times, func, parms, ...))\n#&gt;     return(out)\n#&gt; }\n#&gt; &lt;bytecode: 0x0000021ebc6bc708&gt;\n#&gt; &lt;environment: namespace:deSolve&gt;\n\n\n\nmethods(\"ode\")\n\n#&gt; [1] ode.1D   ode.2D   ode.3D   ode.band\n#&gt; see '?methods' for accessing help and source code"
  },
  {
    "objectID": "slides/08.html#learning-objectives",
    "href": "slides/08.html#learning-objectives",
    "title": "Conditions",
    "section": "Learning objectives",
    "text": "Learning objectives\n\nWhat conditions are\nHow to generate (‚Äúsignal‚Äù) them\nHow to consume (‚Äúhandle‚Äù) them"
  },
  {
    "objectID": "slides/08.html#rs-condition-system-allows-us-to-handle-things-going-wrong",
    "href": "slides/08.html#rs-condition-system-allows-us-to-handle-things-going-wrong",
    "title": "Conditions",
    "section": "R‚Äôs condition system allows us to handle things going wrong",
    "text": "R‚Äôs condition system allows us to handle things going wrong\nAn error might occur due to events outside of your program‚Äîa missing file, a full disk, a crashed server, etc.\n‚ÄúErrors aren‚Äôt caused by bugs, but neglecting to handle an error is almost certainly a bug.‚Äù ‚ÄîSeibel (2003)\nConditions help us maintain the illusion of ‚Äúblack box‚Äù functions."
  },
  {
    "objectID": "slides/08.html#there-are-three-types-of-conditions",
    "href": "slides/08.html#there-are-three-types-of-conditions",
    "title": "Conditions",
    "section": "There are three types of conditions",
    "text": "There are three types of conditions\n\n‚ùå Errors\n‚ö†Ô∏è Warnings\nüí¨ Messages\n\nFunction authors signal conditions\nFunction users handle conditions"
  },
  {
    "objectID": "slides/08.html#errors-indicate-that-a-problem-occurred-and-the-function-cannot-continue",
    "href": "slides/08.html#errors-indicate-that-a-problem-occurred-and-the-function-cannot-continue",
    "title": "Conditions",
    "section": "Errors indicate that a problem occurred and the function cannot continue",
    "text": "Errors indicate that a problem occurred and the function cannot continue\n\nf &lt;- function() {\n  cat(\"starting f()\\n\")\n  g()\n  cat(\"finishing f()\\n\")\n}\n\ng &lt;- function() {\n  cat(\"starting g()\\n\")\n  stop(\"This is an error!\")\n  cat(\"finishing g()\\n\")\n}\n\nf()\n\n#&gt; starting f()\n#&gt; starting g()\n\n\n#&gt; Error in g(): This is an error!\n\n\n\nErrors halt execution immediately\nBy default the function that raised the error is prepended to the message"
  },
  {
    "objectID": "slides/08.html#pass-objects-to-stop-to-print-error-messages",
    "href": "slides/08.html#pass-objects-to-stop-to-print-error-messages",
    "title": "Conditions",
    "section": "Pass objects to stop() to print error messages",
    "text": "Pass objects to stop() to print error messages\n\nstop(...) can accept zero or more objects\n\nIf the first object is not a condition object1, its arguments are converted to character and pasted together with no separator\n\nPass call. = FALSE to prevent the function that raised the error from being added to the message\nrlang::abort() signals errors with a different interface\n\nCondition objects will be described later"
  },
  {
    "objectID": "slides/08.html#tracebacks-display-the-call-stack-at-the-time-of-the-last-error",
    "href": "slides/08.html#tracebacks-display-the-call-stack-at-the-time-of-the-last-error",
    "title": "Conditions",
    "section": "Tracebacks display the call stack at the time of the last error",
    "text": "Tracebacks display the call stack at the time of the last error\n\nf()\ntraceback()\n\n#&gt; 4: stop(\"This is an error!\") at #2\n#&gt; 2: g() at #3\n#&gt; 1: f()\nThis is one reason to prefer stop(..., call. = FALSE)"
  },
  {
    "objectID": "slides/08.html#rlanglast_trace-has-prettier-printing",
    "href": "slides/08.html#rlanglast_trace-has-prettier-printing",
    "title": "Conditions",
    "section": "rlang::last_trace() has prettier printing",
    "text": "rlang::last_trace() has prettier printing\n\nf()\nrlang::last_trace()\n\n#&gt; &lt;error/rlang_error&gt;\n#&gt; Error in `g()`:\n#&gt; ! This is an error!\n#&gt; ---\n#&gt; Backtrace:\n#&gt;     ‚ñÜ\n#&gt;  1. ‚îî‚îÄglobal f()\n#&gt;  2.   ‚îî‚îÄglobal g()\n#&gt; Run rlang::last_trace(drop = FALSE) to see 1 hidden frame."
  },
  {
    "objectID": "slides/08.html#warnings-indicate-that-a-problem-occurred-but-the-function-can-continue",
    "href": "slides/08.html#warnings-indicate-that-a-problem-occurred-but-the-function-can-continue",
    "title": "Conditions",
    "section": "Warnings indicate that a problem occurred but the function can continue",
    "text": "Warnings indicate that a problem occurred but the function can continue\n\n\nf &lt;- function() {\n  warning(\"F1\")\n  g()\n  warning(\"F2\")\n  cat(\"finishing f()\\n\")\n}\n\ng &lt;- function() {\n  warning(\"G1\")\n  cat(\"finishing g()\\n\")\n}\n\nf()\n\n#&gt; finishing g()\n#&gt; finishing f()\n#&gt; Warning messages:\n#&gt; 1: In f() : F1\n#&gt; 2: In g() : G1\n#&gt; 3: In f() : F2\n\nBy default warnings are cached and printed when control returns to the top level, as shown here (use options(warn = 0) to get this behavior)\nWarnings can appear immediately with options(warn = 1)\nWarnings can turn into errors with options(warn = 2), which is ideal for debugging"
  },
  {
    "objectID": "slides/08.html#use-warnings-sparingly",
    "href": "slides/08.html#use-warnings-sparingly",
    "title": "Conditions",
    "section": "Use warnings sparingly",
    "text": "Use warnings sparingly\n\nIdeal for deprecating functions\nGood when ‚Äúyou are reasonably certain‚Äù that a problem is recoverable\n‚ÄúBase R tends to overuse warnings, and many warnings in base R would be better off as errors‚Äù\n\n\n\nwarning() has similar arguments to stop()\ncall. = TRUE is generally more useful with warning() than stop()\nrlang::warn() is an alternative (cf.¬†rlang::abort())"
  },
  {
    "objectID": "slides/08.html#messages-indicate-that-something-noteworthy-has-happened",
    "href": "slides/08.html#messages-indicate-that-something-noteworthy-has-happened",
    "title": "Conditions",
    "section": "Messages indicate that something noteworthy has happened",
    "text": "Messages indicate that something noteworthy has happened\n\nf &lt;- function() {\n  message(\"F1\")\n  g()\n  message(\"F2\")\n  cat(\"finishing f()\\n\")\n}\n\ng &lt;- function() {\n  message(\"G1\")\n  cat(\"finishing g()\\n\")\n}\n\nf()\n\n#&gt; F1\n\n\n#&gt; G1\n\n\n#&gt; finishing g()\n\n\n#&gt; F2\n\n\n#&gt; finishing f()"
  },
  {
    "objectID": "slides/08.html#recommended-uses-for-messages",
    "href": "slides/08.html#recommended-uses-for-messages",
    "title": "Conditions",
    "section": "Recommended uses for messages",
    "text": "Recommended uses for messages\n\nExplaining default arguments\nStatus updates of functions used primarily for side-effects\n\nInteraction with web API, file downloaded, etc.\n\nProgress of long-running process\n\nBut see utils::txtProgressBar() and others\n\nPackage loading message (e.g., attaching package, objects masked)\n\n\n\nSee rlang::inform() for an alternative interface"
  },
  {
    "objectID": "slides/08.html#ignore-errors-with-try",
    "href": "slides/08.html#ignore-errors-with-try",
    "title": "Conditions",
    "section": "Ignore errors with try()",
    "text": "Ignore errors with try()\n\n\nDisplays error\nBut continues execution after error\n\n\n\nbad_log &lt;- function(x) {\n  try(log(x))\n  10\n}\n\nbad_log(\"bad\")\n\n#&gt; Error in log(x) : non-numeric argument to mathematical function\n\n\n#&gt; [1] 10"
  },
  {
    "objectID": "slides/08.html#try-with-assignment-can-support-default-values-in-case-of-failure",
    "href": "slides/08.html#try-with-assignment-can-support-default-values-in-case-of-failure",
    "title": "Conditions",
    "section": "try() with assignment can support default values in case of failure",
    "text": "try() with assignment can support default values in case of failure\n\nfile_contents &lt;- NULL\ntry(file_contents &lt;- read.csv(\"possibly-bad-input.csv\"), silent = TRUE)\nis.null(file_contents)\n\n#&gt; [1] TRUE"
  },
  {
    "objectID": "slides/08.html#warnings-and-messages-can-be-independently-suppressed",
    "href": "slides/08.html#warnings-and-messages-can-be-independently-suppressed",
    "title": "Conditions",
    "section": "Warnings and messages can be independently suppressed",
    "text": "Warnings and messages can be independently suppressed\n\n\nchatty_function &lt;- function() {\n  warning(\"warning 1\")\n  message(\"message 1\")\n  warning(\"warning 2\")\n  message(\"message 2\")\n  42\n}\n\nsuppressWarnings(chatty_function())\n\n#&gt; message 1\n#&gt; message 2\n#&gt; [1] 42\n\nsuppressMessages(chatty_function())\n\n#&gt; [1] 42\n#&gt; Warning messages:\n#&gt; 1: In chatty_function() : warning 1\n#&gt; 2: In chatty_function() : warning 2"
  },
  {
    "objectID": "slides/08.html#every-condition-has-a-default-behavior",
    "href": "slides/08.html#every-condition-has-a-default-behavior",
    "title": "Conditions",
    "section": "Every condition has a default behavior",
    "text": "Every condition has a default behavior\n\n‚ùå Errors halt execution\n‚ö†Ô∏è Warnings are collected during execution and displayed in bulk after execution\nüí¨ Messages are displayed immediately\n\nThese can be changed through exiting and calling handlers"
  },
  {
    "objectID": "slides/08.html#trycatch-specifies-or-modifies-exiting-handlers",
    "href": "slides/08.html#trycatch-specifies-or-modifies-exiting-handlers",
    "title": "Conditions",
    "section": "tryCatch() specifies or modifies exiting handlers",
    "text": "tryCatch() specifies or modifies exiting handlers\n\nexp_log &lt;- function(x) {\n  tryCatch(\n    error = function(cnd) NA,\n    {\n      y &lt;- log(x)\n      cat(\"Reconstituting 'x'\\n\")\n      exp(y)\n    }\n  )\n}\n\nexp_log(23)\n\n#&gt; Reconstituting 'x'\n\n\n#&gt; [1] 23\n\n\n\nexp_log(\"x\")\n\n#&gt; [1] NA\n\n\n\nNotice that, unlike with try(), the function still stops\n(the next slide has more detail)"
  },
  {
    "objectID": "slides/08.html#exiting-handlers-never-return-control-to-the-original-code",
    "href": "slides/08.html#exiting-handlers-never-return-control-to-the-original-code",
    "title": "Conditions",
    "section": "Exiting handlers never return control to the original code",
    "text": "Exiting handlers never return control to the original code\n\ntryCatch(\n  message = function(cnd) {\n    cat(\"Caught a message condition:\", conditionMessage(cnd))\n    \"The return value of the message handler\"\n  },\n  {\n    message(\"This is a message\")\n    cat(\"This code won't be run inside 'tryCatch()' if messages are caught\\n\")\n    \"The return value of the original expression\"\n  },\n  finally = {\n    cat(\"The code in 'finally' is always run\\n\")\n  }\n)\n\n#&gt; Caught a message condition: This is a message\n#&gt; The code in 'finally' is always run\n\n\n#&gt; [1] \"The return value of the message handler\"\n\n\n\nThis snippet illustrates a few things about tryCatch(): - exiting handlers can be established for exceptions other than errors - The use of finally - And, like it says in the title, the original code exits and doesn‚Äôt resume"
  },
  {
    "objectID": "slides/08.html#withcallinghandlers-specifies-or-modifies-calling-handlers",
    "href": "slides/08.html#withcallinghandlers-specifies-or-modifies-calling-handlers",
    "title": "Conditions",
    "section": "withCallingHandlers() specifies or modifies calling handlers",
    "text": "withCallingHandlers() specifies or modifies calling handlers\n\nwithCallingHandlers(\n  message = function(cnd) {\n    cat(\"Caught a message condition:\", conditionMessage(cnd))\n    \"The return value of the message handler is ignored\"\n  },\n  {\n    message(\"This is a message\")\n    cat(\"This code should run\\n\")\n    message(\"This is another message\")\n    \"The return value of the original expression\"\n  }\n  # No finally option\n)\n\n#&gt; Caught a message condition: This is a message\n\n\n#&gt; This code should run\n#&gt; Caught a message condition: This is another message\n\n\n#&gt; [1] \"The return value of the original expression\""
  },
  {
    "objectID": "slides/08.html#conditions-bubble-up-to-other-calling-handlers-by-default",
    "href": "slides/08.html#conditions-bubble-up-to-other-calling-handlers-by-default",
    "title": "Conditions",
    "section": "Conditions ‚Äúbubble up‚Äù to other calling handlers by default",
    "text": "Conditions ‚Äúbubble up‚Äù to other calling handlers by default\n\nwithCallingHandlers(\n  message = function(cnd) cat(\"Level 2\\n\"),\n  withCallingHandlers(\n    message = function(cnd) cat(\"Level 1\\n\"),\n    {\n      message(\"Hello\")\n      cat(\"Finishing code block\\n\")\n    }\n  )\n)\n\n#&gt; Level 1\n#&gt; Level 2\n\n\n#&gt; Finishing code block"
  },
  {
    "objectID": "slides/08.html#conditions-also-bubble-up-to-trycatch",
    "href": "slides/08.html#conditions-also-bubble-up-to-trycatch",
    "title": "Conditions",
    "section": "Conditions also bubble up to tryCatch()",
    "text": "Conditions also bubble up to tryCatch()\n\ntryCatch(\n  message = function(cnd) cat(\"Level 2\\n\"),\n  withCallingHandlers(\n    message = function(cnd) cat(\"Level 1\\n\"),\n    {\n      message(\"Hello\")\n      cat(\"This exiting handler prevents this from running\\n\")\n    }\n  )\n)\n\n#&gt; Level 1\n#&gt; Level 2"
  },
  {
    "objectID": "slides/08.html#rlangcnd_muffle-will-stop-the-propagation-to-calling-handlers-higher-up",
    "href": "slides/08.html#rlangcnd_muffle-will-stop-the-propagation-to-calling-handlers-higher-up",
    "title": "Conditions",
    "section": "rlang::cnd_muffle() will stop the propagation to calling handlers ‚Äúhigher up‚Äù",
    "text": "rlang::cnd_muffle() will stop the propagation to calling handlers ‚Äúhigher up‚Äù\n\nwithCallingHandlers(\n  message = function(cnd) cat(\"Level 2\\n\"),\n  withCallingHandlers(\n    message = function(cnd) {\n      cat(\"Level 1\\n\")\n      rlang::cnd_muffle(cnd)\n    },\n    message(\"Hello\")\n  )\n)\n\n#&gt; Level 1"
  },
  {
    "objectID": "slides/08.html#calling-handlers-are-called-in-the-context-of-the-call-that-signaled-the-condition",
    "href": "slides/08.html#calling-handlers-are-called-in-the-context-of-the-call-that-signaled-the-condition",
    "title": "Conditions",
    "section": "Calling handlers are called in the context of the call that signaled the condition",
    "text": "Calling handlers are called in the context of the call that signaled the condition\n\nf &lt;- function() g()\ng &lt;- function() message(\"hello\")\n\nwithCallingHandlers(f(), message = function(cnd) {\n  lobstr::cst()\n  rlang::cnd_muffle(cnd)\n})\n\n#&gt;      ‚ñÜ\n#&gt;   1. ‚îú‚îÄbase::withCallingHandlers(...)\n#&gt;   2. ‚îú‚îÄglobal f()\n#&gt;   3. ‚îÇ ‚îî‚îÄglobal g()\n#&gt;   4. ‚îÇ   ‚îî‚îÄbase::message(\"hello\")\n#&gt;   5. ‚îÇ     ‚îú‚îÄbase::withRestarts(...)\n#&gt;   6. ‚îÇ     ‚îÇ ‚îî‚îÄbase (local) withOneRestart(expr, restarts[[1L]])\n#&gt;   7. ‚îÇ     ‚îÇ   ‚îî‚îÄbase (local) doWithOneRestart(return(expr), restart)\n#&gt;   8. ‚îÇ     ‚îî‚îÄbase::signalCondition(cond)\n#&gt;   9. ‚îî‚îÄglobal `&lt;fn&gt;`(`&lt;smplMssg&gt;`)\n#&gt;  10.   ‚îî‚îÄlobstr::cst()"
  },
  {
    "objectID": "slides/08.html#exiting-handlers-are-called-in-the-context-of-the-call-to-trycatch",
    "href": "slides/08.html#exiting-handlers-are-called-in-the-context-of-the-call-to-trycatch",
    "title": "Conditions",
    "section": "Exiting handlers are called in the context of the call to tryCatch()",
    "text": "Exiting handlers are called in the context of the call to tryCatch()\n\ntryCatch(f(), message = function(cnd) lobstr::cst())\n\n#&gt;     ‚ñÜ\n#&gt;  1. ‚îî‚îÄbase::tryCatch(f(), message = function(cnd) lobstr::cst())\n#&gt;  2.   ‚îî‚îÄbase (local) tryCatchList(expr, classes, parentenv, handlers)\n#&gt;  3.     ‚îî‚îÄbase (local) tryCatchOne(expr, names, parentenv, handlers[[1L]])\n#&gt;  4.       ‚îî‚îÄvalue[[3L]](cond)\n#&gt;  5.         ‚îî‚îÄlobstr::cst()"
  },
  {
    "objectID": "slides/08.html#built-in-conditions-are-lists-with-two-elements",
    "href": "slides/08.html#built-in-conditions-are-lists-with-two-elements",
    "title": "Conditions",
    "section": "Built-in conditions are lists with two elements",
    "text": "Built-in conditions are lists with two elements\n\ncnd &lt;- rlang::catch_cnd(stop(\"An error!\"))\nstr(cnd)\n\n#&gt; List of 2\n#&gt;  $ message: chr \"An error!\"\n#&gt;  $ call   : language force(expr)\n#&gt;  - attr(*, \"class\")= chr [1:3] \"simpleError\" \"error\" \"condition\"\n\n\n\nmessage can be accessed with conditionMessage(cnd)\ncall is not generally useful\nThe class attribute will be explained alongside S3"
  },
  {
    "objectID": "slides/08.html#custom-conditions-can-introduce-additional-attributes",
    "href": "slides/08.html#custom-conditions-can-introduce-additional-attributes",
    "title": "Conditions",
    "section": "Custom conditions can introduce additional attributes",
    "text": "Custom conditions can introduce additional attributes\n\ncnd &lt;- rlang::catch_cnd(rlang::abort(\"An error!\"))\nstr(cnd)\n\n#&gt; List of 5\n#&gt;  $ message: chr \"An error!\"\n#&gt;  $ trace  :Classes 'rlang_trace', 'rlib_trace', 'tbl' and 'data.frame':  8 obs. of  6 variables:\n#&gt;   ..$ call       :List of 8\n#&gt;   .. ..$ : language rlang::catch_cnd(rlang::abort(\"An error!\"))\n#&gt;   .. ..$ : language eval_bare(rlang::expr(tryCatch(!!!handlers, {     force(expr) ...\n#&gt;   .. ..$ : language tryCatch(condition = `&lt;fn&gt;`, {     force(expr) ...\n#&gt;   .. ..$ : language tryCatchList(expr, classes, parentenv, handlers)\n#&gt;   .. ..$ : language tryCatchOne(expr, names, parentenv, handlers[[1L]])\n#&gt;   .. ..$ : language doTryCatch(return(expr), name, parentenv, handler)\n#&gt;   .. ..$ : language force(expr)\n#&gt;   .. ..$ : language rlang::abort(\"An error!\")\n#&gt;   ..$ parent     : int [1:8] 0 1 1 3 4 5 1 0\n#&gt;   ..$ visible    : logi [1:8] FALSE FALSE FALSE FALSE FALSE FALSE ...\n#&gt;   ..$ namespace  : chr [1:8] \"rlang\" \"rlang\" \"base\" \"base\" ...\n#&gt;   ..$ scope      : chr [1:8] \"::\" \"::\" \"::\" \"local\" ...\n#&gt;   ..$ error_frame: logi [1:8] FALSE FALSE FALSE FALSE FALSE FALSE ...\n#&gt;   ..- attr(*, \"version\")= int 2\n#&gt;  $ parent : NULL\n#&gt;  $ rlang  :List of 1\n#&gt;   ..$ inherit: logi TRUE\n#&gt;  $ call   : NULL\n#&gt;  - attr(*, \"class\")= chr [1:3] \"rlang_error\" \"error\" \"condition\""
  },
  {
    "objectID": "slides/08.html#rlangabort-can-compose-and-throw-custom-conditions",
    "href": "slides/08.html#rlangabort-can-compose-and-throw-custom-conditions",
    "title": "Conditions",
    "section": "rlang::abort() can compose and throw custom conditions",
    "text": "rlang::abort() can compose and throw custom conditions\nWe create a function that will signal an error condition\n\nabort_missing_file &lt;- function(file_path) {\n  rlang::abort(\n    \"error_not_found\",\n    message = glue::glue(\"Path `{file_path}` not found\"),\n    path = file_path\n  )\n}\nabort_missing_file(\"blah.csv\")\n\n#&gt; Error in `abort_missing_file()`:\n#&gt; ! Path `blah.csv` not found\n\n\nThis makes it easy to format messages\n\n\nrlang::abort() doesn‚Äôt format messages like stop() does"
  },
  {
    "objectID": "slides/08.html#deal-with-custom-conditions-by-creating-specific-handlers",
    "href": "slides/08.html#deal-with-custom-conditions-by-creating-specific-handlers",
    "title": "Conditions",
    "section": "Deal with custom conditions by creating specific handlers",
    "text": "Deal with custom conditions by creating specific handlers\n\nmy_csv_reader &lt;- function(file) {\n  if (!file.exists(file)) abort_missing_file(file)\n  read.csv(file)\n}\n\ndat &lt;- tryCatch(\n  error_not_found = function(cnd) data.frame(),\n  error = function(cnd) NULL,\n  my_csv_reader(\"blah.csv\")\n)\n\ndat\n\n#&gt; data frame with 0 columns and 0 rows\n\n\n\n\nIf we were writing all of the code ourselves, we‚Äôd probably put this behavior in my_csv_reader() ourselves.\nCustom conditions‚Äô strength relates to the principle of ‚Äúseparation of concerns‚Äù: the decision about what constitutes an error belongs to the function author, and the decision of how to handle an error belongs to the function user. This is especially useful for authors and users of packages.\n\n\nThe first matching handler is chosen, not the ‚Äúmost specific‚Äù"
  },
  {
    "objectID": "slides/08.html#applications",
    "href": "slides/08.html#applications",
    "title": "Conditions",
    "section": "Applications",
    "text": "Applications\nSee the sub-section in the book for more excellent examples."
  },
  {
    "objectID": "slides/08.html#resources",
    "href": "slides/08.html#resources",
    "title": "Conditions",
    "section": "Resources",
    "text": "Resources\n\nConditions articles in rlang vignettes:\n\nIncluding function calls in error messages\nIncluding contextual information with error chains\nFormatting messages with cli\n\nOther resources from error message segment of rstudio::conf(2022) workshop ‚ÄúPackage Development Masterclass‚Äù\n\nError messages from the Tidyverse style guide"
  },
  {
    "objectID": "slides/10.html#learning-objectives",
    "href": "slides/10.html#learning-objectives",
    "title": "Function factories",
    "section": "Learning objectives:",
    "text": "Learning objectives:\nBy the end of today‚Äôs session, you will be able to:\n\nIdentify function factories\nUnderstand how function factories work\nLearn about non-obvious combination of function features\nGenerate a family of functions from data"
  },
  {
    "objectID": "slides/10.html#what-is-a-function-factory",
    "href": "slides/10.html#what-is-a-function-factory",
    "title": "Function factories",
    "section": "What is a function factory?",
    "text": "What is a function factory?\n\n\n\nA function factory is a function that makes (returns) functions\nFactory made function are manufactured functions\n\n\n\n# create a function factory\npower1 &lt;- function(exp) {\n  function(x) {\n    x^exp\n  }\n}\n\n# create manufactured functions\nsquare &lt;- power1(2)\n\ncube &lt;- power1(3)\n\n# execute manufactured functions\nsquare(2)\n#&gt; 4\n\ncube(2)\n#&gt; 8\n\n\n\n\nA function that, in its body, returns a function is by definition a function factory\nOf the three main functional programming tools (functionals, function factories, and function operators), function factories are the least used"
  },
  {
    "objectID": "slides/10.html#why-function-factories-work",
    "href": "slides/10.html#why-function-factories-work",
    "title": "Function factories",
    "section": "Why function factories work",
    "text": "Why function factories work\nFunction factories are powered by three features of the R language:\n\nR has first-class functions\nR functions capture the environment in which they are created\nR functions create a new execution environment\n\n\n\n\nenv_print(square)\n\n#&gt; &lt;environment: 0x000001df5ee07af0&gt;\n#&gt; Parent: &lt;environment: global&gt;\n#&gt; Bindings:\n#&gt; ‚Ä¢ exp: &lt;dbl&gt;\n\n\n\n\nenv_print(cube)\n\n#&gt; &lt;environment: 0x000001df5efbc190&gt;\n#&gt; Parent: &lt;environment: global&gt;\n#&gt; Bindings:\n#&gt; ‚Ä¢ exp: &lt;dbl&gt;\n\n\n\n\n\nA language with first-class functions means the functions are objects that can be copied, bound, etc.\nWhen they are created, manufactured functions capture the environment of the function factory\nManufactured functions have separate environments"
  },
  {
    "objectID": "slides/10.html#diagramming-function-factories",
    "href": "slides/10.html#diagramming-function-factories",
    "title": "Function factories",
    "section": "Diagramming function factories",
    "text": "Diagramming function factories"
  },
  {
    "objectID": "slides/10.html#diagramming-function-factories-1",
    "href": "slides/10.html#diagramming-function-factories-1",
    "title": "Function factories",
    "section": "Diagramming function factories",
    "text": "Diagramming function factories"
  },
  {
    "objectID": "slides/10.html#forcing-evaluation",
    "href": "slides/10.html#forcing-evaluation",
    "title": "Function factories",
    "section": "Forcing evaluation",
    "text": "Forcing evaluation\n\nBeware of changing bindings between creation and execution of manufactured functions\n\n\n\n\nx &lt;- 2\nsquare &lt;- power1(x)\nx &lt;- 3\nsquare(2)\n#&gt; [1] 8\n\n\n\npower2 &lt;- function(exp) {\n  force(exp)\n  function(x) {\n    x^exp\n  }\n}\n\nx &lt;- 2\nsquare &lt;- power2(x)\nx &lt;- 3\nsquare(2)\n#&gt; [1] 4\n\n\n\n\nAs per lazy evaluation, x is evaluated for the first time when square(2) is called and at the time of evaluation, x, the exponent, is equal to 3\nUse force() to force eager evaluation and avoid this type of bug introduced by lazy evaluation\nAlternatively, use any other function to force the evaluation of the variable x during the creation of the manufactured function\nThis issue of lazy evaluation only applies for variables (e.g.¬†running power2(2) is eagerly evaluated)"
  },
  {
    "objectID": "slides/10.html#stateful-functions",
    "href": "slides/10.html#stateful-functions",
    "title": "Function factories",
    "section": "Stateful functions",
    "text": "Stateful functions\n\nnew_counter &lt;- function() {\n  i &lt;- 0\n  function() {\n    i &lt;&lt;- i + 1\n    i\n  }\n}\n\ncounter_one &lt;- new_counter()\ncounter_two &lt;- new_counter()\n\ncounter_one()\n#&gt; [1] 1\ncounter_one()\n#&gt; [1] 2\ncounter_two()\n#&gt; [1] 1\n\n\n\nThe manufactured functions create distinct enclosures of the function factory environment\nAs soon as your function starts managing the state of multiple variables, it‚Äôs better to switch to an object-oriented system like R6"
  },
  {
    "objectID": "slides/10.html#garbage-collection",
    "href": "slides/10.html#garbage-collection",
    "title": "Function factories",
    "section": "Garbage collection",
    "text": "Garbage collection\n\nManufactured functions hold on to variables in the enclosed function factory‚Äôs environment\n\n\n\n\nf1 &lt;- function(n) {\n  x &lt;- runif(n)\n  m &lt;- mean(x)\n  function() m\n}\n\ng1 &lt;- f1(1e6)\nlobstr::obj_size(g1)\n#&gt; 8.00 MB\n\n\n\nf2 &lt;- function(n) {\n  x &lt;- runif(n)\n  m &lt;- mean(x)\n  rm(x)\n  function() m\n}\n\ng2 &lt;- f2(1e6)\nlobstr::obj_size(g2)\n#&gt; 504 B"
  },
  {
    "objectID": "slides/10.html#function-factories-functionals",
    "href": "slides/10.html#function-factories-functionals",
    "title": "Function factories",
    "section": "Function factories + functionals",
    "text": "Function factories + functionals\n\n\n\nCombine functionals and function factories to turn data into many functions.\n\n\nnames &lt;- list(\n  square = 2,\n  cube = 3,\n  root = 1 / 2,\n  cuberoot = 1 / 3,\n  reciprocal = -1\n)\nfuns &lt;- purrr::map(names, power1)\n\nfuns$root(64)\n#&gt; [1] 8\nfuns$root\n#&gt; function (x)\n#&gt; {\n#&gt;     x^exp\n#&gt; }\n#&gt; &lt;bytecode: 0x55ce583c7828&gt;\n#&gt; &lt;environment: 0x55ce5a61cd60&gt;\n\n\nAvoid the funs$ prefix with\n\nwith(funs, root(100))\n#&gt; [1] 10\n\n\n\nattach(funs)\n#&gt; The following objects are\n#&gt; masked _by_ .GlobalEnv:\n#&gt;\n#&gt;     cube, square\nroot(100)\n#&gt; [1] 10\n\n\n\nrlang::env_bind(\n  globalenv(),\n  !!!funs\n)\n\nroot(100)\n#&gt; [1] 10"
  },
  {
    "objectID": "slides/12.html#learning-objectives",
    "href": "slides/12.html#learning-objectives",
    "title": "Intro to OOP and base types",
    "section": "Learning objectives:",
    "text": "Learning objectives:\n\nUnderstand what OOP means‚Äìat the very least for R\nKnow how to discern an object‚Äôs nature‚Äìbase or OO‚Äìand type\n\n\nJohn Chambers, creator of S programming language\n\nSession Info\n\n\nlibrary(\"DiagrammeR\")\n\n\nutils::sessionInfo()\n\n#&gt; R version 4.5.1 (2025-06-13)\n#&gt; Platform: aarch64-apple-darwin20\n#&gt; Running under: macOS Sequoia 15.7.1\n#&gt; \n#&gt; Matrix products: default\n#&gt; BLAS:   /Library/Frameworks/R.framework/Versions/4.5-arm64/Resources/lib/libRblas.0.dylib \n#&gt; LAPACK: /Library/Frameworks/R.framework/Versions/4.5-arm64/Resources/lib/libRlapack.dylib;  LAPACK version 3.12.1\n#&gt; \n#&gt; locale:\n#&gt; [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8\n#&gt; \n#&gt; time zone: Europe/London\n#&gt; tzcode source: internal\n#&gt; \n#&gt; attached base packages:\n#&gt; [1] stats     graphics  grDevices utils     datasets  methods   base     \n#&gt; \n#&gt; other attached packages:\n#&gt; [1] DiagrammeR_1.0.11\n#&gt; \n#&gt; loaded via a namespace (and not attached):\n#&gt;  [1] digest_0.6.37      RColorBrewer_1.1-3 fastmap_1.2.0      xfun_0.53         \n#&gt;  [5] magrittr_2.0.4     glue_1.8.0         knitr_1.50         htmltools_0.5.8.1 \n#&gt;  [9] rmarkdown_2.30     cli_3.6.5          visNetwork_2.1.4   compiler_4.5.1    \n#&gt; [13] tools_4.5.1        evaluate_1.0.5     yaml_2.3.10        rlang_1.1.6       \n#&gt; [17] jsonlite_2.0.0     htmlwidgets_1.6.4"
  },
  {
    "objectID": "slides/12.html#why-oop-is-hard-in-r",
    "href": "slides/12.html#why-oop-is-hard-in-r",
    "title": "Intro to OOP and base types",
    "section": "Why OOP is hard in R",
    "text": "Why OOP is hard in R\n\nMultiple OOP systems exist: S3, R6, S4, and (now/soon) S7.\nMultiple preferences: some users prefer one system; others, another.\nR‚Äôs OOP systems are different enough that prior OOP experience may not transfer well.\n\n\n\n\nXKCD 927"
  },
  {
    "objectID": "slides/12.html#oop-big-idea---polymorphism",
    "href": "slides/12.html#oop-big-idea---polymorphism",
    "title": "Intro to OOP and base types",
    "section": "OOP: Big Idea - Polymorphism",
    "text": "OOP: Big Idea - Polymorphism\nFunction has a single interface (outside), but contains (inside) several class-specific implementations.\n\n# imagine a function with object x as an argument\n# from the outside, users interact with the same function\n# but inside the function, there are provisions to deal with objects of different classes\nsome_function &lt;- function(x) {\n  if is.numeric(x) {\n    # implementation for numeric x\n  } else if is.character(x) {\n    # implementation for character x\n  } ...\n}"
  },
  {
    "objectID": "slides/12.html#oop-big-idea---polymorphism-example",
    "href": "slides/12.html#oop-big-idea---polymorphism-example",
    "title": "Intro to OOP and base types",
    "section": "OOP: Big Idea - Polymorphism example",
    "text": "OOP: Big Idea - Polymorphism example\n\n# data frame, with columns of different types\nsummary(palmerpenguins::penguins[, 1:4])\n\n#&gt;       species          island    bill_length_mm  bill_depth_mm  \n#&gt;  Adelie   :152   Biscoe   :168   Min.   :32.10   Min.   :13.10  \n#&gt;  Chinstrap: 68   Dream    :124   1st Qu.:39.23   1st Qu.:15.60  \n#&gt;  Gentoo   :124   Torgersen: 52   Median :44.45   Median :17.30  \n#&gt;                                  Mean   :43.92   Mean   :17.15  \n#&gt;                                  3rd Qu.:48.50   3rd Qu.:18.70  \n#&gt;                                  Max.   :59.60   Max.   :21.50  \n#&gt;                                  NA's   :2       NA's   :2\n\n\n\n\nImproving summary for character vectors\n\nsummary on character vectors is current pretty useless.\n\nsummary(c(\"Adelie\", \"Adelie\", \"Chinstrap\"))\n\n#&gt;    Length     Class      Mode \n#&gt;         3 character character\n\n\nImprovements are in the works (GitHub, bugzilla)."
  },
  {
    "objectID": "slides/12.html#oop-big-idea---polymorphism-example-1",
    "href": "slides/12.html#oop-big-idea---polymorphism-example-1",
    "title": "Intro to OOP and base types",
    "section": "OOP: Big Idea - Polymorphism example",
    "text": "OOP: Big Idea - Polymorphism example\n\n# statistical model\nlin_fit &lt;- lm(mpg ~ hp, data = mtcars)\nsummary(lin_fit)\n\n#&gt; \n#&gt; Call:\n#&gt; lm(formula = mpg ~ hp, data = mtcars)\n#&gt; \n#&gt; Residuals:\n#&gt;     Min      1Q  Median      3Q     Max \n#&gt; -5.7121 -2.1122 -0.8854  1.5819  8.2360 \n#&gt; \n#&gt; Coefficients:\n#&gt;             Estimate Std. Error t value Pr(&gt;|t|)    \n#&gt; (Intercept) 30.09886    1.63392  18.421  &lt; 2e-16 ***\n#&gt; hp          -0.06823    0.01012  -6.742 1.79e-07 ***\n#&gt; ---\n#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n#&gt; \n#&gt; Residual standard error: 3.863 on 30 degrees of freedom\n#&gt; Multiple R-squared:  0.6024, Adjusted R-squared:  0.5892 \n#&gt; F-statistic: 45.46 on 1 and 30 DF,  p-value: 1.788e-07"
  },
  {
    "objectID": "slides/12.html#oop-big-idea---encapsulation",
    "href": "slides/12.html#oop-big-idea---encapsulation",
    "title": "Intro to OOP and base types",
    "section": "OOP: Big Idea - Encapsulation",
    "text": "OOP: Big Idea - Encapsulation\n\nEncapsulation. Function ‚Äúencapsulates‚Äù‚Äìthat is, encloses in an inviolate capsule‚Äìboth data and how it acts on data. The user doesn‚Äôt need to worry about details of an object because they are encapsulated behind a standard interface.\n\n\n\nREST API comparison\n\nThink of a REST API: a client interacts with with an API only through a set of discrete endpoints (i.e., things to get or set), but the server does not otherwise give access to its internal workings or state. Like with an API, this creates a separation of concerns: OOP functions take inputs and yield results; users only consume those results."
  },
  {
    "objectID": "slides/12.html#objects-have-class",
    "href": "slides/12.html#objects-have-class",
    "title": "Intro to OOP and base types",
    "section": "Objects have class",
    "text": "Objects have class\n\nClass defines:\n\nMethod (i.e., what can be done with object)\nFields (i.e., data that defines an instance of the class)\n\nObjects are an instance of a class\n\n\nA class defines what an object is and methods describe what that object can do."
  },
  {
    "objectID": "slides/12.html#class-is-inherited",
    "href": "slides/12.html#class-is-inherited",
    "title": "Intro to OOP and base types",
    "section": "Class is inherited",
    "text": "Class is inherited\n\nClass is defined:\n\nBy an object‚Äôs class (e.g., ordered factor)\nBy the parent of the object‚Äôs class (e.g., factor)\n\nInheritance matters for method dispatch\n\nIf a method is defined for an object‚Äôs class, use that method\nIf an object doesn‚Äôt have a method, use the method of the parent class\nThe process of finding a method, is called dispatch"
  },
  {
    "objectID": "slides/12.html#oop-in-r-two-paradigms",
    "href": "slides/12.html#oop-in-r-two-paradigms",
    "title": "Intro to OOP and base types",
    "section": "OOP in R: Two Paradigms",
    "text": "OOP in R: Two Paradigms\n1. Encapsulated OOP\n\nMethods belong to objects or classes\nMethod calls typically look like object.method(arg1, arg2)\n\n\n\nCalls communicate encapsulation, since form follows function\n\nForm: object.method(arg1, arg2)\nFunction: for object, apply method for object‚Äôs class with arguments arg1 and arg2"
  },
  {
    "objectID": "slides/12.html#oop-in-r-two-paradigms-1",
    "href": "slides/12.html#oop-in-r-two-paradigms-1",
    "title": "Intro to OOP and base types",
    "section": "OOP in R: Two Paradigms",
    "text": "OOP in R: Two Paradigms\n2. Functional OOP\n\nMethods belong to ‚Äúgeneric‚Äù functions\nFrom the outside, look like regular functions: generic(object, arg2, arg3)\nFrom the inside, components are also functions"
  },
  {
    "objectID": "slides/12.html#concept-map",
    "href": "slides/12.html#concept-map",
    "title": "Intro to OOP and base types",
    "section": "Concept Map",
    "text": "Concept Map\n\n\n\n\n\n\n\n\nMermaid code\n\n\nDiagrammeR::mermaid(\"\ngraph TB\n\nOOP --&gt; encapsulated_OOP\nOOP --&gt; functional_OOP\n\nfunctional_OOP --&gt; S3\nfunctional_OOP --&gt; S4\n\nencapsulated_OOP --&gt; R6\nencapsulated_OOP --&gt; RC\n\")"
  },
  {
    "objectID": "slides/12.html#functional-oop-in-base-r",
    "href": "slides/12.html#functional-oop-in-base-r",
    "title": "Intro to OOP and base types",
    "section": "Functional OOP in base R",
    "text": "Functional OOP in base R\n\nS3S4\n\n\n\nParadigm: functional OOP\nNoteworthy: R‚Äôs first OOP system\nUse case: low-cost solution for common problems\nDownsides: no guarantees\n\n\n\n\nParadigm: functional OOP\nNoteworthy: rewrite of S3, used by Bioconductor\nUse case: ‚Äúmore guarantees and greater encapsulation‚Äù than S3\nDownsides: higher setup cost than S3"
  },
  {
    "objectID": "slides/12.html#encapsulated-oop-in-base-r",
    "href": "slides/12.html#encapsulated-oop-in-base-r",
    "title": "Intro to OOP and base types",
    "section": "Encapsulated OOP in base R",
    "text": "Encapsulated OOP in base R\n\nRC\n\nParadigm: encapsulated OOP\nNoteworthy: special type of S4 object is mutable‚Äìin other words, that can be modified in place (instead of R‚Äôs usual copy-on-modify behavior)\nUse cases: problems that are hard to tackle with functional OOP (in S3 and S4)\nDownsides: harder to reason about (because of modify-in-place logic)"
  },
  {
    "objectID": "slides/12.html#oop-in-packages-various-paradigms",
    "href": "slides/12.html#oop-in-packages-various-paradigms",
    "title": "Intro to OOP and base types",
    "section": "OOP in packages (various paradigms)",
    "text": "OOP in packages (various paradigms)\n\nR6S7protoR.oo\n\n\n\nParadigm: encapsulated OOP\nNoteworthy: resolves issues with RC\n\n\n\n\nParadigm: functional OOP\nNoteworthy:\n\nbest parts of S3 and S4 - ease of S3 with power of S4\nRecently adopted in ggplot2 &gt;= v4.0.0\nSee more in rstudio::conf(2022) talk and the S7 website\n\nLonger-term plan to incorporate into base R\n\n\n\n\nParadigm: prototype OOP\nNoteworthy: OOP style used in ggplot2 &lt; v4.0.0.\n\n\n\n\nParadigm: hybrid functional and encapsulated (?)"
  },
  {
    "objectID": "slides/12.html#sail-the-seas-of-oop",
    "href": "slides/12.html#sail-the-seas-of-oop",
    "title": "Intro to OOP and base types",
    "section": "‚ÄúSail the seas of OOP‚Äù",
    "text": "‚ÄúSail the seas of OOP‚Äù\n\nS Language Object-Oriented Programming\n\n\n\n\nSloop John B ship (left) and Beach Boys album cover (right)"
  },
  {
    "objectID": "slides/12.html#use-sloopotype-to-determine-oop-system",
    "href": "slides/12.html#use-sloopotype-to-determine-oop-system",
    "title": "Intro to OOP and base types",
    "section": "Use sloop::otype to determine OOP system",
    "text": "Use sloop::otype to determine OOP system\n\nlibrary(sloop)\notype(1:10)\n\n#&gt; [1] \"base\"\n\notype(mtcars)\n\n#&gt; [1] \"S3\"\n\nmle_obj &lt;- stats4::mle(function(x = 1) (x - 2) ^ 2)\notype(mle_obj)\n\n#&gt; [1] \"S4\""
  },
  {
    "objectID": "slides/12.html#everything-is-an-object-but-not-everything-is-object-oriented",
    "href": "slides/12.html#everything-is-an-object-but-not-everything-is-object-oriented",
    "title": "Intro to OOP and base types",
    "section": "Everything is an object, but not everything is object oriented",
    "text": "Everything is an object, but not everything is object oriented\n\nbase objects and OO objects are different subsets of objects"
  },
  {
    "objectID": "slides/12.html#you-can-use-functions-to-determine-if-object-is-base-or-oop",
    "href": "slides/12.html#you-can-use-functions-to-determine-if-object-is-base-or-oop",
    "title": "Intro to OOP and base types",
    "section": "You can use functions to determine if object is base or OOP",
    "text": "You can use functions to determine if object is base or OOP\n\nbase::is.object(): TRUE/FALSE for OOP\nsloop::otype(): gives object type: \"base\", \"S3\", etc.\n\n\n# Example 1: a base object\nis.object(1:10)\n\n#&gt; [1] FALSE\n\nsloop::otype(1:10)\n\n#&gt; [1] \"base\"\n\n# Example 2: an OO object\nis.object(mtcars)\n\n#&gt; [1] TRUE\n\nsloop::otype(mtcars)\n\n#&gt; [1] \"S3\""
  },
  {
    "objectID": "slides/12.html#oo-objects-have-a-class-attribute-base-objects-do-not",
    "href": "slides/12.html#oo-objects-have-a-class-attribute-base-objects-do-not",
    "title": "Intro to OOP and base types",
    "section": "OO objects have a ‚Äúclass‚Äù attribute, base objects do not",
    "text": "OO objects have a ‚Äúclass‚Äù attribute, base objects do not\n\n# base object has no class attribute\nM &lt;- matrix(1:4, 2)\nattr(M, \"class\")\n\n#&gt; NULL\n\n\n\n# OO object has one or more classes\nattr(mtcars, \"class\")\n\n#&gt; [1] \"data.frame\"\n\nattr(palmerpenguins::penguins, \"class\")\n\n#&gt; [1] \"tbl_df\"     \"tbl\"        \"data.frame\""
  },
  {
    "objectID": "slides/12.html#be-careful-with-class",
    "href": "slides/12.html#be-careful-with-class",
    "title": "Intro to OOP and base types",
    "section": "Be careful with class()",
    "text": "Be careful with class()\nclass() gives misleading results for base objects.\nIt is not enough to call class() on an object to determine if it is base or OO, as this will return the implicit class (rather than NULL) when there is no class attribute (i.e.¬†\"matrix\", \"array\", \"function\", \"numeric\" or result of typeof()):\n\nclass(1:10)\n\n#&gt; [1] \"integer\"\n\nclass(M)\n\n#&gt; [1] \"matrix\" \"array\"\n\n\nsloop::s3_class() is safer, as it returns the implicit class that the S3 and S4 systems will use to pick methods\n\ns3_class(M)\n\n#&gt; [1] \"matrix\"  \"integer\" \"numeric\""
  },
  {
    "objectID": "slides/12.html#what-about-types",
    "href": "slides/12.html#what-about-types",
    "title": "Intro to OOP and base types",
    "section": "What about types?",
    "text": "What about types?\nOnly OO objects have a ‚Äúclass‚Äù attribute, but every object‚Äìwhether base or OO‚Äìhas a base type\nThere are 25 types.\nThey are most important in C code, so often see them called by their C type names, e.g.¬†NILSXP for NULL."
  },
  {
    "objectID": "slides/12.html#type-examples",
    "href": "slides/12.html#type-examples",
    "title": "Intro to OOP and base types",
    "section": "Type examples",
    "text": "Type examples\n\nVectorsFunctionsEnvironmentsS4Language components\n\n\n\ntypeof(NULL) # NILSXP\n\n#&gt; [1] \"NULL\"\n\ntypeof(c(\"a\", \"b\", \"c\")) # STRSXP\n\n#&gt; [1] \"character\"\n\ntypeof(mtcars) # VECSXP\n\n#&gt; [1] \"list\"\n\ntypeof(1) # REALSXP\n\n#&gt; [1] \"double\"\n\ntypeof(1L) # INTSXP\n\n#&gt; [1] \"integer\"\n\ntypeof(1i) # CPLXSXP\n\n#&gt; [1] \"complex\"\n\n\n\n\n\n# \"normal\" function\nmy_fun &lt;- function(x) { x + 1 }\ntypeof(my_fun) # CLOSXP\n\n#&gt; [1] \"closure\"\n\n# internal function\ntypeof(`[`) # SPECIALSXP\n\n#&gt; [1] \"special\"\n\n# primitive function\ntypeof(sum) # BUILTINSXP\n\n#&gt; [1] \"builtin\"\n\n\n\n\n\ntypeof(globalenv()) # ENVSXP\n\n#&gt; [1] \"environment\"\n\n\n\n\n\nmle_obj &lt;- stats4::mle(function(x = 1) (x - 2) ^ 2)\ntypeof(mle_obj) # S4SXP\n\n#&gt; [1] \"S4\"\n\n\n\n\n\ntypeof(quote(a)) # SYMSXP\n\n#&gt; [1] \"symbol\"\n\ntypeof(quote(a + 1)) # LANGSXP\n\n#&gt; [1] \"language\"\n\ntypeof(formals(my_fun)) # LISTSXP\n\n#&gt; [1] \"pairlist\""
  },
  {
    "objectID": "slides/12.html#concept-map-1",
    "href": "slides/12.html#concept-map-1",
    "title": "Intro to OOP and base types",
    "section": "Concept Map",
    "text": "Concept Map\n\nBase types in R\n\nSankey graph code\n\nThe graph above was made with SankeyMATIC\n// toggle \"Show Values\"\n// set Default Flow Colors from \"each flow's Source\"\n\nbase\\ntypes [8] vectors\nbase\\ntypes [3] functions\nbase\\ntypes [1] environments\nbase\\ntypes [1] S4 OOP\nbase\\ntypes [3] language\\ncomponents\nbase\\ntypes [6] C components\n\nvectors [1] NULL\nvectors [1] logical\nvectors [1] integer\nvectors [1] double\nvectors [1] complex\nvectors [1] character\nvectors [1] list\nvectors [1] raw\n\nfunctions [1] closure\nfunctions [1] special\nfunctions [1] builtin\n\nenvironments [1] environment\n\nS4 OOP [1] S4\n\nlanguage\\ncomponents [1] symbol\nlanguage\\ncomponents [1] language\nlanguage\\ncomponents [1] pairlist\n\nC components [1] externalptr\nC components [1] weakref\nC components [1] bytecode\nC components [1] promise\nC components [1] ...\nC components [1] any"
  },
  {
    "objectID": "slides/12.html#be-careful-about-the-numeric-type",
    "href": "slides/12.html#be-careful-about-the-numeric-type",
    "title": "Intro to OOP and base types",
    "section": "Be careful about the numeric type",
    "text": "Be careful about the numeric type\nR uses ‚Äúnumeric‚Äù to mean three slightly different things:\n\nAlias for double\nIn S3 and S4, as shorthand for integer or double\nis.numeric() tests for objects that behave like numbers\n\nAdvanced R consistently uses numeric to mean an object of type integer or double."
  },
  {
    "objectID": "slides/12.html#numeric-is-treated-as-synonymous-for-double",
    "href": "slides/12.html#numeric-is-treated-as-synonymous-for-double",
    "title": "Intro to OOP and base types",
    "section": "1: ‚Äúnumeric‚Äù is treated as synonymous for double",
    "text": "1: ‚Äúnumeric‚Äù is treated as synonymous for double\n\n# create a double and integeger objects\none &lt;- 1\noneL &lt;- 1L\ntypeof(one)\n\n#&gt; [1] \"double\"\n\ntypeof(oneL)\n\n#&gt; [1] \"integer\"\n\n# check their type after as.numeric()\none |&gt; as.numeric() |&gt; typeof()\n\n#&gt; [1] \"double\"\n\noneL |&gt; as.numeric() |&gt; typeof()\n\n#&gt; [1] \"double\""
  },
  {
    "objectID": "slides/12.html#in-s3-and-s4",
    "href": "slides/12.html#in-s3-and-s4",
    "title": "Intro to OOP and base types",
    "section": "2: in S3 and S4",
    "text": "2: in S3 and S4\n‚Äúnumeric‚Äù is taken as either integer or double, and used when choosing methods:\n\nsloop::s3_class(1)\n\n#&gt; [1] \"double\"  \"numeric\"\n\nsloop::s3_class(1L)\n\n#&gt; [1] \"integer\" \"numeric\""
  },
  {
    "objectID": "slides/12.html#testing-behaviour",
    "href": "slides/12.html#testing-behaviour",
    "title": "Intro to OOP and base types",
    "section": "3: testing behaviour",
    "text": "3: testing behaviour\n\ntypeof(factor(\"x\"))\n\n#&gt; [1] \"integer\"\n\nis.numeric(factor(\"x\"))\n\n#&gt; [1] FALSE"
  },
  {
    "objectID": "slides/14.html#learning-objectives",
    "href": "slides/14.html#learning-objectives",
    "title": "R6",
    "section": "Learning objectives:",
    "text": "Learning objectives:\n\nCreate R6 classes\nRecognize main R6 properties\nAssign R6 methods and fields\nCompare different R6 fields\nShow R6 inheritance pattern\nImplement R6 finalizers\n\n\nlibrary(R6)"
  },
  {
    "objectID": "slides/14.html#r6class-creates-the-r6-reference-object",
    "href": "slides/14.html#r6class-creates-the-r6-reference-object",
    "title": "R6",
    "section": "R6Class creates the R6 reference object",
    "text": "R6Class creates the R6 reference object\n\nEmpty is an environment\n\n\nEmpty &lt;- R6Class(\"Empty\")\nEmpty\n\n#&gt; &lt;Empty&gt; object generator\n#&gt;   Public:\n#&gt;     clone: function (deep = FALSE) \n#&gt;   Parent env: &lt;environment: R_GlobalEnv&gt;\n#&gt;   Locked objects: TRUE\n#&gt;   Locked class: FALSE\n#&gt;   Portable: TRUE"
  },
  {
    "objectID": "slides/14.html#every-r6-object-has-an-s3-class-that-reflects-its-hierarchy-of-r6-classes.",
    "href": "slides/14.html#every-r6-object-has-an-s3-class-that-reflects-its-hierarchy-of-r6-classes.",
    "title": "R6",
    "section": "Every R6 object has an S3 class that reflects its hierarchy of R6 classes.",
    "text": "Every R6 object has an S3 class that reflects its hierarchy of R6 classes.\n\ne &lt;- Empty$new()\nclass(e)\n\n#&gt; [1] \"Empty\" \"R6\""
  },
  {
    "objectID": "slides/14.html#r6-objects-have-methods-not-generics",
    "href": "slides/14.html#r6-objects-have-methods-not-generics",
    "title": "R6",
    "section": "R6 objects have methods, not generics",
    "text": "R6 objects have methods, not generics\n\nadd is a method of the Accumulator object.\nCan‚Äôt use sum and add outside this class\n\n\nAccumulator &lt;- R6Class(\"Accumulator\", list(\n  sum = 0,\n  add = function(x = 1) {\n    self$sum &lt;- self$sum + x\n    invisible(self)\n  }\n))"
  },
  {
    "objectID": "slides/14.html#r6-objects-have-reference-semantics",
    "href": "slides/14.html#r6-objects-have-reference-semantics",
    "title": "R6",
    "section": "R6 objects have reference semantics",
    "text": "R6 objects have reference semantics\n\nUse the $clone() method to copy the object\n\n\nx &lt;- Accumulator$new()\nx$add(4)\nx$sum\n\n#&gt; [1] 4\n\ny &lt;- Accumulator$new()\ny$sum\n\n#&gt; [1] 0\n\nz &lt;- x$clone()\nz$sum\n\n#&gt; [1] 4"
  },
  {
    "objectID": "slides/14.html#r6-methods-can-be-chained-resembling-syntax",
    "href": "slides/14.html#r6-methods-can-be-chained-resembling-syntax",
    "title": "R6",
    "section": "R6 methods can be chained resembling |> syntax",
    "text": "R6 methods can be chained resembling |&gt; syntax\n\nAll side-effect R6 methods should return self invisibly.\nThis allows for method chaining.\n\n\nx$add(10)$add(10)$sum\n\n#&gt; [1] 24\n\nx$\n  add(10)$\n  add(10)$\n  sum\n\n#&gt; [1] 44"
  },
  {
    "objectID": "slides/14.html#print-modifies-the-default-printing-method",
    "href": "slides/14.html#print-modifies-the-default-printing-method",
    "title": "R6",
    "section": "$print() modifies the default printing method",
    "text": "$print() modifies the default printing method\n\nPrettyAccumulator &lt;- R6Class(\"Accumulator\", list(\n  sum = 0,\n  add = function(x = 1) {\n    self$sum &lt;- self$sum + x\n    invisible(self)\n  },\n  print = function(...) {\n    cat(\"Pretty Accumulator Object\\n\")\n    cat(\"  Current sum: \", self$sum,\"\\n\")\n    invisible(self)\n  }\n))\np &lt;- PrettyAccumulator$new()\np$\n  add(2)$\n  add(2)$\n  print()\n\n#&gt; Pretty Accumulator Object\n#&gt;   Current sum:  4"
  },
  {
    "objectID": "slides/14.html#initialize-overides-the-default-behaviour-of-new",
    "href": "slides/14.html#initialize-overides-the-default-behaviour-of-new",
    "title": "R6",
    "section": "$initialize() overides the default behaviour of $new()",
    "text": "$initialize() overides the default behaviour of $new()\n\nPerson &lt;- R6Class(\"Person\",list(\n  name = NULL,\n  initialize = function(name) {\n    stopifnot(is.character(name))\n    stopifnot(length(name)==1)\n    self$name &lt;- name\n    invisible(self)\n  },\n  print = function(...) {\n    cat(\"Person\\n\")\n    cat(\"   name: \",self$name,\"\\n\")\n    invisible(self)\n  }\n))\nPerson$new(\"Nick\")\n\n#&gt; Person\n#&gt;    name:  Nick\n\nPerson$new(42)\n\n#&gt; Error in initialize(...): is.character(name) is not TRUE"
  },
  {
    "objectID": "slides/14.html#set-assigns-methods-after-creating-r6-objects",
    "href": "slides/14.html#set-assigns-methods-after-creating-r6-objects",
    "title": "R6",
    "section": "$set() assigns methods after creating R6 objects",
    "text": "$set() assigns methods after creating R6 objects\n\n\n\n\n\n\nNote\n\n\nKeep in mind methods added with $set() are only available with new objects.\n\n\n\n\nAccumulator &lt;- R6Class(\"Accumulator\")\nAccumulator$set(\"public\", \"sum\", 0)\nAccumulator$set(\"public\", \"add\", function(x = 1) {\n  self$sum &lt;- self$sum + x\n  invisible(self)\n})"
  },
  {
    "objectID": "slides/14.html#accessing-private-r6-fields-yield-null",
    "href": "slides/14.html#accessing-private-r6-fields-yield-null",
    "title": "R6",
    "section": "Accessing private R6 fields yield NULL",
    "text": "Accessing private R6 fields yield NULL\n\nTransaction &lt;- R6Class(\"Transaction\", \n  public = list(\n    last_transaction = 0,\n    initialize = function(owner) {\n      private$owner &lt;- owner\n      invisible(self)\n    },\n    deposit = function(amount) {\n      private$balance &lt;- private$balance + amount\n      self$last_transaction &lt;- amount\n      invisible(self)\n    },\n    withdraw = function(amount) {\n      private$balance &lt;- private$balance - amount\n      self$last_transaction &lt;- -amount\n      invisible(self)\n    },\n    print = function(...) {\n      cat(\"Transactions by \",private$owner,\"\\n\")\n      cat(\"  Last transaction: \",self$last_transaction,\"\\n\")\n      cat(\"  Balance: \",private$balance,\"\\n\")\n    }\n  ),\n  private = list(\n    owner = NULL,\n    balance = 0\n  )\n)\nt &lt;- Transaction$new(\"Nick\")\nt$owner\n\n#&gt; NULL"
  },
  {
    "objectID": "slides/14.html#public-methods-like-print-can-reveal-private-fields",
    "href": "slides/14.html#public-methods-like-print-can-reveal-private-fields",
    "title": "R6",
    "section": "Public methods like $print() can reveal private fields",
    "text": "Public methods like $print() can reveal private fields\n\nt$balance\n\n#&gt; NULL\n\nt$deposit(20)$withdraw(13)$withdraw(2)\nt$last_transaction\n\n#&gt; [1] -2\n\nt\n\n#&gt; Transactions by  Nick \n#&gt;   Last transaction:  -2 \n#&gt;   Balance:  5"
  },
  {
    "objectID": "slides/14.html#active-fields-hide-complex-method-calls",
    "href": "slides/14.html#active-fields-hide-complex-method-calls",
    "title": "R6",
    "section": "Active fields hide complex method calls",
    "text": "Active fields hide complex method calls\n\nRando &lt;- R6::R6Class(\"Rando\", active = list(\n  random = function(value) {\n    if (missing(value)) {\n      runif(1)  \n    } else {\n      stop(\"Can't set `$random`\", call. = FALSE)\n    }\n  }\n))\nx &lt;- Rando$new()\nx$random\n\n#&gt; [1] 0.7535612\n\nx$random\n\n#&gt; [1] 0.04193666\n\nx$random\n\n#&gt; [1] 0.7111096"
  },
  {
    "objectID": "slides/14.html#active-fields-hide-complexity-like-validating-user-input",
    "href": "slides/14.html#active-fields-hide-complexity-like-validating-user-input",
    "title": "R6",
    "section": "Active fields hide complexity like validating user input",
    "text": "Active fields hide complexity like validating user input\n\nPerson &lt;- R6Class(\"Person\", \n  private = list(\n    .age = NA,\n    .name = NULL\n  ),\n  active = list(\n    age = function(value) {\n      if (missing(value)) {\n        private$.age\n      } else {\n        stop(\"`$age` is read only\", call. = FALSE)\n      }\n    },\n    name = function(value) {\n      if (missing(value)) {\n        private$.name\n      } else {\n        stopifnot(is.character(value), length(value) == 1)\n        private$.name &lt;- value\n        self\n      }\n    }\n  ),\n  public = list(\n    initialize = function(name, age = NA) {\n      private$.name &lt;- name\n      private$.age &lt;- age\n    }\n  )\n)\n\nnick &lt;- Person$new(\"Nick\", age = 33)\nnick$name\n\n#&gt; [1] \"Nick\"\n\nnick$name &lt;- 10\n\n#&gt; Error in (function (value) : is.character(value) is not TRUE\n\nnick$age &lt;- 20\n\n#&gt; Error: `$age` is read only"
  },
  {
    "objectID": "slides/14.html#inherit-allows-providing-behavior-from-existing-r6-classes",
    "href": "slides/14.html#inherit-allows-providing-behavior-from-existing-r6-classes",
    "title": "R6",
    "section": "inherit allows providing behavior from existing R6 classes",
    "text": "inherit allows providing behavior from existing R6 classes\n\nThe add method was modified for a more verbose behavior\nsuper$add() is the add method call from the inherited object\n\n\nAccumulatorChatty &lt;- R6Class(\"AccumulatorChatty\", \n  inherit = Accumulator,\n  public = list(\n    add = function(x = 1) {\n      cat(\"Adding \", x, \"\\n\", sep = \"\")\n      super$add(x = x)\n    }\n  )\n)\n\nx2 &lt;- AccumulatorChatty$new()\nx2$add(10)$add(1)$sum\n\n#&gt; Adding 10\n#&gt; Adding 1\n\n\n#&gt; [1] 11"
  },
  {
    "objectID": "slides/14.html#finalize-deletesunlinks-anything-created-by-the-r6-object",
    "href": "slides/14.html#finalize-deletesunlinks-anything-created-by-the-r6-object",
    "title": "R6",
    "section": "$finalize() deletes/unlinks anything created by the R6 object",
    "text": "$finalize() deletes/unlinks anything created by the R6 object\n\nA &lt;- R6Class(\"A\", private = list(\n  finalize = function() {\n    print(\"Finalizer has been called!\")\n  }\n))\n\nobj &lt;- A$new()\n\nrm(obj); gc()\n\n#&gt; [1] \"Finalizer has been called!\"\n\n\n#&gt;           used (Mb) gc trigger (Mb) max used (Mb)\n#&gt; Ncells  686302 36.7    1511162 80.8  1511162 80.8\n#&gt; Vcells 1261105  9.7    8388608 64.0  2049170 15.7"
  },
  {
    "objectID": "slides/15b.html#learning-objectives",
    "href": "slides/15b.html#learning-objectives",
    "title": "S7",
    "section": "Learning objectives",
    "text": "Learning objectives\n\nRecognize the challenges with S3 and S4 that motivated development of S7\nCreate S7 classes\nDefine custom validators for S7 classes and properties\nCreate S7 generics and methods\nUse S7 with S3 and/or S4\n\n\nlibrary(S7)"
  },
  {
    "objectID": "slides/15b.html#s7-resolves-challenges-with-s3",
    "href": "slides/15b.html#s7-resolves-challenges-with-s3",
    "title": "S7",
    "section": "S7 resolves challenges with S3",
    "text": "S7 resolves challenges with S3\n\nS3 has no formal class definitions\nS3 methods are difficult to find\nS3 properties are in attributes, but attr() does fuzzy matching\nS3 method dispatch via UseMethod() is fuzzy\n\n\n‚ÄúNow for some obscure details that need to appear somewhere‚Äù ‚Äî?UseMethod\n\n\nNextMethod() depends on what‚Äôs loaded\nConversion between S3 classes is fuzzy (vs S7::convert() generic)"
  },
  {
    "objectID": "slides/15b.html#s7-resolves-challenges-with-s4",
    "href": "slides/15b.html#s7-resolves-challenges-with-s4",
    "title": "S7",
    "section": "S7 resolves challenges with S4",
    "text": "S7 resolves challenges with S4\n\nS4‚Äôs multiple inheritance causes more problems than it solves\nS4‚Äôs method dispatch is smart but hard to predict (S7 is explicit)\nS4 is clean break from S3, made it hard to switch from S3 to S4\nS4 pretends users can‚Äôt use @ to access slots, but they do it anyway"
  },
  {
    "objectID": "slides/15b.html#s7-extends-s3-and-replaces-s4",
    "href": "slides/15b.html#s7-extends-s3-and-replaces-s4",
    "title": "S7",
    "section": "S7 extends S3 and replaces S4",
    "text": "S7 extends S3 and replaces S4\n\nName comes from S3 + S4 = S7, but‚Ä¶\n\nS7 objects are S3 objects\nS7 objects are not S4 objects\nBut there‚Äôs some overlap (see last section)"
  },
  {
    "objectID": "slides/15b.html#define-s7-classes-with-s7new_class",
    "href": "slides/15b.html#define-s7-classes-with-s7new_class",
    "title": "S7",
    "section": "Define S7 classes with S7::new_class()",
    "text": "Define S7 classes with S7::new_class()\n\nclass_person &lt;- new_class(\n  \"Person\",\n  properties = list(name = class_character, age = class_numeric)\n)\nme &lt;- class_person(name = \"Jon\", age = 50)\nme\n\n#&gt; &lt;Person&gt;\n#&gt;  @ name: chr \"Jon\"\n#&gt;  @ age : num 50\n\nS7_inherits(me, class_person)\n\n#&gt; [1] TRUE\n\nclass(me)\n\n#&gt; [1] \"Person\"    \"S7_object\"\n\ninherits(me, \"Person\")\n\n#&gt; [1] TRUE\n\n\n\n\nVignette shows same name for the class object and the 1st arg, but in practice I find it safer to differentiate them (in case you use the class as a property of another class).\n\nNotice that you use class_character, not character; I think that‚Äôs connected to the issues I had with name matching\n\nEquivalent to constructor + validator + helper from S3 chapter\n\nWe‚Äôll see this more explicitly later\n\nEquivalent to setClass() + new() + setValidity() from S4 chapter\nS3 methods will dispatch properly for this object."
  },
  {
    "objectID": "slides/15b.html#access-s7-object-properties-with",
    "href": "slides/15b.html#access-s7-object-properties-with",
    "title": "S7",
    "section": "Access S7 object properties with @",
    "text": "Access S7 object properties with @\n\nme@name\n\n#&gt; [1] \"Jon\"\n\nme@age\n\n#&gt; [1] 50\n\n\n\n\nLike S3 attributes, but attr() is fuzzy, and S3 attributes are less formally defined.\nLike S4 slots, but S4 users are discouraged from using @ directly, and S4 @ doesn‚Äôt trigger validation (see next)."
  },
  {
    "objectID": "slides/15b.html#s7-objects-are-validated-during-construction-and-on-property-assignment",
    "href": "slides/15b.html#s7-objects-are-validated-during-construction-and-on-property-assignment",
    "title": "S7",
    "section": "S7 objects are validated during construction and on property assignment",
    "text": "S7 objects are validated during construction and on property assignment\n\nme@age &lt;- \"fifty\"\n\n#&gt; Error: &lt;Person&gt;@age must be &lt;integer&gt; or &lt;double&gt;, not &lt;character&gt;\n\nus &lt;- class_person(name = 1:2, age = c(\"fifty\", \"forty-nine\"))\n\n#&gt; Error: &lt;Person&gt; object properties are invalid:\n#&gt; - @name must be &lt;character&gt;, not &lt;integer&gt;\n#&gt; - @age must be &lt;integer&gt; or &lt;double&gt;, not &lt;character&gt;"
  },
  {
    "objectID": "slides/15b.html#validator-argument-customizes-validation",
    "href": "slides/15b.html#validator-argument-customizes-validation",
    "title": "S7",
    "section": "validator argument customizes validation",
    "text": "validator argument customizes validation\n\nclass_person &lt;- new_class(\n  \"Person\",\n  properties = list(name = class_character, age = class_numeric),\n  validator = function(self) {\n    if (length(self@name) != length(self@age)) {\n      \"@name and @age must be the same length\"\n    }\n  }\n)\nus &lt;- class_person(name = c(\"Jon\", \"Leyla\"), age = c(50, -5, 49))\n\n#&gt; Error: &lt;Person&gt; object is invalid:\n#&gt; - @name and @age must be the same length\n\nme &lt;- class_person(\"Jon\", 50)\nme@age &lt;- 50:60\n\n#&gt; Error: &lt;Person&gt; object is invalid:\n#&gt; - @name and @age must be the same length\n\n\n\nCan return more than one string."
  },
  {
    "objectID": "slides/15b.html#set-properties-all-at-once-to-avoid-intermediate-invalid-states",
    "href": "slides/15b.html#set-properties-all-at-once-to-avoid-intermediate-invalid-states",
    "title": "S7",
    "section": "Set properties all at once to avoid intermediate invalid states",
    "text": "Set properties all at once to avoid intermediate invalid states\n\nus &lt;- me\nus@name &lt;- c(\"Jon\", \"Leyla\")\n\n#&gt; Error: &lt;Person&gt; object is invalid:\n#&gt; - @name and @age must be the same length\n\n# Quick S3 method to demonstrate\nc.Person &lt;- function(x, y) {\n  props(x) &lt;- list(name = c(x@name, y@name), age = c(x@age, y@age))\n  x\n}\nus &lt;- c(me, class_person(\"Leyla\", 49))\nus\n\n#&gt; &lt;Person&gt;\n#&gt;  @ name: chr [1:2] \"Jon\" \"Leyla\"\n#&gt;  @ age : num [1:2] 50 49\n\n\n\nThis is also a preview of why S7 is easier to adopt in an S3 world"
  },
  {
    "objectID": "slides/15b.html#s7new_property-defines-custom-property-types",
    "href": "slides/15b.html#s7new_property-defines-custom-property-types",
    "title": "S7",
    "section": "S7::new_property() defines custom property types",
    "text": "S7::new_property() defines custom property types\n\nprop_positive &lt;- new_property(\n  class = class_numeric,\n  validator = function(value) {\n    if (any(value &lt;= 0)) \"must be positive\"\n  }\n)\nclass_person &lt;- new_class(\n  \"Person\",\n  properties = list(name = class_character, age = prop_positive),\n  validator = function(self) {\n    if (length(self@name) != length(self@age)) {\n      \"@name and @age must be the same length\"\n    }\n  }\n)\nus &lt;- class_person(name = c(\"Jon\", \"Leyla\"), age = c(50, -5))\n\n#&gt; Error: &lt;Person&gt; object properties are invalid:\n#&gt; - @age must be positive\n\n\n\nCan also use this to set default values"
  },
  {
    "objectID": "slides/15b.html#properties-can-be-computed",
    "href": "slides/15b.html#properties-can-be-computed",
    "title": "S7",
    "section": "Properties can be computed",
    "text": "Properties can be computed\n\nclass_circle &lt;- new_class(\n  \"Circle\",\n  properties = list(\n    radius = class_numeric,\n    area = new_property(\n      class = class_numeric,\n      getter = function(self) {\n        pi * self@radius^2\n      }\n    )\n  )\n)\nc1 &lt;- class_circle(radius = 1)\nc1@area == pi\n\n#&gt; [1] TRUE\n\nc1@radius &lt;- 2\nc1@area == 4*pi\n\n#&gt; [1] TRUE"
  },
  {
    "objectID": "slides/15b.html#properties-can-be-fully-dynamic",
    "href": "slides/15b.html#properties-can-be-fully-dynamic",
    "title": "S7",
    "section": "Properties can be fully dynamic",
    "text": "Properties can be fully dynamic\n\nclass_circle2 &lt;- new_class(\n  \"Circle\",\n  properties = list(\n    radius = class_numeric,\n    area = new_property(\n      class = class_numeric,\n      getter = function(self) pi * self@radius^2,\n      setter = function(self, value) {\n        if (!length(value)) return(self)\n        self@radius &lt;- sqrt(value / pi)\n        self\n      }\n    )\n  )\n)\nc2 &lt;- class_circle2(radius = 1)\nc2@area\n\n#&gt; [1] 3.141593\n\nc2@area &lt;- 4*pi\nc2@radius\n\n#&gt; [1] 2\n\nc2@radius &lt;- 3\nc2@area == 9*pi\n\n#&gt; [1] TRUE\n\n\n\n\nThis starts to feel kinda encapsulated like we‚Äôll see in R6\nStill works with S3-style multimethods, though"
  },
  {
    "objectID": "slides/15b.html#constructor-argument-customizes-object-creation",
    "href": "slides/15b.html#constructor-argument-customizes-object-creation",
    "title": "S7",
    "section": "constructor argument customizes object creation",
    "text": "constructor argument customizes object creation\n\n(it might be nice to have a slide on this but we don‚Äôt yet)"
  },
  {
    "objectID": "slides/15b.html#define-s7-generics-methods-with-s7new_generic-and-s7new_method",
    "href": "slides/15b.html#define-s7-generics-methods-with-s7new_generic-and-s7new_method",
    "title": "S7",
    "section": "Define S7 generics & methods with S7::new_generic() and S7::new_method()",
    "text": "Define S7 generics & methods with S7::new_generic() and S7::new_method()\n\nare_old &lt;- new_generic(\"are_old\", \"x\")\nmethod(are_old, class_person) &lt;- function(x) {\n  x@age &gt;= 40 & x@name != \"Leyla\"\n}\nus\n\n#&gt; &lt;Person&gt;\n#&gt;  @ name: chr [1:2] \"Jon\" \"Leyla\"\n#&gt;  @ age : num [1:2] 50 49\n\nare_old(us)\n\n#&gt; [1]  TRUE FALSE"
  },
  {
    "objectID": "slides/15b.html#s7-method-dispatch-is-similar-to-s3",
    "href": "slides/15b.html#s7-method-dispatch-is-similar-to-s3",
    "title": "S7",
    "section": "S7 method dispatch is similar to S3",
    "text": "S7 method dispatch is similar to S3\n\nclass_geek &lt;- new_class(\n  \"Geek\",\n  parent = class_person\n)\nme &lt;- class_geek(\"Jon\", 50)\nare_old(me) # Dispatches on \"Person\"\n\n#&gt; [1] TRUE"
  },
  {
    "objectID": "slides/15b.html#s7-method-chaining-is-explicit",
    "href": "slides/15b.html#s7-method-chaining-is-explicit",
    "title": "S7",
    "section": "S7 method chaining is explicit",
    "text": "S7 method chaining is explicit\n\nmethod(are_old, class_geek) &lt;- function(x) {\n  cat(\"Checking if geeks are old...\\n\")\n  are_old(super(x, class_person)) # Must specify which parent class to use\n}\nare_old(me)\n\n#&gt; Checking if geeks are old...\n\n\n#&gt; [1] TRUE"
  },
  {
    "objectID": "slides/15b.html#s7-generics-allow-for-multiple-dispatch",
    "href": "slides/15b.html#s7-generics-allow-for-multiple-dispatch",
    "title": "S7",
    "section": "S7 generics allow for multiple dispatch",
    "text": "S7 generics allow for multiple dispatch\n\ncombine &lt;- new_generic(\"combine\", c(\"x\", \"y\"))\nmethod(combine, list(class_person, class_person)) &lt;- function(x, y) {\n  class_person(\n    name = c(x@name, y@name),\n    age = c(x@age, y@age)\n  )\n}\nhw &lt;- class_geek(\"Hadley\", 46)\ncombine(us, hw)\n\n#&gt; &lt;Person&gt;\n#&gt;  @ name: chr [1:3] \"Jon\" \"Leyla\" \"Hadley\"\n#&gt;  @ age : num [1:3] 50 49 46\n\ncombine(me, hw)\n\n#&gt; &lt;Person&gt;\n#&gt;  @ name: chr [1:2] \"Jon\" \"Hadley\"\n#&gt;  @ age : num [1:2] 50 46\n\nmethod(combine, list(class_geek, class_geek)) &lt;- function(x, y) {\n  combined_person &lt;- combine(\n    super(x, class_person),\n    super(y, class_person)\n  )\n  class_geek(\n    name = combined_person@name,\n    age = combined_person@age\n  )\n}\ncombine(me, hw)\n\n#&gt; &lt;Geek&gt;\n#&gt;  @ name: chr [1:2] \"Jon\" \"Hadley\"\n#&gt;  @ age : num [1:2] 50 46\n\n\n\nclass_any matches any class\nclass_missing for missing arguments"
  },
  {
    "objectID": "slides/15b.html#compatibility-with-s3",
    "href": "slides/15b.html#compatibility-with-s3",
    "title": "S7",
    "section": "Compatibility with S3",
    "text": "Compatibility with S3\n\nclass() for S3 classes, S7_class() for S7 class constructor\nS7 properties are attributes (so old code that expects those will work)\nS7 can register methods for:\n\nS7 class + S3 generic\nS3 class + S7 generic\n\nS7 classes can inherit from S3 classes\nS3 classes can inherit from S7 classes"
  },
  {
    "objectID": "slides/15b.html#compatibility-with-s4",
    "href": "slides/15b.html#compatibility-with-s4",
    "title": "S7",
    "section": "Compatibility with S4",
    "text": "Compatibility with S4\n\nS7 classes cannot inherit from S4 classes\nS4 classes can inherit from S7 classes\nS7 can register methods for:\n\nS7 class + S4 generic\nS4 class + S7 generic\n\nOut of scope: Both support class unions\n\n\n\nI didn‚Äôt try any S4 + S7 code, and there‚Äôs a typo (I think) in that second bullet on the site (it says ‚ÄúS4 classes can inherit from S3 classes‚Äù)"
  },
  {
    "objectID": "slides/17.html#learning-objectives",
    "href": "slides/17.html#learning-objectives",
    "title": "Metaprogramming intro and big picture",
    "section": "Learning objectives:",
    "text": "Learning objectives:\n\nCapture code as data using expressions\nInspect code as abstract syntax trees\nGenerate and execute code programmatically\nUse data frames as execution environments\nRecognize why quosures are useful\n\n\nlibrary(rlang)\nlibrary(lobstr)"
  },
  {
    "objectID": "slides/17.html#metaprogramming-uses-code-as-data",
    "href": "slides/17.html#metaprogramming-uses-code-as-data",
    "title": "Metaprogramming intro and big picture",
    "section": "Metaprogramming uses code as data",
    "text": "Metaprogramming uses code as data\n\nMetaprogramming: code is data that can be inspected and modified programmatically\nMetaprogramming allow us to write library(purrr) instead of library(\"purrr\")"
  },
  {
    "objectID": "slides/17.html#nse-allows-us-to-write-functions-that-behave-differently-than-base-r",
    "href": "slides/17.html#nse-allows-us-to-write-functions-that-behave-differently-than-base-r",
    "title": "Metaprogramming intro and big picture",
    "section": "NSE allows us to write functions that behave differently than base R",
    "text": "NSE allows us to write functions that behave differently than base R\nNon-standard evaluation (NSE) ‚ûú not telling R where an object comes from?\n\n# Calling a vector\nmtcars$cyl                 # Standard\nwith(mtcars, cyl)          # Non-standard (base)\nmtcars |&gt; dplyr::pull(cyl) # Non-standard (tidyverse)\n\n# Filtering df\nmtcars[mtcars$cyl == 6,]          # Standard\nsubset(mtcars, cyl == 6)          # Non-standard (base)\nmtcars |&gt; dplyr::filter(cyl == 6) # Non-standard (tidyverse)\n\nmtcars$cyl v/s cyl"
  },
  {
    "objectID": "slides/17.html#nse-is-a-confusing-term",
    "href": "slides/17.html#nse-is-a-confusing-term",
    "title": "Metaprogramming intro and big picture",
    "section": "NSE is a confusing term",
    "text": "NSE is a confusing term\nNon-standard evaluation is commonly used to describe the behaviour of R functions, but‚Ä¶\n\nNSE is a property of the arguments, not the function\nIt‚Äôs confusing to define something by what it‚Äôs not"
  },
  {
    "objectID": "slides/17.html#tidy-evaluation-is-the-rlang-version-of-nse",
    "href": "slides/17.html#tidy-evaluation-is-the-rlang-version-of-nse",
    "title": "Metaprogramming intro and big picture",
    "section": "‚ÄúTidy evaluation‚Äù is the rlang version of NSE",
    "text": "‚ÄúTidy evaluation‚Äù is the rlang version of NSE\n\n‚ÄúSpecifically, this book focuses on tidy evaluation. Tidy evaluation is implemented in the rlang package, and I‚Äôll use rlang extensively in these chapters. This will allow you to focus on the big ideas, without being distracted by the quirks of implementation that arise from R‚Äôs history‚Äù"
  },
  {
    "objectID": "slides/17.html#metaprogramming-in-r-involves-7-big-ideas",
    "href": "slides/17.html#metaprogramming-in-r-involves-7-big-ideas",
    "title": "Metaprogramming intro and big picture",
    "section": "Metaprogramming in R involves 7 big ideas",
    "text": "Metaprogramming in R involves 7 big ideas\n\nCode is data\nCode is a tree\nCode can generate code\nEvaluation runs code\nCan customize evaluation with functions\nCan customize evaluation with data\nQuosures are your new friend"
  },
  {
    "objectID": "slides/17.html#code-is-captured-as-data-in-expressions",
    "href": "slides/17.html#code-is-captured-as-data-in-expressions",
    "title": "Metaprogramming intro and big picture",
    "section": "Code is captured as data in expressions",
    "text": "Code is captured as data in expressions\n\nexpression: captured code (call, symbol, constant, or pairlist)\nSeparating our description of the action from the action itself (recipe and dish analogy?)\n\nUse rlang::expr() to capture code directly\n\nexpr(mean(x, na.rm = TRUE))\n\n#&gt; mean(x, na.rm = TRUE)\n\n\nUse rlang::enexpr() to capture code indirectly\n\ncapture_it &lt;- function(x) { # 'automatically quotes first argument'\n  enexpr(x)\n}\ncapture_it(a + b + c)\n\n#&gt; a + b + c"
  },
  {
    "objectID": "slides/17.html#captured-code-is-like-a-list",
    "href": "slides/17.html#captured-code-is-like-a-list",
    "title": "Metaprogramming intro and big picture",
    "section": "Captured code is like a list",
    "text": "Captured code is like a list\n\nf &lt;- expr(f(x = 1, y = 2))\nnames(f)\n\n#&gt; [1] \"\"  \"x\" \"y\"\n\nf[[1]]  # Function name\n\n#&gt; f\n\nf[[2]]  # First argument; equivalent to f$x\n\n#&gt; [1] 1\n\nf[[3]]  # Second argument; equivalent to f$y\n\n#&gt; [1] 2"
  },
  {
    "objectID": "slides/17.html#expressions-can-be-modified-like-lists",
    "href": "slides/17.html#expressions-can-be-modified-like-lists",
    "title": "Metaprogramming intro and big picture",
    "section": "Expressions can be modified like lists",
    "text": "Expressions can be modified like lists\n\nf &lt;- expr(f(x = 1, y = 2))\n\nff &lt;- fff &lt;- f   # Create two copies\n\nff$z &lt;- 3        # Add an argument to one\nfff[[2]] &lt;- NULL # Remove an argument from another\n\nAnd let‚Äôs take a look‚Ä¶\n\nf\n\n#&gt; f(x = 1, y = 2)\n\nff\n\n#&gt; f(x = 1, y = 2, z = 3)\n\nfff\n\n#&gt; f(y = 2)"
  },
  {
    "objectID": "slides/17.html#code-is-represented-as-a-tree",
    "href": "slides/17.html#code-is-represented-as-a-tree",
    "title": "Metaprogramming intro and big picture",
    "section": "Code is represented as a tree",
    "text": "Code is represented as a tree\n\nAbstract syntax tree (AST) ‚ûú almost every language represents code as a tree\nUse lobstr::ast() to inspect these code trees\n\n\nast(f1(f2(a, b), f3(1))) # Regular (prefix) functions\n\n#&gt; ‚ñà‚îÄf1 \n#&gt; ‚îú‚îÄ‚ñà‚îÄf2 \n#&gt; ‚îÇ ‚îú‚îÄa \n#&gt; ‚îÇ ‚îî‚îÄb \n#&gt; ‚îî‚îÄ‚ñà‚îÄf3 \n#&gt;   ‚îî‚îÄ1\n\nast(1 + 2 * 3) # Infix functions\n\n#&gt; ‚ñà‚îÄ`+` \n#&gt; ‚îú‚îÄ1 \n#&gt; ‚îî‚îÄ‚ñà‚îÄ`*` \n#&gt;   ‚îú‚îÄ2 \n#&gt;   ‚îî‚îÄ3"
  },
  {
    "objectID": "slides/17.html#asts-can-have-different-shapes",
    "href": "slides/17.html#asts-can-have-different-shapes",
    "title": "Metaprogramming intro and big picture",
    "section": "ASTs can have different shapes",
    "text": "ASTs can have different shapes\n\nvct &lt;- 1:100 # Dummy vector\n\nast(mean(x = vct)) # One argument\n\n#&gt; ‚ñà‚îÄmean \n#&gt; ‚îî‚îÄx = vct\n\nast(mean(x = vct, trim = 0.1, na.rm = TRUE)) # Multiple arguments\n\n#&gt; ‚ñà‚îÄmean \n#&gt; ‚îú‚îÄx = vct \n#&gt; ‚îú‚îÄtrim = 0.1 \n#&gt; ‚îî‚îÄna.rm = TRUE\n\nast(round(x = mean(x = vct, trim = 0.1, na.rm = TRUE), digits = 0)) # Nested function\n\n#&gt; ‚ñà‚îÄround \n#&gt; ‚îú‚îÄx = ‚ñà‚îÄmean \n#&gt; ‚îÇ     ‚îú‚îÄx = vct \n#&gt; ‚îÇ     ‚îú‚îÄtrim = 0.1 \n#&gt; ‚îÇ     ‚îî‚îÄna.rm = TRUE \n#&gt; ‚îî‚îÄdigits = 0"
  },
  {
    "objectID": "slides/17.html#rlang-introduces-2-3-main-tools-for-generating-code",
    "href": "slides/17.html#rlang-introduces-2-3-main-tools-for-generating-code",
    "title": "Metaprogramming intro and big picture",
    "section": "rlang introduces 2 3 main tools for generating code",
    "text": "rlang introduces 2 3 main tools for generating code\n\nrlang::call2()\n!! (‚Äúbang-bang‚Äù) - unquote operator\n{{ }} (‚Äúcurly-curly‚Äù) - embrace operator (introduced after this book was published, equivalent to !!enquo())"
  },
  {
    "objectID": "slides/17.html#call2-constructs-function-calls",
    "href": "slides/17.html#call2-constructs-function-calls",
    "title": "Metaprogramming intro and big picture",
    "section": "call2() constructs function calls",
    "text": "call2() constructs function calls\n\nrlang::call2() constructs a function call from its components ‚ûú the function to call, and the arguments to call it with.\n\n\ncall2(\"f\", 1, 2, 3)\n\n#&gt; f(1, 2, 3)\n\n\n\nGoing backwards from the tree, can use functions to create calls\n\n\ncall2(\"f1\", call2(\"f2\", \"a\", \"b\"), call2(\"f3\", 1))\n\n#&gt; f1(f2(\"a\", \"b\"), f3(1))\n\ncall2(\"+\", 1, call2(\"*\", 2, 3))\n\n#&gt; 1 + 2 * 3"
  },
  {
    "objectID": "slides/17.html#call2-can-build-complex-calls",
    "href": "slides/17.html#call2-can-build-complex-calls",
    "title": "Metaprogramming intro and big picture",
    "section": "call2() can build complex calls",
    "text": "call2() can build complex calls\n\nvct &lt;- 1:100 # Dummy vector\n\ncall2(\"mean\", x = vct, trim = 0.1, na.rm = TRUE) # Single function\n\n#&gt; mean(x = 1:100, trim = 0.1, na.rm = TRUE)\n\ncall2(\"round\", \n  x = call2(\"mean\", x = vct, trim = 0.1, na.rm = TRUE), \n  digits = 0\n) # Nested function\n\n#&gt; round(x = mean(x = 1:100, trim = 0.1, na.rm = TRUE), digits = 0)"
  },
  {
    "objectID": "slides/17.html#injects-expressions",
    "href": "slides/17.html#injects-expressions",
    "title": "Metaprogramming intro and big picture",
    "section": "!! injects expressions",
    "text": "!! injects expressions\n!! (‚Äúbang-bang‚Äù) - unquote operator\n\ninserts previously defined expressions into the current one\n\n\nxx &lt;- expr(x + x)\nyy &lt;- expr(y + y)\nexpr(xx / yy)     # Nope!\n\n#&gt; xx/yy\n\nexpr(!!xx / !!yy) # Yup!\n\n#&gt; (x + x)/(y + y)"
  },
  {
    "objectID": "slides/17.html#we-can-capture-user-input-and-generate-code",
    "href": "slides/17.html#we-can-capture-user-input-and-generate-code",
    "title": "Metaprogramming intro and big picture",
    "section": "We can capture user input and generate code",
    "text": "We can capture user input and generate code\n\ncv &lt;- function(var) {\n  var &lt;- enexpr(var)            # Get user's expression\n  expr(sd(!!var) / mean(!!var)) # Insert user's expression\n}\n\ncv(x)\n\n#&gt; sd(x)/mean(x)\n\ncv(x + y)\n\n#&gt; sd(x + y)/mean(x + y)"
  },
  {
    "objectID": "slides/17.html#without-user-input-is-not-inserted",
    "href": "slides/17.html#without-user-input-is-not-inserted",
    "title": "Metaprogramming intro and big picture",
    "section": "Without !! user input is not inserted",
    "text": "Without !! user input is not inserted\n\ncv2 &lt;- function(var) {\n  var &lt;- enexpr(var)        # Get user's expression\n  expr(sd(var) / mean(var)) # Insert user's expression\n}\n\ncv2(x)\n\n#&gt; sd(var)/mean(var)\n\n\nIt doesn‚Äôt work."
  },
  {
    "objectID": "slides/17.html#dont-rely-on-pasting-together-code-strings",
    "href": "slides/17.html#dont-rely-on-pasting-together-code-strings",
    "title": "Metaprogramming intro and big picture",
    "section": "Don‚Äôt rely on pasting together code strings",
    "text": "Don‚Äôt rely on pasting together code strings\nAvoid paste() for building code ‚ûú problems with non-syntactic names and precedence among expressions\n\n‚ÄúYou might think this is an esoteric concern, but not worrying about it when generating SQL code in web applications led to SQL injection attacks that have collectively cost billions of dollars.‚Äù"
  },
  {
    "objectID": "slides/17.html#evaluation-runs-code-in-an-environment",
    "href": "slides/17.html#evaluation-runs-code-in-an-environment",
    "title": "Metaprogramming intro and big picture",
    "section": "Evaluation runs code in an environment",
    "text": "Evaluation runs code in an environment\n\nevaluate: run/execute an expression\nneed both expression and environment\neval() uses current environment if not set\nmanual evaluation means you can tweak the environment!\n\n\nxy &lt;- expr(x + y)\n\neval(xy, env(x = 1, y = 10))\n\n#&gt; [1] 11\n\neval(xy, env(x = 2, y = 100))\n\n#&gt; [1] 102"
  },
  {
    "objectID": "slides/17.html#can-customize-evaluation-with-functions",
    "href": "slides/17.html#can-customize-evaluation-with-functions",
    "title": "Metaprogramming intro and big picture",
    "section": "Can customize evaluation with functions",
    "text": "Can customize evaluation with functions\n\nCan also bind names to functions in supplied environment\nAllows overriding function behaviour\n\n\nstring_math &lt;- function(x) {\n  e &lt;- env(\n    caller_env(),\n    `+` = function(x, y) paste(x, y),\n    `*` = function(x, y) strrep(x, y)\n  )\n  eval(enexpr(x), e)\n}\n\ncohort &lt;- 10\nstring_math(\"Hello\" + \"cohort\" + cohort)\n\n#&gt; [1] \"Hello cohort 10\"\n\nstring_math((\"dslc\" + \"is\" + \"awesome---\") * cohort)\n\n#&gt; [1] \"dslc is awesome---dslc is awesome---dslc is awesome---dslc is awesome---dslc is awesome---dslc is awesome---dslc is awesome---dslc is awesome---dslc is awesome---dslc is awesome---\""
  },
  {
    "objectID": "slides/17.html#can-customize-evaluation-with-data",
    "href": "slides/17.html#can-customize-evaluation-with-data",
    "title": "Metaprogramming intro and big picture",
    "section": "Can customize evaluation with data",
    "text": "Can customize evaluation with data\n\nLook for variables inside data frame\nData mask - typically a data frame\nuse rlang::eval_tidy() rather than eval()\n\n\ndf &lt;- data.frame(x = 1:5, y = sample(5))\neval_tidy(expr(x + y), df)\n\n#&gt; [1] 2 7 6 6 9"
  },
  {
    "objectID": "slides/17.html#can-customize-evaluation-with-data-in-functions",
    "href": "slides/17.html#can-customize-evaluation-with-data-in-functions",
    "title": "Metaprogramming intro and big picture",
    "section": "Can customize evaluation with data in functions",
    "text": "Can customize evaluation with data in functions\nWe also can catch user input with enexpr()‚Ä¶\n\nwith2 &lt;- function(df, expr) {\n  eval_tidy(enexpr(expr), df)\n}\n\nwith2(df, x + y)\n\n#&gt; [1] 2 7 6 6 9\n\n\nBut there‚Äôs a bug!"
  },
  {
    "objectID": "slides/17.html#data-masks-can-be-tricky",
    "href": "slides/17.html#data-masks-can-be-tricky",
    "title": "Metaprogramming intro and big picture",
    "section": "Data masks can be tricky",
    "text": "Data masks can be tricky\nBug ‚ûú\n\nevaluates in environment inside with2(), but\nthe expression likely refers to objects in the Global environment\n\n\nwith2 &lt;- function(df, expr) {\n  a &lt;- 1000 # 'a' is created inside the with2() environment\n  eval_tidy(enexpr(expr), df)\n}\n\ndf &lt;- data.frame(x = 1:3)\na &lt;- 10 # 'a' created in the global environment\nwith2(df, x + a) # R is taking the 'a' from the function environment! \n\n#&gt; [1] 1001 1002 1003"
  },
  {
    "objectID": "slides/17.html#enquo-creates-a-quosure",
    "href": "slides/17.html#enquo-creates-a-quosure",
    "title": "Metaprogramming intro and big picture",
    "section": "enquo() creates a quosure",
    "text": "enquo() creates a quosure\n\nBundle the environment where the expression is created\nUse enquo() instead of enexpr() (with eval_tidy())\n\n\nwith2 &lt;- function(df, expr) {\n  a &lt;- 1000\n  eval_tidy(enquo(expr), df)\n}\n\ndf &lt;- data.frame(x = 1:3)\na &lt;- 10\nwith2(df, x + a)\n\n#&gt; [1] 11 12 13"
  },
  {
    "objectID": "slides/17.html#always-use-enquo-with-data-masks",
    "href": "slides/17.html#always-use-enquo-with-data-masks",
    "title": "Metaprogramming intro and big picture",
    "section": "Always use enquo() with data masks",
    "text": "Always use enquo() with data masks\n\n‚ÄúWhenever you use a data mask, you must always use enquo() instead of enexpr()‚Äù.\n\n\nQuosures bundle the environment where the expression is created (i.e.¬†the parent of where enquo() is called)"
  },
  {
    "objectID": "slides/17.html#enquo-captures-the-calling-environment",
    "href": "slides/17.html#enquo-captures-the-calling-environment",
    "title": "Metaprogramming intro and big picture",
    "section": "enquo() captures the calling environment",
    "text": "enquo() captures the calling environment\n\nwith2 &lt;- function(df, expr) {\n  a &lt;- 1000\n  eq &lt;- enquo(expr)\n  message(\"with2() Parent/Calling environment: \")\n  print(rlang::caller_env())\n  message(\"with2() environment: \")\n  print(rlang::current_env())\n  message(\"Quosure details: \")\n  print(eq)  # Print the details of the quosure\n  eval_tidy(eq, df)\n}\n\na &lt;- 10000\ndf &lt;- data.frame(x = 1:3)\nwith2(df, x + a)\n\n#&gt; &lt;environment: R_GlobalEnv&gt;\n\n\n#&gt; &lt;environment: 0x00000208278b93f0&gt;\n\n\n#&gt; &lt;quosure&gt;\n#&gt; expr: ^x + a\n#&gt; env:  global\n\n\n#&gt; [1] 10001 10002 10003"
  },
  {
    "objectID": "slides/17.html#without-enquo-the-wrong-environment-is-captured",
    "href": "slides/17.html#without-enquo-the-wrong-environment-is-captured",
    "title": "Metaprogramming intro and big picture",
    "section": "Without enquo(), the wrong environment is captured",
    "text": "Without enquo(), the wrong environment is captured\n\nfun1 &lt;- function(df) {\n  a &lt;- 10\n  message(\"fun1() Parent/Calling environment: \")\n  print(rlang::caller_env())\n  message(\"fun1() environment: \")\n  print(rlang::current_env())\n  with2(df, x + a)\n}\n\na &lt;- 10000\ndf &lt;- data.frame(x = 1:3)\nfun1(df)\n\n#&gt; &lt;environment: R_GlobalEnv&gt;\n\n\n#&gt; &lt;environment: 0x00000208287b37a8&gt;\n\n\n#&gt; &lt;environment: 0x00000208287b37a8&gt;\n\n\n#&gt; &lt;environment: 0x00000208287a4970&gt;\n\n\n#&gt; &lt;quosure&gt;\n#&gt; expr: ^x + a\n#&gt; env:  0x00000208287b37a8\n\n\n#&gt; [1] 11 12 13"
  },
  {
    "objectID": "slides/17.html#big-ideas-of-metaprogramming-in-r",
    "href": "slides/17.html#big-ideas-of-metaprogramming-in-r",
    "title": "Metaprogramming intro and big picture",
    "section": "Big ideas of metaprogramming in R",
    "text": "Big ideas of metaprogramming in R\n\nCapture code as expressions with rlang::expr() and rlang::enexpr().\nRepresent code as a tree with lobstr::ast().\nCreate calls from function components with rlang::call2().\nInject previously defined expressions into an expression with !!.\nEvaluate expressions with eval() or eval_tidy()."
  },
  {
    "objectID": "slides/17.html#use-expressions-to-customize-evaluation",
    "href": "slides/17.html#use-expressions-to-customize-evaluation",
    "title": "Metaprogramming intro and big picture",
    "section": "Use expressions to customize evaluation",
    "text": "Use expressions to customize evaluation\n\nOverride common functions with evaluation environments.\nData masks are data frames used as evaluation environments.\nUse quosures to capture both the expression and the environment in which it was created.\nrlang::enquo() captures user input in a quosure."
  },
  {
    "objectID": "slides/19.html#learning-objectives",
    "href": "slides/19.html#learning-objectives",
    "title": "Quasiquotation",
    "section": "Learning objectives:",
    "text": "Learning objectives:\n\nWhat quasiquotation means\nWhy it‚Äôs important\nLearn some practical uses\n\n\nlibrary(rlang)\nlibrary(purrr)"
  },
  {
    "objectID": "slides/19.html#introduction",
    "href": "slides/19.html#introduction",
    "title": "Quasiquotation",
    "section": "Introduction",
    "text": "Introduction\nThree pillars of tidy evaluation\n\nQuasiquotation\nQuosures (chapter 20)\nData masks (Chapter 20)\n\nQuasiquotation = quotation + unquotation\n\nQuote. Capture unevaluated expression‚Ä¶ (‚Äúdefuse‚Äù)\n\nUnquote. Evaluate selections of quoted expression! (‚Äúinject‚Äù)\nFunctions that use these features are said to use Non-standard evaluation (NSE)\nNote: related to Lisp macros, and also exists in other languages with Lisp heritage, e.g.¬†Julia\n\n\nOn it‚Äôs own, Quasiquotation good for programming, but combined with other tools, important for data analysis."
  },
  {
    "objectID": "slides/19.html#motivation",
    "href": "slides/19.html#motivation",
    "title": "Quasiquotation",
    "section": "Motivation",
    "text": "Motivation\nSimple concrete example:\ncement() is a function that works like paste() but doesn‚Äôt need need quotes\n(Think of automatically adding ‚Äòquotes‚Äô to the arguments)\n\ncement &lt;- function(...) {\n  args &lt;- ensyms(...)\n  paste(purrr::map(args, as_string), collapse = \" \")\n}\n\ncement(Good, morning, Hadley)\n\n#&gt; [1] \"Good morning Hadley\"\n\n\nWhat if we wanted to use variables? What is an object and what should be quoted?\nThis is where ‚Äòunquoting‚Äô comes in!\n\nname &lt;- \"Bob\"\ncement(Good, afternoon, !!name) # Bang-bang!\n\n#&gt; [1] \"Good afternoon Bob\""
  },
  {
    "objectID": "slides/19.html#vocabulary",
    "href": "slides/19.html#vocabulary",
    "title": "Quasiquotation",
    "section": "Vocabulary",
    "text": "Vocabulary\nCan think of cement() and paste() as being ‚Äòmirror-images‚Äô of each other.\n\npaste() - define what to quote - Evaluates arguments\ncement() - define what to unquote - Quotes arguments\n\nQuoting function similar to, but more precise than, Non-standard evaluation (NSE)\n\nTidyverse functions - e.g., dplyr::mutate(), tidyr::pivot_longer()\nBase functions - e.g., library(), subset(), with()\n\nQuoting function arguments cannot be evaluated outside of function:\n\ncement(Good, afternoon, Cohort) # No problem\n\n#&gt; [1] \"Good afternoon Cohort\"\n\nGood      # Error!\n\n#&gt; Error: object 'Good' not found\n\n\nNon-quoting (standard) function arguments can be evaluated:\n\npaste(\"Good\", \"afternoon\", \"Cohort\")\n\n#&gt; [1] \"Good afternoon Cohort\"\n\n\"Good\"\n\n#&gt; [1] \"Good\""
  },
  {
    "objectID": "slides/19.html#quoting",
    "href": "slides/19.html#quoting",
    "title": "Quasiquotation",
    "section": "Quoting",
    "text": "Quoting\nCapture expressions without evaluating them\n\n\n#&gt; Warning in body[[col]][rows][!is.na(result)] &lt;- omit_na(result): number of\n#&gt; items to replace is not a multiple of replacement length\n\n\n\n\n\n\n\n\n\nDeveloper\nUser\n\n\n\n\nExpression (Quasiquotation)\n\n\nOne\nexpr()\nenexpr()\n\n\nMany\nexprs()\nenexprs()\n\n\nSymbol (Quasiquotation)\n\n\nOne\nexpr()\nensym()\n\n\nMany\nexprs()\nensyms()\n\n\nR Base (Quotation)\n\n\nOne\nquote()\nalist()\n\n\nMany\nsubstitute()\nas.list(substitute(...()))\n\n\n\n\n\n\n\n\nNon-base functions are from rlang\nDeveloper - From you, direct, fixed, interactive\nUser - From the user, indirect, varying, programmatic\n\nAlso:\n\nbquote() provides a limited form of quasiquotation\n~, the formula, is a quoting function (see Section 20.3.4)\n\nexpr() and exprs()\n\nexpr(x + y)\n\n#&gt; x + y\n\nexprs(exp1 = x + y, exp2 = x * y)\n\n#&gt; $exp1\n#&gt; x + y\n#&gt; \n#&gt; $exp2\n#&gt; x * y\n\n\nenexpr()1 and enexprs()\n\nf &lt;- function(x) enexpr(x)\nf(a + b + c)\n\n#&gt; a + b + c\n\nf2 &lt;- function(x, y) enexprs(exp1 = x, exp2 = y)\nf2(x = a + b, y = c + d)\n\n#&gt; $exp1\n#&gt; a + b\n#&gt; \n#&gt; $exp2\n#&gt; c + d\n\n\nensym() and ensyms()\n\nRemember: Symbol represents the name of an object. Can only be length 1.\nThese are stricter than enexpr/s()\n\n\nf &lt;- function(x) ensym(x)\nf(a)\n\n#&gt; a\n\nf2 &lt;- function(x, y) ensyms(sym1 = x, sym2 = y)\nf2(x = a, y = \"b\")\n\n#&gt; $sym1\n#&gt; a\n#&gt; \n#&gt; $sym2\n#&gt; b\n\n\nenexpr() = enrich expr()"
  },
  {
    "objectID": "slides/19.html#unquoting",
    "href": "slides/19.html#unquoting",
    "title": "Quasiquotation",
    "section": "Unquoting",
    "text": "Unquoting\nSelectively evaluate parts of an expression\n\nMerges ASTs with template\n1 argument !! (unquote, bang-bang)\n\nUnquoting a function call evaluates and returns results\nUnquoting a function (name) replaces the function (alternatively use call2())\n\n&gt;1 arguments !!! (unquote-splice, bang-bang-bang, triple bang)\n!! and !!! only work like this inside quoting function using rlang\n\nBasic unquoting\nOne argument\n\nx &lt;- expr(a + b)\ny &lt;- expr(c / d)\n\n\nexpr(f(x, y))      # No unquoting\n#&gt; f(x, y)\nexpr(f(!!x, !!y))  # Unquoting\n#&gt; f(a + b, c/d)\n\nMultiple arguments\n\nz &lt;- exprs(a + b, c + d)\nw &lt;- exprs(exp1 = a + b, exp2 = c + d)\n\n\nexpr(f(z))      # No unquoting\n#&gt; f(z)\nexpr(f(!!!z))   # Unquoting\n#&gt; f(a + b, c + d)\nexpr(f(!!!w))   # Unquoting when named\n#&gt; f(exp1 = a + b, exp2 = c + d)\n\nSpecial usages or cases\nFor example, get the AST of an expression\n\nlobstr::ast(x)\n#&gt; x\nlobstr::ast(!!x)\n#&gt; ‚ñà‚îÄ`+` \n#&gt; ‚îú‚îÄa \n#&gt; ‚îî‚îÄb\n\nUnquote function call\n\nexpr(f(!!mean(c(100, 200, 300)), y))\n#&gt; f(200, y)\n\nUnquote function\n\nf &lt;- expr(sd)\nexpr((!!f)(x))\n#&gt; sd(x)\nexpr((!!f)(!!x + !!y))\n#&gt; sd(a + b + c/d)"
  },
  {
    "objectID": "slides/19.html#non-quoting",
    "href": "slides/19.html#non-quoting",
    "title": "Quasiquotation",
    "section": "Non-quoting",
    "text": "Non-quoting\nOnly bquote() provides a limited form of quasiquotation.\nThe rest of base selectively uses or does not use quoting (rather than unquoting).\nFour basic forms of quoting/non-quoting:\n\nPair of functions - Quoting and non-quoting\n\ne.g., $ (quoting) and [[ (non-quoting)\n\nPair of Arguments - Quoting and non-quoting\n\ne.g., rm(...) (quoting) and rm(list = c(...)) (non-quoting)\n\nArg to control quoting\n\ne.g., library(rlang) (quoting) and library(pkg, character.only = TRUE) (where pkg &lt;- \"rlang\")\n\nQuote if evaluation fails\n\nhelp(var) - Quote, show help for var\nhelp(var) (where var &lt;- \"mean\") - No quote, show help for mean\nhelp(var) (where var &lt;- 10) - Quote fails, show help for var"
  },
  {
    "objectID": "slides/19.html#dot-dot-dot-when-using-with-quoting",
    "href": "slides/19.html#dot-dot-dot-when-using-with-quoting",
    "title": "Quasiquotation",
    "section": "‚Ä¶ (dot-dot-dot) [When using ‚Ä¶ with quoting]",
    "text": "‚Ä¶ (dot-dot-dot) [When using ‚Ä¶ with quoting]\n\nSometimes need to supply an arbitrary list of expressions or arguments in a function (...)\nBut need a way to use these when we don‚Äôt necessarily have the names\nRemember !! and !!! only work with functions that use rlang\nCan use list2(...) to turn ... into ‚Äútidy dots‚Äù which can be unquoted and spliced\nRequire list2() if going to be passing or using !! or !!! in ...\nlist2() is a wrapper around dots_list() with the most common defaults\n\nNo need for list2()\n\nd &lt;- function(...) data.frame(list(...))\nd(x = c(1:3), y = c(2, 4, 6))\n#&gt;   x y\n#&gt; 1 1 2\n#&gt; 2 2 4\n#&gt; 3 3 6\n\nRequire list2()\n\nvars &lt;- list(x = c(1:3), y = c(2, 4, 6))\nd(!!!vars)\n#&gt; Error in !vars: invalid argument type\nd2 &lt;- function(...) data.frame(list2(...))\nd2(!!!vars)\n#&gt;   x y\n#&gt; 1 1 2\n#&gt; 2 2 4\n#&gt; 3 3 6\n# Same result but x and y evaluated later\nvars_expr &lt;- exprs(x = c(1:3), y = c(2, 4, 6))\nd2(!!!vars_expr)  \n#&gt;   x y\n#&gt; 1 1 2\n#&gt; 2 2 4\n#&gt; 3 3 6\n\nGetting argument names (symbols) from variables\n\nnm &lt;- \"z\"\nval &lt;- letters[1:4]\nd2(x = 1:4, !!nm := val)\n\n#&gt;   x z\n#&gt; 1 1 a\n#&gt; 2 2 b\n#&gt; 3 3 c\n#&gt; 4 4 d"
  },
  {
    "objectID": "slides/19.html#exec-making-your-own",
    "href": "slides/19.html#exec-making-your-own",
    "title": "Quasiquotation",
    "section": "exec() [Making your own ‚Ä¶]",
    "text": "exec() [Making your own ‚Ä¶]\nWhat if your function doesn‚Äôt have tidy dots?\nCan‚Äôt use !! or := if doesn‚Äôt support rlang or dynamic dots\n\nmy_mean &lt;- function(x, arg_name, arg_val) {\n  mean(x, !!arg_name := arg_val)\n}\n\nmy_mean(c(NA, 1:10), arg_name = \"na.rm\", arg_val = TRUE)     \n#&gt; Error in `my_mean()`:\n#&gt; ! `:=` can only be used within dynamic dots.\n\nLet‚Äôs use the ‚Ä¶ from exec()\n\nexec(.fn, ..., .env = caller_env())\n\n\nmy_mean &lt;- function(x, arg_name, arg_val) {\n  exec(\"mean\", x, !!arg_name := arg_val)\n}\n\nmy_mean(c(NA, 1:10), arg_name = \"na.rm\", arg_val = TRUE)     \n#&gt; [1] 5.5\n\nNote that you do not unquote arg_val.\nAlso exec is useful for mapping over a list of functions:\n\nx &lt;- c(runif(10), NA)\nfuns &lt;- c(\"mean\", \"median\", \"sd\")\npurrr::map_dbl(funs, exec, x, na.rm = TRUE)\n\n#&gt; [1] 0.4445205 0.4886247 0.3166360"
  },
  {
    "objectID": "slides/19.html#base-r-do.call",
    "href": "slides/19.html#base-r-do.call",
    "title": "Quasiquotation",
    "section": "Base R do.call",
    "text": "Base R do.call\ndo.call(what, args)\n\nwhat is a function to call\nargs is a list of arguments to pass to the function.\n\n\nnrow(mtcars)\n#&gt; [1] 32\nmtcars3 &lt;- do.call(\"rbind\", list(mtcars, mtcars, mtcars))\nnrow(mtcars3)\n#&gt; [1] 96\n\nExercise 19.5.5 #1\nOne way to implement exec is shown here: Describe how it works. What are the key ideas?\n\nexec_ &lt;- function(f, ..., .env = caller_env()){\n  args &lt;- list2(...)\n  do.call(f, args, envir  = .env)\n}"
  },
  {
    "objectID": "slides/19.html#case-studies-side-note",
    "href": "slides/19.html#case-studies-side-note",
    "title": "Quasiquotation",
    "section": "Case Studies (side note)",
    "text": "Case Studies (side note)\nSometimes you want to run a bunch of models, without having to copy/paste each one.\nBUT, you also want the summary function to show the appropriate model call, not one with hidden variables (e.g., lm(y ~ x, data = data)).\nWe can achieve this by building expressions and unquoting as needed:\n\nlibrary(purrr)\n\nvars &lt;- data.frame(x = c(\"hp\", \"hp\"),\n                   y = c(\"mpg\", \"cyl\"))\n\nx_sym &lt;- syms(vars$x)\ny_sym &lt;- syms(vars$y)\n\nformulae &lt;- map2(x_sym, y_sym, \\(x, y) expr(!!y ~ !!x))\nformulae\n#&gt; [[1]]\n#&gt; mpg ~ hp\n#&gt; \n#&gt; [[2]]\n#&gt; cyl ~ hp\nmodels &lt;- map(formulae, \\(f) expr(lm(!!f, data = mtcars)))\nsummary(eval(models[[1]]))\n#&gt; \n#&gt; Call:\n#&gt; lm(formula = mpg ~ hp, data = mtcars)\n#&gt; \n#&gt; Residuals:\n#&gt;     Min      1Q  Median      3Q     Max \n#&gt; -5.7121 -2.1122 -0.8854  1.5819  8.2360 \n#&gt; \n#&gt; Coefficients:\n#&gt;             Estimate Std. Error t value Pr(&gt;|t|)    \n#&gt; (Intercept) 30.09886    1.63392  18.421  &lt; 2e-16 ***\n#&gt; hp          -0.06823    0.01012  -6.742 1.79e-07 ***\n#&gt; ---\n#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n#&gt; \n#&gt; Residual standard error: 3.863 on 30 degrees of freedom\n#&gt; Multiple R-squared:  0.6024, Adjusted R-squared:  0.5892 \n#&gt; F-statistic: 45.46 on 1 and 30 DF,  p-value: 1.788e-07\n\nAs a function:\n\nlm_df &lt;- function(df, data) {\n  x_sym &lt;- map(df$x, as.symbol)\n  y_sym &lt;- map(df$y, as.symbol)\n  data &lt;- enexpr(data)\n  \n  formulae &lt;- map2(x_sym, y_sym, \\(x, y) expr(!!y ~ !!x))\n  models &lt;- map(formulae, \\(f) expr(lm(!!f, !!data)))\n  \n  map(models, \\(m) summary(eval(m)))\n}\n\nvars &lt;- data.frame(x = c(\"hp\", \"hp\"),\n                   y = c(\"mpg\", \"cyl\"))\nlm_df(vars, data = mtcars)\n#&gt; [[1]]\n#&gt; \n#&gt; Call:\n#&gt; lm(formula = mpg ~ hp, data = mtcars)\n#&gt; \n#&gt; Residuals:\n#&gt;     Min      1Q  Median      3Q     Max \n#&gt; -5.7121 -2.1122 -0.8854  1.5819  8.2360 \n#&gt; \n#&gt; Coefficients:\n#&gt;             Estimate Std. Error t value Pr(&gt;|t|)    \n#&gt; (Intercept) 30.09886    1.63392  18.421  &lt; 2e-16 ***\n#&gt; hp          -0.06823    0.01012  -6.742 1.79e-07 ***\n#&gt; ---\n#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n#&gt; \n#&gt; Residual standard error: 3.863 on 30 degrees of freedom\n#&gt; Multiple R-squared:  0.6024, Adjusted R-squared:  0.5892 \n#&gt; F-statistic: 45.46 on 1 and 30 DF,  p-value: 1.788e-07\n#&gt; \n#&gt; \n#&gt; [[2]]\n#&gt; \n#&gt; Call:\n#&gt; lm(formula = cyl ~ hp, data = mtcars)\n#&gt; \n#&gt; Residuals:\n#&gt;      Min       1Q   Median       3Q      Max \n#&gt; -2.27078 -0.74879 -0.06417  0.63512  1.74067 \n#&gt; \n#&gt; Coefficients:\n#&gt;             Estimate Std. Error t value Pr(&gt;|t|)    \n#&gt; (Intercept) 3.006795   0.425485   7.067 7.41e-08 ***\n#&gt; hp          0.021684   0.002635   8.229 3.48e-09 ***\n#&gt; ---\n#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n#&gt; \n#&gt; Residual standard error: 1.006 on 30 degrees of freedom\n#&gt; Multiple R-squared:  0.693,  Adjusted R-squared:  0.6827 \n#&gt; F-statistic: 67.71 on 1 and 30 DF,  p-value: 3.478e-09"
  },
  {
    "objectID": "slides/21.html#learning-objectives",
    "href": "slides/21.html#learning-objectives",
    "title": "Translating R code",
    "section": "Learning objectives:",
    "text": "Learning objectives:\n\nUnderstand what it means to translate R code\nTreat code as data to enable domain-specific languages (DSLs)\nCreate HTML and LaTeX DSLs\nLearn how environments, S3, and metaprogramming work together\n\n\nlibrary(rlang)\nlibrary(purrr)"
  },
  {
    "objectID": "slides/21.html#r-code-another-language",
    "href": "slides/21.html#r-code-another-language",
    "title": "Translating R code",
    "section": "R code ‚Üí another language",
    "text": "R code ‚Üí another language"
  },
  {
    "objectID": "slides/21.html#translating-code-is-not-the-same-as-evaluating-code",
    "href": "slides/21.html#translating-code-is-not-the-same-as-evaluating-code",
    "title": "Translating R code",
    "section": "Translating code is not the same as evaluating code",
    "text": "Translating code is not the same as evaluating code\n# Evaluation\nsqrt(9)\n\n# Translation\nexpr &lt;- quote(sqrt(x))\nexpr\n\nEvaluation produces a value (3)\nTranslation preserves structure (sqrt(x))\nThe result is code, not a computed number"
  },
  {
    "objectID": "slides/21.html#code-translation-relies-on-metaprogramming",
    "href": "slides/21.html#code-translation-relies-on-metaprogramming",
    "title": "Translating R code",
    "section": "Code translation relies on metaprogramming",
    "text": "Code translation relies on metaprogramming\nlibrary(rlang)\n\nexpr &lt;- expr(mean(x, na.rm = TRUE))\nexpr\n\nExpressions are captured with expr() / enexpr()\nCalls, symbols, etc‚Ä¶ can be inspected\nTranslation operates on the AST, not on values"
  },
  {
    "objectID": "slides/21.html#the-practical-goal-of-translation-is-domain-specific-languages",
    "href": "slides/21.html#the-practical-goal-of-translation-is-domain-specific-languages",
    "title": "Translating R code",
    "section": "The practical goal of translation is domain-specific languages",
    "text": "The practical goal of translation is domain-specific languages\n\nDSLs embed a small language inside R\nR syntax becomes a frontend for another language\ndbplyr as an example: R ‚Üí SQL"
  },
  {
    "objectID": "slides/21.html#we-can-generate-html-code-from-r",
    "href": "slides/21.html#we-can-generate-html-code-from-r",
    "title": "Translating R code",
    "section": "We can generate HTML code from R",
    "text": "We can generate HTML code from R\n\nWe can do this‚Ä¶\n\n&lt;body&gt;\n  &lt;h1 id='first'&gt;A heading&lt;/h1&gt;\n  &lt;p&gt;Some text &amp; &lt;b&gt;some bold text.&lt;/b&gt;&lt;/p&gt;\n  &lt;img src='myimg.png' width='100' height='100' /&gt;\n&lt;/body&gt;\n\nBy doing this‚Ä¶\n\nwith_html(\n  body(\n    h1(\"A heading\", id = \"first\"),\n    p(\"Some text &\", b(\"some bold text.\")),\n    img(src = \"myimg.png\", width = 100, height = 100)\n  )\n)\nBasically, HTML tags become ‚Äúordinary‚Äù R functions"
  },
  {
    "objectID": "slides/21.html#our-dsl-makes-translation-easy",
    "href": "slides/21.html#our-dsl-makes-translation-easy",
    "title": "Translating R code",
    "section": "Our DSL makes translation easy",
    "text": "Our DSL makes translation easy\n\nSame structure: nesting of function calls == nesting of tags.\nSimilar logic: unnamed arguments -&gt; tag content, named arguments -&gt; tag attributes.\nUser experience: special characters automatically escaped (e.g.¬†\"&\" -&gt; \"&amp;\")."
  },
  {
    "objectID": "slides/21.html#we-need-five-basic-html-tags-for-this-exercise",
    "href": "slides/21.html#we-need-five-basic-html-tags-for-this-exercise",
    "title": "Translating R code",
    "section": "We need five basic HTML tags for this exercise",
    "text": "We need five basic HTML tags for this exercise\n&lt;body&gt;\n  &lt;h1 id='first'&gt;A heading&lt;/h1&gt;\n  &lt;p&gt;Some text &amp; &lt;b&gt;some bold text.&lt;/b&gt;&lt;/p&gt;\n  &lt;img src='myimg.png' width='100' height='100' /&gt;\n&lt;/body&gt;\n\n&lt;body&gt; is the top-level tag that contains all content.\n&lt;h1&gt; defines a top level heading.\n&lt;p&gt; defines a paragraph.\n&lt;b&gt; emboldens text.\n&lt;img&gt; embeds an image."
  },
  {
    "objectID": "slides/21.html#we-need-to-know-the-main-structure-of-tags",
    "href": "slides/21.html#we-need-to-know-the-main-structure-of-tags",
    "title": "Translating R code",
    "section": "We need to know the main structure of tags",
    "text": "We need to know the main structure of tags\n\nMain tags structure: &lt;tag&gt; &lt;/tag&gt;\nVoid tags structure: &lt;tag /&gt;\nTags can have attributes: &lt;tag name1='value1' name2='value2'&gt;&lt;/tag&gt;\n\nExamples\n&lt;!-- Main tag with some atributes --&gt;\n&lt;h1 id='first'&gt;A heading&lt;/h1&gt;\n\n&lt;!-- Void tag with some atributes --&gt;\n&lt;img src='myimg.png' width='100' height='100' /&gt;"
  },
  {
    "objectID": "slides/21.html#we-need-to-know-how-to-escape-some-characters",
    "href": "slides/21.html#we-need-to-know-how-to-escape-some-characters",
    "title": "Translating R code",
    "section": "We need to know how to escape some characters",
    "text": "We need to know how to escape some characters\n\n& is escaped with &amp;\n&lt; is escaped with &lt;\n&gt; is escaped with &gt;"
  },
  {
    "objectID": "slides/21.html#follow-a-micro-macro-procedure-to-create-html-dsl",
    "href": "slides/21.html#follow-a-micro-macro-procedure-to-create-html-dsl",
    "title": "Translating R code",
    "section": "Follow a micro-macro procedure to create HTML DSL",
    "text": "Follow a micro-macro procedure to create HTML DSL\nwith_html(\n  body(\n    h1(\"A heading\", id = \"first\"),\n    p(\"Some text &\", b(\"some bold text.\")),\n    img(src = \"myimg.png\", width = 100, height = 100)\n  )\n)\nThe steps‚Ä¶\n\nCreate an S3 that translates & automatically escapes user‚Äôs input\nCreate a basic structure for tag functions\nCreate a function factory for creating tag functions\nCreate an HTML environment of evaluation"
  },
  {
    "objectID": "slides/21.html#we-can-translate-r-to-html-via-s3",
    "href": "slides/21.html#we-can-translate-r-to-html-via-s3",
    "title": "Translating R code",
    "section": "We can translate R to HTML via S3",
    "text": "We can translate R to HTML via S3\nClass constructor and dispatch\n\nhtml &lt;- function(x) structure(x, class = \"advr_html\")\n\nprint.advr_html &lt;- function(x, ...) {\n  out &lt;- paste0(\"&lt;HTML&gt; \", x)\n  cat(paste(strwrap(out), collapse = \"\\n\"), \"\\n\", sep = \"\")\n}\n\nMethods that consider automatic escaping\n\nescape &lt;- function(x) UseMethod(\"escape\")\n\nescape.character &lt;- function(x) {\n  # Method for escaping\n  x &lt;- gsub(\"&\", \"&amp;\", x)\n  x &lt;- gsub(\"&lt;\", \"&lt;\", x)\n  x &lt;- gsub(\"&gt;\", \"&gt;\", x)\n\n  html(x)\n}\n\nescape.advr_html &lt;- function(x) x # Method when escaping not needed"
  },
  {
    "objectID": "slides/21.html#our-s3-translates-and-automatically-escapes-users-input",
    "href": "slides/21.html#our-s3-translates-and-automatically-escapes-users-input",
    "title": "Translating R code",
    "section": "Our S3 translates and automatically escapes user‚Äôs input",
    "text": "Our S3 translates and automatically escapes user‚Äôs input\n\nescape(\"This is some text.\")\n\n#&gt; &lt;HTML&gt; This is some text.\n\nescape(\"x &gt; 1 & y &lt; 2\")\n\n#&gt; &lt;HTML&gt; x &gt; 1 &amp; y &lt; 2\n\n# Double escaping is not a problem\nescape(escape(\"This is some text. 1 &gt; 2\"))\n\n#&gt; &lt;HTML&gt; This is some text. 1 &gt; 2\n\n# And text we know is HTML doesn't get escaped.\nescape(html(\"&lt;hr /&gt;\"))\n\n#&gt; &lt;HTML&gt; &lt;hr /&gt;"
  },
  {
    "objectID": "slides/21.html#we-create-r-functions-for-html-tags",
    "href": "slides/21.html#we-create-r-functions-for-html-tags",
    "title": "Translating R code",
    "section": "We create R functions for HTML tags",
    "text": "We create R functions for HTML tags\n\n&lt;p&gt; tag -&gt; p() function\n\nDistinguish between content and attributes\nManage the big amount of attributes that exists (also customs ones)\n\nSame logic to create other tags\n\np(\"Some text. \", b(i(\"some bold italic text\")), class = \"mypara\")"
  },
  {
    "objectID": "slides/21.html#we-must-distinguish-between-content-and-attributes",
    "href": "slides/21.html#we-must-distinguish-between-content-and-attributes",
    "title": "Translating R code",
    "section": "We must distinguish between content and attributes",
    "text": "We must distinguish between content and attributes\n\n# Separate named and unnamed arguments\ndots_partition &lt;- function(...) {\n  dots &lt;- list2(...)\n\n  if (is.null(names(dots))) {\n    is_named &lt;- rep(FALSE, length(dots))\n  } else {\n    is_named &lt;- names(dots) != \"\"\n  }\n\n  list(\n    named = dots[is_named], # Attributes\n    unnamed = dots[!is_named] # Contents\n  )\n}\n\nstr(dots_partition(a = 1, 2, b = 3, 4))\n\n#&gt; List of 2\n#&gt;  $ named  :List of 2\n#&gt;   ..$ a: num 1\n#&gt;   ..$ b: num 3\n#&gt;  $ unnamed:List of 2\n#&gt;   ..$ : num 2\n#&gt;   ..$ : num 4"
  },
  {
    "objectID": "slides/21.html#we-can-create-p-tag-via-p-function",
    "href": "slides/21.html#we-can-create-p-tag-via-p-function",
    "title": "Translating R code",
    "section": "We can create <p> tag via p() function",
    "text": "We can create &lt;p&gt; tag via p() function\n\np &lt;- function(...) {\n  dots &lt;- dots_partition(...) # List with named and unnamed args\n  attribs &lt;- html_attributes(dots$named)\n  children &lt;- map_chr(dots$unnamed, escape)\n\n  html(paste0(\n    \"&lt;p\",\n    attribs,\n    \"&gt;\",\n    paste(children, collapse = \"\"),\n    \"&lt;/p&gt;\"\n  ))\n}\n\n\n\nMore about html_attributes()\n\nFound among the textbook‚Äôs source code\n\nhtml_attributes &lt;- function(list) {\n  if (length(list) == 0) {\n    return(\"\")\n  }\n\n  attr &lt;- map2_chr(names(list), list, html_attribute)\n  paste0(\" \", unlist(attr), collapse = \"\")\n}\nhtml_attribute &lt;- function(name, value = NULL) {\n  if (length(value) == 0) {\n    return(name)\n  } # for attributes with no value\n  if (length(value) != 1) {\n    stop(\"`value` must be NULL or length 1\")\n  }\n\n  if (is.logical(value)) {\n    # Convert T and F to true and false\n    value &lt;- tolower(value)\n  } else {\n    value &lt;- escape_attr(value)\n  }\n  paste0(name, \"='\", value, \"'\")\n}\nescape_attr &lt;- function(x) {\n  x &lt;- escape.character(x)\n  x &lt;- gsub(\"\\'\", '&#39;', x)\n  x &lt;- gsub(\"\\\"\", '&quot;', x)\n  x &lt;- gsub(\"\\r\", '&#13;', x)\n  x &lt;- gsub(\"\\n\", '&#10;', x)\n  x\n}"
  },
  {
    "objectID": "slides/21.html#we-can-use-a-function-factory-for-tags",
    "href": "slides/21.html#we-can-use-a-function-factory-for-tags",
    "title": "Translating R code",
    "section": "We can use a function factory for tags",
    "text": "We can use a function factory for tags\n\nInstead of one function for each tag, we use a function factory:\n\n\ntag &lt;- function(tag) {\n  new_function(\n    exprs(... = ), # Capture the intended tag!\n    expr({\n      # Capture the code that contains the structure of tag functions\n      dots &lt;- dots_partition(...)\n      attribs &lt;- html_attributes(dots$named)\n      children &lt;- map_chr(dots$unnamed, escape)\n\n      html(paste0(\n        !!paste0(\"&lt;\", tag),\n        attribs,\n        \"&gt;\",\n        paste(children, collapse = \"\"),\n        !!paste0(\"&lt;/\", tag, \"&gt;\")\n      ))\n    }),\n    caller_env() # Get the environment of the caller frame\n  )\n}"
  },
  {
    "objectID": "slides/21.html#our-function-factory-for-tags-works",
    "href": "slides/21.html#our-function-factory-for-tags-works",
    "title": "Translating R code",
    "section": "Our function factory for tags works",
    "text": "Our function factory for tags works\n\ntag(\"b\")\n\n#&gt; function (...) \n#&gt; {\n#&gt;     dots &lt;- dots_partition(...)\n#&gt;     attribs &lt;- html_attributes(dots$named)\n#&gt;     children &lt;- map_chr(dots$unnamed, escape)\n#&gt;     html(paste0(\"&lt;b\", attribs, \"&gt;\", paste(children, collapse = \"\"), \n#&gt;         \"&lt;/b&gt;\"))\n#&gt; }\n\n\nRe-run earlier example‚Ä¶\n\np &lt;- tag(\"p\")\nb &lt;- tag(\"b\")\ni &lt;- tag(\"i\")\np(\"Some text. \", b(i(\"some bold italic text\")), class = \"mypara\")\n\n#&gt; &lt;HTML&gt; &lt;p class='mypara'&gt;Some text. &lt;b&gt;&lt;i&gt;some bold italic\n#&gt; text&lt;/i&gt;&lt;/b&gt;&lt;/p&gt;"
  },
  {
    "objectID": "slides/21.html#we-need-to-consider-void-tags",
    "href": "slides/21.html#we-need-to-consider-void-tags",
    "title": "Translating R code",
    "section": "We need to consider void tags",
    "text": "We need to consider void tags\n\nVoid tags have slightly different structure:\n\n\nvoid_tag &lt;- function(tag) {\n  new_function(\n    exprs(... = ),\n    expr({\n      dots &lt;- dots_partition(...)\n      if (length(dots$unnamed) &gt; 0) {\n        # Throws an error because void tags can't have children\n        abort(!!paste0(\"&lt;\", tag, \"&gt; must not have unnamed arguments\"))\n      }\n      attribs &lt;- html_attributes(dots$named)\n\n      html(paste0(!!paste0(\"&lt;\", tag), attribs, \" /&gt;\"))\n    }),\n    caller_env()\n  )\n}"
  },
  {
    "objectID": "slides/21.html#our-variant-for-void-tags-works",
    "href": "slides/21.html#our-variant-for-void-tags-works",
    "title": "Translating R code",
    "section": "Our variant for void tags works",
    "text": "Our variant for void tags works\n\nimg &lt;- void_tag(\"img\")\nimg\n\n#&gt; function (...) \n#&gt; {\n#&gt;     dots &lt;- dots_partition(...)\n#&gt;     if (length(dots$unnamed) &gt; 0) {\n#&gt;         abort(\"&lt;img&gt; must not have unnamed arguments\")\n#&gt;     }\n#&gt;     attribs &lt;- html_attributes(dots$named)\n#&gt;     html(paste0(\"&lt;img\", attribs, \" /&gt;\"))\n#&gt; }\n\nimg(src = \"myimage.png\", width = 100, height = 100)\n\n#&gt; &lt;HTML&gt; &lt;img src='myimage.png' width='100' height='100' /&gt;"
  },
  {
    "objectID": "slides/21.html#store-tags-in-an-html-environment",
    "href": "slides/21.html#store-tags-in-an-html-environment",
    "title": "Translating R code",
    "section": "Store tags in an HTML environment",
    "text": "Store tags in an HTML environment\n\nWe need to store all of our tags:\n\n\n\nAll tags‚Ä¶\n\n\ntags &lt;- c(\n  \"a\",\n  \"abbr\",\n  \"address\",\n  \"article\",\n  \"aside\",\n  \"audio\",\n  \"b\",\n  \"bdi\",\n  \"bdo\",\n  \"blockquote\",\n  \"body\",\n  \"button\",\n  \"canvas\",\n  \"caption\",\n  \"cite\",\n  \"code\",\n  \"colgroup\",\n  \"data\",\n  \"datalist\",\n  \"dd\",\n  \"del\",\n  \"details\",\n  \"dfn\",\n  \"div\",\n  \"dl\",\n  \"dt\",\n  \"em\",\n  \"eventsource\",\n  \"fieldset\",\n  \"figcaption\",\n  \"figure\",\n  \"footer\",\n  \"form\",\n  \"h1\",\n  \"h2\",\n  \"h3\",\n  \"h4\",\n  \"h5\",\n  \"h6\",\n  \"head\",\n  \"header\",\n  \"hgroup\",\n  \"html\",\n  \"i\",\n  \"iframe\",\n  \"ins\",\n  \"kbd\",\n  \"label\",\n  \"legend\",\n  \"li\",\n  \"mark\",\n  \"map\",\n  \"menu\",\n  \"meter\",\n  \"nav\",\n  \"noscript\",\n  \"object\",\n  \"ol\",\n  \"optgroup\",\n  \"option\",\n  \"output\",\n  \"p\",\n  \"pre\",\n  \"progress\",\n  \"q\",\n  \"ruby\",\n  \"rp\",\n  \"rt\",\n  \"s\",\n  \"samp\",\n  \"script\",\n  \"section\",\n  \"select\",\n  \"small\",\n  \"span\",\n  \"strong\",\n  \"style\",\n  \"sub\",\n  \"summary\",\n  \"sup\",\n  \"table\",\n  \"tbody\",\n  \"td\",\n  \"textarea\",\n  \"tfoot\",\n  \"th\",\n  \"thead\",\n  \"time\",\n  \"title\",\n  \"tr\",\n  \"u\",\n  \"ul\",\n  \"var\",\n  \"video\"\n)\n\nvoid_tags &lt;- c(\n  \"area\",\n  \"base\",\n  \"br\",\n  \"col\",\n  \"command\",\n  \"embed\",\n  \"hr\",\n  \"img\",\n  \"input\",\n  \"keygen\",\n  \"link\",\n  \"meta\",\n  \"param\",\n  \"source\",\n  \"track\",\n  \"wbr\"\n)\n\n\n\nBut there are tags that will override R functions‚Ä¶\n\n\n\nVenn Diagram\n\n\n\n\nVenn Diagram of words in R or HTML\n\n\n\n\nSolution: first a list(), then an ‚Äúenvironment‚Äù"
  },
  {
    "objectID": "slides/21.html#creating-a-list-makes-translation-work",
    "href": "slides/21.html#creating-a-list-makes-translation-work",
    "title": "Translating R code",
    "section": "Creating a list makes translation work",
    "text": "Creating a list makes translation work\n\n# Create the list\nhtml_tags &lt;- c(\n  tags %&gt;% set_names() %&gt;% map(tag),\n  void_tags %&gt;% set_names() %&gt;% map(void_tag)\n)\n\n# Check!\nhtml_tags$p(\n  \"Some text. \",\n  html_tags$b(html_tags$i(\"some bold italic text\")),\n  class = \"mypara\"\n)\n\n#&gt; &lt;HTML&gt; &lt;p class='mypara'&gt;Some text. &lt;b&gt;&lt;i&gt;some bold italic\n#&gt; text&lt;/i&gt;&lt;/b&gt;&lt;/p&gt;"
  },
  {
    "objectID": "slides/21.html#creating-an-environment-makes-the-ux-better",
    "href": "slides/21.html#creating-an-environment-makes-the-ux-better",
    "title": "Translating R code",
    "section": "Creating an environment makes the UX better",
    "text": "Creating an environment makes the UX better\n\n# Create an \"environment\"\nwith_html &lt;- function(code) {\n  code &lt;- enquo(code)\n  eval_tidy(code, html_tags)\n}\n\n# Check!\nwith_html(\n  body(\n    h1(\"A heading\", id = \"first\"),\n    p(\"Some text &\", b(\"some bold text.\")),\n    img(src = \"myimg.png\", width = 100, height = 100)\n  )\n)\n\n#&gt; &lt;HTML&gt; &lt;body&gt;&lt;h1 id='first'&gt;A heading&lt;/h1&gt;&lt;p&gt;Some text &amp;&lt;b&gt;some\n#&gt; bold text.&lt;/b&gt;&lt;/p&gt;&lt;img src='myimg.png' width='100' height='100'\n#&gt; /&gt;&lt;/body&gt;"
  },
  {
    "objectID": "slides/21.html#we-can-generate-latex-syntax-from-r",
    "href": "slides/21.html#we-can-generate-latex-syntax-from-r",
    "title": "Translating R code",
    "section": "We can generate LaTeX syntax from R",
    "text": "We can generate LaTeX syntax from R\n\nWe can do this:\n\n\\sin(\\pi) + \\mathrm{f}(a)\n\nThat look like this:\\[\\sin(\\pi) + \\mathrm{f}(a)\\]\nBy doing this:\n\nto_math(sin(pi) + f(a))"
  },
  {
    "objectID": "slides/21.html#we-need-to-know-some-latex-structure-for-this-exercise",
    "href": "slides/21.html#we-need-to-know-some-latex-structure-for-this-exercise",
    "title": "Translating R code",
    "section": "We need to know some LaTeX structure for this exercise",
    "text": "We need to know some LaTeX structure for this exercise\n\nSimple mathematical equations are written like in R: x * y, z ^ 5 = \\(x * y, z^5\\)\nSpecial characters start with a \\. For example, \\pi = \\(\\pi\\)\nComplicated functions look like \\name{arg1}{arg2}. For example, fractions are \\frac{a}{b} = \\(\\frac{a}{b}\\)\nMathematics functions need to be written like \\textrm{f}(a * b) = \\(\\textrm{f}(a*b)\\)"
  },
  {
    "objectID": "slides/21.html#follow-a-macro-micro-procedure-to-create-latex-dsl",
    "href": "slides/21.html#follow-a-macro-micro-procedure-to-create-latex-dsl",
    "title": "Translating R code",
    "section": "Follow a macro-micro procedure to create LaTeX DSL",
    "text": "Follow a macro-micro procedure to create LaTeX DSL\n\nStart with infrastructure (to_math()) and experiment until cover every use case.\nFour stages:\n\nConvert known symbols: pi ‚Üí \\pi\nLeave other symbols unchanged: x ‚Üí x, y ‚Üí y\nConvert known functions to their special forms: sqrt(frac(a, b)) ‚Üí \\sqrt{\\frac{a}{b}}\nWrap unknown functions with \\textrm: f(a) ‚Üí \\textrm{f}(a)"
  },
  {
    "objectID": "slides/21.html#our-latex-dsl-will-be-different-than-our-html-dsl",
    "href": "slides/21.html#our-latex-dsl-will-be-different-than-our-html-dsl",
    "title": "Translating R code",
    "section": "Our LaTeX DSL will be different than our HTML DSL",
    "text": "Our LaTeX DSL will be different than our HTML DSL\n\nEvaluation environment no longer constant\nHas to vary depending on input\nNecessary to handle unknown symbols & functions\nNever evaluate in argument environment\nWe translate every function to a LaTeX expression\nUser must explicitly !! in order to evaluate normally"
  },
  {
    "objectID": "slides/21.html#we-need-to-create-an-execution-environment-to_math",
    "href": "slides/21.html#we-need-to-create-an-execution-environment-to_math",
    "title": "Translating R code",
    "section": "We need to create an execution environment: to_math()",
    "text": "We need to create an execution environment: to_math()\n\n# Execution environment\nto_math &lt;- function(x) {\n  expr &lt;- enexpr(x) # Capture expression (intended LaTeX)\n  out &lt;- eval_bare(expr, latex_env(expr)) # Evaluate in a specific environment for this expression\n\n  latex(out)\n}\n\n# Class generator\nlatex &lt;- function(x) structure(x, class = \"advr_latex\")\n\n# Dispatch\nprint.advr_latex &lt;- function(x) {\n  cat(\"&lt;LATEX&gt; \", x, \"\\n\", sep = \"\")\n}\n\nlatex_env() is going to be created later. It depends on the expression."
  },
  {
    "objectID": "slides/21.html#we-can-quickly-create-an-environment-with-all-the-greek-letters",
    "href": "slides/21.html#we-can-quickly-create-an-environment-with-all-the-greek-letters",
    "title": "Translating R code",
    "section": "We can quickly create an environment with all the Greek letters",
    "text": "We can quickly create an environment with all the Greek letters\n\ngreek &lt;- c(\n  \"alpha\",\n  \"theta\",\n  \"tau\",\n  \"beta\",\n  \"vartheta\",\n  \"pi\",\n  \"upsilon\",\n  \"gamma\",\n  \"varpi\",\n  \"phi\",\n  \"delta\",\n  \"kappa\",\n  \"rho\",\n  \"varphi\",\n  \"epsilon\",\n  \"lambda\",\n  \"varrho\",\n  \"chi\",\n  \"varepsilon\",\n  \"mu\",\n  \"sigma\",\n  \"psi\",\n  \"zeta\",\n  \"nu\",\n  \"varsigma\",\n  \"omega\",\n  \"eta\",\n  \"xi\",\n  \"Gamma\",\n  \"Lambda\",\n  \"Sigma\",\n  \"Psi\",\n  \"Delta\",\n  \"Xi\",\n  \"Upsilon\",\n  \"Omega\",\n  \"Theta\",\n  \"Pi\",\n  \"Phi\"\n)\ngreek_list &lt;- set_names(paste0(\"\\\\\", greek), greek)\ngreek_env &lt;- as_environment(greek_list)"
  },
  {
    "objectID": "slides/21.html#our-environment-for-known-symbols-works",
    "href": "slides/21.html#our-environment-for-known-symbols-works",
    "title": "Translating R code",
    "section": "Our environment for known symbols works",
    "text": "Our environment for known symbols works\n\n# Create the latex_env based on the greek_env\nlatex_env &lt;- function(expr) {\n  greek_env\n}\n\nto_math(pi)\n\n#&gt; &lt;LATEX&gt; \\pi\n\nto_math(beta)\n\n#&gt; &lt;LATEX&gt; \\beta"
  },
  {
    "objectID": "slides/21.html#we-can-capture-the-unknown-symbols-from-the-expression",
    "href": "slides/21.html#we-can-capture-the-unknown-symbols-from-the-expression",
    "title": "Translating R code",
    "section": "We can capture the unknown symbols from the expression",
    "text": "We can capture the unknown symbols from the expression\nLeave non-Greek symbols as-is, but we don¬¥t know what symbols are going to be used.\n\n# Walk the AST to find all the symbols:\nall_names_rec &lt;- function(x) {\n  switch_expr(\n    x,\n    constant = character(),\n    symbol = as.character(x),\n    call = flat_map_chr(as.list(x[-1]), all_names)\n  )\n}\n\nall_names &lt;- function(x) {\n  unique(all_names_rec(x))\n}\n\nall_names(expr(x + y + f(a, b, c, 10)))\n\n#&gt; [1] \"x\" \"y\" \"a\" \"b\" \"c\"\n\n\n\n\nUtility functions from section 18.5‚Ä¶\n\n\nexpr_type &lt;- function(x) {\n  if (rlang::is_syntactic_literal(x)) {\n    \"constant\"\n  } else if (is.symbol(x)) {\n    \"symbol\"\n  } else if (is.call(x)) {\n    \"call\"\n  } else if (is.pairlist(x)) {\n    \"pairlist\"\n  } else {\n    typeof(x)\n  }\n}\nflat_map_chr &lt;- function(.x, .f, ...) {\n  purrr::flatten_chr(purrr::map(.x, .f, ...))\n}\nswitch_expr &lt;- function(x, ...) {\n  switch(\n    expr_type(x),\n    ...,\n    stop(\"Don't know how to handle type \", typeof(x), call. = FALSE)\n  )\n}"
  },
  {
    "objectID": "slides/21.html#we-can-build-the-environment-based-on-the-list-of-the-unknown-symbols",
    "href": "slides/21.html#we-can-build-the-environment-based-on-the-list-of-the-unknown-symbols",
    "title": "Translating R code",
    "section": "We can build the environment based on the list of the unknown symbols",
    "text": "We can build the environment based on the list of the unknown symbols\n\nlatex_env &lt;- function(expr) {\n  names &lt;- all_names(expr)\n  symbol_env &lt;- as_environment(set_names(names))\n\n  symbol_env\n}\n\nto_math(x)\n\n#&gt; &lt;LATEX&gt; x\n\nto_math(longvariablename)\n\n#&gt; &lt;LATEX&gt; longvariablename\n\nto_math(pi)\n\n#&gt; &lt;LATEX&gt; pi"
  },
  {
    "objectID": "slides/21.html#we-can-integrate-the-known-and-unknown-symbols-environments",
    "href": "slides/21.html#we-can-integrate-the-known-and-unknown-symbols-environments",
    "title": "Translating R code",
    "section": "We can integrate the known and unknown symbols environments",
    "text": "We can integrate the known and unknown symbols environments\n\nlatex_env &lt;- function(expr) {\n  # Unknown symbols\n  names &lt;- all_names(expr)\n  symbol_env &lt;- as_environment(set_names(names))\n\n  # Known symbols\n  env_clone(greek_env, parent = symbol_env) # This gives preference to Greek over defaults.\n  # We want \"\\\\pi\", not \"pi\".\n}"
  },
  {
    "objectID": "slides/21.html#our-environment-for-all-symbols-works",
    "href": "slides/21.html#our-environment-for-all-symbols-works",
    "title": "Translating R code",
    "section": "Our environment for all symbols works",
    "text": "Our environment for all symbols works\n\nto_math(x)\n\n#&gt; &lt;LATEX&gt; x\n\nto_math(longvariablename)\n\n#&gt; &lt;LATEX&gt; longvariablename\n\nto_math(pi)\n\n#&gt; &lt;LATEX&gt; \\pi"
  },
  {
    "objectID": "slides/21.html#we-can-base-our-translation-on-simple-helpers",
    "href": "slides/21.html#we-can-base-our-translation-on-simple-helpers",
    "title": "Translating R code",
    "section": "We can base our translation on simple helpers",
    "text": "We can base our translation on simple helpers\n\nunary_op &lt;- function(left, right) {\n  new_function(\n    exprs(e1 = ),\n    expr(\n      paste0(!!left, e1, !!right)\n    ),\n    caller_env()\n  )\n}\n\nbinary_op &lt;- function(sep) {\n  new_function(\n    exprs(e1 = , e2 = ),\n    expr(\n      paste0(e1, !!sep, e2)\n    ),\n    caller_env()\n  )\n}\n\nunary_op(\"\\\\sqrt{\", \"}\")\n\n#&gt; function (e1) \n#&gt; paste0(\"\\\\sqrt{\", e1, \"}\")\n\nbinary_op(\"+\")\n\n#&gt; function (e1, e2) \n#&gt; paste0(e1, \"+\", e2)"
  },
  {
    "objectID": "slides/21.html#we-can-build-the-environment-for-functions-with-some-common-examples",
    "href": "slides/21.html#we-can-build-the-environment-for-functions-with-some-common-examples",
    "title": "Translating R code",
    "section": "We can build the environment for functions with some common examples",
    "text": "We can build the environment for functions with some common examples\n\n# Binary operators\nf_env &lt;- child_env(\n  .parent = empty_env(),\n  `+` = binary_op(\" + \"),\n  `-` = binary_op(\" - \"),\n  `*` = binary_op(\" * \"),\n  `/` = binary_op(\" / \"),\n  `^` = binary_op(\"^\"),\n  `[` = binary_op(\"_\"),\n\n  # Grouping\n  `{` = unary_op(\"\\\\left{ \", \" \\\\right}\"),\n  `(` = unary_op(\"\\\\left( \", \" \\\\right)\"),\n  paste = paste,\n\n  # Other math functions\n  sqrt = unary_op(\"\\\\sqrt{\", \"}\"),\n  sin = unary_op(\"\\\\sin(\", \")\"),\n  log = unary_op(\"\\\\log(\", \")\"),\n  abs = unary_op(\"\\\\left| \", \"\\\\right| \"),\n  frac = function(a, b) {\n    paste0(\"\\\\frac{\", a, \"}{\", b, \"}\")\n  },\n\n  # Labelling\n  hat = unary_op(\"\\\\hat{\", \"}\"),\n  tilde = unary_op(\"\\\\tilde{\", \"}\")\n)"
  },
  {
    "objectID": "slides/21.html#we-can-integrate-this-new-environment-to-the-symbols-environment",
    "href": "slides/21.html#we-can-integrate-this-new-environment-to-the-symbols-environment",
    "title": "Translating R code",
    "section": "We can integrate this new environment to the symbols environment",
    "text": "We can integrate this new environment to the symbols environment\n\nlatex_env &lt;- function(expr) {\n  # Known functions\n  f_env\n\n  # Default symbols\n  names &lt;- all_names(expr)\n  symbol_env &lt;- as_environment(set_names(names), parent = f_env)\n\n  # Known symbols\n  greek_env &lt;- env_clone(greek_env, parent = symbol_env)\n\n  greek_env\n}"
  },
  {
    "objectID": "slides/21.html#our-integrated-symbol-and-known-functions-environment-works",
    "href": "slides/21.html#our-integrated-symbol-and-known-functions-environment-works",
    "title": "Translating R code",
    "section": "Our integrated symbol and known functions environment works",
    "text": "Our integrated symbol and known functions environment works\n\nto_math(sin(x + pi))\n\n#&gt; &lt;LATEX&gt; \\sin(x + \\pi)\n\nto_math(log(x[i]^2))\n\n#&gt; &lt;LATEX&gt; \\log(x_i^2)\n\nto_math(sin(sin))\n\n#&gt; &lt;LATEX&gt; \\sin(sin)"
  },
  {
    "objectID": "slides/21.html#we-create-a-list-of-unknown-functions-based-on-the-expression",
    "href": "slides/21.html#we-create-a-list-of-unknown-functions-based-on-the-expression",
    "title": "Translating R code",
    "section": "We create a list of unknown functions based on the expression",
    "text": "We create a list of unknown functions based on the expression\n\nall_calls_rec &lt;- function(x) {\n  switch_expr(x, constant = , symbol = character(), call = {\n    fname &lt;- as.character(x[[1]])\n    children &lt;- flat_map_chr(as.list(x[-1]), all_calls)\n    c(fname, children)\n  })\n}\nall_calls &lt;- function(x) {\n  unique(all_calls_rec(x))\n}\n\nall_calls(expr(f(g + b, c, d(a))))\n\n#&gt; [1] \"f\" \"+\" \"d\""
  },
  {
    "objectID": "slides/21.html#we-can-use-a-function-factory-for-creating-unknown-functions",
    "href": "slides/21.html#we-can-use-a-function-factory-for-creating-unknown-functions",
    "title": "Translating R code",
    "section": "We can use a function factory for creating unknown functions",
    "text": "We can use a function factory for creating unknown functions\n\nunknown_op &lt;- function(op) {\n  new_function(\n    exprs(... = ),\n    expr({\n      contents &lt;- paste(..., collapse = \", \")\n      paste0(!!paste0(\"\\\\mathrm{\", op, \"}(\"), contents, \")\")\n    })\n  )\n}\n\nunknown_op(\"foo\")\n\n#&gt; function (...) \n#&gt; {\n#&gt;     contents &lt;- paste(..., collapse = \", \")\n#&gt;     paste0(\"\\\\mathrm{foo}(\", contents, \")\")\n#&gt; }\n#&gt; &lt;environment: 0x0000025275b4bc10&gt;"
  },
  {
    "objectID": "slides/21.html#we-can-integrate-the-unknown-function-environment",
    "href": "slides/21.html#we-can-integrate-the-unknown-function-environment",
    "title": "Translating R code",
    "section": "We can integrate the unknown function environment",
    "text": "We can integrate the unknown function environment\n\nlatex_env &lt;- function(expr) {\n  calls &lt;- all_calls(expr)\n  call_list &lt;- map(set_names(calls), unknown_op)\n  call_env &lt;- as_environment(call_list)\n\n  # Known functions\n  f_env &lt;- env_clone(f_env, call_env)\n\n  # Default symbols\n  names &lt;- all_names(expr)\n  symbol_env &lt;- as_environment(set_names(names), parent = f_env)\n\n  # Known symbols\n  greek_env &lt;- env_clone(greek_env, parent = symbol_env)\n  greek_env\n}"
  },
  {
    "objectID": "slides/21.html#our-final-environment-and-the-full-translation-works",
    "href": "slides/21.html#our-final-environment-and-the-full-translation-works",
    "title": "Translating R code",
    "section": "Our final environment and the full translation works!",
    "text": "Our final environment and the full translation works!\n\nto_math(sin(pi) + f(a))\n\n#&gt; &lt;LATEX&gt; \\sin(\\pi) + \\mathrm{f}(a)"
  },
  {
    "objectID": "slides/21.html#r-can-translate-to-html-via-a-micro-macro-procedure",
    "href": "slides/21.html#r-can-translate-to-html-via-a-micro-macro-procedure",
    "title": "Translating R code",
    "section": "R can translate to HTML via a micro-macro procedure",
    "text": "R can translate to HTML via a micro-macro procedure\n\nCreating an S3 for translation and automatic escaping\nCreating a tag function structure\nCreating a function factory for tags\nCreating an execution environment: with_html()"
  },
  {
    "objectID": "slides/21.html#r-can-translate-to-latex-via-a-macro-micro-procedure",
    "href": "slides/21.html#r-can-translate-to-latex-via-a-macro-micro-procedure",
    "title": "Translating R code",
    "section": "R can translate to LaTeX via a macro-micro procedure",
    "text": "R can translate to LaTeX via a macro-micro procedure\n\nBuild an interface that contains a dynamic environment\nCreating and environment of known symbols by declaring them\nCreating and environment of unknown symbols by walking the AST of the expression\nCreating and environment of known functions by declaring the most common ones\nCreating and environment of unknown functions by walking the AST and using a function factory\nIntegrating all the environment in the dynamic environment contained in the to_math() interface"
  },
  {
    "objectID": "slides/21.html#this-chapter-integrates-core-advanced-r-concepts",
    "href": "slides/21.html#this-chapter-integrates-core-advanced-r-concepts",
    "title": "Translating R code",
    "section": "This chapter integrates core advanced R concepts",
    "text": "This chapter integrates core advanced R concepts\n\nCode as data\nS3 classes and method dispatch\nEnvironments and scoping\nDynamic function generation"
  },
  {
    "objectID": "slides/21.html#takeaway-r-enables-languages-inside-the-language",
    "href": "slides/21.html#takeaway-r-enables-languages-inside-the-language",
    "title": "Translating R code",
    "section": "Takeaway: R enables languages inside the language",
    "text": "Takeaway: R enables languages inside the language\n\nTranslation comes naturally from how R is designed\nCreating small domain-specific languages in R is normal and expected, not a trick\nAdvanced R shows how to build them in a clear, safe, and maintainable way"
  },
  {
    "objectID": "slides/23.html#learning-objectives",
    "href": "slides/23.html#learning-objectives",
    "title": "Measuring performance",
    "section": "Learning objectives:",
    "text": "Learning objectives:\n\nUnderstand how to figure out where R is spending time executing your code\nLearn about the tools for benchmarking your code\nImplement code profiling"
  },
  {
    "objectID": "slides/23.html#introduction",
    "href": "slides/23.html#introduction",
    "title": "Measuring performance",
    "section": "Introduction",
    "text": "Introduction\n\n‚ÄúBefore you can make your code faster, you first need to figure out what‚Äôs making it slow.‚Äù\n\n\nSLOW DOWN TO LEARN HOW TO CODE FASTER | credits: packtpub.com\nprofile your code: measure the run-time of each line of code using realistic inputs\nexperiment with alternatives to find faster code\nmicrobenchmark to measure the difference in performance."
  },
  {
    "objectID": "slides/23.html#packages-introduced",
    "href": "slides/23.html#packages-introduced",
    "title": "Measuring performance",
    "section": "Packages introduced",
    "text": "Packages introduced\n\nlibrary(profvis)\nlibrary(bench)\nlibrary(microbenchmark)"
  },
  {
    "objectID": "slides/23.html#profiling",
    "href": "slides/23.html#profiling",
    "title": "Measuring performance",
    "section": "Profiling",
    "text": "Profiling\nProfiling the code is the process of gathering information about the resource requirements of the individual calls in your code.\nProfilers sample the code performance by stopping the execution of code every few milliseconds, gauging which process is being engaged, and recording the resource utilization.\nExample:\n\nf &lt;- function() {\n  pause(0.1)\n  g()\n  h()\n}\ng &lt;- function() {\n  pause(0.1)\n  h()\n}\nh &lt;- function() {\n  pause(0.1)\n}"
  },
  {
    "objectID": "slides/23.html#profiling-1",
    "href": "slides/23.html#profiling-1",
    "title": "Measuring performance",
    "section": "Profiling",
    "text": "Profiling\nProfile the execution of f():\n- `profvis::pause()` is used instead of `Sys.sleep()` \n  as the latter makes R use no resources\n- profile `f()`, with `utils::Rprof()`\n\ntmp &lt;- tempfile()\nRprof(tmp, interval = 0.1)\nf()\n\n#&gt; NULL\n\nRprof(NULL)\nwriteLines(readLines(tmp))\n\n#&gt; sample.interval=100000\n#&gt; \"pause\" \"f\" \"eval\" \"eval\" \"withVisible\" \"withCallingHandlers\" \"eval\" \"eval\" \"with_handlers\" \"doWithOneRestart\" \"withOneRestart\" \"withRestartList\" \"doWithOneRestart\" \"withOneRestart\" \"withRestartList\" \"withRestarts\" \"evaluate::evaluate\" \"evaluate\" \"in_dir\" \"in_input_dir\" \"eng_r\" \"block_exec\" \"call_block\" \"process_group\" \"withCallingHandlers\" \"with_options\" \"xfun:::handle_error\" \"process_file\" \"knitr::knit\" \"rmarkdown::render\" \"execute\" \".main\" \n#&gt; \"pause\" \"g\" \"f\" \"eval\" \"eval\" \"withVisible\" \"withCallingHandlers\" \"eval\" \"eval\" \"with_handlers\" \"doWithOneRestart\" \"withOneRestart\" \"withRestartList\" \"doWithOneRestart\" \"withOneRestart\" \"withRestartList\" \"withRestarts\" \"evaluate::evaluate\" \"evaluate\" \"in_dir\" \"in_input_dir\" \"eng_r\" \"block_exec\" \"call_block\" \"process_group\" \"withCallingHandlers\" \"with_options\" \"xfun:::handle_error\" \"process_file\" \"knitr::knit\" \"rmarkdown::render\" \"execute\" \".main\" \n#&gt; \"pause\" \"h\" \"g\" \"f\" \"eval\" \"eval\" \"withVisible\" \"withCallingHandlers\" \"eval\" \"eval\" \"with_handlers\" \"doWithOneRestart\" \"withOneRestart\" \"withRestartList\" \"doWithOneRestart\" \"withOneRestart\" \"withRestartList\" \"withRestarts\" \"evaluate::evaluate\" \"evaluate\" \"in_dir\" \"in_input_dir\" \"eng_r\" \"block_exec\" \"call_block\" \"process_group\" \"withCallingHandlers\" \"with_options\" \"xfun:::handle_error\" \"process_file\" \"knitr::knit\" \"rmarkdown::render\" \"execute\" \".main\" \n#&gt; \"pause\" \"h\" \"f\" \"eval\" \"eval\" \"withVisible\" \"withCallingHandlers\" \"eval\" \"eval\" \"with_handlers\" \"doWithOneRestart\" \"withOneRestart\" \"withRestartList\" \"doWithOneRestart\" \"withOneRestart\" \"withRestartList\" \"withRestarts\" \"evaluate::evaluate\" \"evaluate\" \"in_dir\" \"in_input_dir\" \"eng_r\" \"block_exec\" \"call_block\" \"process_group\" \"withCallingHandlers\" \"with_options\" \"xfun:::handle_error\" \"process_file\" \"knitr::knit\" \"rmarkdown::render\" \"execute\" \".main\""
  },
  {
    "objectID": "slides/23.html#visualising-profiles",
    "href": "slides/23.html#visualising-profiles",
    "title": "Measuring performance",
    "section": "Visualising profiles",
    "text": "Visualising profiles\nMakes easier to build up a mental model of what you need to change:\n- `profvis::profvis(expr)`\n- `utils::summaryRprof()`\n\nsource(\"scripts/profiling-example.R\")\nprofvis(f())"
  },
  {
    "objectID": "slides/23.html#mini-case-study-poor-practice-of-copy-on-modify",
    "href": "slides/23.html#mini-case-study-poor-practice-of-copy-on-modify",
    "title": "Measuring performance",
    "section": "Mini-case study: poor practice of copy-on-modify",
    "text": "Mini-case study: poor practice of copy-on-modify\nProfiling a loop that modifies an existing variable: most of the time is spent in garbage collection (i.e.¬†releasing and reclaiming memory that is no longer needed).\n\nprofvis::profvis({\n  x &lt;- integer()\nfor (i in 1:1e4) {\n  x &lt;- c(x, i)\n}\n})\n\n\n\n\n\nYou can figure out what is the source of the problem by looking at the memory column. In this case, copy-on-modify acts in each iteration of the loop creating another copy of x.\n\nAll the time is being spent in the concatenation operation.\nNearly the same amount of memory is being asked for and is being released."
  },
  {
    "objectID": "slides/23.html#limitations",
    "href": "slides/23.html#limitations",
    "title": "Measuring performance",
    "section": "Limitations",
    "text": "Limitations\n\nProfiling does not extend to C code.\n\nC code can be profiled with its own tools in C IDEs.\n\nAnonymous functions do not show up properly.\nLazy evaluation of function arguments makes things complicated.\n\nAre things evaluated inside another function, and whose line is it anyway?\n\n\nExercise\nWhere is the time being spent in this function?\n\nprofvis::profvis({\n  f &lt;- function(n = 1e5) {\n  x &lt;- rep(1, n)\n  rm(x)\n}\n}, torture = 10)\n\n?rm()\nSolution"
  },
  {
    "objectID": "slides/23.html#microbenchmarking",
    "href": "slides/23.html#microbenchmarking",
    "title": "Measuring performance",
    "section": "Microbenchmarking",
    "text": "Microbenchmarking\nIn software development, microbenchmarking is understood as measuring time or other aspects of performance of a very small piece of code. You expect the code to run microseconds, but you know that in your larger project, you will run this thousands or millions of times. It is particularly useful when you are considering different implementations of that very frequently repeated step, and want to maximize performance.\n\nCredits: Google search-engine"
  },
  {
    "objectID": "slides/23.html#microbenchmarking-1",
    "href": "slides/23.html#microbenchmarking-1",
    "title": "Measuring performance",
    "section": "Microbenchmarking",
    "text": "Microbenchmarking\n\nx &lt;- runif(100)\nuniroot_sqrt &lt;- function(x) {\n  solution &lt;- x\n  for(i in seq_along(x)) {\n    solution[i] &lt;- uniroot( \n      f = function(z, a) { z*z - a }, \n      interval = c(0,1), \n      tol = 5 * .Machine$double.eps,\n      a = x[i]) |&gt; \n      purrr::pluck('root')\n  }\n  solution\n}"
  },
  {
    "objectID": "slides/23.html#microbenchmarking-2",
    "href": "slides/23.html#microbenchmarking-2",
    "title": "Measuring performance",
    "section": "Microbenchmarking",
    "text": "Microbenchmarking\n\nmb1 &lt;- microbenchmark(\n  sqrt(x),\n  x ^ 0.5,\n  exp( 0.5 * log(x)),\n  uniroot_sqrt(x)\n)\nmb1\n\n#&gt; Unit: nanoseconds\n#&gt;               expr     min      lq    mean  median      uq      max neval\n#&gt;            sqrt(x)     300     500    1116     700    1600     5600   100\n#&gt;              x^0.5    2900    3300    4082    3700    4550    10700   100\n#&gt;  exp(0.5 * log(x))    8500    9400   10477   10100   11250    19900   100\n#&gt;    uniroot_sqrt(x) 2578200 3201350 3697142 3344050 3506400 26347800   100\n\n\nThe underlying data.frame()-ish object is only expr and time. What you see above is the summary() method applied to it. (Output of plain mb1 differs between rendering systems; interactively it is passed through the print() method.)"
  },
  {
    "objectID": "slides/23.html#microbenchmarking-3",
    "href": "slides/23.html#microbenchmarking-3",
    "title": "Measuring performance",
    "section": "Microbenchmarking",
    "text": "Microbenchmarking\nMuch greater detail is provided by the {bench} package: bench::mark().\n\nlb &lt;- bench::mark(\n  sqrt(x),\n  x ^ 0.5,\n  exp( 0.5 * log(x)),\n  uniroot_sqrt(x)\n)\nlb\n\n#&gt; # A tibble: 4 √ó 6\n#&gt;   expression             min   median `itr/sec` mem_alloc `gc/sec`\n#&gt;   &lt;bch:expr&gt;        &lt;bch:tm&gt; &lt;bch:tm&gt;     &lt;dbl&gt; &lt;bch:byt&gt;    &lt;dbl&gt;\n#&gt; 1 sqrt(x)              300ns    400ns  1772924.      848B      0  \n#&gt; 2 x^0.5                2.9¬µs    3.3¬µs   300156.      848B      0  \n#&gt; 3 exp(0.5 * log(x))    7.9¬µs    9.2¬µs   106807.      848B      0  \n#&gt; 4 uniroot_sqrt(x)     2.51ms   3.35ms      289.      848B     30.8\n\n\nAgain, what you see above is summary(lb). Timing for each run is inside the S3 class components. (Output of plain lb differs between rendering systems; interactively it is passed through the print() method.)"
  },
  {
    "objectID": "slides/23.html#microbenchmarking-distributions",
    "href": "slides/23.html#microbenchmarking-distributions",
    "title": "Measuring performance",
    "section": "Microbenchmarking distributions",
    "text": "Microbenchmarking distributions\n\nplot(lb)\n\n\nResults are typically heavily skewed: some calculations may have hit ‚Äúunfortunate‚Äù moments with the system was busy with something else. Pay more attention to medians rather than means. The uniroot-based calculation was so slow that bench::mark() decided to stop after a few hundred runs rather than the default 10000 runs, so as to fit the total simulation budget of 0.5 sec."
  },
  {
    "objectID": "slides/23.html#other-considerations",
    "href": "slides/23.html#other-considerations",
    "title": "Measuring performance",
    "section": "Other considerations",
    "text": "Other considerations\n\nShould this go to the next chapter ‚ÄúPerformance‚Äù instead maybe?\n\nThings that can/will affect performance, some are hard to measure:\n\nScaling\n\nbubble sort: \\(O(n^2)\\), actual sort: \\(O(n \\log n)\\)\nmatrix inversion: \\(O(n^3)\\) in linear algebra classes, \\(O(n^{-2.3})\\) with the best algorithms\n\nI/O bottlenecks\n\nCPU cache \\(\\approx\\) 1000x faster than RAM which is \\(\\approx\\) 1000 faster than local HDD which is \\(\\approx\\) 10‚Äì100 faster than network/cloud\n\nLaziness and prudence: when things get evaluated and put into memory\nUnderstand how parallel processing (future, mirai) passes objects between instances, depend on each others‚Äô completions, and wait for one another otherwise"
  },
  {
    "objectID": "slides/23.html#resources",
    "href": "slides/23.html#resources",
    "title": "Measuring performance",
    "section": "Resources",
    "text": "Resources\n\nprofvis package\nbench package\nsolutions"
  },
  {
    "objectID": "slides/25.html#learning-objectives",
    "href": "slides/25.html#learning-objectives",
    "title": "Rewriting R code in C++ (and Rust)",
    "section": "Learning objectives:",
    "text": "Learning objectives:\n\nWhy rewrite R code in C++/Rust\nCompare C++/Rust function and package development\nRun C++/Rust in R\nCreate and call C++/Rust functions in R\nEvaluate function performance for R/C/C++/Rust\nCompare compiler error messages between C++ and Rust\nIdentify advanced tooling for C++/Rust\n\n\nlibrary(Rcpp)\n#library(rextendr) # rust performance shown below on MacOS 16.7.3 Intel i7"
  },
  {
    "objectID": "slides/25.html#even-after-optimizing-r-code-it-still-might-not-be-optimized-enough",
    "href": "slides/25.html#even-after-optimizing-r-code-it-still-might-not-be-optimized-enough",
    "title": "Rewriting R code in C++ (and Rust)",
    "section": "Even after optimizing R code, it still might not be optimized enough",
    "text": "Even after optimizing R code, it still might not be optimized enough\n\nC++Rust\n\n\n\nR‚Äôs for loops are much slower compared to C++\n\nCan‚Äôt vectorize in R when loops depend on subsequent iterations\n\nR function calls are much slower compared to C++\n\nRecursive functions involving millions of function calls\n\nR does not include many data structures compared to C++\n\nC++ Standard Template Library (STL) for efficiency, correctness, and maintainability\n\n\n\n\n\nR cannot exploit parallelism as effectively as Rust\n\nRust memory is safer (ownership model with borrow checking) and so lacks GIL or run time locks\n\nR object memory is borrowed via C/C++ unlike Rust\n\nRust owns objects and code compiles directly to machine code\n\nR or C code debugging is more challenging than Rust\n\nRust has no GC so lacks memory bugs and has great error messages comparable with the {tidyverse}"
  },
  {
    "objectID": "slides/25.html#c-and-rust-code-are-used-via-packages-and-offer-similar-implementation-approaches",
    "href": "slides/25.html#c-and-rust-code-are-used-via-packages-and-offer-similar-implementation-approaches",
    "title": "Rewriting R code in C++ (and Rust)",
    "section": "C++ and Rust code are used via packages and offer similar implementation approaches",
    "text": "C++ and Rust code are used via packages and offer similar implementation approaches\n\nC++Rust\n\n\n\nRcpp::evalCppRcpp::cppFunctionRcpp::sourceCppusethis::use_rcpp\n\n\n\nRcpp::evalCpp('NA_INTEGER + 1')\n\n#&gt; [1] -2147483647\n\n\n\n\n\nRcpp::cppFunction('int add(int x, int y, int z) {\n  int sum = x + y + z;\n  return sum;\n}')\nadd\n\n#&gt; function (x, y, z) \n#&gt; .Call(&lt;pointer: 0x00007fff8e1d1434&gt;, x, y, z)\n\nadd(1,2,3)\n\n#&gt; [1] 6\n\n\n\n\n#include &lt;Rcpp.h&gt;\nusing namespace Rcpp;\n\n// [[Rcpp::export]]\ndouble meanC(NumericVector x) {\n  int n = x.size();\n  double total = 0;\n\n  for(int i = 0; i &lt; n; ++i) {\n    total += x[i];\n  }\n  return total / n;\n}\n\n\n\nCreates infrastructure for using C++ within R packages\n\n\n\n\n\n\n\nrextendr::rust_functionrextendr::rust_sourcerextendr::use_extendr\n\n\n\nrextendr::rust_function(\"fn add(a:f64, b:f64) -&gt; f64 { a + b }\")\nadd(2.5, 4.7)\n# 7.2\n\n\n\n\ncode &lt;- '\n#[extendr]\nfn main() {\n  println!(\"Hello, world!\");\n}\n'\n\nrextendr::rust_source(\n  code = code\n)\n\nmain()\n# Hello, world!\n\n\n\n# create a new R package\nusethis::create_package(\"helloextendr\")\n\n# Use extendr\nrextendr::use_extendr()\n\n# Document and build the package\nrextendr::document()\n\n# run hello_world()\nhello_world()\n#&gt; [1] \"Hello, world!\"\n\nNewer Rust toolchain and R version is required\nUsing VSCode/Positron is strongly recommended with rust-analyzer extension"
  },
  {
    "objectID": "slides/25.html#reading-c-and-rust-code-is-similar-to-reading-r-code",
    "href": "slides/25.html#reading-c-and-rust-code-is-similar-to-reading-r-code",
    "title": "Rewriting R code in C++ (and Rust)",
    "section": "Reading C++ and Rust code is similar to reading R code",
    "text": "Reading C++ and Rust code is similar to reading R code\n\nScalar functionsVector functions\n\n\n\nRC++Rust\n\n\n\nsignR &lt;- function(x) {\n  if (x &gt; 0) {\n    1\n  } else if (x == 0) {\n    0\n  } else {\n    -1\n  }\n}\n\n\n\n\nRcpp::cppFunction('int signC(double x) {\n  if (x &gt; 0) {\n    return 1;\n  } else if (x == 0) {\n    return 0;\n  } else {\n    return -1;\n  }\n}') |&gt; system.time()\n\n#&gt;    user  system elapsed \n#&gt;    0.02    0.00    2.81\n\n\n\n\n\nrextendr::rust_function(\"\nfn signRust(x: f64) -&gt; i32 {\n    if x &gt; 0.0 {\n        1\n    } else if x == 0.0 {\n        0\n    } else {\n        -1\n    }\n}\n\")\n\n\n\n\n\n\n\nRC++Rust\n\n\n\nsign\n\n#&gt; function (x)  .Primitive(\"sign\")\n\nsignR &lt;- function(x) {\n  as.integer(vapply(x,sign,double(1)))\n}\n\n\n\n\nRcpp::cppFunction(\"\nNumericVector signC(NumericVector x) {\n  int n = x.size();\n  NumericVector out(n);\n\n  for (int i = 0; i &lt; n; i++) {\n    if (x[i] &gt; 0.0) {\n      out[i] = 1;\n    } else if (x[i] == 0.0) {\n      out[i] = 0;\n    } else {\n      out[i] = -1;\n    }\n  }\n\n  return out;\n}\") |&gt; system.time()\n\n#&gt;    user  system elapsed \n#&gt;    0.02    0.00    2.80\n\nRcpp::cppFunction(\"\nNumericVector signCfaster(NumericVector x) {\n  int n = x.size();\n  NumericVector out(n);\n\n  for (int i = 0; i &lt; n; ++i) {\n    double v = x[i];\n    out[i] = (v &gt; 0) ? 1.0 : (v == 0 ? 0.0 : -1.0);\n  }\n\n  return out;\n\n}\") |&gt; system.time()\n\n#&gt;    user  system elapsed \n#&gt;    0.03    0.02    2.90\n\n\n\n\n\nrextendr::rust_function(\"\nfn signRust(x: Vec&lt;f64&gt;) -&gt; Vec&lt;Rint&gt; {\n    x.into_iter()\n        .map(|v| {\n            if v &gt; 0.0 {\n                Rint::from(1)\n            } else if v == 0.0 {\n                Rint::from(0)\n            } else {\n                Rint::from(-1)\n            }\n        })\n        .collect()\n}\n\")\n\ncode &lt;- '\n\nuse rayon::prelude::*;\n\n#[extendr]\nfn signRustPar(x: Vec&lt;f64&gt;) -&gt; Vec&lt;Rint&gt; {\n    x.into_par_iter()\n        .map(|v| {\n            if v &gt; 0.0 {\n                Rint::from(1)\n            } else if v == 0.0 {\n                Rint::from(0)\n            } else {\n                Rint::from(-1)\n            }\n        })\n        .collect()\n}\n'\n\nrextendr::rust_source(\n  code = code,\n  dependencies = list(rayon = \"1\")\n)"
  },
  {
    "objectID": "slides/25.html#the-c-optimized-sign-is-most-performant-then-c-re-implementation-is-faster-but-rust-uses-less-memory",
    "href": "slides/25.html#the-c-optimized-sign-is-most-performant-then-c-re-implementation-is-faster-but-rust-uses-less-memory",
    "title": "Rewriting R code in C++ (and Rust)",
    "section": "The C optimized sign is most performant, then C++ re-implementation is faster but Rust uses less memory",
    "text": "The C optimized sign is most performant, then C++ re-implementation is faster but Rust uses less memory\n\nvec &lt;- rnorm(1e7,sd = 50)\nbench::mark(\n  signR(vec),\n  sign(vec),\n  signCfaster(vec),\n  signC(vec),\n  signRustPar(vec),\n  signRust(vec),\n  relative = TRUE\n)\n## A tibble: 6 √ó 13\n# expression         min median `itr/sec` mem_alloc `gc/sec` n_itr  n_gc total_time\n# &lt;bch:expr&gt;       &lt;dbl&gt;  &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt;   &lt;bch:tm&gt;      \n#1 signR(vec)       98.3   83.6       1         3.00      Inf     1    34      3.84s\n#2 sign(vec)         1      1        58.0       2.00      Inf     8     3    529.3ms\n#3 signCfaster(vec)  1.70   1.86     44.7       2.00      Inf     6     1   514.77ms\n#4 signC(vec)        3.48   2.97     26.5       2.00      Inf     4     1   578.39ms\n#5 signRustPar(vec) 10.1    8.62      9.70      1         NaN     2     0   791.64ms\n#6 signRust(vec)    12.7   13.3       6.29      1         NaN     2     0      1.22s"
  },
  {
    "objectID": "slides/25.html#rust-has-more-readable-error-messages-than-c",
    "href": "slides/25.html#rust-has-more-readable-error-messages-than-c",
    "title": "Rewriting R code in C++ (and Rust)",
    "section": "Rust has more readable error messages than C++",
    "text": "Rust has more readable error messages than C++\n\nC++Rust\n\n\n\nRcpp::cppFunction(\"\nNumericVector signCfaster(NumericVector x) {\n  int n = x.size();\n  NumericVector out(n);\n\n  for (int i = 0; i &lt; n; ++i) {\n    out[i] = (v &gt; 0) ? 1.0 : (v == 0 ? 0.0 : -1.0);\n  }\n\n  return out;\n\n}\")\n\n#&gt; using C++ compiler: 'G__~1.EXE (GCC) 14.2.0'\n#&gt; \u001b[01m\u001b[Kfile64341b421e3a.cpp:\u001b[m\u001b[K In function '\u001b[01m\u001b[KRcpp::NumericVector\u001b[01;32m\u001b[K signCfaster\u001b[m\u001b[K(Rcpp::NumericVector)\u001b[m\u001b[K':\n#&gt; \u001b[01m\u001b[Kfile64341b421e3a.cpp:12:15:\u001b[m\u001b[K \u001b[01;31m\u001b[Kerror: \u001b[m\u001b[K'\u001b[01m\u001b[Kv\u001b[m\u001b[K' was not declared in this scope\n#&gt;    12 |     out[i] = (\u001b[01;31m\u001b[Kv\u001b[m\u001b[K &gt; 0) ? 1.0 : (v == 0 ? 0.0 : -1.0);\n#&gt;       |               \u001b[01;31m\u001b[K^\u001b[m\u001b[K\n#&gt; make: *** [C:/PROGRA~1/R/R-45~1.2/etc/x64/Makeconf:296: file64341b421e3a.o] Error 1\n\n\n#&gt; Error in `sourceCpp()`:\n#&gt; ! Error 1 occurred building shared library.\n\n\n\n\n\nrextendr::rust_function('\nfn signRustSlice(x: Robj) -&gt; Robj {\n    // Borrow numeric slice from R (no copy)\n    let slice = x.as_real_slice().expect(\"Expected numeric vector\");\n\n    let n = slice.len();\n    let mut out = Doubles::new(n);\n\n    // Unsafe block gives direct mutable slice (no bounds checks)\n    let out_slice = unsafe { out.as_mut_slice() };\n\n    for i in 0..n {\n        let v = slice[i];\n        out_slice[i] = if v.is_nan() {\n            f64::NAN\n        } else if v &gt; 0.0 {\n            1.0\n        } else if v == 0.0 {\n            0.0\n        } else {\n            -1.0\n        };\n    }\n\n    out.into()\n}\n')"
  },
  {
    "objectID": "slides/25.html#c-and-rust-have-optimized-and-robust-standard-libraries",
    "href": "slides/25.html#c-and-rust-have-optimized-and-robust-standard-libraries",
    "title": "Rewriting R code in C++ (and Rust)",
    "section": "C++ and Rust have optimized and robust standard libraries",
    "text": "C++ and Rust have optimized and robust standard libraries\n\nC++Rust\n\n\n\nStandard Template Library for complex algorithms and data structures\nUse different headers, like &lt;algorithm&gt;, in C++ files to invoke the desired extension\nIf functionality is not in the STL, check the boost library.\n\n\n\n\nRust Standard Library for algorithms and data structures\nPrimitives, modules, macros and keywords included in Rust\nFor example, multithreading using native OS threads with their own memory:\n\nuse std::thread;\n\nthread::spawn(move || {\n    // some work here\n});"
  },
  {
    "objectID": "slides/25.html#references",
    "href": "slides/25.html#references",
    "title": "Rewriting R code in C++ (and Rust)",
    "section": "References",
    "text": "References\n\nRust\n\ncrates.io: Rust package manager\n{cargo} book\n{rextendr} on CRAN\nextendr_api crate documentation\n\nC++\n\nvcpkg C++ package manager\n{Rcpp} on CRAN\nRcpp for everyone\n\nRust and C++ comparison gitbook"
  },
  {
    "objectID": "videos/01/07.html",
    "href": "videos/01/07.html",
    "title": "Cohort 7",
    "section": "",
    "text": "Meeting chat log\n\n00:20:42    collinberke:    https://rich-iannone.github.io/pointblank/\n00:27:36    Ryan Honomichl: brb\n00:37:05    collinberke:    https://rstudio.github.io/renv/articles/renv.html\n00:51:52    Ryan Honomichl: gotta sign off I'll be ready to lead chapter 2 next week!\n00:52:43    collinberke:    https://r4ds.had.co.nz/iteration.html\n00:59:44    collinberke:    https://mastering-shiny.org/action-tidy.html\n01:00:12    collinberke:    https://dplyr.tidyverse.org/articles/programming.html\n01:05:02    collinberke:    https://usethis.r-lib.org/reference/create_from_github.html\n01:05:53    collinberke:    https://github.com/r4ds/bookclub-advr\n01:06:28    Ron:    I gotta run ,  fun conversation, and nice to meet you Matthew !"
  },
  {
    "objectID": "videos/01/06.html",
    "href": "videos/01/06.html",
    "title": "Cohort 6",
    "section": "",
    "text": "Meeting chat log\n\n00:14:40    SriRam: From Toronto, Civil Engineer. I use R for infrastructure planning/ GIS. Here coz of the ping üòÑ , was not ready with a good computer with mic/audio !\n00:15:20    SriRam: I was with Ryan, Federica on other courses\n00:23:21    SriRam: I think the only caution is about Copyright issues\n00:31:32    Ryan Metcalf:   Citation, giving credit back to source. Great comment SriRam.\n00:34:33    SriRam: one = one, in my opinion\n00:41:53    Ryan Metcalf:   https://docs.google.com/spreadsheets/d/1_WFY82UxAdvP4GUdZ2luh15quwdO1n0Km3Q0tfYuqvc/edit#gid=0\n00:48:35    Arthur Shaw:    The README has a nice step-by-step process at the bottom: https://github.com/r4ds/bookclub-advr#how-to-present. I've not done this myself yet, but it looks fairly straightforward.\n00:54:13    lucus w:    Thanks Ryan. Probably {usethis} will be easier. It looks straight forward\n01:00:02    Moria W.:   Thank you for sharing that. This has been good!\n01:00:08    Vaibhav Janve:  Thank you\n01:00:44    Federica Gazzelloni:    hi SriRam we are going.."
  },
  {
    "objectID": "videos/02/10.html",
    "href": "videos/02/10.html",
    "title": "Cohort 10",
    "section": "",
    "text": "Meeting chat log\n\n00:07:45    Stephan Koenig: Isn‚Äôt it just F from revealjs?\n00:08:06    Gabby Palomo:   Reacted to \"Isn‚Äôt it just F from...\" with üëç\n00:09:01    Jon Harmon (jonthegeek):    https://adv-r.hadley.nz/names-values.html \nhttps://DSLC.io/advr \nhttps://r4ds.github.io/bookclub-advr/slides/02.html#/learning-objectives\n00:13:10    Jon Harmon (jonthegeek):    R lets you do really insane things as long as you put it in ticks:\n[main 12:07:10] &gt; `function` &lt;- mean\n[main 12:07:53] &gt; function(x) {x + 1}\nWarning message:\nIn mean.default(as.pairlist(alist(x = )), { :\n  argument is not numeric or logical: returning NA\n[1] NA\n00:18:15    Stephan Koenig: What happens with 1L:10L?\n00:18:33    Josh Persi: Replying to \"What happens with 1L...\"\n\nI had the same question!\n00:23:32    Jon Harmon (jonthegeek):    Went off on a tangent. Currently running this. No limit so far!\nvar_name_start &lt;- \"x\"\nvar_characters &lt;- 1L\nvar_name &lt;- paste(rep(var_name_start, var_characters), collapse = \"\")\nassign(var_name, var_characters)\nmax_characters &lt;- 99999L\nwhile (get(var_name) == var_characters && var_characters &lt;= max_characters) {\n  cli::cli_inform(\n    \"{var_name} works!\"\n  )\n  var_characters &lt;- var_characters + 1L\n  var_name &lt;- paste(rep(var_name_start, var_characters), collapse = \"\")\n  assign(var_name, var_characters)\n}\n00:24:41    Jon Harmon (jonthegeek):    Found the limit (with  assign()  at least):\nError in `assign()`:\n! variable names are limited to 10000 bytes\n00:26:27    Retselisitsoe Monyake:  Replying to \"What happens with 1L...\"\n\n&gt; a &lt;- 1L:10L\n&gt; b &lt;- 1L:10L\n&gt; lobstr::obj_addr(a)\n[1] \"0x19ea1229788\"\n&gt; lobstr::obj_addr(b)\n[1] \"0x19ea0a4e148\"\n\nLook like it gives different addresses\n00:26:57    Stephan Koenig: Replying to \"What happens with 1L‚Ä¶\"\nThanks!\n00:27:07    Stephan Koenig: Reacted to \"&gt; a &lt;- 1L:10L\n&gt; b &lt;-‚Ä¶\" with üëç\n00:28:25    tataphani:  Reacted to \"&gt; a &lt;- 1L:10L\n&gt; b &lt;-...\" with üëç\n00:44:40    Stephan Koenig: So a character vectors acts much more like a list?\n00:52:44    Stephan Koenig: So does the ALTREP stop if you change a single element for example in y?\n00:52:44    Jon Harmon (jonthegeek):    This helps show the efficiency:\n[main 12:47:24] &gt; obj_size(1:10)\n680 B\n[main 12:47:38] &gt; obj_size(as.list(1:10))\n736 B\n[main 12:47:45] &gt; obj_size(1:100)\n680 B\n[main 12:47:50] &gt; obj_size(as.list(1:100))\n6.45 kB\n[main 12:47:53] &gt; obj_size(1:1000)\n680 B\n[main 12:48:20] &gt; obj_size(as.list(1:1000))\n64.05 kB\n00:54:34    Jon Harmon (jonthegeek):    [main 12:49:54] &gt; x &lt;- 1:100\n[main 12:50:13] &gt; obj_size(x)\n680 B\n[main 12:50:16] &gt; x[[1]] &lt;- 2\n[main 12:50:27] &gt; obj_size(x)\n848 B\n00:55:04    Eamon Caddigan: x &lt;- 2^(1:1e1)\ny &lt;- 2^(1:1e4)\nobj_size(x)\n#&gt; 176 B\nobj_size(y)\n#&gt; 80.05 kB\n00:56:17    Eamon Caddigan: Like how Python went from range to xrange back to range\n00:56:27    Stephan Koenig: Can we inspect what ALTREP R is using for an object?\n00:57:07    Jon Harmon (jonthegeek):    Replying to \"Can we inspect what ...\"\n\nNot as far as I know, or at least not easily. We might learn how to do that toward the end when we learn about the C interface.\n00:57:39    Stephan Koenig: Reacted to \"Not as far as I know‚Ä¶\" with üëç\n01:00:54    Eamon Caddigan: ‚ÄúCons cells‚Äù? I low-key love when R shows its Lispyness.\n01:02:09    Zachary Morford:    Thank you all! I have to run but I'll be there next week.\n01:02:16    Stephan Koenig: Thanks, Nick!\n01:02:58    Jon Harmon (jonthegeek):    https://github.com/r4ds/bookclub-advr?tab=readme-ov-file#how-to-present\n01:03:39    Jon Harmon (jonthegeek):    usethis::edit_r_profile()"
  },
  {
    "objectID": "videos/02/09.html",
    "href": "videos/02/09.html",
    "title": "Cohort 9",
    "section": "",
    "text": "Meeting chat log\n\n00:05:29    Olivier Leroy:  start\n00:06:30    Gabby Palomo Munoz: You are in good company, we are all learning.\n00:08:40    Olivier Leroy:  You can also use [] full syntax\n00:08:47    Olivier Leroy:  Or [[]]\n00:09:42    Jo Hardin:  sometimes i want the variable to have a specific format.  for example, in linear model output i want the variable to have a space in it (instead of an underscore).  then i‚Äôll leave the space in the variable and use it throughout my code as `explan variable` or whatever.\n00:09:56    Olivier Leroy:  Reacted to \"sometimes i want the...\" with üëç\n00:10:00    Derek Sollberger (he/him):  Reacted to \"sometimes i want the...\" with üëç\n00:16:53    Olivier Leroy:  That surprised me a lot\n00:18:21    Derek Sollberger (he/him):  Replying to \"That surprised me a ...\"\n\nYes, in comp sci, we jump straight to the environment-eval global/local stuff\n00:20:59    Olivier Leroy:  Replying to \"That surprised me a ...\"\n\nI was  assuming it changed it because of the function ‚Äúlocal‚Äù\n00:21:42    Derek Sollberger (he/him):  Does this column vs row copy-in-place consideration play a role in how \"tidy\" includes \"row: observation, column: variable\"?\n00:24:42    Joel Liebert:   I just looked it up and yes the global string pool is limited to the current R session!\n00:24:50    Isabel Fernandez Escapa:    Reacted to \"I just looked it up ...\" with üëç\n00:24:51    Olivier Leroy:  Reacted to \"I just looked it up ...\" with üëç\n00:24:51    Jo Hardin:  Reacted to \"I just looked it up ...\" with üëç\n00:26:14    Olivier Leroy:  Replying to \"Does this column vs ...\"\n\nNo idea\n00:26:29    Gabby Palomo Munoz: Reacted to \"I just looked it up ...\" with üëç\n00:27:00    Diana Garcia Cortes:    Reacted to \"I just looked it up ...\" with üëç\n00:30:03    Derek Sollberger (he/him):  Replying to \"Screenshot2024_05_31_092416.jpg\"\n\n\"triple-double\", says the Californians\n00:42:49    Olivier Leroy:  Namespace if that help\n00:53:56    Olivier Leroy:  Great question!\n00:58:58    Jo Hardin:  gotta run off to a different meeting.  thanks for the great presentation today!\n00:59:49    Olivier Leroy:  Reacted to \"gotta run off to a d...\" with üëç\n01:00:15    Diana Garcia Cortes:    I gotta run too. Thank you so much! See you next week\n01:00:39    Olivier Leroy:  Reacted to \"I gotta run too. Tha...\" with üëã\n01:02:20    Olivier Leroy:  end"
  },
  {
    "objectID": "videos/02/08.html",
    "href": "videos/02/08.html",
    "title": "Cohort 8",
    "section": "",
    "text": "Meeting chat log\n\n00:13:07    Federica Gazzelloni (she/her):  http://r4ds.io/advr\n00:15:46    Federica Gazzelloni (she/her):  start\n00:52:35W   Rebecca Butler: Does anyone know how to print out much more precision for obj_size?\n00:53:02    Laura Biggins:  No, I was going to ask the same question.\n00:53:48    Federica Gazzelloni (she/her):  https://advanced-r-solutions.rbind.io/names-and-values\n00:56:51    Rebecca Butler: This is fun:\na &lt;- runif(1e6)\na_size &lt;- obj_size(a)\n\nb &lt;- list(a, a)\nb_size &lt;- obj_size(b)\n\nb_size - a_size\n# 64 B\n\nx &lt;- 1\ny &lt;- list(x, x)\nobj_size(y) - obj_size(x)\n# 64 B\n00:58:40    Rebecca Butler: Replying to \"This is fun:\na &lt;- ru...\"\n\nKind of clarifies that it takes 64 B to make an empty list of length 2\n00:58:58    Laura Biggins:  Replying to \"This is fun:\na &lt;- ru...\"\n\n&gt; obj_size(list(NULL))\n56 B\n&gt; obj_size(list(NULL, NULL))\n64 B\n&gt; obj_size(list(NULL, NULL, NULL))\n80 B\n00:59:05    Rebecca Butler: Replying to \"This is fun:\na &lt;- ru...\"\n\nempty_list2 &lt;- vector(\"list\", 2)\nobj_size(empty_list2)\n# 64 B\n\nempty_list3 &lt;- vector(\"list\", 3)\nobj_size(empty_list3)\n# 80 B\n00:59:32    Rebecca Butler: Replying to \"This is fun:\na &lt;- ru...\"\n\nHaha we were going the exact same place, Laura. yep!\n00:59:44    Laura Biggins:  Reacted to \"Haha we were going t...\" with üëç\n01:04:22    Federica Gazzelloni (she/her):  stop"
  },
  {
    "objectID": "videos/03/10.html",
    "href": "videos/03/10.html",
    "title": "Cohort 10",
    "section": "",
    "text": "Meeting chat log\n\n00:16:09    Stephan Koenig: You can reassign `T` and `F` to other objects. so `TRUE` and `FALSE` more robust\n00:16:25    Eamon Caddigan: Replying to \"You can reassign `T`...\"\n\nOh, TIL!\n00:16:31    Sally Chang:    Reacted to \"Oh, TIL!\" with ‚ûï\n00:16:43    Retselisitsoe Monyake:  Reacted to \"You can reassign `...\" with üëç\n00:19:41    Jon Harmon (jonthegeek):    If you think of NA as \"unknown\" I feel like all of the rules make sense.\n00:19:55    Nicholas Giangreco: Reacted to \"If you think of NA a...\" with üëç\n00:20:13    Derek Sollberger:   Replying to \"If you think of NA a...\"\n\nMakes less sense when \"NA\" is \"North America\" --- Data Mishaps Night\n00:20:24    Ella Kaye (she/her):    Reacted to \"Makes less sense whe...\" with üòÇ\n00:22:33    Jon Harmon (jonthegeek):    https://DSLC.io/advr\n00:32:31    Nicholas Giangreco: attr(a, ‚Äúbob‚Äù) &lt;- bob\n00:35:53    Jon Harmon (jonthegeek):    lobstr::obj_addr()\n00:40:17    Eamon Caddigan: \nbob &lt;- \"bob\"\nalice &lt;- \"alice\"\nattr(alice, \"friend\") &lt;- bob\nattr(bob, \"friend\") &lt;- alice\nstr(bob)\n#&gt; chr \"bob\"\n#&gt; - attr(*, \"friend\")= chr \"alice\"\nstr(alice)\n#&gt; chr \"alice\"\n#&gt; - attr(*, \"friend\")= chr \"bob\"\nref(bob)\n#&gt; [1:0x1098bebc8] &lt;chr&gt; \nref(attr(alice, \"friend\"))\n#&gt; [1:0x109883960] &lt;chr&gt; \n00:41:18    Eamon Caddigan: Replying to \"attr(a, ‚Äúbob‚Äù) &lt;- bo...\"\n\nDoes this get at what you were asking about? It looks like  bob  is getting a new address when it gets modified, so Alice‚Äôs friend points to the original  bob .\n00:42:39    Stephan Koenig: I never understood the difference between an ordered factor and a regular one. Even the regular factor has an order to the levels, no?\n00:43:38    Jon Harmon (jonthegeek):    If you don't give it a tz, it leaves the tz as \"\" then assumes local when you use it, most of the time, if I recall correctly. That's one of the many things lubridate fixes\n00:45:32    Jon Harmon (jonthegeek):    Replying to \"I never understood t...\"\n\nLooks like the concept of \"ordered\" is largely leftover from S. Oh, and they say some other things might treat them differently.\n00:45:54    Stephan Koenig: Reacted to \"Looks like the conce...\" with üôè\n00:45:58    Nicholas Giangreco: Replying to \"I never understood t...\"\n\nAn ordered factor has an extra class of ‚Äúordered‚Äù\n00:46:21    Stephan Koenig: Reacted to \"An ordered factor ha...\" with üëç\n00:46:37    Ella Kaye (she/her):    Replying to \"I never understood t...\"\n\nIt‚Äôs relevant in some modelling contexts. I know I made use of them in my MSc, to represent student grade levels, but that was a while ago now and I can‚Äôt remember exactly what modelling I did.\n00:48:00    Eamon Caddigan: Replying to \"I never understood t...\"\n\nThe default  contrasts  for ordered factors are polynomial, and they‚Äôre dummy-coded for non-ordered factors.\n00:48:10    Eamon Caddigan: Reacted to \"It‚Äôs relevant in som...\" with üíØ\n00:48:17    Stephan Koenig: Reacted to \"It‚Äôs relevant in som...\" with üôè\n00:48:22    Stephan Koenig: Reacted to \"The default  contras...\" with üôè\n00:51:26    Eamon Caddigan: If you find yourself writing a big loop and storing things in a list, you‚Äôll want to preallocate an empty list, imho. Use  vector(mode=‚Äúlist‚Äù, length=&lt;length&gt;)\n00:51:42    Nicholas Giangreco: Reacted to \"If you find yourself...\" with üëç\n00:51:52    Retselisitsoe Monyake:  Reacted to \"If you find yourse...\" with üëç\n00:53:03    Stephan Koenig: Replying to \"If you find yourself...\"\n\nWhy does that make a difference? I thought a list just contains pointers anyway.\n00:53:07    Jon Harmon (jonthegeek):    Replying to \"If you find yourself...\"\n\nYes, but within the last couple years they made this much less important, if I recall correctly.\n00:54:16    Sarah Rathwell: Replying to \"If you find yourself...\"\n\nIs there a reason to use that over list() ? I know the vector call version pre-specifies length but if you do know the desired length beforehand are the two methods different\n00:54:53    Stephan Koenig: tibble recycles the length of one\n00:55:08    Jon Harmon (jonthegeek):    Replying to \"If you find yourself...\"\n\nUse vector() when you know you want a list with a certain length but you don't know what goes in it. If you're building a list with specified values, list() is fine.\n00:56:53    Eamon Caddigan: Reacted to \"Use vector() when yo...\" with üíØ\n00:56:53    Jon Harmon (jonthegeek):    data.frame(x = 1:4, y = 1:2)\ntibble(x = 1:4, y = 1:2)\n00:59:34    Stephan Koenig: Data frames do partial matching.\n01:00:49    Stephan Koenig: What is the `I` function?\n01:01:05    Eamon Caddigan: Replying to \"If you find yourself...\"\n\nI‚Äôd defer to our other experts on R internals, but I believe that lists are ‚Äúgeneric vectors‚Äù (of pointers to objects), but they‚Äôre not (e.g.) linked lists. So if you‚Äôre appending to them repeatedly eventually the whole vector of pointers is going to be copied to a new region of memory.\n01:01:26    Stephan Koenig: Reacted to \"I‚Äôd defer to our oth...\" with üôè\n01:02:11    Eamon Caddigan: Replying to \"If you think of NA a...\"\n\nI was recently burned by (not knowing about the default values of) the  na  argument to  readr::read_csv .\n01:02:30    Jon Harmon (jonthegeek):    testing &lt;- data.frame()\nnrow(testing)\n\ntesting &lt;- NULL\nnrow(testing)\nNROW(testing) # Yell at R to give you an answer.\n01:03:18    Eamon Caddigan: Reacted to \"testing &lt;- data.fram...\" with üòÇ\n01:03:21    Nicholas Giangreco: Reacted to \"testing &lt;- data.fram...\" with ‚ùó\n01:05:15    Jacob Schwan:   Reacted to \"testing &lt;- data.fram...\" with üòÇ\n01:07:35    Stephan Koenig: Thank you, Olivier!\n01:07:39    Sally Chang:    Thank you, Olivier. That was A LOT of material"
  },
  {
    "objectID": "videos/03/09.html",
    "href": "videos/03/09.html",
    "title": "Cohort 9",
    "section": "",
    "text": "Meeting chat log\n\n00:04:26    Howard Baek:    Good to see you again, Olivier\n00:11:01    Derek Sollberger (he/him):  start\n00:18:16    Olivier Leroy:  T is not a restricted name unlike TRUE:\n00:18:17    Olivier Leroy:  &gt; TRUE &lt;-\"bob\"\nError in TRUE &lt;- \"bob\" : invalid (do_set) left-hand side to assignment\n&gt; T &lt;- \"bob\"\n&gt;\n00:22:03    Steffi LaZerte (she/her):   nchar()\n00:25:34    Olivier Leroy:  A reference from War ? :p\n00:25:39    Olivier Leroy:  Wat\n00:26:50    Olivier Leroy:  (https://www.destroyallsoftware.com/talks/wat)\n00:32:26    Howard Baek:    I found a blog post discussing different flavors of NA: https://www.njtierney.com/post/2020/09/17/missing-flavour/\n00:32:47    Olivier Leroy:  Brb just checking in an other book\n00:36:12    Olivier Leroy:  &gt; x &lt;- 1L\n&gt; is.numeric(x)\n[1] TRUE\n&gt; y &lt;- 1.4\n&gt; is.numeric(y)\n[1] TRUE\n00:37:20    Olivier Leroy:  &gt; x &lt;- 1\n&gt; is.double(x)\n[1] TRUE\n00:39:51    Derek Sollberger (he/him):  aside: banker's rounding\n00:39:56    Olivier Leroy:  &gt; x &lt;- 2.8\n&gt; as.integer(x)\n[1] 2\n00:40:04    Olivier Leroy:  (truncated)\n00:40:11    Howard Baek:    Non-integral numeric values are truncated towards zero (i.e.,¬†as.integer(x)¬†equals¬†trunc(x)¬†there)\n00:40:29    Howard Baek:    I found the above in the help page\n00:40:34    Olivier Leroy:  Reacted to \"I found the above in...\" with üëç\n00:40:38    tataphani:  Reacted to \"I found the above in...\" with üëç\n00:40:39    Steffi LaZerte (she/her):   Reacted to \"Non-integral numeric...\" with üëçüèª\n00:44:36    Jo Hardin:  also, the integer class is complicated because factor variables are integers‚Ä¶ sort of\n00:44:48    Olivier Leroy:  Reacted to \"also, the integer cl...\" with üëç\n00:44:52    Diana Garcia Cortes:    Reacted to \"also, the integer cl...\" with üëç\n00:45:38    Howard Baek:    Reacted to \"also, the integer cl...\" with üëç\n00:45:47    Howard Baek:    Reacted to \"Screenshot2024_06_07_094000.jpg\" with üëç\n00:46:57    Vania:  Reacted to \"Screenshot2024_06_07_094000.jpg\" with üëç\n00:47:45    Vania:  Replying to \"Screenshot2024_06_07_094000.jpg\"\n\nI actually didn‚Äôt know this. Really interesting!\n00:48:59    Steffi LaZerte (she/her):   Reacted to \"Jo Hardin has sent y...\" with üòµ‚Äçüí´\n00:49:08    Jo Hardin:  Replying to \"Screenshot2024_06_07_094000.jpg\"\n\ni just learned said fact when reading the chapter for today‚Äôs meeting.  üôÇ\n00:50:53    Diana Garcia Cortes:    Reacted to \"Screenshot2024_06_07_094000.jpg\" with üòµ‚Äçüí´\n00:52:18    Howard Baek:    From the help page:\n\nAn array in¬†R¬†can have one, two or more dimensions. It is simply a vector which is stored with additional¬†attributes¬†giving the dimensions (attribute¬†\"dim\") and optionally names for those dimensions (attribute¬†\"dimnames\").\nA two-dimensional array is the same thing as a¬†matrix.\n00:53:02    Howard Baek:    methods(\"print\")\n00:58:05    Derek Sollberger (he/him):  (just for fun) \"How to pronounce 'POSIXct'\"\nhttps://www.howtopronounce.com/pos(just for fun) \"How to pronounce 'POSIXct'\"\nhttps://www.howtopronounce.com/posixct\n00:58:15    Steffi LaZerte (she/her):   Reacted to \"(just for fun) \"How ...\" with üòÇ\n00:58:58    Olivier Leroy:  Reacted to \"(just for fun) \"How ...\" with üòÇ\n00:59:42    Jo Hardin:  gotta run off to a different 10am meeting.  thanks, Derek!\n01:00:07    Steffi LaZerte (she/her):   Reacted to \"gotta run off to a d...\" with üëãüèª\n01:01:22    Howard Baek:    Reacted to \"gotta run off to a d...\" with üëãüèª\n01:01:57    Olivier Leroy:  Reacted to \"gotta run off to a d...\" with üëãüèª\n01:03:14    Derek Sollberger (he/him):  end"
  },
  {
    "objectID": "videos/03/08.html",
    "href": "videos/03/08.html",
    "title": "Cohort 8",
    "section": "",
    "text": "Meeting chat log\n\n00:10:29    Federica Gazzelloni (she/her):  start\n00:15:26    Silvana Acosta: emoji\n00:45:52    Rebecca Butler: Well, the documentation for is.integer clarifies üôÇ\nis.integer returns TRUE or FALSE depending on whether its argument is of integer type or not, unless it is a factor when it returns FALSE.\n00:46:12    Silvana Acosta: Reacted to \"Well, the documentat...\" with üíú\n00:57:08    Silvana Acosta: Sorry, need to drop. Almost 10 PM here üòÖ Thank you everyone! Specially Betsy for the great presentation! üíú\n00:57:25    Federica Gazzelloni (she/her):  Reacted to \"Sorry, need to drop....\" with üëãüèª\n00:57:41    Rebecca Butler: Reacted to \"Sorry, need to drop....\" with üëãüèª\n01:05:53    Federica Gazzelloni (she/her):  stop"
  },
  {
    "objectID": "videos/04/10.html",
    "href": "videos/04/10.html",
    "title": "Cohort 10",
    "section": "",
    "text": "Meeting chat log\n\n00:09:11    Olivier Leroy:  I do not want to play with that for indexing\n00:11:42    Olivier Leroy:  if you are using a counter to index stuff maybe\n00:11:56    Derek Sollberger:   truncate to zero + R doesn't start at zero: ignore\n00:16:00    Olivier Leroy:  will it loose attributes?\n00:16:04    Olivier Leroy:  (testing)\n00:16:12    Olivier Leroy:  x[]\n00:17:00    Olivier Leroy:  keeping it\n00:23:15    Olivier Leroy:  brb fast\n00:26:02    Olivier Leroy:  better than using as.data.frame after droping ....\n00:28:20    Ella Kaye:  Wouldn‚Äôt x[[1]][[1]] be a single speck of pepper?\n00:28:39    Ella Kaye:  Ahh!\n00:28:49    Olivier Leroy:  we can test\n00:30:33    Olivier Leroy:  x &lt;- list(list(1:2), list(3:4)); x[[1]][[1]]\n00:31:19    Olivier Leroy:  yup return: [1] 1 2\n00:37:35    Olivier Leroy:  create a fake table fast?\n00:41:44    Olivier Leroy:  it is good if you want to join a data frame that was a summary and want to join it back to the \"original\" data frame\n00:45:39    Olivier Leroy:  is it how start_with_() is implemented? (unsure of the function name)\n00:55:31    Ella Kaye:  I won‚Äôt be here next week, I‚Äôm afraid, but looking forward to catching up on the recording, and should be back the following week."
  },
  {
    "objectID": "videos/04/09.html",
    "href": "videos/04/09.html",
    "title": "Cohort 9",
    "section": "",
    "text": "Meeting chat log\n\n00:05:22    Olivier Leroy:  Sorry for being late\n00:06:00    Diana Garcia Cortes:    Hi everyone!\n00:06:35    Olivier Leroy:  Start\n00:06:39    Derek Sollberger (he/him):  The data frame and tibble info will come up again here in chapter 4 anyway\n00:06:45    Olivier Leroy:  Reacted to \"The data frame and t...\" with üëç\n00:10:03    Olivier Leroy:  (The use of number on x was so smart üòõ)\n00:11:31    Olivier Leroy:  People who index with float are evil!\n00:12:48    Derek Sollberger (he/him):  Replying to \"People who index wit...\"\n\nmight be useful in some sort of median index calculation\n00:13:19    Olivier Leroy:  Reacted to \"might be useful in s...\" with üëç\n00:13:31    Olivier Leroy:  Replying to \"People who index wit...\"\n\nYup but probably to smart for me\n00:18:17    Olivier Leroy:  Double quote\n00:18:39    Olivier Leroy:  Unless I am dealing with quote in the string\n00:19:02    Diana Garcia Cortes:    Reacted to \"Double quote\" with ‚ûï\n00:20:50    Olivier Leroy:  I like the eggs and box of eggs example\n00:23:17    tataphani:  { names of all the students in the class and {{ Just one name\n00:24:47    tataphani:  so {{ would work on both Lists and Vectors ? and same is true for $\n00:25:34    Jo Hardin:  {{  isn‚Äôt used for subsetting, as far as I know.\n00:25:41    Olivier Leroy:  r$&gt; x &lt;- letters\n\nr$&gt; x[[1]]\n[1] \"a\"\n00:25:52    Jeffrey Stevens:    $ doesn't work on vectors\n00:27:10    Jeffrey Stevens:    Unless the vector is named?\n00:27:23    Olivier Leroy:  If the vector is named I think it will works\n00:27:30    Olivier Leroy:  Need to try üòõ\n00:28:12    Jeffrey Stevens:    Nope, doesn't seem to work with named vectors\n00:28:32    Jo Hardin:  my_list[[c(1,2)]] is the same as my_list[[1]][[2]]\n00:28:57    Jeffrey Stevens:    \"Error in x$c : $ operator is invalid for atomic vectors\"\n00:29:12    Jo Hardin:  Can‚Äôt unmute today!\n00:29:16    Jo Hardin:  Sorry\n00:29:16    Jeffrey Stevens:    So $ can't be used for atomic vectors\n00:29:22    Jo Hardin:  Thanks ‚ù§Ô∏è\n00:30:33    Olivier Leroy:  From ?`$` \n\n&gt; ‚Äò$‚Äô is only valid for recursive objects (and ‚ÄòNULL‚Äô),\n     and is only discussed in the section below on recursive objects.\n00:30:37    Jo Hardin:  Maybe easier to demo w my_list[[2]][[4]]\n00:30:51    Jeffrey Stevens:    Reacted to \"From ?`$` \n\n&gt; ‚Äò$‚Äô is...\" with üëç\n00:31:41    Olivier Leroy:  `$`\n00:33:09    Olivier Leroy:  Return: \n\nr$&gt; `$`\n.Primitive(\"$\")\n00:35:56    Olivier Leroy:  Reacted to \"Nope, doesn't seem t...\" with üëç\n00:39:21    Jo Hardin:  Just realized from your example that by using 0 for the row index, you can get the column names.  That‚Äôs useful!\n00:39:31    Olivier Leroy:  Reacted to \"Just realized from y...\" with üëç\n00:39:43    Derek Sollberger (he/him):  Reacted to \"Just realized from y...\" with üßê\n00:40:22    Olivier Leroy:  Replying to \"Just realized from y...\"\n\nI will need to try, but maybe it is just print and you can‚Äôt assign ?\n00:40:49    Jo Hardin:  Replying to \"Just realized from y‚Ä¶\"\nAhhh, right, that makes sense.\n00:41:20    tataphani:  can we also check if matrix empty or not ?\n00:43:15    Jeffrey Stevens:    names()\n00:45:04    Olivier Leroy:  Subsetting seems simple but it is so tricky\n00:45:18    Jeffrey Stevens:    What's the difference between names() and colnames()?\n00:45:44    Jeffrey Stevens:    Ah, so names() doesn't work on matrices?\n00:49:09    Derek Sollberger (he/him):  NROW() and NCOL() [with capital letters] was in exercise 2 of section 3.3.4\n00:49:39    Olivier Leroy:  Reacted to \"NROW() and NCOL() [w...\" with üëç\n00:49:52    Howard Baek:    Reacted to \"NROW() and NCOL() [w...\" with üëç\n00:50:18    Derek Sollberger (he/him):  Replying to \"NROW() and NCOL() [w...\"\n\n\"dim() will return NULL when applied to a 1d vector.\nOne may want to use NROW() or NCOL() to handle atomic vectors, lists and NULL values in the same way as one column matrices or data frames. For these objects nrow() and ncol() return NULL\"\n00:51:08    Howard Baek:    Replying to \"NROW() and NCOL() [w...\"\n\nSounds like a C function used in R\n00:52:06    Howard Baek:    Replying to \"NROW() and NCOL() [w...\"\n\nNvm, NCOL is base\n00:53:01    Olivier Leroy:  [ always simplify\n00:53:06    Olivier Leroy:  Except on tibble\n01:04:08    Olivier Leroy:  We are out of time I can continue if needed\n01:04:22    tataphani:  please\n01:04:33    Howard Baek:    Me too, I can stay longer\n01:04:37    Olivier Leroy:  Reacted to \"please\" with üëç\n01:04:39    Olivier Leroy:  Reacted to \"Me too, I can stay l...\" with üëç\n01:04:57    Tinashe Tapera: I have to go but reminder I am presenting next week! Wish my luck üëå\n01:05:12    Olivier Leroy:  Replying to \"I have to go but rem...\"\n\nGood luck üòõ\n01:05:25    Howard Baek:    Reacted to \"I have to go but rem...\" with üëç\n01:12:50    Olivier Leroy:  Btw they will have a base R function for that soon (the subset with order())\n01:14:45    Olivier Leroy:  I like that trick\n01:15:33    Olivier Leroy:  Kids crashed here sorry üôÇ\n01:16:27    Aaron Grzasko:  I need to drop. Great conversation today! Good job, Gabby!.\n01:17:58    Olivier Leroy:  End"
  },
  {
    "objectID": "videos/04/08.html",
    "href": "videos/04/08.html",
    "title": "Cohort 8",
    "section": "",
    "text": "Meeting chat log\n\n00:08:19    Federica Gazzelloni:    Start\n00:14:19    Rebecca Butler: It‚Äôll (df) recycle as long as one length is a multiple of the other\n00:23:29    Rebecca Butler: Has anyone ever run into that in the wild?\n00:23:36    Rebecca Butler: Replying to \"Has anyone ever run ...\"\n\nMatrix or df columns, that is\n00:25:07    Laura Biggins:  Replying to \"Has anyone ever run ...\"\n\nYes, but haven't enjoyed them...\n00:25:58    Rebecca Butler: Replying to \"Has anyone ever run ...\"\n\nDo you remember where that came up? Did it feel somewhat appropriate (like it served some purpose, but was unenjoyable)?\n00:27:17    Laura Biggins:  Replying to \"Has anyone ever run ...\"\n\nI don't really remember, come up when working with other people's code. Not sure I've purposely created them myself.\n00:27:23    Rebecca Butler: Reacted to \"I don't really remem...\" with üëç\n00:27:25    Rebecca Butler: Replying to \"Has anyone ever run ...\"\n\nthanks!\n00:42:48    Rebecca Butler: (For the pic, the rightmost bracket was just cut off - The original pepper tweet actually has x[[1]][[1]] for the pile of pepper - https://pbs.twimg.com/media/CO2_qPVWsAAErbv?format=png&name=large)\n00:46:13    Silvana Acosta: When reading I got a bit lost with the example: a[c(TRUE, FALSE, TRUE), c(\"B\", ‚ÄúA‚Äù)]\n00:47:05    Silvana Acosta: The first example here: https://adv-r.hadley.nz/subsetting.html#matrix-subsetting\n00:47:39    Silvana Acosta: I don‚Äôt think I fully see the 2nd row it produces\n01:03:05    Betsy:  end"
  },
  {
    "objectID": "videos/05/10.html",
    "href": "videos/05/10.html",
    "title": "Cohort 10",
    "section": "",
    "text": "Meeting chat log\n\n00:07:36    Olivier Leroy:  r$&gt; (if (FALSE) \"bob\")\nNULL\n00:07:48    Olivier Leroy:  (dangerous still)\n00:08:42    Eamon Caddigan: I was really surprised he didn‚Äôt suggest  isTRUE  to prevent `if` gotchas. I bet there‚Äôs a good reason and I haven‚Äôt figured out why.\n00:10:29    Eamon Caddigan: Weird  case_when  thing I found: since it (reasonably) insists that all the outputs have the same type, you‚Äôll need to specify the type of  NA , e.g., with  NA_character_  (at least this was true for earlier versions of dplyr, I haven‚Äôt poked at that in a while).\n00:10:37    Olivier Leroy:  Reacted to \"I was really surpris...\" with üëç\n00:10:53    Stephan Koenig: Usually case_when I order from more specific first to general last.\n00:11:02    Olivier Leroy:  Reacted to \"Usually case_when I ...\" with üëç\n00:11:04    Nicholas Giangreco: Reacted to \"Usually case_when I ...\" with üëç\n00:11:57    Olivier Leroy:  is quaro \"Caution\" svg is VLC Icon?\n00:12:04    Olivier Leroy:  quarto\n00:13:03    Jon Harmon (jonthegeek):    Replying to \"Weird  case_when  th...\"\n\nI'm PRETTY sure this isn't required anymore. That's how I learned about NA types, though üòÑ\n00:14:13    Eamon Caddigan: Reacted to \"I'm PRETTY sure this...\" with ‚ûï\n00:19:19    Olivier Leroy:  for some reasons I always have an hard time remember seq_along ...\n00:19:29    Retselisitsoe Monyake:  Reacted to \"for some reasons I a...\" with üòÖ\n00:25:37    Olivier Leroy:  r$&gt; ifelse(c(TRUE, FALSE), 1, \"no\")\n[1] \"1\" \"no\"\n00:26:12    Olivier Leroy:  (doing the wrong stuff)\n00:26:48    Jon Harmon (jonthegeek):    Yeah, it coerces to the \"lowest\" common form (character can't go to numeric, but numeric can go to character).\n00:27:39    Martin: numeric() = NULL?\n00:27:39    Olivier Leroy:  convert and recycle\n00:27:56    Olivier Leroy:  I think numeric 0\n00:28:10    Olivier Leroy:  r$&gt; numeric()\nnumeric(0)\n00:28:18    Martin: nice\n00:28:46    Eamon Caddigan: Thanks Jacob this was great!\n00:29:06    Stephan Koenig: You can also test with the %||% Operator to check if something is NULL I believe (R 4.4)\n00:29:12    Olivier Leroy:  Reacted to \"Thanks Jacob this wa...\" with üëã\n00:29:17    Martin: Reacted to \"You can also test wi...\" with ‚ù§Ô∏è\n00:29:57    Jon Harmon (jonthegeek):    Reacted to \"You can also test wi...\" with ‚òùÔ∏è\n00:37:11    Martin Venegas: thank u!\n00:37:39    Nicholas Giangreco: Reacted to \"You can also test wi...\" with ‚ù§Ô∏è\n00:40:27    Martin Venegas: that's good to know"
  },
  {
    "objectID": "videos/05/09.html",
    "href": "videos/05/09.html",
    "title": "Cohort 9",
    "section": "",
    "text": "Meeting chat log\n\n00:10:23    Steffi LaZerte (she/her):   start\n00:16:13    Steffi LaZerte (she/her):   isTRUE(x) is a really specific test of whether something is TRUE\n00:17:49    Joel Liebert:   Thanks Steffi, I wasn't familiar with that function. From the docs: \"isTRUE(x) is the same as { is.logical(x) && length(x) == 1 && !is.na(x) && x }\"\n00:17:58    Steffi LaZerte (she/her):   Reacted to \"Thanks Steffi, I was...\" with üëçüèª\n00:19:11    Steffi LaZerte (she/her):   This was brand new to me! I had no idea that the implied FALSE was NULL.\n00:19:12    Derek Sollberger (he/him):  neat! ‚Ä¶ I hadn't heard that function called \"paste oh\" before\n00:19:43    Steffi LaZerte (she/her):   paste0() changed my life :ü§£\n00:20:00    Gabby Palomo:   I have always had problems coming out in ways to use if else etc in my functions. I guess the best example is the function if the package is not installed then install it. But I was wondering if anyone else had examples on your blog or GitHub please share them with me here or on Slack. I feel like if I see examples then I will start to see how to use them in my own functions.\n00:20:25    Gabby Palomo:   paste0 for the win. But I want to start using glue too.\n00:20:34    Steffi LaZerte (she/her):   Reacted to \"paste0 for the win. ...\" with üëçüèª\n00:21:51    Derek Sollberger (he/him):  Replying to \"I have always had pr...\"\n\nas a teacher, I tend to use if_else() en route to teaching about dummy variables (one-hot encoding)\n\nnew_col = if_else(chr_vec == \"this label\", 1, 0)\n00:22:18    tataphani:  Are there any difference between paste and glue we can discuss later\n00:22:19    Gabby Palomo:   Reacted to \"as a teacher, I tend...\" with üíØ\n00:22:40    tataphani:  sure\n00:23:33    Steffi LaZerte (she/her):   Replying to \"I have always had pr...\"\n\nI use it a lot when evaluating different arguments in a function. So if the function could have an argument of blue or green, I'll use an ifelse() to deal with the switch. Or if the argument is something like \"total\" vs. \"summary\", I'll use if() {} else {} to do different calculations based on that argument. Is this the kind of example you were thinking about?\n00:24:29    Steffi LaZerte (she/her):   If anyone uses chunk options in Quarto/Rmarkdown, I always make the mistake of forgetting that in THOSE cases it really is 'true' and not TRUE :)\n00:24:36    Gabby Palomo:   Replying to \"I have always had pr...\"\n\nI totally see the total and summary!! You are right, perfect example to use if else etc. I see this. YEs this is what I'm looking for.\n00:24:59    Gabby Palomo:   Replying to \"If anyone uses chunk...\"\n\nyeah in the yaml too\n00:25:00    Derek Sollberger (he/him):  Reacted to \"I use it a lot when ...\" with üòª\n00:25:08    Steffi LaZerte (she/her):   Reacted to \"I totally see the to...\" with üëçüèª\n00:25:25    Steffi LaZerte (she/her):   Reacted to \"yeah in the yaml too\" with üíØ\n00:27:14    Leo:    our conclusion from the first 2 sections is that \"if (anytext)\" will always return FALSE?\n00:30:03    Steffi LaZerte (she/her):   I'm glad you brought this up! I totally missed the idea of cascading 'true' to TRUE, yikes!\n00:30:29    tataphani:  Replying to \"our conclusion from ...\"\n\nis it true for other\n00:30:37    tataphani:  Replying to \"our conclusion from ...\"\n\nlike FALSE\n00:30:42    tataphani:  Replying to \"our conclusion from ...\"\n\nor NA\n00:31:03    tataphani:  Replying to \"our conclusion from ...\"\n\nor something\n00:35:14    tataphani:  Replying to \"our conclusion from ...\"\n\nit is like CASE and WHEN in SAS\n00:35:36    tataphani:  Replying to \"our conclusion from ...\"\n\n?\n00:38:00    Steffi LaZerte (she/her):   I think you can quote or not the switch labels (like a named vector or list)\n00:39:05    tataphani:  Replying to \"our conclusion from ...\"\n\nnever mind\n00:41:15    Steffi LaZerte (she/her):   dplyr::case_match() is another option, more similar to base switch() (but I can't say I'm very comfortable using it!)\n00:43:47    Gabby Palomo:   Reacted to \"dplyr::case_match() ...\" with ü§Ø\n00:46:44    Gabby Palomo:   That explained it perfectly Steffi!!\n00:47:26    Gabby Palomo:   I don't want to rush things because I love these discussions but it's 40 min after the hour.\n00:48:30    Leo:    the .default argument is used to set what NA would return?\n00:49:13    Steffi LaZerte (she/her):   It would return the value if none of the other options matched\n00:49:33    tataphani:  soory\n00:49:54    Steffi LaZerte (she/her):   I'm just as bad üòÅ  Just means it's a good discussion!\n00:50:37    Diana Garcia Cortes:    Small example in the iris dataset: \nas_tibble(iris) %&gt;% \n  janitor::clean_names() %&gt;%\n  mutate(\n    is_setosa = case_match(species, \"setosa\" ~ \"yes\", .default = \"no\"),\n    big_sepal = case_when(sepal_length &gt; 5  & sepal_width &gt; 3 ~ \"big\", .default = \"small\")\n  )\n00:50:55    Steffi LaZerte (she/her):   Reacted to \"Small example in the...\" with üíØ\n00:50:57    Gabby Palomo:   Oh I love them too!! Don't get me wrong, but maybe we can save some of them and review them all at the end once we've gone over the chapter.\n00:51:01    Derek Sollberger (he/him):  Reacted to \"Small example in the...\" with üëç\n00:51:09    Steffi LaZerte (she/her):   Reacted to \"Oh I love them too!!...\" with üëçüèª\n00:51:23    Gabby Palomo:   Reacted to \"Small example in the...\" with üíØ\n00:52:10    tataphani:  Reacted to \"Small example in the...\" with üëç\n00:52:17    Gabby Palomo:   I love using i j k it makes me feel like a mathematician LOL\n00:52:24    Gabby Palomo:   Don't take them from me!!!\n00:52:36    Diana Garcia Cortes:    Reacted to \"I love using i j k i...\" with ‚ù§Ô∏è\n00:52:41    Steffi LaZerte (she/her):   Reacted to \"Don't take them from...\" with ü§£\n00:56:18    Gabby Palomo:   seq_along is similar to using length(vector) ?\n00:56:40    Steffi LaZerte (she/her):   And safer\n00:56:57    Gabby Palomo:   switching to seq_along() from now on\n00:57:00    Leo:    is it correct that for loop can pretty much be replaced by ifelse statement? and usually ifelse would be faster?\n00:57:07    Steffi LaZerte (she/her):   I always get it mixed up with seq_len() though\n00:57:39    Steffi LaZerte (she/her):   Replying to \"is it correct that f...\"\n\nNot quite. A For loop is more about repitition rather than choices\n00:57:41    Gabby Palomo:   Oh no... what? So what's the difference?\n01:00:22    Steffi LaZerte (she/her):   Replying to \"is it correct that f...\"\n\nSo a for loop repeats a set of code over and over, but a if/else does code 1 if true and code 2 if false, but only once\n01:00:26    Diana Garcia Cortes:    seq_len(iris) -&gt; error\n01:00:35    Diana Garcia Cortes:    seq_along(iris)\n[1] 1 2 3 4 5 6 7\n01:00:36    Gabby Palomo:   YES MAP AND APPLY!!\n01:00:37    Steffi LaZerte (she/her):   Reacted to \"seq_len(iris) -&gt; err...\" with üòû\n01:00:40    Gabby Palomo:   I was gonna ask that\n01:00:57    Diana Garcia Cortes:    Reacted to \"          YES MAP AN...\" with üëç\n01:00:58    Steffi LaZerte (she/her):   Replying to \"seq_along(iris)\n[1] ...\"\n\nseq_len(nrow(iris))\n01:01:10    Steffi LaZerte (she/her):   Replying to \"seq_along(iris)\n[1] ...\"\n\n&gt; seq_len(nrow(iris))\n[1] 1 2 3 4 5 6 7 8 ....\n01:01:24    Joel Liebert:   repeat() seems similar to  `while(true)` \n\nx &lt;- 1\nrepeat {\n  print(x)\n  x = x+1\n  if (x == 6){\n    break\n  }\n}\n01:02:19    Leo:    Replying to \"is it correct that f...\"\n\nthank you\n01:02:54    Derek Sollberger (he/him):  When _apply was faster than loops, it was maybe back when loops created new value spaces at each iteration? (referring back to chapter 2)\n01:04:10    Steffi LaZerte (she/her):   Replying to \"When _apply was fast...\"\n\nYes! I was wondering about that too! I had also heard that for loops used to be less efficient but that had changed.\n01:04:21    Gabby Palomo:   Reacted to \"When _apply was fast...\" with üíØ\n01:05:41    Gabby Palomo:   Loved that Diana thanks!!\n01:06:09    Gabby Palomo:   Readable code. I love that reason.\n01:07:26    Gabby Palomo:   My cognitive load or the computers?\n01:07:33    Diana Garcia Cortes:    Sorry, the phrase I was looking for was: avoid side effects.\n01:07:40    Diana Garcia Cortes:    https://medium.com/@alonr110/elevate-your-code-best-practices-for-function-writing-16d96481c0c7\n01:07:44    Gabby Palomo:   Reacted to \"Sorry, the phrase I ...\" with ü§Ø\n01:07:49    tataphani:  was that the Idea of DPLYR\n01:07:50    Gabby Palomo:   Reacted to \"https://medium.com/@...\" with üíØ\n01:08:05    Steffi LaZerte (she/her):   One thing that is nice about for loops is that you can 'jump' in at any time to test things out. But if you learn the browser() function to put that in your map functions, that gives you the same power :D\n01:08:29    Gabby Palomo:   Replying to \"One thing that is ni...\"\n\nteach me your esoteric ways!!!!\n01:08:31    Steffi LaZerte (she/her):   Replying to \"My cognitive load or...\"\n\nI think yours :D\n01:08:47    Steffi LaZerte (she/her):   end\n01:08:56    Derek Sollberger (he/him):  Reacted to \"One thing that is ni...\" with üßê\n01:09:34    Gabby Palomo:   Reacted to \"One thing that is ni...\" with üßê\n01:10:22    Steffi LaZerte (she/her):   Replying to \"One thing that is ni...\"\n\nWe'll get to it! https://adv-r.hadley.nz/debugging.html#browser\n01:10:36    Steffi LaZerte (she/her):   Replying to \"One thing that is ni...\"\n\nAnother function that changed my life :)\n01:11:32    Gabby Palomo:   Replying to \"One thing that is ni...\"\n\nI am an old Padawan I have much to learn\n01:11:50    Gabby Palomo:   Reacted to \"We'll get to it! htt...\" with üíØ\n01:12:12    Steffi LaZerte (she/her):   Replying to \"One thing that is ni...\"\n\nIt never stops!\n01:12:20    Gabby Palomo:   Reacted to \"It never stops!\" with ‚ù§Ô∏è\n01:12:23    Derek Sollberger (he/him):  Thank you for this great example of `glue`\n01:12:35    Gabby Palomo:   Reacted to \"Thank you for this g...\" with üíØ\n01:12:37    Diana Garcia Cortes:    Ok like python f-strings\n01:13:27    Diana Garcia Cortes:    Thanks! I didn‚Äôt know the glue package\n01:14:23    Leo:    many thanks\n01:15:54    tataphani:  thanks"
  },
  {
    "objectID": "videos/05/08.html",
    "href": "videos/05/08.html",
    "title": "Cohort 8",
    "section": "",
    "text": "Meeting chat log\n\n00:04:59    Federica Gazzelloni (she/her):  start\n00:44:21    Betsy:  text &lt;- c(\"al\", \"bob\", \"charlie\")\n\nfor (i in seq_along(text)) {\n  print(text[[i]])\n}\n\nfor (i in seq_along(text)) {\n  print(i)\n}\n\nfor (name in text) {\n  print(name)\n}\n00:53:43    Federica Gazzelloni (she/her):  Stop"
  },
  {
    "objectID": "videos/06/10.html",
    "href": "videos/06/10.html",
    "title": "Cohort 10",
    "section": "",
    "text": "Meeting chat log\n\n00:18:41    Eamon Caddigan: I‚Äôm poking around and it looks like  formals()  returns a  pairlist , which is a data type we haven‚Äôt talked about (but my hunch is that it‚Äôs the R equivalent to a  (cons)  pair\n00:18:49    Martin Venegas: I think \"[\" is a special\n00:20:27    Stephan Koenig: New syntax for anonymous functions is  \\(&lt;variables&gt;)\n00:20:34    Martin Venegas: really useful syntax when working with purrr\n00:23:04    Martin Venegas: there is any functional difference by using |&gt; instead of %&gt;%?\n00:27:12    Stephan Koenig: Here a good blog post: https://ivelasq.rbind.io/blog/understanding-the-r-pipe/\n00:28:06    Martin Venegas: Reacted to \"Here a good blog pos...\" with ‚ù§Ô∏è\n00:28:18    Martin Venegas: thanks!\n00:30:13    Eamon Caddigan: TIL: NULL is an empty pairlist (sorry this is a total digression)\n00:31:06    Martin Venegas: I really like the pipe = \"and then\", it allows you to read a code like it was a sort of essay\n00:31:15    Ella Kaye:  Reacted to \"I really like the pi...\" with üëç\n00:32:14    Eamon Caddigan: Reacted to \"I really like the pi...\" with üíØ\n00:37:00    Jon Harmon (jonthegeek):    Replying to \"I really like the pi...\"\n\nIn this talk from posit::conf(2019) https://www.youtube.com/watch?v=CgR5mSAGxtA , I think Felienne Hermans (the speaker) mentioned the \"know how to 'pronounce' code\" thing. It might have just been in her book. Either way, I find it suuuuper helpful.\n00:37:14    Martin Venegas: Reacted to \"In this talk from po...\" with ‚ù§Ô∏è\n00:37:24    Stephan Koenig: Reacted to \"In this talk from po...\" with ‚ù§Ô∏è\n00:37:30    Stephan Koenig: Reacted to \"I really like the pi...\" with üíØ\n00:42:17    Jon Harmon (jonthegeek):    https://rstudio.github.io/promises/articles/promises_02_intro.html#:~:text=Oh%2C%20I%E2%80%99ve%20heard%20of%20promises%20in%20R!%20From%20the%20NSE%20chapter%20in%20Hadley%E2%80%99s%20Advanced%20R%20book!\n00:47:22    Eamon Caddigan: I think I do prefer the ‚Äúdefault to NULL and then handle NULL in the function body‚Äù pattern\n00:49:28    Jon Harmon (jonthegeek):    I like it to be explicit what  NULL  means, so I usually avoid that. I prefer a function that tells you what the handling will be.\n00:49:56    Jon Harmon (jonthegeek):    Hadley's in-progress book with all kinds of \"rules\" like these about how to not be annoying: https://design.tidyverse.org/\n00:51:09    Derek Sollberger:   ...  comes up again later in the chapter about data types\n00:53:15    Eamon Caddigan: Reacted to \" ...  comes up again...\" with üëÄ\n00:57:16    Ella Kaye:  @Olivier Leroy , you‚Äôve gone on mute\n00:57:39    Jon Harmon (jonthegeek):    Ok, I was about to say something, but I'm connected weird so I thought it was me!\n00:57:44    Martin Venegas: same1\n00:57:56    Martin Venegas: Reacted to \"@Olivier Leroy , you...\" with ‚ù§Ô∏è\n01:02:56    Jon Harmon (jonthegeek):    dots &lt;- list(...)\n01:06:07    Eamon Caddigan: It looks like ‚Ä¶length() and ‚Ä¶names() don‚Äôt evaluate  ... , so they are themselves the special things. üòÉ\n01:06:10    Martin Venegas: thanks! very useful"
  },
  {
    "objectID": "videos/06/09.html",
    "href": "videos/06/09.html",
    "title": "Cohort 9",
    "section": "",
    "text": "Meeting chat log\n\n00:11:08    Steffi LaZerte (she/her):   I'll have to leave about 15-20min early today, sorry in advance!\n00:11:40    Olivier Leroy:  start\n00:16:14    Steffi LaZerte (she/her):   https://www.rstudio.com/wp-content/uploads/2016/02/advancedR.pdf\n00:16:27    Howard Baek:    Reacted to \"https://www.rstudio....\" with üëç\n00:16:30    Jeffrey Stevens:    Reacted to \"https://www.rstudio....\" with üëç\n00:16:32    Olivier Leroy:  https://www.rstudio.com/wp-content/uploads/2016/02/advancedR.pdf\n00:16:34    Olivier Leroy:  Reacted to \"https://www.rstudio....\" with üëç\n00:16:41    Olivier Leroy:  Ahah you were faster :p\n00:16:55    Steffi LaZerte (she/her):   Reacted to \"Ahah you were faster...\" with üòõ\n00:18:47    Gabby Palomo Munoz: I think you mean the arguments.\n00:19:12    Olivier Leroy:  Btw R return the last statement in a body function (always bit me) unless you have return()\n00:19:50    Jo Hardin:  what happens if you have two `return()` statements?\n00:20:31    Steffi LaZerte (she/her):   I think the first one it hits is the one it uses, so if you have an if / else you can have multiple returns\n00:20:35    Olivier Leroy:  The first one, I think has it exit the function to the parent environment\n00:20:43    Jo Hardin:  i‚Äôve also always called them ‚Äúarguments‚Äù but the chapter makes a big deal about calling them ‚Äúformals‚Äù.\n00:21:18    Olivier Leroy:  formal() ?\n00:21:19    Jo Hardin:  does anyone know why ‚Äúformals‚Äù instead of ‚Äúarguments‚Äù? and how they might be different?\n00:21:20    Steffi LaZerte (she/her):   I use options &gt; arguments &gt; (and now) formals, in order of increasing complexity or nit-pickyness :D\n00:21:38    Gabby Palomo Munoz: formals? interesting? I thought it was arguments\n00:22:07    Olivier Leroy:  &gt; sum\nfunction (..., na.rm = FALSE)  .Primitive(\"sum\")\n00:23:47    Steffi LaZerte (she/her):   Replying to \"does anyone know why...\"\n\nIn the ?formals, they call them \"formal arguments\"\n00:24:47    Olivier Leroy:  Mean seems to dispatch\n00:27:29    Olivier Leroy:  I have this one on env function that always blew my mind: \n\n  ctr &lt;- 0\n  f &lt;- function(){\n    ctr &lt;&lt;- ctr + 1\n    cat(\"this count currently has value\", ctr, \"\\n\")\n  }\n}\n\nc1 &lt;- counter()\nc2 &lt;- counter()\n\n\nc1()\nc1()\nc2()\nctr\n00:28:40    Steffi LaZerte (she/her):   Replying to \"I have this one on e...\"\n\nI hate this üòÖ\n00:28:45    Steffi LaZerte (she/her):   So scary!\n00:30:26    Olivier Leroy:  Reacted to \"So scary!\" with üëª\n00:31:49    Howard Baek:    Inside purrr functions\n00:31:52    Gabby Palomo Munoz: Reacted to \"Inside purrr functio...\" with üíØ\n00:31:59    Diana Garcia Cortes:    Reacted to \"Inside purrr functio...\" with üíØ\n00:31:59    Gabby Palomo Munoz: Replying to \"Inside purrr functio...\"\n\nI was just gonna say this :D\n00:32:27    Howard Baek:    Replying to \"Inside purrr functio...\"\n\nThat‚Äôs the only place I use em üòÑ\n00:32:44    Gabby Palomo Munoz: Replying to \"Inside purrr functio...\"\n\nYes apply and purrr ... trying to think where else...\n00:34:53    Steffi LaZerte (she/her):   Replying to \"Inside purrr functio...\"\n\nMe too, I was thinking today how much I've been using multiline anonymous functions to map over a set of database connections in one of my projects\n00:35:36    Derek Sollberger (he/him):  \"funs\" here seems like when many R programmers would make a code package instead\n00:38:20    Gabby Palomo Munoz: If we are going to see this later in another chapter maybe we can just move on with the rest. I'm sorry, not trying to be mean but we only have an hour.\n00:38:35    Gabby Palomo Munoz: Ha 'mean' no pun intended.\n00:38:46    Olivier Leroy:  r$&gt; mean[1]\nError in mean[1] : object of type 'closure' is not subsettable\n00:38:55    Steffi LaZerte (she/her):   That's where I know the term! Yes! \"Closure is not subsettable\"\n00:39:23    Steffi LaZerte (she/her):   Reacted to \"Ha 'mean' no pun int...\" with üòÖ\n00:40:31    Derek Sollberger (he/him):  Replying to \"That's where I know ...\"\n\nJenny Bryan's famous rstudio::conf() 2020 talk \"Object of type 'closure' is not subsettable\" (about debugging)\n\nhttps://www.youtube.com/watch?v=vgYS-F8opgE\n00:40:41    Gabby Palomo Munoz: Reacted to \"Jenny Bryan's famous...\" with üíØ\n00:41:09    Steffi LaZerte (she/her):   Reacted to \"Jenny Bryan's famous...\" with üíØ\n00:41:12    Olivier Leroy:  Reacted to \"Jenny Bryan's famous...\" with üíØ\n00:41:16    Gabby Palomo Munoz: Replying to \"That's where I know ...\"\n\nI swear there's always a Jenny Bryan's talk somewhere to clarify any complex topic\n00:41:33    Jo Hardin:  Reacted to \"I swear there's alwa...\" with üíØ\n00:43:29    Olivier Leroy:  do.call(rbind, lapply(bucket[[\"Contents\"]]), function(x) x[[\"Key\"]])\n\nIs a way to list all key in a s3 bucket as an example of args/anonymous function\n00:44:29    Gabby Palomo Munoz: Quick question about do.call() Let's say I have a function I created that has three arguments. my_fun &lt;- function(x, y, z){ body} and then I use it in do.call(). I just list the arguments as this: do.call(list, list$x, list$y, list$z)\n00:44:42    Olivier Leroy:  Reacted to \"Quick question about...\" with üëç\n00:44:45    Gabby Palomo Munoz: I am always confused by this which is why I go to lapply LOL but I like do.call()\n00:45:15    Olivier Leroy:  Do.call(function, list(named args))\n00:45:35    Derek Sollberger (he/him):  Replying to \"I am always confused...\"\n\nAgree.  I think do.call() is useful to mention en route to learning about *apply()\n00:45:41    Gabby Palomo Munoz: Replying to \"Quick question about...\"\n\nYes the function goes first lol, and then I list the arguments. Oh perfect. thanks Olivier!!!\n00:45:50    Olivier Leroy:  Reacted to \"Yes the function goe...\" with üëç\n00:45:50    Gabby Palomo Munoz: Reacted to \"Agree.  I think do.c...\" with ‚ù§Ô∏è\n00:46:51    Olivier Leroy:  This one overwriting the same name is so dangerous üòõ\n00:47:23    Gabby Palomo Munoz: Replying to \"This one overwriting...\"\n\ntemp\n00:47:38    Gabby Palomo Munoz: Reacted to \"This one overwriting...\" with üíØ\n00:48:36    Derek Sollberger (he/him):  caution: the magrittr pipe might still be needed for \".\", for example:\n\ndf %&gt;% lm(y ~ x, data = .)\n00:48:54    Steffi LaZerte (she/her):   Replying to \"caution: the magritt...\"\n\nYou can use\n00:48:55    Gabby Palomo Munoz: Replying to \"caution: the magritt...\"\n\nbut not with the native pipe?\n00:49:01    Steffi LaZerte (she/her):   Replying to \"caution: the magritt...\"\n\ndf |&gt; lm(y ~ x, data = _)\n00:49:07    Derek Sollberger (he/him):  Reacted to \"df |&gt; lm(y ~ x, data...\" with üòª\n00:49:14    Gabby Palomo Munoz: Replying to \"caution: the magritt...\"\n\nActually, I am not clear on when to use the . so I use it whenever I see an error\n00:49:26    Steffi LaZerte (she/her):   Replying to \"caution: the magritt...\"\n\nBut it's not as flexible and must be a named argument and can't be inside another nested function (drives me nuts!)\n00:49:35    Gabby Palomo Munoz: Reacted to \"df |&gt; lm(y ~ x, data...\" with ü§Ø\n00:49:35    Howard Baek:    Do you guys load magrittr when you are using its other operators like %T&gt;%?\n00:50:28    Gabby Palomo Munoz: Replying to \"Do you guys load mag...\"\n\nI use |&gt; but I have it set like this in RStudio settings. If you have the magrittr pipe as default then you don't have to load the package. At least that's my understanding.\n00:50:38    Steffi LaZerte (she/her):   Replying to \"Do you guys load mag...\"\n\nSometimes, but I use that operator so rarely, it's usually easier (and easier to read) to just break out of the pipe for it\n00:50:48    Howard Baek:    Replying to \"Do you guys load mag...\"\n\nYeah I agree\n00:51:18    Steffi LaZerte (she/her):   Replying to \"Do you guys load mag...\"\n\nNow I'm trying to use the base pipe as my default (it also looks better in my font :D )\n00:51:26    Derek Sollberger (he/him):  Reacted to \"I use |&gt; but I have ...\" with üßê\n00:52:01    Howard Baek:    Replying to \"Do you guys load mag...\"\n\nAre you using the Hadley font?\n00:52:20    Olivier Leroy:  Reacted to \"df |&gt; lm(y ~ x, data...\" with ü§Ø\n00:52:25    Steffi LaZerte (she/her):   Replying to \"Do you guys load mag...\"\n\nFira Code\n00:52:33    Steffi LaZerte (she/her):   Replying to \"Do you guys load mag...\"\n\nI had no idea there was a Hadley font!\n00:52:34    Howard Baek:    Replying to \"Do you guys load mag...\"\n\nYeah same haha\n00:52:42    Gabby Palomo Munoz: Replying to \"Do you guys load mag...\"\n\nthe native pipe is so much cleaner looking I agree\n00:52:45    Steffi LaZerte (she/her):   I have to run everyone, sorry! It's been a great conversation, see you next week!\n00:52:51    Olivier Leroy:  Reacted to \"I have to run everyo...\" with üëã\n00:52:51    Howard Baek:    Replying to \"Do you guys load mag...\"\n\nOh I meant the font that Hadley Wickham uses, which is FiraCode\n00:52:52    Gabby Palomo Munoz: Reacted to \"I have to run everyo...\" with üëçüèª\n00:52:55    Howard Baek:    Reacted to \"I have to run everyo...\" with üëã\n00:52:58    Howard Baek:    Reacted to \"I have to run everyo...\" with üëçüèª\n00:52:59    Steffi LaZerte (she/her):   Replying to \"Do you guys load mag...\"\n\nOhhhhhhh!\n00:53:04    Howard Baek:    Reacted to \"Ohhhhhhh!\" with üòÇ\n00:55:30    Gabby Palomo Munoz: I found this for the FiraCode Font because if Hadley uses it I want it LOL https://github.com/tonsky/FiraCode/wiki/RStudio-instructions\n00:56:52    Howard Baek:    Replying to \"I found this for the...\"\n\nYes, that is exactly why I‚Äôm using FiraCode\n00:56:58    Howard Baek:    Reacted to \"I found this for the...\" with üòÇ\n00:57:07    Gabby Palomo Munoz: Reacted to \"Yes, that is exactly...\" with üòÇ\n00:57:20    Gabby Palomo Munoz: Replying to \"I found this for the...\"\n\nWell I am copying you now LOL\n00:57:27    Howard Baek:    Reacted to \"Well I am copying yo...\" with üòÇ\n00:58:07    Howard Baek:    I gotta run everyone, see you all next week!!!\n00:58:12    Olivier Leroy:  Reacted to \"I gotta run everyone...\" with üëã\n00:58:53    Gabby Palomo Munoz: Reacted to \"I gotta run everyone...\" with üëã\n01:07:34    Diana Garcia Cortes:    great! Thank you\n01:07:38    Olivier Leroy:  end"
  },
  {
    "objectID": "videos/06/08.html",
    "href": "videos/06/08.html",
    "title": "Cohort 8",
    "section": "",
    "text": "Meeting chat log\n\n00:12:27    Federica Gazzelloni:    start\n00:42:47    jim :   Promises are covered in later chapter\n00:42:58    Rebecca Butler: Reacted to \"Promises are covered...\" with üëç\n00:49:40    jim :   Yes\n00:49:47    jim :   Lazy eval\n00:52:20    jim :   X is evaluated only at very last moment\n00:56:24    Rebecca Butler: Reacted to \"X is evaluated only ...\" with üëç\n01:08:29    Federica Gazzelloni:    stop\n01:08:52    jim :   Thx"
  },
  {
    "objectID": "videos/07/10.html",
    "href": "videos/07/10.html",
    "title": "Cohort 10",
    "section": "",
    "text": "Meeting chat log\n\n00:24:16    Olivier Leroy:  current env will change if you are using browser()() to debug\n00:26:25    jim rothstein:  Question:   where does the value of \"d\" live?  in environment, in RAM?\n00:27:06    Olivier Leroy:  ram I think\n00:27:39    jim rothstein:  OK,   so \"d\" is reference to memory location\n00:29:40    Olivier Leroy:  the memory location will be illustrated by obj_addr(d) (executqtes in correct env)\n00:33:10    jim rothstein:  @Olivier Leroy Thx ... need to check later.\n00:34:15    Olivier Leroy:  Reacted to \"@Olivier Leroy Thx ....\" with üëç\n00:40:45    jim rothstein:  `&lt;&lt;-`  If such a\n     variable is found (and its binding is not locked) then its value\n     is redefined, otherwise assignment takes place in the global\n00:41:47    jim rothstein:  x &lt;&lt;- 2    1st tries to find x in ANY parent\n00:41:54    Jon Harmon (jonthegeek):    [main 12:35:50] &gt; testing &lt;- function() {\n    a &lt;&lt;- \"I'm in the global environment now!\"\n  }\n[main 12:36:57] &gt; a\nError: object 'a' not found\n\n[main 12:36:57] &gt; testing()\n[main 12:36:58] &gt; a\n[1] \"I'm in the global environment now!\"\n00:49:37    Olivier Leroy:  the art of R is giving an exampl;e of  &lt;&lt;-  in a event scheduler\n00:50:21    jim rothstein:  fibinocci numbers\n00:50:55    Olivier Leroy:  I needed the 4 first chapter of little schemer to sart getting it\n00:51:16    Mart√≠n Venegas: finding a variable inside a really nested list maybe?\n00:52:21    jim rothstein:  @Mart√≠n Venegas  - think so\n00:53:02    Mart√≠n Venegas: Reacted to @Mart√≠n Venegas  - t... with \"üëå\"\n00:54:30    Mart√≠n Venegas: so the order in package loads matters\n00:55:02    Jon Harmon (jonthegeek):    Replying to \"so the order in pack...\"\n\nYes! If two packages have a function with the same name, you'll get the most-recently-loaded version.\n00:55:18    Retselisitsoe Monyake:  Reacted to \"Yes! If two packag...\" with üëç\n00:55:22    Mart√≠n Venegas: Reacted to Yes! If two packages... with \"‚ù§Ô∏è\"\n00:55:24    jim rothstein:  Reacted to \"Yes! If two packag...\" with üëç\n00:56:31    jim rothstein:  Can you go through this diagram?    all the pieces??\n01:01:13    Olivier Leroy:  I need to go thanks Josh!\n01:02:13    Mart√≠n Venegas: thats good to know\n01:04:05    Stephan Koenig: Thanks, got to go to a different meeting!\n01:04:31    Nicholas Giangreco: Thank you Josh! I need to reread this. Chapter - very interesting!"
  },
  {
    "objectID": "videos/07/09.html",
    "href": "videos/07/09.html",
    "title": "Cohort 9",
    "section": "",
    "text": "Meeting chat log\n\n00:09:26    Jo Hardin:  sorry, didn‚Äôt mean to have my mic on!  i‚Äôm driving in the car, so won‚Äôt be able to say much.\n00:09:34    Olivier Leroy:  Reacted to \"sorry, didn‚Äôt mean t...\" with üëç\n00:09:38    Jo Hardin:  *i‚Äôm not actually *driving*.\n00:10:45    Tinashe Tapera: American holidays are so rare I was so surprised when I moved here\n00:13:10    Derek Sollberger (he/him):  Yes, kudos for making the slides!\n00:13:27    Steffi LaZerte (she/her):   Reacted to \"Yes, kudos for makin...\" with üíØ\n00:14:01    Olivier Leroy:  Reacted to \"Yes, kudos for makin...\" with üíØ\n00:18:21    Olivier Leroy:  I have done a quick check on internet and did not find good ressource on dynamic / lexical scoping (except an SO post)\n00:18:33    Jo Hardin:  Reacted to \"I have done a quick ...\" with üëç\n00:22:12    Steffi LaZerte (she/her):   I think env_parents() stops if you use a created environment\n00:24:08    Derek Sollberger (he/him):  Replying to \"I think env_parents(...\"\n\nIt seems like every week we learning something new that was brought by rlang or the tidyverse :-)\n00:24:29    Olivier Leroy:  ecur &lt;- globalenv()  # starting point\nrepeat {\n    cat(paste0(format(ecur), \" (\", attr(ecur, \"name\"), \")\"))  # pretty-print\n\n    if (exists(\"&lt;\", envir=ecur, inherits=FALSE))  # look for `&lt;`\n        cat(strrep(\" \", 25), \"`&lt;` found here!\")\n    cat(\"\\n\")\n\n    ecur &lt;- parent.env(ecur)  # advance to its enclosure\n}\n00:24:48    Olivier Leroy:  https://deepr.gagolewski.com/chapter/330-environment.html\n00:29:43    Olivier Leroy:  Btw I do not understand what using random order speed up the search (I will learn it someday)\n00:29:49    Olivier Leroy:  why*\n00:32:31    Olivier Leroy:  This also help understanding some ‚Äúname conflicts‚Äù order\n00:32:42    Derek Sollberger (he/him):  Reacted to \"This also help under...\" with üëç\n00:33:16    Steffi LaZerte (she/her):   Reacted to \"This also help under...\" with üëç\n00:35:20    Jo Hardin:  but what you are showing is where the function *lives* right?  doesn‚Äôt the function still have its own environment?\n00:35:45    Steffi LaZerte (she/her):   Replying to \"but what you are sho...\"\n\nI think only when it's run...\n00:36:09    Olivier Leroy:  Replying to \"but what you are sho...\"\n\nYes where it lives\n00:36:10    Steffi LaZerte (she/her):   Replying to \"but what you are sho...\"\n\nI think there are three things:\n00:36:11    Tinashe Tapera: Just want to include a comment: the knowledge of path searching is very useful for when you‚Äôre debugging things on your computer in general. If ever something goes wrong, look at your path in the terminal \n\necho $PATH\n00:36:21    Olivier Leroy:  Reacted to \"Just want to include...\" with üëç\n00:36:27    Derek Sollberger (he/him):  Reacted to \"Just want to include...\" with üëç\n00:36:28    Steffi LaZerte (she/her):   Replying to \"but what you are sho...\"\n\nWhere it lives, where it looks for variables, and it's environment when it runs\n00:36:46    Jo Hardin:  Reacted to \"Where it lives, wher...\" with üëç\n00:37:10    Olivier Leroy:  Reacted to \"Where it lives, wher...\" with üëç\n00:37:57    Steffi LaZerte (she/her):   Replying to \"but what you are sho...\"\n\n\"The distinction between binding and being bound by is subtle but important; the difference is how we find g versus how g finds its variables.\"\n00:38:03    Jo Hardin:  Replying to \"but what you are sho...\"\n\ndoesn‚Äôt it look for variables in ‚Äúits environment‚Äù ?  i don‚Äôt understand the different between Steffi‚Äôs last two.\n00:39:01    Jo Hardin:  Replying to \"but what you are sho...\"\n\nbut it always looks inside the function first because that is ‚Äúthe function‚Äôs environment‚Äù‚Ä¶ and then it just keeps going up the parent chain?\n00:39:09    Steffi LaZerte (she/her):   Reacted to \"but it always looks ...\" with üëçüèª\n00:39:24    Jo Hardin:  Replying to \"but what you are sho...\"\n\ndoesn‚Äôt really matter whether the parent is global or any other environment, right?\n00:39:35    Jo Hardin:  Reacted to \"\"The distinction bet...\" with ‚ù§Ô∏è\n00:41:33    Steffi LaZerte (she/her):   Replying to \"but what you are sho...\"\n\nI think there is a difference if it's a function you create in the global vs. one in a package environment\n00:41:49    Steffi LaZerte (she/her):   Replying to \"but what you are sho...\"\n\nbecause package functions won't use variables in your global environment\n00:42:09    Jo Hardin:  Replying to \"but what you are sho...\"\n\nwell, that‚Äôs because functions in packages don‚Äôt have global as a parent.  right?\n00:42:25    Steffi LaZerte (she/her):   Replying to \"but what you are sho...\"\n\nHmmm... that's a good point!\n00:42:45    Steffi LaZerte (she/her):   Reacted to \"Just want to include...\" with üëç\n00:43:58    Jo Hardin:  can you copy and paste your code into the chat?  i‚Äôd love to play with it!\n00:46:32    Olivier Leroy:  ei$a\n00:49:07    Diana Garcia Cortes:    g &lt;- \"hello\"\n\ne1 &lt;- env(\n  g = 10,\n  a = 78\n)\n\ne1$funcion_in_e1 &lt;- function(x = a) {\n  print(x)\n  g\n}\n\nfn_env(e1$funcion_in_e1)\ne1$funcion_in_e1(e1$a)\n00:49:36    Jo Hardin:  Replying to \"g &lt;- \"hello\"\n\ne1 &lt;- ...\"\n\nthank you!\n00:49:41    Olivier Leroy:  Reacted to \"g &lt;- \"hello\"\n\ne1 &lt;- ...\" with üëç\n00:49:54    Derek Sollberger (he/him):  Reacted to \"g &lt;- \"hello\"\n\ne1 &lt;- ...\" with üòª\n00:50:40    Olivier Leroy:  It matter for us but not for the package namepace\n00:58:54    Olivier Leroy:  I am so bad with reading ‚Äú!‚Äù\n01:03:35    Jo Hardin:  Really great, thank you!\n01:05:04    Jo Hardin:  i teach, so i like getting as much done before the semester starts.\n01:05:21    Derek Sollberger (he/him):  Reacted to \"i teach, so i like g...\" with üíØ\n01:05:46    Diana Garcia Cortes:    Reacted to \"Just want to include...\" with üëç\n01:05:54    Jo Hardin:  thanks everyone.  see you next week.\n01:05:58    Tinashe Tapera: Good job everybody\n01:06:04    Tinashe Tapera: See you next time\n01:06:08    Olivier Leroy:  End"
  },
  {
    "objectID": "videos/08/10.html",
    "href": "videos/08/10.html",
    "title": "Cohort 10",
    "section": "",
    "text": "Meeting chat log\n\n00:20:28    Jon Harmon (jonthegeek):    rlang::global_handle()  in your .Rprofile turns on all the pretty error handling stuff. I don't think that existed when this book came out.\n00:20:47    Jacob Schwan:   Reacted to \" rlang::global_handl...\" with ‚ù§Ô∏è\n00:20:51    Martin Venegas: Reacted to \" rlang::global_handl...\" with ‚ù§Ô∏è\n00:22:03    Olivier Leroy:  wow I did not that\n00:22:09    Olivier Leroy:  know*\n00:22:29    Olivier Leroy:  cat() is sending to stdout? at least?\n00:24:26    jim rothstein:  Reacted to \" rlang::global_handl‚Ä¶\" with ‚ù§Ô∏è\n00:26:16    Olivier Leroy:  make sense in API call function, you try to get something and send the error  in the return\n00:43:32    Olivier Leroy:  definitely underused :P\n00:43:46    Jon Harmon (jonthegeek):    This code could really use some abstractions to make it clearer what's happening IMO, but it's an interesting example of using tryCatch (and try_fetch)/withCallingHandlers: https://github.com/r-lib/httr2/blob/bb6a48ef8f554aab1b3aa956de1d68c59249c7c1/R/req-perform-iterative.R#L156 \n\nI usually include a special  .pkg_abort()  function in my packages to setup up pretty/classed errors: https://github.com/shinyworks/chains/blob/main/R/aaa-conditions.R#L57 \nFancier: https://github.com/api2r/stbl/blob/main/R/aaa-conditions.R#L20\n00:45:30    Olivier Leroy:  that is fine if we have more time, it was really clear presentation!\n00:45:53    jim rothstein:  Very clear\n00:46:19    Jacob Schwan:   Nice set of examples @Eamon Caddigan!\n00:47:06    Jon Harmon (jonthegeek):    &gt; print.condition\nfunction (x, ...) \n{\n    msg &lt;- conditionMessage(x)\n    call &lt;- conditionCall(x)\n    cl &lt;- class(x)[1L]\n    if (!is.null(call)) \n        cat(\"&lt;\", cl, \" in \", deparse(call), \": \", msg, \"&gt;\\n\", \n            sep = \"\")\n    else cat(\"&lt;\", cl, \": \", msg, \"&gt;\\n\", sep = \"\")\n    invisible(x)\n}\n&lt;bytecode: 0x00000144db0ce570&gt;\n&lt;environment: namespace:base&gt;\n00:47:35    Martin Venegas: Reacted to \"&gt; print.condition\nfu...\" with üòØ\n00:47:39    Olivier Leroy:  Reacted to \"&gt; print.condition\nfu...\" with üòØ\n00:51:43    Olivier Leroy:  expect_condition I think\n00:52:47    Martin Venegas: user experience hat\n00:52:49    Martin Venegas: like that\n00:53:06    Martin Venegas: üé©\n00:53:16    Jon Harmon (jonthegeek):    Oops it only prints the class when you look at the trace (and you don't get that option by default in base):\n[main 12:42:55] &gt; rlang::abort(\"This is my rlang error\")\nError:\n! This is my rlang error\nRun `rlang::last_trace()` to see where the error occurred.\n[main 12:42:55] &gt; rlang::last_trace()\n&lt;error/rlang_error&gt;\nError:\n! This is my rlang error\n---\nBacktrace:\n    ‚ñÜ\n 1. ‚îî‚îÄrlang::abort(\"This is my rlang error\")\n00:57:07    Olivier Leroy:  would the potential class of error be described at the function doc at the @returns ?\n01:05:30    Martin Venegas: thanks Eamon!"
  },
  {
    "objectID": "videos/08/09.html",
    "href": "videos/08/09.html",
    "title": "Cohort 9",
    "section": "",
    "text": "Meeting chat log\n\n00:05:48    Jeffrey Stevens:    I\"ve never understood tryCatch()\n00:09:29    Jo Hardin:  you are a great facilitator, Olivier!\n00:09:34    Olivier Leroy:  start\n00:09:41    Jeffrey Stevens:    Reacted to \"you are a great faci...\" with üíØ\n00:10:09    Diana Garcia Cortes:    Reacted to \"you are a great faci...\" with üíØ\n00:12:59    Leo:    Reacted to \"you are a great faci...\" with üéâ\n00:15:12    Howard Baek:    https://style.tidyverse.org/error-messages.html\n00:15:29    Olivier Leroy:  The stop function take ‚Ä¶ as arguments\n00:17:48    Olivier Leroy:  I had a ‚Äúhow now I understand why warning are staking moment reading that part‚Äù\n00:21:10    Diana Garcia Cortes:    https://statisticsglobe.com/errors-warnings-r\n00:29:42    Olivier Leroy:  I use message to return side effect like ‚Äúwhere the file is downloaded‚Äù even if you can hide that in other pLACE\n00:31:52    Steffi LaZerte (she/her):   Sorry I'm late!\n00:32:18    Jeffrey Stevens:    Reacted to \"Sorry I'm late!\" with üëã\n00:32:28    Olivier Leroy:  Replying to \"Sorry I'm late!\"\n\nNo worries welcome!\n00:32:30    Diana Garcia Cortes:    From the ComplexHeatmap package from Bioconductor:\n\nlibrary(ComplexHeatmap)\nLoading required package: grid\n========================================\nComplexHeatmap version 2.18.0\nBioconductor page: http://bioconductor.org/packages/ComplexHeatmap/\nGithub page: https://github.com/jokergoo/ComplexHeatmap\nDocumentation: http://jokergoo.github.io/ComplexHeatmap-reference\n\nIf you use it in published research, please cite either one:\n- Gu, Z. Complex Heatmap Visualization. iMeta 2022.\n- Gu, Z. Complex heatmaps reveal patterns and correlations in multidimensional \n    genomic data. Bioinformatics 2016.\n\n\nThe new InteractiveComplexHeatmap package can directly export static \ncomplex heatmaps into an interactive Shiny app with zero effort. Have a try!\n\nThis message can be suppressed by:\n  suppressPackageStartupMessages(library(ComplexHeatmap))\n========================================\n00:32:50    Olivier Leroy:  Reacted to \"From the ComplexHeat...\" with üëª\n00:33:08    Jeffrey Stevens:    Reacted to \"From the ComplexHeat...\" with üò±\n00:33:52    Olivier Leroy:  Reacted to \"Sorry I'm late!\" with üëã\n00:34:36    Olivier Leroy:  Just new line\n00:35:45    Olivier Leroy:  That is how you can create nice message in ComplexHeatmap üôÇ\n00:35:59    Jeffrey Stevens:    What's the difference between cat() and print()?\n00:36:17    Steffi LaZerte (she/her):   Reacted to \"No worries welcome!\" with üòÖ\n00:37:08    Jeffrey Stevens:    print() is creating a vector?\n00:38:24    Diana Garcia Cortes:    Print receives an object  as an argument, cat has ‚Ä¶\n00:38:37    Jeffrey Stevens:    OK, thanks\n00:38:56    Howard Baek:    https://stackoverflow.com/questions/31843662/what-is-the-difference-between-cat-and-print\n00:40:40    Diana Garcia Cortes:    I‚Äôll start using message() instead of cat() to tell myself what I‚Äôm doing in my own code üòÜ\n00:41:11    Olivier Leroy:  Replying to \"I‚Äôll start using mes...\"\n\nI am an huge print user also üòõ\n00:41:28    Diana Garcia Cortes:    Reacted to \"I am an huge print u...\" with üòÉ\n00:41:30    Steffi LaZerte (she/her):   Message is much nicer to handle, I find. I use cat() if I'm print text that I need to copy/paste elsewhere\n00:41:36    Olivier Leroy:  Reacted to \"I‚Äôll start using mes...\" with ‚úä\n00:42:26    Diana Garcia Cortes:    Reacted to \"Message is much nice...\" with üòÆ\n00:42:42    Steffi LaZerte (she/her):   Another difference between cat and print is that cat will 'print' the line breaks appropriately: \n\n&gt; print(\"hi\\neveryone\")\n[1] \"hi\\neveryone\"\n&gt; cat(\"hi\\neveryone\")\nhi\neveryone\n&gt; \n00:42:56    Olivier Leroy:  Reacted to \"Another difference b...\" with üëç\n00:44:53    Diana Garcia Cortes:    Reacted to \"Another difference b...\" with üëç\n00:46:10    Steffi LaZerte (she/her):   I've always used what they don't recommend here, using try() and checking the class for \"try-error\" rather than using tryCatch() because I could never understand how to use tryCatch() üòÖ  \n\nI'm looking forward to figuring this out!\n00:46:32    Jeffrey Stevens:    Reacted to \"I've always used wha...\" with üíØ\n00:49:34    Olivier Leroy:  Add a print so we had to path to check üòõ\n00:50:25    Steffi LaZerte (she/her):   Reacted to \"Add a print so we ha...\" with ü§£\n00:51:38    Jo Hardin:  i totally agree Olivier.  seems like it‚Äôs very hard to understand the `tryCatch()` flow.\n00:54:19    Jo Hardin:  it makes me think a little bit about the logic / flow of the arguments in `ifelse()` or `case_when()`.\n00:54:52    Diana Garcia Cortes:    rows &lt;- tryCatch({\n  vroom(snakemake@params[[\"row_filter_file\"]], delim = \"\\t\") %&gt;% \n    clean_names() %&gt;% pull(1)\n}, error = function(e) {\n  print(\"No row filter file found\")\n  NULL\n  message(‚ÄúNo row filter file found\")\n\n})\n01:03:04    Jeffrey Stevens:    I'm surprised the chapter didn't reference the {cli} package. Do you all use it?\nhttps://cli.r-lib.org/index.html\n01:03:54    Jeffrey Stevens:    Beautiful messaging\n01:04:20    Steffi LaZerte (she/her):   Reacted to \"rows &lt;- tryCatch({\n ...\" with üíØ\n01:04:57    Olivier Leroy:  End"
  },
  {
    "objectID": "videos/08/08.html",
    "href": "videos/08/08.html",
    "title": "Cohort 8",
    "section": "",
    "text": "Meeting chat log\n\n00:11:57    Federica (she/her): start\n00:23:34    Federica (she/her): http://adv-r.had.co.nz/beyond-exception-handling.html\n00:23:47    Federica (she/her): https://style.tidyverse.org/error-messages.html\n00:26:33    Betsy:  no, can't hear the rain at all!\n01:07:31    Rebecca Butler: record_log(log(\"Hello\"), path = here::here(\"mylog.txt\"))\n01:11:11    Federica (she/her): stop\n01:12:38    Rebecca Butler: I have a meeting now and need to run. Thanks for the presentation today!"
  },
  {
    "objectID": "videos/09/10.html",
    "href": "videos/09/10.html",
    "title": "Cohort 10",
    "section": "",
    "text": "Meeting chat log\n\n00:14:58    Stas Kolenikov (NORC):  \"Of course someone has to write for loops. It doesn‚Äôt have to be you.\" - Jenny Bryan\n00:18:10    Stas Kolenikov (NORC):  whether  map  is more readable than a  for()  loop is debatable (at least for me). A  map  inside a long  %&gt;%  pipeline may make it hard to understand what exactly the input is to it. I always require my staff to comment all  map s to explain what it is looping over.\n00:19:55    Martin Venegas: Replying to \"whether  map  is mor...\"\n\nThat's a good point. In my experiencie I try to use map with created objects and not connecting it in a pipeline\n00:25:46    Stas Kolenikov (NORC):  In the middle of 9.2.1, Hadley gives an example to break the length of input == length of output when a function returns too much and  purrr::map()  fails to comprehend it\n00:31:09    Stas Kolenikov (NORC):  Reminder: a data frame is a list of vectors, that's why  map(.x = data.frame, ...)  works over columns\n00:31:56    Stephan Koenig: Reacted to \"Reminder: a data fra...\" with üôè\n00:31:57    Martin Venegas: Reacted to \"Reminder: a data fra...\" with üëå\n00:33:04    Martin Venegas: You can use the twiddle with any named function\n00:34:29    Stas Kolenikov (NORC):  lambda functions are used when there is no canned function like  base::mean()\n00:37:08    Stas Kolenikov (NORC):  here  x  is picked up from some parent / global environment\n00:47:56    Stephan Koenig: I think the purrr documentation now discourages the use of the twiddle/formula notation. They now encourage the use of the new anonymous functions eg  \\(x) mean(x) See also cheatsheat https://github.com/rstudio/cheatsheets/blob/main/purrr.pdf\n00:48:19    Stas Kolenikov (NORC):  Reacted to \"I think the purrr do...\" with ‚ÄºÔ∏è\n00:48:24    Martin Venegas: Reacted to \"I think the purrr do...\" with üòØ\n00:49:28    Stephan Koenig: Replying to \"I think the purrr do...\"\n\nyou can see it also in the docs with  ?purrr::map  under  .f\n00:50:10    Stas Kolenikov (NORC):  Ha! Here's the example of  map  in a long pipe. So what is the list that  map_dbl(2)  applies to?? Each  map  has to be commented. I can't clearly see what each line is doing (sorry, Hadley, that's on me)\n00:50:53    Stas Kolenikov (NORC):  Replying to \"Ha! Here's the examp...\"\n\nof course  lappply()  way is considerably uglier... and I would have used a for loop.\n00:56:00    Jacob Schwan:   Replying to \"whether  map  is mor...\"\n\nInteresting. My feelings are in the opposite direction. I feel like inputs and outputs are more strictly defined for a  map()  than a  for()  loop. That makes it easier for me to intuit what the output of a  map()  function will be.\n00:56:47    Stas Kolenikov (NORC):  Replying to \"whether  map  is mor...\"\n\nwell you must have learned  map  before  for . I learned  for  about 40 years ago ;)\n01:00:23    Jacob Schwan:   Replying to \"whether  map  is mor...\"\n\nYeah, I guess that is true. I was taught  for  loops briefly and almost immediately afterward taught to use  map()  instead, whenever possible.  I was also taught  %&gt;%  chains pretty early and use them probably to excess.\n01:02:41    Stas Kolenikov (NORC):  map 's obligation is to create a list of returned values, that's what it is. With functions that are run primarily for their side effects, the returned values are not needed. (E.g.  ggplot  returns a  ggplot  object, and you don't need to see all of them.)\n01:07:25    Martin Venegas: that's good to know, I've been using the map2 alternative\n01:07:31    Martin Venegas: and imap is more elegant\n01:11:14    Martin Venegas: that's an interesting example\n01:12:16    Jacob Schwan:   Reacted to \"that's an interestin...\" with üíØ\n01:16:36    Martin Venegas: a lot of useful information! thank u\n01:16:46    Jacob Schwan:   this was a very long chapter\n01:16:50    Stephan Koenig: Yes, thank you!"
  },
  {
    "objectID": "videos/09/09.html",
    "href": "videos/09/09.html",
    "title": "Cohort 9",
    "section": "",
    "text": "Meeting chat log\n\n00:03:07    Olivier Leroy:  Vintage dessert recipe\n00:04:46    Olivier Leroy:  https://tenmorebites.com/2015/09/26/skunk/\n00:07:34    Olivier Leroy:  https://en.wikipedia.org/wiki/Ambrosia_(fruit_salad)\n00:10:37    Olivier Leroy:  start\n00:12:27    Olivier Leroy:  In my mind a list is a recursive vector\n00:13:41    Steffi LaZerte (she/her):   \"Vectors come in two flavours: atomic vectors and lists\" Chp 3 Introduction\n00:13:49    Olivier Leroy:  Reacted to \"\"Vectors come in two...\" with üëç\n00:13:55    Gabby Palomo Munoz: Reacted to \"\"Vectors come in two...\" with üíØ\n00:14:32    Gabby Palomo Munoz: There's also map_dfr or something? I think it's deprecated but it's still there... right?\n00:14:58    Jeffrey Stevens:    Replying to \"There's also map_dfr...\"\n\nI think it is superceded rather than deprecated.\n00:15:19    Gabby Palomo Munoz: Replying to \"There's also map_dfr...\"\n\n@Jeffrey Stevens what's the difference?\n00:15:44    Jeffrey Stevens:    Replying to \"There's also map_dfr...\"\n\nDeprecated will eventually go away. Superceded is maintained but there is a betterr way to do it.\n00:15:46    Steffi LaZerte (she/her):   Replying to \"There's also map_dfr...\"\n\nYes, but as you said, not recommended because it is confusing as it implies it acts like map_lgl etc., but it doesn't. I've never really understood it üòÖ\n00:15:59    Gabby Palomo Munoz: Reacted to \"Deprecated will even...\" with üòç\n00:16:18    Derek Sollberger (he/him):  Reacted to \"Deprecated will even...\" with üòç\n00:16:58    Gabby Palomo Munoz: Reacted to \"Yes, but as you said...\" with üëçüèª\n00:17:55    Steffi LaZerte (she/her):   I was so happy to learn that ~ is pronounced \"twiddle\" that I ran into my spouses office to share üòÇ\n00:18:06    Olivier Leroy:  Tilda also\n00:18:24    Jeffrey Stevens:    Reacted to \"I was so happy to le...\" with ‚ûï\n00:18:34    Derek Sollberger (he/him):  Reacted to \"I was so happy to le...\" with ‚ûï\n00:19:56    Steffi LaZerte (she/her):   However, using the ... is now not encouraged (map gives you a message/warning if you do, I think)\n00:20:00    Olivier Leroy:  I am not an huge fan of the formula syntax, it use a lot of metaprogramming to works and I am always afraid I misunderstood it\n00:20:43    Olivier Leroy:  I used that anonymous function a lot‚Äù (length(unique(x)))\n00:22:02    Steffi LaZerte (she/her):   I really like the new R anonymous syntax: \\(x) length(unique(x)) Still compact, but allows you to set your own argument names\n00:22:38    Olivier Leroy:  Reacted to \"I really like the ne...\" with üëç\n00:22:47    Gabby Palomo Munoz: Replying to \"I really like the ne...\"\n\nAll of this is so confusing to me because is it function(x), ~, or \\(x)\n00:22:55    Gabby Palomo Munoz: Replying to \"I really like the ne...\"\n\nToo many ways to say the same thing. I get confused.\n00:23:04    Derek Sollberger (he/him):  Reacted to \"All of this is so co...\" with üëç\n00:23:34    Steffi LaZerte (she/her):   Replying to \"I really like the ne...\"\n\nThey are all equivalent, with the exception of in ~ you have to use the built-in argument names, in function(x) or \\(x) you choose the argument name. I.e. you can say function(my_arg) or \\(my_arg) for example.\n00:25:06    Jeffrey Stevens:    I was very happy to see the explanation of . vs .x vs ..1\n00:25:25    Gabby Palomo Munoz: Replying to \"I was very happy to ...\"\n\nThey just lost me with ..1\n00:25:30    Olivier Leroy:  Reacted to \"I was very happy to ...\" with üëç\n00:25:59    Olivier Leroy:  Here is ‚Äú.‚Äù Is the place holder ?\n00:26:02    Jeffrey Stevens:    Replying to \"I was very happy to ...\"\n\n. is for one argument\n.x and .y are for two arguments\n..1, ..2, ..3 etc are for more arguments\n00:26:03    Olivier Leroy:  unsure\n00:26:09    Steffi LaZerte (she/her):   Replying to \"I was very happy to ...\"\n\nIt's a way of referring to the arguments by position, when you might have up to n arguments. It's much more relevant with the pmap family.\n00:26:25    Steffi LaZerte (she/her):   Replying to \"I was very happy to ...\"\n\n..1, ..2, ..., ..n\n00:27:09    Steffi LaZerte (she/her):   Replying to \"Here is ‚Äú.‚Äù Is the p...\"\n\n. is the argument üòÖ\n00:27:51    Olivier Leroy:  Replying to \"Here is ‚Äú.‚Äù Is the p...\"\n\nOuch\n00:28:48    Olivier Leroy:  Good trial/error!\n00:28:52    Steffi LaZerte (she/her):   Replying to \"Here is ‚Äú.‚Äù Is the p...\"\n\nWhich is why we shouldn't use it... So confusing!\n00:28:58    Jeffrey Stevens:    Reacted to \"Good trial/error!\" with ‚ûï\n00:29:02    Steffi LaZerte (she/her):   Reacted to \"Good trial/error!\" with ‚ûï\n00:33:14    Steffi LaZerte (she/her):   I use map() all the time, but had never heard of modify(), I'm so happy! I think I can use that a lot in future.\n00:33:27    Olivier Leroy:  One quick point purrr::map is diff than base::Map\n00:33:45    Steffi LaZerte (she/her):   Reacted to \"One quick point purr...\" with üëçüèª\n00:36:14    Olivier Leroy:  powering\n00:37:25    Olivier Leroy:  I did not about this one and will prob use it\n00:38:43    Steffi LaZerte (she/her):   There is the furrr package which impliments parallized purrr functions\n00:41:33    Steffi LaZerte (she/her):   Messages prove that it worked üòâ\n00:43:36    Olivier Leroy:  Useful in simulation (sadly I am not doing much of that now ..)\n00:44:10    Steffi LaZerte (she/her):   I saw this usage of pmap in a conference presentation last year and it totally blew my mind ü§Ø\n00:44:20    Olivier Leroy:  Reacted to \"I saw this usage of ...\" with üëç\n00:44:26    Olivier Leroy:  Replying to \"I saw this usage of ...\"\n\nStill blew mine\n00:44:32    Steffi LaZerte (she/her):   Reacted to \"Still blew mine\" with üòÇ\n00:48:22    Steffi LaZerte (she/her):   Another function that I can totally see me using that I had no idea about!!! So exciting üòÅ\n00:52:44    Olivier Leroy:  I will be so lost between decimal . and .. (zoom is also lost and want to capitalize after .)\n00:53:03    Steffi LaZerte (she/her):   ggplot(mtcars, aes(hp, mpg)) + \n  reduce2(c(8,4,2), ...)\n00:53:41    Derek Sollberger (he/him):  aside: Maelle Salmon blog post with an example of `reduce`\nhttps://masalmon.eu/2023/07/26/reduce/\n00:53:48    Olivier Leroy:  Reacted to \"aside: Maelle Salmon...\" with üëç\n00:56:24    Olivier Leroy:  Go back in time Hadley!\n00:56:25    Steffi LaZerte (she/her):   Reacted to \"aside: Maelle Salmon...\" with üëçüèª\n00:56:30    Jeffrey Stevens:    Reacted to \"Go back in time Hadl...\" with ‚ûï\n00:58:59    Steffi LaZerte (she/her):   Reacted to \"Go back in time Hadl...\" with üòÇ\n01:00:20    Olivier Leroy:  This will look better as prettify json\n01:01:03    Derek Sollberger (he/him):  (about `pluck`) Other programming languages, such as LISP, 'pop' elements out of an array instead of viewing elements\n01:03:24    Steffi LaZerte (she/her):   Reacted to \"(about `pluck`) Othe...\" with üëçüèª\n01:03:37    Olivier Leroy:  Reacted to \"(about `pluck`) Othe...\" with üëç\n01:05:47    Derek Sollberger (he/him):  Thank you!  I am still new to functional programming in R, and this was very helpful :-)\n01:05:52    Jeffrey Stevens:    Great job, Jo! This was very informative!\n01:06:01    Steffi LaZerte (she/her):   Super great thanks\n01:06:02    Steffi LaZerte (she/her):   !\n01:06:10    Steffi LaZerte (she/her):   wonderful discussions!\n01:06:12    Olivier Leroy:  End"
  },
  {
    "objectID": "videos/10/10.html",
    "href": "videos/10/10.html",
    "title": "Cohort 10",
    "section": "",
    "text": "Meeting chat log\n\n00:17:51    Stanislav Kolenikov:    TIL:  lobstr::obj_size()  -- I have been working with some  rpart  objects that show up as having size of 500Kb in RStudio environment pane / evaluated by  object.size() , but actually eating up 10Gb as shown by the RStudio memory tracker. I suspect they are hauling the environment with them (which is a data frame with 10M rows so I can see how it can take a Gb or two) without really showing it properly.\n00:26:55    Jon Harmon (jonthegeek):    force &lt;- function (x) x\n00:27:27    Stas Kolenikov (NORC):  arg_match() ?\n00:30:37    Stas Kolenikov (NORC):  this is probably a @Jon question -- is there a way to implement  &lt;&lt;-  with  assign(..., envir=whatever)  ?\n00:30:54    Stas Kolenikov (NORC):  Replying to \"this is probably a @...\"\n\nmaybe in this simple example of the stateful functions snippet\n00:41:01    Jon Harmon (jonthegeek):    Replying to \"this is probably a @...\"\n\nKinda this?\ntesting &lt;- function() {\n  env &lt;- rlang::caller_env()\n  i &lt;- unlist(unname(mget(\"i\", envir = env, ifnotfound = 0L)))\n  print(assign(\"i\", i + 1L, pos = env))\n}\ntesting()\n\nI had to make sure it has a value before I start. There are probably other/cleaner ways to do that step.\n00:41:58    Stas Kolenikov (NORC):  Reacted to \"Kinda this?\ntesting ...\" with üëç\n00:42:22    Stas Kolenikov (NORC):  Replying to \"this is probably a @...\"\n\nprobably. I will check if that works in my context. Thanks!!\n00:43:50    Stas Kolenikov (NORC):  Replying to \"this is probably a @...\"\n\nI think I needed this superassignment to happen from one function I owed to another function I owed so I can make sure the variable is defined in the parent.\n00:43:59    Jon Harmon (jonthegeek):    Replying to \"this is probably a @...\"\n\nIn general,  rlang::caller_env()  is super useful. It's really just  base::parent.frame(n + 1)  (where  n  is the number of callers to go back, default 1), but it's easier to remember IMO.\n00:44:27    Stas Kolenikov (NORC):  Reacted to \"In general,  rlang::...\" with ‚ÄºÔ∏è\n00:45:41    Stas Kolenikov (NORC):  Replying to \"this is probably a @...\"\n\nright, I was trying to figure out in the debug window -- what is it that I need to hook to the  pos  argument?? It is not explicitly there in the environment's objects so I did not have that language to express my problem.\n00:48:06    Victor Ordu:    We have the  ecdf()  function in Base R\n00:48:58    Stas Kolenikov (NORC):  I wonder if that mechanics is used somewhere in  glm()  for real, as it takes functions (for links/families) as inputs\n00:49:32    Stas Kolenikov (NORC):  maybe the multiple imputation package  mice  as they have to use functions as arguments (or attributes of data frame columns)\n00:49:56    Stas Kolenikov (NORC):  maybe some machine learning aggregators .. ? I am less familiar with those\n00:55:48    Martin Venegas: that's good to know\n01:00:54    Stas Kolenikov (NORC):  well it looks like there are edge cases where you want to do an expensive computation and keep it in  the factory environment, and then use factoried functions to use that"
  },
  {
    "objectID": "videos/10/09.html",
    "href": "videos/10/09.html",
    "title": "Cohort 9",
    "section": "",
    "text": "Meeting chat log\n\n00:12:04    Olivier Leroy:  Start\n00:12:36    Olivier Leroy:  Great!\n00:16:21    Olivier Leroy:  I also searched other examples I find some here: https://raps-with-r.dev/fprog.html#writing-good-functions (still unclear where/when for me)\n00:17:24    Derek Sollberger (he/him):  Reacted to \"I also searched othe...\" with üëç\n00:17:57    Jo Hardin:  is ‚Äúbinding‚Äù like ‚Äúnames\"\n00:20:03    Olivier Leroy:  (Did not about it also)\n00:20:07    Olivier Leroy:  know\n00:21:15    Olivier Leroy:  Good point\n00:22:53    Jeff Stevens:   Mind blown! So glad you mentioned that.\n00:23:19    Olivier Leroy:  Replying to \"is ‚Äúbinding‚Äù like ‚Äún...\"\n\nAbout binding and name I like https://mitp-content-server.mit.edu/books/content/sectbyfn/books_pres_0/6515/sicp.zip/full-text/book/book-Z-H-10.html#%_sec_1.1.2 (disclaimer I never only read 2 chapter of it)\n00:23:28    Olivier Leroy:  Reacted to \"Mind blown! So glad ...\" with üëç\n00:26:33    Olivier Leroy:  I think I understood the super assignment as ‚Äúwrite in global‚Äù for a long time\n00:26:47    Jeff Stevens:   Replying to \"I think I understood...\"\n\nMe too\n00:26:53    Derek Sollberger (he/him):  Reacted to \"I think I understood...\" with üëç\n00:26:58    Howard Baek:    Reacted to \"I think I understood...\" with üëç\n00:27:12    Jeff Stevens:   Reacted to \"I think I understood...\" with üëç\n00:30:25    Tinashe Tapera: So does R have a global assignment at all?\n00:31:02    Tinashe Tapera: I‚Äôm sure it should out of software architecture mecessity\n00:31:22    Olivier Leroy:  Replying to \"So does R have a glo...\"\n\nNo idea, if I want to force it I will assign to .globalenv\n00:32:17    Tinashe Tapera: Reacted to \"No idea, if I want t‚Ä¶\" with üëå\n00:32:21    Olivier Leroy:  assign(x, env = .gloabenv)\n00:32:22    Derek Sollberger (he/him):  Replying to \"So does R have a glo...\"\n\nYes, it looks like `assign()` has an `envir` parameter\n\nhttps://stackoverflow.com/questions/9726705/assign-multiple-objects-to-globalenv-from-within-a-function\n00:32:52    Olivier Leroy:  Wrong spelling in .globalenv\n00:33:52    Derek Sollberger (he/him):  sounds like a Data Mishaps Night story :-)\n00:34:11    Olivier Leroy:  Reacted to \"sounds like a Data M...\" with üëª\n00:34:27    Jeff Stevens:   Should we be doing garbage collection on all functions (not just function factories) to save memory?\n00:34:36    Olivier Leroy:  I did not know that!\n00:35:47    Jeff Stevens:   Awesome explanation--thanks!\n00:35:52    Olivier Leroy:  Reacted to \"Awesome explanation-...\" with üëç\n00:36:24    Olivier Leroy:  Or you cache outside and kill R\n00:36:37    Tinashe Tapera: Use targets\n00:36:46    Tinashe Tapera: That‚Äôs exactly what targets is for\n00:36:55    Olivier Leroy:  Reacted to \"That‚Äôs exactly what ...\" with üëç\n00:36:57    Derek Sollberger (he/him):  Reacted to \"That‚Äôs exactly what ...\" with üòª\n00:38:36    Olivier Leroy:  -&gt; https://wlandau.github.io/targetopia/contributing.html#target-factories\n\n(Good example)\n00:43:10    Jo Hardin:  i‚Äôm excited about the `switch()` function you just showed!\n00:43:23    Olivier Leroy:  Declarative is always nice on readability!\n00:51:26    Olivier Leroy:  Yes very elegant to store stuff\n00:51:55    Derek Sollberger (he/him):  all 5 functions in `funs` start with the same environment?\n00:52:15    Olivier Leroy:  Replying to \"all 5 functions in `...\"\n\nGood question\n00:53:30    Olivier Leroy:  It seems attach can attach any kind of object that can be tricky\n00:54:04    Derek Sollberger (he/him):  Replying to \"all 5 functions in `...\"\n\nah (I read too fast)\n00:56:02    Olivier Leroy:  I use the ecdf one, not that frequently\n00:59:35    Tinashe Tapera: You‚Äôre justified in hating setwd() though\n00:59:47    Steffi LaZerte (she/her):   Reacted to \"You‚Äôre justified in ...\" with üòÇ\n01:00:23    Derek Sollberger (he/him):  I doubt that I have seen any other book cover functional programming before OOP (and thank you for the walkthrough)\n01:03:50    Diana Garcia Cortes:    Thank you Steffi!\n01:03:56    Olivier Leroy:  end"
  },
  {
    "objectID": "videos/11/10.html",
    "href": "videos/11/10.html",
    "title": "Cohort 10",
    "section": "",
    "text": "Meeting chat log\n\n00:12:36    Stas Kolenikov (NORC):  this code for  splat()  relies on finding  args  in the caller environment -- is that by design? It is implicitly paired with  do.call()  syntax that way\n00:14:34    Jon Harmon (jonthegeek):    Replying to \"this code relies on ...\"\n\nIt's getting args passed into it via  lapply()  in the example. You could call  splat(mean)(mean_args[[1]]) , for example.\n00:15:00    Jon Harmon (jonthegeek):    Replying to \"this code for  splat...\"\n\nIt's equivalent to this:\npurrr::map(\n  mean_args,\n  ~ do.call(mean, .x)\n)\n00:22:11    Stas Kolenikov (NORC):  Replying to \"this code for  splat...\"\n\nI confused myself.  args  is declared as the input of the function  f  although it limits that argument to be a single piece... unlike  ...  that would allow arbitrary number of inputs. I am just thinking of how this code would break -- e.g. if  args  is not a list (because  do.call()  needs a list in its second argument)\n00:31:13    Stas Kolenikov (NORC):  I've encountered some functions in some CRAN packages that throw a warning for every individual entry of the input vector they don't like, so you feed them a vector of length 10K with 200 bad entries, and it throws 200 warnings. So I wrap them in  purrr::quietly()\n00:32:28    Stas Kolenikov (NORC):  Replying to \"I've encountered som...\"\n\n(yeah you can do  stopifnot(all(object$warning) == \"shutup\")\n00:34:13    Jon Harmon (jonthegeek):    function(...) f(g(...))\n00:34:20    Jon Harmon (jonthegeek):    function (..., .dir = c(\"backward\", \"forward\")) \n{\n  .dir &lt;- arg_match0(.dir, c(\"backward\", \"forward\"))\n  fns &lt;- map(list2(...), rlang::as_closure, env = caller_env())\n  if (!length(fns)) {\n    return(compose(function(x, ...) x))\n  }\n  if (.dir == \"backward\") {\n    n &lt;- length(fns)\n    first_fn &lt;- fns[[n]]\n    fns &lt;- rev(fns[-n])\n  }\n  else {\n    first_fn &lt;- fns[[1]]\n    fns &lt;- fns[-1]\n  }\n  composed &lt;- function() {\n    env &lt;- env(caller_env(), `_fn` = first_fn)\n    first_call &lt;- sys.call()\n    first_call[[1]] &lt;- quote(`_fn`)\n    env$`_out` &lt;- .Call(purrr_eval, first_call, env)\n    call &lt;- quote(`_fn`(`_out`))\n    for (fn in fns) {\n      env$`_fn` &lt;- fn\n      env$`_out` &lt;- .Call(purrr_eval, call, env)\n    }\n    env$`_out`\n  }\n  formals(composed) &lt;- formals(first_fn)\n  structure(composed, class = c(\"purrr_function_compose\", \n    \"function\"), first_fn = first_fn, fns = fns)\n}"
  },
  {
    "objectID": "videos/11/09.html",
    "href": "videos/11/09.html",
    "title": "Cohort 9",
    "section": "",
    "text": "Meeting chat log\n\n00:11:21    Derek Sollberger:   The webR extension for Quarto is neat!\n00:12:53    Derek Sollberger:   Make \"Base Types\" mandatory reading on our own?\n00:17:28    Derek Sollberger:   start\n00:35:23    Steffi LaZerte (she/her):   auto_browser looks pretty cool!\n00:44:13    Steffi LaZerte (she/her):   Wow that Vectorize looks pretty useful\n01:11:08    Olivier Leroy:  stop\n01:11:10    Olivier Leroy:  end"
  },
  {
    "objectID": "videos/12/09.html",
    "href": "videos/12/09.html",
    "title": "Cohort 9",
    "section": "",
    "text": "Meeting chat log\n\n00:08:26    Olivier Leroy:  Start\n00:11:23    Olivier Leroy:  Yeah unsure that s3 count as OOP it really def or your def of OOP üòõ\n00:12:57    Olivier Leroy:  Is S still in dev. ?\n00:14:53    Jeffrey Stevens:    From Wikipedia:\nThe latest version of the S standard is S4, released in 1998.[17] It provides advanced object-oriented features. S4 classes differ markedly from S3 classes; S4 formally defines the representation and inheritance for each class, and has multiple dispatch: the generic function can be dispatched to a method based on the class of any number of arguments, not just one.\n00:15:20    Derek Sollberger (he/him):  \"S7 = S3 + S4\n00:15:28    Diana Garcia Cortes:    Reacted to \"\"S7 = S3 + S4\" with üòÇ\n00:15:36    Olivier Leroy:  Reacted to \"\"S7 = S3 + S4\" with üòÇ\n00:17:03    Olivier Leroy:  ‚ÄúThe S7 package is a new OOP system designed to be a successor to S3 and S4‚Äù (https://rconsortium.github.io/S7/)\n00:21:05    Jeffrey Stevens:    \"S-PLUS 7.0 released in 2005\" (https://en.wikipedia.org/wiki/S-PLUS)\n00:22:04    Diana Garcia Cortes:    I guess we got an example of encapsulation last week when we used ::: to access some internal method (although I don‚Äôt recall why we did that)\n00:22:34    Olivier Leroy:  Inheritance is weird in s3, example an object that is tibble, data.frame, list. It dispatch to tibble class then data.frame\n00:22:38    Olivier Leroy:  Reacted to \"I guess we got an ex...\" with üëç\n00:24:51    Diana Garcia Cortes:    Reacted to \"Inheritance is weird...\" with üëç\n00:27:08    Olivier Leroy:  The sf packages use s3 a lot\n00:29:33    Olivier Leroy:  Example of R6 (I think) https://gargle.r-lib.org/ example: https://gargle.r-lib.org/reference/Gargle-class.html\n00:39:22    Olivier Leroy:  One stuff that bother me with s3 class definition is that I do not think they are clear organizational rules on were the class definition should be put in a package (I will maybe proved wrong soon)\n00:40:24    Diana Garcia Cortes:    Reacted to \"One stuff that bothe...\" with üòØ\n00:41:42    Olivier Leroy:  typeof(as.raw(0x0f)) also ...\n00:46:55    Olivier Leroy:  &gt;  ‚Äòas.numeric‚Äô is a generic function, but S3 methods must be written\n     for ‚Äòas.double‚Äô.  It is identical to ‚Äòas.double‚Äô.\n00:46:59    Olivier Leroy:  From the doc üòõ\n00:49:09    Olivier Leroy:  Isn‚Äôt it because is.nuneric on class factor is diffrent?\n00:50:34    Jeffrey Stevens:    Why does is.integer(typeof(factor(\"x\"))) show up as false?\n00:51:06    Olivier Leroy:  \"Integer‚Äù\n00:51:20    Diana Garcia Cortes:    typeof(...)\n00:51:36    Diana Garcia Cortes:    &gt; typeof(...)\nError: '...' used in an incorrect context\n&gt; typeof(`...`)\nError: '...' used in an incorrect context\n00:52:56    Olivier Leroy:  End"
  },
  {
    "objectID": "videos/12/06.html",
    "href": "videos/12/06.html",
    "title": "Cohort 6",
    "section": "",
    "text": "Meeting chat log\n\n00:35:02    Trevin: sloop (‚Äúsail the seas of OOP‚Äù)\n00:42:40    Ryan Metcalf:   Awesome input Trevin! I jumped to the vignette, but didn't see the reference directly.\n01:00:01    Trevin: If you're interested there may be a new ‚ÄúR Packages\" cohort starting up soon (also a new version of the book coming out soonish as well?)\n01:08:23    Oluwafemi Oyedele:  Thank you !!!"
  },
  {
    "objectID": "videos/14/07.html",
    "href": "videos/14/07.html",
    "title": "Cohort 7",
    "section": "",
    "text": "Meeting chat log\n\n00:06:57    Ron Legere: https://arxiv.org/abs/2303.12712\n00:07:07    Ron Legere: ^^ shows some of the power and limitations\n00:39:41    collinberke:    https://www.youtube.com/watch?v=3GEFd8rZQgY&list=WL&index=11\n00:49:20    iPhone: Sorry fellas need to jump early. See you next week!\n01:05:21    collinberke:    https://github.com/r4ds/bookclub-advr\n01:09:30    Ron Legere: makeActiveBinding"
  },
  {
    "objectID": "videos/15/09.html",
    "href": "videos/15/09.html",
    "title": "Cohort 9",
    "section": "",
    "text": "Meeting chat log\n\n00:06:42    Olivier Leroy:  https://github.com/ropensci/quadkeyr\n00:07:53    Olivier Leroy:  https://github.com/teamookla\n00:12:58    Olivier Leroy:  start\n00:14:09    Olivier Leroy:  https://github.com/edzer/sp\n00:15:16    Derek Sollberger:   I just used `lubridate` to compute the ages of Olympian athletes :-)\n00:15:27    Steffi LaZerte (she/her):   Reacted to \"I just used `lubrida...\" with üéâ\n00:20:09    Jo Hardin:  Reacted to \"I just used `lubrida...\" with üéâ\n00:22:18    Steffi LaZerte (she/her):   Or -Age :D\n00:23:04    Derek Sollberger:   &gt; class(Inf)\n[1] \"numeric\"\n&gt; typeof(Inf)\n[1] \"double\"\n&gt; sloop::otype(Inf)\n[1] \"base\"\n00:32:11    Derek Sollberger:   That's an incredibly useful search tool!\n00:34:57    Derek Sollberger:   Replying to \"That's an incredibly...\"\n\n(example for chat) search \"memes language:R\" in GitHub\n00:38:34    Steffi LaZerte (she/her):   Reacted to \"(example for chat) s...\" with üòÇ\n01:01:46    Olivier Leroy:  End"
  },
  {
    "objectID": "videos/16/09.html",
    "href": "videos/16/09.html",
    "title": "Cohort 9",
    "section": "",
    "text": "Meeting chat log\n\n00:09:36    Olivier Leroy:  Start\n00:17:56    Steffi LaZerte (she/her):   I always appreciate these discussions!\n00:18:05    Diana Garcia Cortes:    Reacted to \"I always appreciate ...\" with ‚ù§Ô∏è\n00:18:31    Steffi LaZerte (she/her):   Invariably I always think I know the answer and find out that it's not quite as simple as I originally thought, so super valuable.\n00:18:38    Jo Hardin:  Reacted to \"I always appreciate ...\" with ‚ù§Ô∏è\n00:19:51    Olivier Leroy:  Closure has plenty polymorphism https://clojure-doc.org/articles/language/polymorphism/\n00:22:57    Olivier Leroy:  Let‚Äôs bring back R retro computing\n00:23:03    Steffi LaZerte (she/her):   Reacted to \"Let‚Äôs bring back R r...\" with üòÇ\n00:29:56    Olivier Leroy:  https://linuxize.com/post/popd-and-pushd-commands-in-linux/\n00:32:22    Diana Garcia Cortes:    I like the wiki stack illustration: https://en.wikipedia.org/wiki/Stack_(abstract_data_type)\n00:33:33    Derek Sollberger (he/him):  Reacted to \"I like the wiki stac...\" with ü•û\n00:33:51    Steffi LaZerte (she/her):   I cheated: I skimmed and decided that I didn't need to really understand the nuances at this point. I'll come back when I do üòÖ\n00:34:02    Olivier Leroy:  Reacted to \"I like the wiki stac...\" with ü•û\n00:34:11    Olivier Leroy:  Reacted to \"I cheated: I skimmed...\" with üëç\n00:36:58    Olivier Leroy:  Great point\n00:38:22    Steffi LaZerte (she/her):   I love that analogy üòÅ\n00:39:28    Derek Sollberger (he/him):  Replying to \"I love that analogy ...\"\n\n(for our records)\nS3 --&gt; S7 ‚Ä¶ RMD --&gt; QMD\n00:40:44    Steffi LaZerte (she/her):   Reacted to \"(for our records)\nS3...\" with üôèüèª\n00:41:48    Olivier Leroy:  The @ sign is for print?\n00:47:01    Olivier Leroy:  Can u use str(cat)\n00:51:18    Olivier Leroy:  Reacted to \"(As if we were in a ...\" with üòÑ\n00:59:34    Jo Hardin:  the summary is super helpful!\n00:59:48    Olivier Leroy:  Reacted to \"the summary is super...\" with üëç\n00:59:50    Diana Garcia Cortes:    Reacted to \"the summary is super...\" with üëç\n01:00:08    Derek Sollberger (he/him):  Reacted to \"the summary is super...\" with üëç\n01:00:57    Olivier Leroy:  end"
  },
  {
    "objectID": "videos/16/06.html",
    "href": "videos/16/06.html",
    "title": "Cohort 6",
    "section": "",
    "text": "Meeting chat log\n\n00:11:36    Oluwafemi Oyedele:  I have not built anything with them!!!\n00:16:31    Arthur Shaw:    https://cran.r-project.org/web/packages/sp/index.html\n00:19:05    Arthur Shaw:    Apparently Hadley asked the same question we're asking several years ago: https://stackoverflow.com/questions/5437238/which-packages-make-good-use-of-s4-objects\n00:19:16    Trevin: HA\n00:23:54    Trevin: Your audio is breaking up Federica\n01:06:58    Federica Gazzelloni:    https://mastering-shiny.org/reactive-motivation.html?q=R6#event-driven\n01:07:37    Federica Gazzelloni:    https://engineering-shiny.org/common-app-caveats.html?q=R6#using-r6-as-data-storage\n01:10:52    Oluwafemi Oyedele:  Thank you !!!"
  },
  {
    "objectID": "videos/17/09.html",
    "href": "videos/17/09.html",
    "title": "Cohort 9",
    "section": "",
    "text": "Meeting chat log\n\n00:09:33    Steffi LaZerte (she/her):   start\n00:12:36    Olivier Leroy:  I have a very bad connection sorry for being late\n00:15:06    Olivier Leroy:  Here get(‚Äúmeans‚Äù) return a function that got passed c()\n00:19:45    Olivier Leroy:  No worries üòõ\n00:21:48    Olivier Leroy:  They are not evaluated\n00:25:25    Olivier Leroy:  Maybe data mask example would help here and !! Is used when you want to interact with tidyverse\n00:26:55    Olivier Leroy:  And this is an example of metaprogramming\n00:27:15    Olivier Leroy:  (Very good job Steffi)\n00:28:00    Jeffrey Stevens:    @Jo: \"One of the most intriguing things about R is its ability to do metaprogramming. This is the idea that code is data that can be inspected and modified programmatically.\"\n00:28:42    Jo Hardin:  Reacted to \"@Jo: \"One of the mos...\" with üëç\n00:29:05    Olivier Leroy:  (Also we are going to spend 4 more chapters on those concepts so it is fine if they do not get understand right away)\n00:31:33    Olivier Leroy:  The SQL example was very good\n00:49:05    Olivier Leroy:  No it is created in the call of the function?\n00:53:55    Olivier Leroy:  Thanks you Steffi!\n00:57:54    Olivier Leroy:  I was mostly disconnected, but we will do more of it latter\n00:59:34    Derek Sollberger (he/him):  Steffi: these additional `with2` examples would be great on the slides (for future cohorts)   :-)\n01:00:52    Olivier Leroy:  Reacted to \"Steffi: these additi...\" with üëç\n01:02:35    Steffi LaZerte (she/her):   end\n01:02:36    Olivier Leroy:  Yes please\n01:02:49    Olivier Leroy:  Yes Jo is next"
  },
  {
    "objectID": "videos/17/06.html",
    "href": "videos/17/06.html",
    "title": "Cohort 6",
    "section": "",
    "text": "Meeting chat log\n\n00:32:31    Oluwafemi Oyedele:  When should eval_tidy() be used instead of eval()?\nbase::eval() is sufficient for simple evaluation. Use eval_tidy() when you'd like to support expressions referring to the .data pronoun, or when you need to support quosures.\n00:37:08    Trevin (he/him):    https://rlang.r-lib.org/reference/topic-defuse.html\n00:38:38    Federica Gazzelloni:    https://rlang.r-lib.org/reference/eval_tidy.html\n00:39:57    Arthur Shaw:    Tidy eval book: https://bookdown.dongzhuoer.com/tidyverse/tidyeval/\n00:40:14    Arthur Shaw:    Also very useful resource: https://dplyr.tidyverse.org/articles/programming.html\n00:40:28    Trevin (he/him):    https://ggplot2.tidyverse.org/reference/aes.html\n00:40:37    Federica Gazzelloni:    https://ggplot2.tidyverse.org/reference/tidyeval.html\n00:41:22    Oluwafemi Oyedele:  It is Tidyverse design\n00:49:13    Federica Gazzelloni:    https://www.youtube.com/watch?v=2NixH3QAerQ&list=PL3x6DOfs2NGi9lH7q-phZlPrl6HKXYDbn&index=15\n00:50:13    Federica Gazzelloni:    Minute: 17:04\n00:54:03    Federica Gazzelloni:    con &lt;- DBI::dbConnect(RSQLite::SQLite(), filename = \":memory:\")\n00:54:18    Federica Gazzelloni:    DBI::dbDisconnect(con)"
  },
  {
    "objectID": "videos/18/09.html",
    "href": "videos/18/09.html",
    "title": "Cohort 9",
    "section": "",
    "text": "Meeting chat log\n\n00:10:06    Steffi LaZerte (she/her):   https://steffilazerte.ca/posts/ggplot-symbols/\n00:10:53    Olivier Leroy:  start\n00:26:46    Derek Sollberger:   In math, this would be \"function composition\"\n00:26:55    Steffi LaZerte (she/her):   Reacted to \"In math, this would ...\" with üëçüèª\n00:28:18    Derek Sollberger:   Aside: this \"infix\" style dates back to some Polish(?) mathematicians, and may have a resurgence for some artificial intelligence algorithms\n00:31:27    Olivier Leroy:  (+ 1 2 3)\n00:31:38    Olivier Leroy:  ()\n00:36:13    Derek Sollberger:   sym(\"x\") is useful if you want R to do your Calculus homework for you, haha\n00:36:21    Steffi LaZerte (she/her):   Reacted to \"sym(\"x\") is useful i...\" with üòÇ\n00:36:49    Olivier Leroy:  ‚ÄúBob‚Äù is contant bob &lt;- 1 is a symbol no ?\n00:37:06    Steffi LaZerte (she/her):   Reacted to \"‚ÄúBob‚Äù is contant bob...\" with üëçüèª\n00:38:38    Steffi LaZerte (she/her):   Actually possibly not?\nx &lt;- 1\nis.symbol(x) # FALSE\nis.symbol(expr(x)) # TRUE\n00:39:59    Olivier Leroy:  square( 2 + 3)\n00:40:35    Derek Sollberger:   Reacted to \"Actually possibly no...\" with üëç\n00:46:19    Steffi LaZerte (she/her):   Ah! Because it's just the x part that is the symbol, not the whole expression üòÅ \n00:57:34    Olivier Leroy:  `(`\n01:02:40    Jeffrey Stevens:    Got to go. See everyone next week. Thanks, Jo!\n01:02:43    Steffi LaZerte (she/her):   PEMDAS! For me it was BEDMAS! :D\n01:03:11    Derek Sollberger:   Reacted to \"PEMDAS! For me it wa...\" with üëç\n01:03:29    Nagarjun:   Replying to \"PEMDAS! For me it ...\"\n\nBODMAS for us in Asia\n01:03:39    Steffi LaZerte (she/her):   Reacted to \"BODMAS for us in Asi...\" with ‚ù§Ô∏è\n01:03:50    Steffi LaZerte (she/her):   Replying to \"PEMDAS! For me it wa...\"\n\n (probably why I use \"brackets\" rather than \"parentheses\")\n01:03:55    Olivier Leroy:  end"
  },
  {
    "objectID": "videos/19/09.html",
    "href": "videos/19/09.html",
    "title": "Cohort 9",
    "section": "",
    "text": "Meeting chat log\n\n00:06:42    Olivier Leroy:  start\n00:07:15    Olivier Leroy:  I already appreciate it!\n00:13:14    Olivier Leroy:  I just noticed the joke ‚Ä¶.\n00:16:59    Olivier Leroy:  Good example!\n00:17:23    Olivier Leroy:  Very fancy !\n00:19:42    Olivier Leroy:  deparse(substitute()) is a classic\n00:19:49    Steffi LaZerte (she/her):   Reacted to \"deparse(substitute()...\" with ‚ù§Ô∏è\n00:22:18    Jeffrey Stevens:    Don't forget !!, !!!, parse(), deparse(), eval()\nüòú\n00:22:29    Steffi LaZerte (she/her):   Reacted to \"Don't forget !!, !!!...\" with üòÇ\n00:23:51    Olivier Leroy:  Reacted to \"Don't forget !!, !!!...\" with üòÇ\n00:26:07    Jeffrey Stevens:    Thanks for the cheatsheet, Steffi. Here's the link for the chat: https://raw.githubusercontent.com/rstudio/cheatsheets/master/tidyeval.pdf\n00:26:12    Olivier Leroy:  Reacted to \"Thanks for the cheat...\" with üëç\n00:27:10    Olivier Leroy:  And function are good example here\n00:27:29    Olivier Leroy:  Function in ‚Äúmath\" sense\n00:40:14    Olivier Leroy:  Repetition help build mental model üôÇ\n00:41:59    Olivier Leroy:  `$`(mtcars, mpg)\n00:42:34    Olivier Leroy:  `[[`(mtcars, \"mpg\")\n00:43:51    Olivier Leroy:  Too smart for us\n00:53:44    Olivier Leroy:  {{ vars }}\n00:55:19    Olivier Leroy:  Python community called := walrus operator, I think it is older (also unsure if it is the same idea)\n00:55:30    Derek Sollberger:   Reacted to \"Python community cal...\" with üëç\n00:55:40    Arjun:  Reacted to \"Python community c...\" with üëç\n00:59:45    Derek Sollberger:   Thanks for this example!  One can then create a function for 'variable inflation factor' quickly :-)\n01:00:32    Jo Hardin:  thanks Steffi!!  gotta run.  this was awesome.\n01:00:38    Jeffrey Stevens:    GTG hope to see you all next week, but I'll be traveling, so not sure\n01:00:45    Olivier Leroy:  Reacted to \"GTG hope to see you ...\" with üëç\n01:02:24    Olivier Leroy:  End"
  },
  {
    "objectID": "videos/19/06.html",
    "href": "videos/19/06.html",
    "title": "Cohort 6",
    "section": "",
    "text": "Meeting chat log\n\n01:02:07    Trevin: Yeah, that was a great workshop\n01:02:18    Trevin: Glad they posted the resources online\n01:06:39    Trevin: Thank you!"
  },
  {
    "objectID": "videos/20/09.html",
    "href": "videos/20/09.html",
    "title": "Cohort 9",
    "section": "",
    "text": "Meeting chat log\n\n00:12:20    Olivier Leroy:  Start\n00:16:18    Olivier Leroy:  I have a love/hate relation with sort\n00:16:23    Olivier Leroy:  source\n00:17:36    Steffi LaZerte (she/her):   docs for rlang::parse_expr: \nThese functions parse and transform text into R expressions. This is the first step to interpret or evaluate a piece of R code written by a programmer.\n00:17:59    Olivier Leroy:  ‚Äòparse()‚Äô returns the parsed but unevaluated expressions in an\n     ‚Äòexpression‚Äô, a ‚Äúlist‚Äù of ‚Äòcall‚Äôs.\n00:19:40    Olivier Leroy:  I have a ‚Äúdaily_year‚Äù project for this kind of stuff\n00:20:42    Olivier Leroy:  You are doing great!\n00:32:30    Steffi LaZerte (she/her):   eval(rlang::get_expr(q), rlang::get_env(q)) same as \nrlang::eval_tidy(q)\n00:33:41    Olivier Leroy:  Reacted to \"eval(rlang::get_expr...\" with üëç\n00:34:00    Derek Sollberger:   Reacted to \"eval(rlang::get_expr...\" with üëç\n00:34:30    Olivier Leroy:  That was intersting, learning the ‚Äúmistakes‚Äù on the road\n00:35:24    Steffi LaZerte (she/her):   Definitely! Things like this always help me better understand\n00:35:31    Olivier Leroy:  Reacted to \"Definitely! Things l...\" with üëç\n00:42:33    Olivier Leroy:  Very clear explanation\n00:43:11    Steffi LaZerte (she/her):   Sometimes I use .env$x in workflows too, for maximum readibility and clarity :D\n00:43:19    Olivier Leroy:  Reacted to \"Sometimes I use .env...\" with üëç\n00:47:42    Olivier Leroy:  Just noticed you are using relative row number\n00:48:16    Jo Hardin:  i noticed the row numbering, too, but i don‚Äôt understand it!  what is relative row numbering?\n00:50:52    Olivier Leroy:  Reacted to \"i noticed the row nu...\" with üëç\n00:59:14    Jo Hardin:  {{ variable }}\n00:59:42    Derek Sollberger:   Replying to \"{{ variable }}\"\n\ngreat for data masks?\n00:59:53    Olivier Leroy:  Replying to \"{{ variable }}\"\n\n{{variable}}\n01:00:11    Derek Sollberger:   Replying to \"{{ variable }}\"\n\nhttps://dsollbergerquarto.netlify.app/posts/curly_operator/curly_operator\n01:00:36    Steffi LaZerte (she/her):   https://dplyr.tidyverse.org/articles/programming.html\n01:03:27    Steffi LaZerte (she/her):   var_summary &lt;- function(data, var) {\ndata %&gt;%\nsummarise(n = n(), min = min({{ var }}), max = max({{ var }}))\n}\nmtcars %&gt;% \ngroup_by(cyl) %&gt;% \nvar_summary(mpg)\n01:04:16    Jo Hardin:  library(tidyverse)\nmy_func &lt;- function(x){\n  mtcars |&gt; \n    select({{x}})\n}\n\nmy_func(wt)\n01:05:53    Steffi LaZerte (she/her):   Reacted to \"library(tidyverse)\nm...\" with üëçüèª\n01:09:46    Olivier Leroy:  end"
  },
  {
    "objectID": "videos/20/06.html",
    "href": "videos/20/06.html",
    "title": "Cohort 6",
    "section": "",
    "text": "Meeting chat log\n\n01:00:42    Trevin: They just want to help you present that‚Äôs all"
  },
  {
    "objectID": "videos/21/03.html",
    "href": "videos/21/03.html",
    "title": "Cohort 3",
    "section": "",
    "text": "(no video)"
  },
  {
    "objectID": "videos/24/07.html",
    "href": "videos/24/07.html",
    "title": "Cohort 7",
    "section": "",
    "text": "Meeting chat log\n\n00:23:48    Ron Legere: https://www.mathworks.com/help/matlab/matlab_prog/vectorization.html"
  },
  {
    "objectID": "videos/25/07.html",
    "href": "videos/25/07.html",
    "title": "Cohort 7",
    "section": "",
    "text": "Meeting chat log\n\n00:43:02    Gus Lipkin: I think I found the definition for `mean`\nAn R call goes to *a which then calls the C function *b\n*a: https://github.com/wch/r-source/blob/trunk/src/library/base/R/mean.R\n*b: https://github.com/wch/r-source/blob/trunk/src/library/stats/src/cov.c#L207\nIt looks like the second pass only happens if `R_FINITE(mean_from_first_pass)` which tries to call `isfinite` from C++ and if it‚Äôs not there, it‚Äôll make sure it is a number and is not positive or negative infinity.\n00:49:55    Gus Lipkin: I feel bad for dropping in on the last chapter and getting Collin‚Äôs thanks üòÖ I wish I‚Äôd joined sooner."
  },
  {
    "objectID": "02.html",
    "href": "02.html",
    "title": "2. Names and values",
    "section": "",
    "text": "No matching items",
    "crumbs": [
      "Foundations",
      "2. Names and values"
    ]
  },
  {
    "objectID": "02.html#meeting-videos",
    "href": "02.html#meeting-videos",
    "title": "2. Names and values",
    "section": "Meeting videos",
    "text": "Meeting videos\n\n\n\n\n\n\n\n\nCohort 10\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 9\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 8\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 7\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 6\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 5\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 4\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 3\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 2\n\n\n\n\n\n\n\n\n\n\n\n\n\nNo matching items",
    "crumbs": [
      "Foundations",
      "2. Names and values"
    ]
  },
  {
    "objectID": "04.html",
    "href": "04.html",
    "title": "4. Subsetting",
    "section": "",
    "text": "No matching items",
    "crumbs": [
      "Foundations",
      "4. Subsetting"
    ]
  },
  {
    "objectID": "04.html#meeting-videos",
    "href": "04.html#meeting-videos",
    "title": "4. Subsetting",
    "section": "Meeting videos",
    "text": "Meeting videos\n\n\n\n\n\n\n\n\nCohort 10\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 9\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 8\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 7\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 6\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 5\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 4\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 3\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 2\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 1\n\n\n\n\n\n\n\n\n\n\n\n\n\nNo matching items",
    "crumbs": [
      "Foundations",
      "4. Subsetting"
    ]
  },
  {
    "objectID": "06.html",
    "href": "06.html",
    "title": "6. Functions",
    "section": "",
    "text": "No matching items",
    "crumbs": [
      "Foundations",
      "6. Functions"
    ]
  },
  {
    "objectID": "06.html#meeting-videos",
    "href": "06.html#meeting-videos",
    "title": "6. Functions",
    "section": "Meeting videos",
    "text": "Meeting videos\n\n\n\n\n\n\n\n\nCohort 10\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 9\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 8\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 7\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 6\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 5\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 4\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 3\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 2\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 1\n\n\n\n\n\n\n\n\n\n\n\n\n\nNo matching items",
    "crumbs": [
      "Foundations",
      "6. Functions"
    ]
  },
  {
    "objectID": "08.html",
    "href": "08.html",
    "title": "8. Conditions",
    "section": "",
    "text": "No matching items",
    "crumbs": [
      "Foundations",
      "8. Conditions"
    ]
  },
  {
    "objectID": "08.html#meeting-videos",
    "href": "08.html#meeting-videos",
    "title": "8. Conditions",
    "section": "Meeting videos",
    "text": "Meeting videos\n\n\n\n\n\n\n\n\nCohort 10\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 9\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 8\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 7\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 6\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 5\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 4\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 3\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 2\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 1\n\n\n\n\n\n\n\n\n\n\n\n\n\nNo matching items",
    "crumbs": [
      "Foundations",
      "8. Conditions"
    ]
  },
  {
    "objectID": "10.html",
    "href": "10.html",
    "title": "10. Function factories",
    "section": "",
    "text": "No matching items",
    "crumbs": [
      "Functional programming",
      "10. Function factories"
    ]
  },
  {
    "objectID": "10.html#meeting-videos",
    "href": "10.html#meeting-videos",
    "title": "10. Function factories",
    "section": "Meeting videos",
    "text": "Meeting videos\n\n\n\n\n\n\n\n\nCohort 10\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 9\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 8\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 7\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 6\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 5\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 4\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 3\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 2\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 1\n\n\n\n\n\n\n\n\n\n\n\n\n\nNo matching items",
    "crumbs": [
      "Functional programming",
      "10. Function factories"
    ]
  },
  {
    "objectID": "12.html",
    "href": "12.html",
    "title": "12. OOP Introduction & Base types",
    "section": "",
    "text": "No matching items",
    "crumbs": [
      "Object-oriented programming",
      "12. OOP Introduction & Base types"
    ]
  },
  {
    "objectID": "12.html#meeting-videos",
    "href": "12.html#meeting-videos",
    "title": "12. OOP Introduction & Base types",
    "section": "Meeting videos",
    "text": "Meeting videos\n\n\n\n\n\n\n\n\nCohort 10\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 9\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 7\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 6\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 5\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 4\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 3\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 2\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 1\n\n\n\n\n\n\n\n\n\n\n\n\n\nNo matching items",
    "crumbs": [
      "Object-oriented programming",
      "12. OOP Introduction & Base types"
    ]
  },
  {
    "objectID": "14.html",
    "href": "14.html",
    "title": "14. R6",
    "section": "",
    "text": "No matching items",
    "crumbs": [
      "Object-oriented programming",
      "14. R6"
    ]
  },
  {
    "objectID": "14.html#meeting-videos",
    "href": "14.html#meeting-videos",
    "title": "14. R6",
    "section": "Meeting videos",
    "text": "Meeting videos\n\n\n\n\n\n\n\n\nCohort 9\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 7\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 6\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 5\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 4\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 3\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 2\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 1\n\n\n\n\n\n\n\n\n\n\n\n\n\nNo matching items",
    "crumbs": [
      "Object-oriented programming",
      "14. R6"
    ]
  },
  {
    "objectID": "15b.html",
    "href": "15b.html",
    "title": "15b. S7",
    "section": "",
    "text": "S7\n\n\n\n\n\n\n\n\n\n\n\n\n\nNo matching items",
    "crumbs": [
      "Object-oriented programming",
      "15b. S7"
    ]
  },
  {
    "objectID": "17.html",
    "href": "17.html",
    "title": "17. Metaprogramming intro and big picture",
    "section": "",
    "text": "No matching items",
    "crumbs": [
      "Metaprogramming",
      "17. Metaprogramming intro and big picture"
    ]
  },
  {
    "objectID": "17.html#meeting-videos",
    "href": "17.html#meeting-videos",
    "title": "17. Metaprogramming intro and big picture",
    "section": "Meeting videos",
    "text": "Meeting videos\n\n\n\n\n\n\n\n\nCohort 9\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 7\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 6\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 5\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 4\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 3\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 2\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 1\n\n\n\n\n\n\n\n\n\n\n\n\n\nNo matching items",
    "crumbs": [
      "Metaprogramming",
      "17. Metaprogramming intro and big picture"
    ]
  },
  {
    "objectID": "19.html",
    "href": "19.html",
    "title": "19. Quasiquotation",
    "section": "",
    "text": "No matching items",
    "crumbs": [
      "Metaprogramming",
      "19. Quasiquotation"
    ]
  },
  {
    "objectID": "19.html#meeting-videos",
    "href": "19.html#meeting-videos",
    "title": "19. Quasiquotation",
    "section": "Meeting videos",
    "text": "Meeting videos\n\n\n\n\n\n\n\n\nCohort 9\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 7\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 6\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 5\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 4\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 3\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 2\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 1\n\n\n\n\n\n\n\n\n\n\n\n\n\nNo matching items",
    "crumbs": [
      "Metaprogramming",
      "19. Quasiquotation"
    ]
  },
  {
    "objectID": "21.html",
    "href": "21.html",
    "title": "21. Translating R code",
    "section": "",
    "text": "No matching items",
    "crumbs": [
      "Metaprogramming",
      "21. Translating R code"
    ]
  },
  {
    "objectID": "21.html#meeting-videos",
    "href": "21.html#meeting-videos",
    "title": "21. Translating R code",
    "section": "Meeting videos",
    "text": "Meeting videos\n\n\n\n\n\n\n\n\nCohort 9\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 6\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 5\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 4\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 3\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 2\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 1\n\n\n\n\n\n\n\n\n\n\n\n\n\nNo matching items",
    "crumbs": [
      "Metaprogramming",
      "21. Translating R code"
    ]
  },
  {
    "objectID": "23.html",
    "href": "23.html",
    "title": "23. Measuring performance",
    "section": "",
    "text": "No matching items",
    "crumbs": [
      "Techniques",
      "23. Measuring performance"
    ]
  },
  {
    "objectID": "23.html#meeting-videos",
    "href": "23.html#meeting-videos",
    "title": "23. Measuring performance",
    "section": "Meeting videos",
    "text": "Meeting videos\n\n\n\n\n\n\n\n\nCohort 9\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 7\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 6\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 5\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 4\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 3\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 2\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 1\n\n\n\n\n\n\n\n\n\n\n\n\n\nNo matching items",
    "crumbs": [
      "Techniques",
      "23. Measuring performance"
    ]
  },
  {
    "objectID": "25.html",
    "href": "25.html",
    "title": "25. Rewriting R code in C++ (and Rust)",
    "section": "",
    "text": "No matching items",
    "crumbs": [
      "Techniques",
      "25. Rewriting R code in C++ (and Rust)"
    ]
  },
  {
    "objectID": "25.html#meeting-videos",
    "href": "25.html#meeting-videos",
    "title": "25. Rewriting R code in C++ (and Rust)",
    "section": "Meeting videos",
    "text": "Meeting videos\n\n\n\n\n\n\n\n\nCohort 9\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 7\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 6\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 5\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 4\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 3\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 2\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCohort 1\n\n\n\n\n\n\n\n\n\n\n\n\n\nNo matching items",
    "crumbs": [
      "Techniques",
      "25. Rewriting R code in C++ (and Rust)"
    ]
  }
]